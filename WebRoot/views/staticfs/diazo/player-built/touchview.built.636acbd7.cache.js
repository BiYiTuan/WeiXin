function onYouTubePlayerAPIReady(){mejs.YouTubeApi.iFrameReady()}function onYouTubePlayerReady(e){mejs.YouTubeApi.flashReady(e)}(function(e,t){function n(e){var t=dt[e]={};return Y.each(e.split(tt),function(e,n){t[n]=!0}),t}function r(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(mt,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:vt.test(r)?Y.parseJSON(r):r}catch(s){}Y.data(e,n,r)}else r=t}return r}function i(e){var t;for(t in e){if(t==="data"&&Y.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function s(){return!1}function o(){return!0}function u(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function a(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function f(e,t,n){t=t||0;if(Y.isFunction(t))return Y.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return Y.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=Y.grep(e,function(e){return e.nodeType===1});if(Bt.test(t))return Y.filter(t,r,!n);t=Y.filter(t,r)}return Y.grep(e,function(e,r){return Y.inArray(e,t)>=0===n})}function l(e){var t=It.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function c(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function h(e,t){if(t.nodeType!==1||!Y.hasData(e))return;var n,r,i,s=Y._data(e),o=Y._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)Y.event.add(t,n,u[n][r])}o.data&&(o.data=Y.extend({},o.data))}function p(e,t){var n;if(t.nodeType!==1)return;t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),n==="object"?(t.parentNode&&(t.outerHTML=e.outerHTML),Y.support.html5Clone&&e.innerHTML&&!Y.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):n==="input"&&Kt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):n==="option"?t.selected=e.defaultSelected:n==="input"||n==="textarea"?t.defaultValue=e.defaultValue:n==="script"&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(Y.expando)}function d(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function v(e){Kt.test(e.type)&&(e.defaultChecked=e.checked)}function m(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=yn.length;while(i--){t=yn[i]+n;if(t in e)return t}return r}function g(e,t){return e=t||e,Y.css(e,"display")==="none"||!Y.contains(e.ownerDocument,e)}function y(e,t){var n,r,i=[],s=0,o=e.length;for(;s<o;s++){n=e[s];if(!n.style)continue;i[s]=Y._data(n,"olddisplay"),t?(!i[s]&&n.style.display==="none"&&(n.style.display=""),n.style.display===""&&g(n)&&(i[s]=Y._data(n,"olddisplay",S(n.nodeName)))):(r=nn(n,"display"),!i[s]&&r!=="none"&&Y._data(n,"olddisplay",r))}for(s=0;s<o;s++){n=e[s];if(!n.style)continue;if(!t||n.style.display==="none"||n.style.display==="")n.style.display=t?i[s]||"":"none"}return e}function b(e,t,n){var r=cn.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function w(e,t,n,r){var i=n===(r?"border":"content")?4:t==="width"?1:0,s=0;for(;i<4;i+=2)n==="margin"&&(s+=Y.css(e,n+gn[i],!0)),r?(n==="content"&&(s-=parseFloat(nn(e,"padding"+gn[i]))||0),n!=="margin"&&(s-=parseFloat(nn(e,"border"+gn[i]+"Width"))||0)):(s+=parseFloat(nn(e,"padding"+gn[i]))||0,n!=="padding"&&(s+=parseFloat(nn(e,"border"+gn[i]+"Width"))||0));return s}function E(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=!0,s=Y.support.boxSizing&&Y.css(e,"boxSizing")==="border-box";if(r<=0||r==null){r=nn(e,t);if(r<0||r==null)r=e.style[t];if(hn.test(r))return r;i=s&&(Y.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+w(e,t,n||(s?"border":"content"),i)+"px"}function S(e){if(dn[e])return dn[e];var t=Y("<"+e+">").appendTo(R.body),n=t.css("display");t.remove();if(n==="none"||n===""){rn=R.body.appendChild(rn||Y.extend(R.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!sn||!rn.createElement)sn=(rn.contentWindow||rn.contentDocument).document,sn.write("<!doctype html><html><body>"),sn.close();t=sn.body.appendChild(sn.createElement(e)),n=nn(t,"display"),R.body.removeChild(rn)}return dn[e]=n,n}function x(e,t,n,r){var i;if(Y.isArray(t))Y.each(t,function(t,i){n||En.test(e)?r(e,i):x(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&Y.type(t)==="object")for(i in t)x(e+"["+i+"]",t[i],n,r);else r(e,t)}function T(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i,s,o=t.toLowerCase().split(tt),u=0,a=o.length;if(Y.isFunction(n))for(;u<a;u++)r=o[u],s=/^\+/.test(r),s&&(r=r.substr(1)||"*"),i=e[r]=e[r]||[],i[s?"unshift":"push"](n)}}function N(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u,a=e[s],f=0,l=a?a.length:0,c=e===jn;for(;f<l&&(c||!u);f++)u=a[f](n,r,i),typeof u=="string"&&(!c||o[u]?u=t:(n.dataTypes.unshift(u),u=N(e,n,r,i,u,o)));return(c||!u)&&!o["*"]&&(u=N(e,n,r,i,"*",o)),u}function C(e,n){var r,i,s=Y.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((s[r]?e:i||(i={}))[r]=n[r]);i&&Y.extend(!0,e,i)}function k(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(s in l)s in r&&(n[l[s]]=r[s]);while(f[0]==="*")f.shift(),i===t&&(i=e.mimeType||n.getResponseHeader("content-type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){f.unshift(s);break}if(f[0]in r)o=f[0];else{for(s in r){if(!f[0]||e.converters[s+" "+f[0]]){o=s;break}u||(u=s)}o=o||u}if(o)return o!==f[0]&&f.unshift(o),r[o]}function L(e,t){var n,r,i,s,o=e.dataTypes.slice(),u=o[0],a={},f=0;e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(o[1])for(n in e.converters)a[n.toLowerCase()]=e.converters[n];for(;i=o[++f];)if(i!=="*"){if(u!=="*"&&u!==i){n=a[u+" "+i]||a["* "+i];if(!n)for(r in a){s=r.split(" ");if(s[1]===i){n=a[u+" "+s[0]]||a["* "+s[0]];if(n){n===!0?n=a[r]:a[r]!==!0&&(i=s[0],o.splice(f--,0,i));break}}}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(l){return{state:"parsererror",error:n?l:"No conversion from "+u+" to "+i}}}u=i}return{state:"success",data:t}}function A(){try{return new e.XMLHttpRequest}catch(t){}}function O(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function M(){return setTimeout(function(){Jn=t},0),Jn=Y.now()}function _(e,t){Y.each(t,function(t,n){var r=(er[t]||[]).concat(er["*"]),i=0,s=r.length;for(;i<s;i++)if(r[i].call(e,t,n))return})}function D(e,t,n){var r,i=0,s=0,o=Zn.length,u=Y.Deferred().always(function(){delete a.elem}),a=function(){var t=Jn||M(),n=Math.max(0,f.startTime+f.duration-t),r=1-(n/f.duration||0),i=0,s=f.tweens.length;for(;i<s;i++)f.tweens[i].run(r);return u.notifyWith(e,[f,r,n]),r<1&&s?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:Y.extend({},t),opts:Y.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Jn||M(),duration:n.duration,tweens:[],createTween:function(t,n,r){var i=Y.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(i),i},stop:function(t){var n=0,r=t?f.tweens.length:0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;P(l,f.opts.specialEasing);for(;i<o;i++){r=Zn[i].call(f,e,l,f.opts);if(r)return r}return _(f,l),Y.isFunction(f.opts.start)&&f.opts.start.call(e,f),Y.fx.timer(Y.extend(a,{anim:f,queue:f.opts.queue,elem:e})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function P(e,t){var n,r,i,s,o;for(n in e){r=Y.camelCase(n),i=t[r],s=e[n],Y.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=Y.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function H(e,t,n){var r,i,s,o,u,a,f,l,c=this,h=e.style,p={},d=[],v=e.nodeType&&g(e);n.queue||(f=Y._queueHooks(e,"fx"),f.unqueued==null&&(f.unqueued=0,l=f.empty.fire,f.empty.fire=function(){f.unqueued||l()}),f.unqueued++,c.always(function(){c.always(function(){f.unqueued--,Y.queue(e,"fx").length||f.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],Y.css(e,"display")==="inline"&&Y.css(e,"float")==="none"&&(!Y.support.inlineBlockNeedsLayout||S(e.nodeName)==="inline"?h.display="inline-block":h.zoom=1)),n.overflow&&(h.overflow="hidden",Y.support.shrinkWrapBlocks||c.done(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(r in t){s=t[r];if(Qn.exec(s)){delete t[r];if(s===(v?"hide":"show"))continue;d.push(r)}}o=d.length;if(o){u=Y._data(e,"fxshow")||Y._data(e,"fxshow",{}),v?Y(e).show():c.done(function(){Y(e).hide()}),c.done(function(){var t;Y.removeData(e,"fxshow",!0);for(t in p)Y.style(e,t,p[t])});for(r=0;r<o;r++)i=d[r],a=c.createTween(i,v?u[i]:0),p[i]=u[i]||Y.style(e,i),i in u||(u[i]=a.start,v&&(a.end=a.start,a.start=i==="width"||i==="height"?1:0))}}function B(e,t,n,r,i){return new B.prototype.init(e,t,n,r,i)}function j(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=gn[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function F(e){return Y.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var I,q,R=e.document,U=e.location,z=e.navigator,W=e.jQuery,X=e.$,V=Array.prototype.push,$=Array.prototype.slice,J=Array.prototype.indexOf,K=Object.prototype.toString,Q=Object.prototype.hasOwnProperty,G=String.prototype.trim,Y=function(e,t){return new Y.fn.init(e,t,I)},Z=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,et=/\S/,tt=/\s+/,nt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rt=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,it=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,st=/^[\],:{}\s]*$/,ot=/(?:^|:|,)(?:\s*\[)+/g,ut=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,at=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,ft=/^-ms-/,lt=/-([\da-z])/gi,ct=function(e,t){return(t+"").toUpperCase()},ht=function(){R.addEventListener?(R.removeEventListener("DOMContentLoaded",ht,!1),Y.ready()):R.readyState==="complete"&&(R.detachEvent("onreadystatechange",ht),Y.ready())},pt={};Y.fn=Y.prototype={constructor:Y,init:function(e,n,r){var i,s,o,u;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?i=[null,e,null]:i=rt.exec(e);if(i&&(i[1]||!n)){if(i[1])return n=n instanceof Y?n[0]:n,u=n&&n.nodeType?n.ownerDocument||n:R,e=Y.parseHTML(i[1],u,!0),it.test(i[1])&&Y.isPlainObject(n)&&this.attr.call(e,n,!0),Y.merge(this,e);s=R.getElementById(i[2]);if(s&&s.parentNode){if(s.id!==i[2])return r.find(e);this.length=1,this[0]=s}return this.context=R,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return Y.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),Y.makeArray(e,this))},selector:"",jquery:"1.8.1",length:0,size:function(){return this.length},toArray:function(){return $.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=Y.merge(this.constructor(),e);return r.prevObject=this,r.context=this.context,t==="find"?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return Y.each(this,e,t)},ready:function(e){return Y.ready.promise().done(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack($.apply(this,arguments),"slice",$.call(arguments).join(","))},map:function(e){return this.pushStack(Y.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:V,sort:[].sort,splice:[].splice},Y.fn.init.prototype=Y.fn,Y.extend=Y.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!Y.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((e=arguments[a])!=null)for(n in e){r=u[n],i=e[n];if(u===i)continue;l&&i&&(Y.isPlainObject(i)||(s=Y.isArray(i)))?(s?(s=!1,o=r&&Y.isArray(r)?r:[]):o=r&&Y.isPlainObject(r)?r:{},u[n]=Y.extend(l,o,i)):i!==t&&(u[n]=i)}return u},Y.extend({noConflict:function(t){return e.$===Y&&(e.$=X),t&&e.jQuery===Y&&(e.jQuery=W),Y},isReady:!1,readyWait:1,holdReady:function(e){e?Y.readyWait++:Y.ready(!0)},ready:function(e){if(e===!0?--Y.readyWait:Y.isReady)return;if(!R.body)return setTimeout(Y.ready,1);Y.isReady=!0;if(e!==!0&&--Y.readyWait>0)return;q.resolveWith(R,[Y]),Y.fn.trigger&&Y(R).trigger("ready").off("ready")},isFunction:function(e){return Y.type(e)==="function"},isArray:Array.isArray||function(e){return Y.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):pt[K.call(e)]||"object"},isPlainObject:function(e){if(!e||Y.type(e)!=="object"||e.nodeType||Y.isWindow(e))return!1;try{if(e.constructor&&!Q.call(e,"constructor")&&!Q.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||Q.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){var r;return!e||typeof e!="string"?null:(typeof t=="boolean"&&(n=t,t=0),t=t||R,(r=it.exec(e))?[t.createElement(r[1])]:(r=Y.buildFragment([e],t,n?null:[]),Y.merge([],(r.cacheable?Y.clone(r.fragment):r.fragment).childNodes)))},parseJSON:function(t){if(!t||typeof t!="string")return null;t=Y.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(st.test(t.replace(ut,"@").replace(at,"]").replace(ot,"")))return(new Function("return "+t))();Y.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&Y.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&et.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(ft,"ms-").replace(lt,ct)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,n,r){var i,s=0,o=e.length,u=o===t||Y.isFunction(e);if(r){if(u){for(i in e)if(n.apply(e[i],r)===!1)break}else for(;s<o;)if(n.apply(e[s++],r)===!1)break}else if(u){for(i in e)if(n.call(e[i],i,e[i])===!1)break}else for(;s<o;)if(n.call(e[s],s,e[s++])===!1)break;return e},trim:G&&!G.call("﻿ ")?function(e){return e==null?"":G.call(e)}:function(e){return e==null?"":e.toString().replace(nt,"")},makeArray:function(e,t){var n,r=t||[];return e!=null&&(n=Y.type(e),e.length==null||n==="string"||n==="function"||n==="regexp"||Y.isWindow(e)?V.call(r,e):Y.merge(r,e)),r},inArray:function(e,t,n){var r;if(t){if(J)return J.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,n,r){var i,s,o=[],u=0,a=e.length,f=e instanceof Y||a!==t&&typeof a=="number"&&(a>0&&e[0]&&e[a-1]||a===0||Y.isArray(e));if(f)for(;u<a;u++)i=n(e[u],u,r),i!=null&&(o[o.length]=i);else for(s in e)i=n(e[s],s,r),i!=null&&(o[o.length]=i);return o.concat.apply([],o)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(r=e[n],n=e,e=r),Y.isFunction(e)?(i=$.call(arguments,2),s=function(){return e.apply(n,i.concat($.call(arguments)))},s.guid=e.guid=e.guid||s.guid||Y.guid++,s):t},access:function(e,n,r,i,s,o,u){var a,f=r==null,l=0,c=e.length;if(r&&typeof r=="object"){for(l in r)Y.access(e,n,l,r[l],1,o,i);s=1}else if(i!==t){a=u===t&&Y.isFunction(i),f&&(a?(a=n,n=function(e,t,n){return a.call(Y(e),n)}):(n.call(e,i),n=null));if(n)for(;l<c;l++)n(e[l],r,a?i.call(e[l],l,n(e[l],r)):i,u);s=1}return s?e:f?n.call(e):c?n(e[0],r):o},now:function(){return(new Date).getTime()}}),Y.ready.promise=function(t){if(!q){q=Y.Deferred();if(R.readyState==="complete")setTimeout(Y.ready,1);else if(R.addEventListener)R.addEventListener("DOMContentLoaded",ht,!1),e.addEventListener("load",Y.ready,!1);else{R.attachEvent("onreadystatechange",ht),e.attachEvent("onload",Y.ready);var n=!1;try{n=e.frameElement==null&&R.documentElement}catch(r){}n&&n.doScroll&&function i(){if(!Y.isReady){try{n.doScroll("left")}catch(e){return setTimeout(i,50)}Y.ready()}}()}}return q.promise(t)},Y.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){pt["[object "+t+"]"]=t.toLowerCase()}),I=Y(R);var dt={};Y.Callbacks=function(e){e=typeof e=="string"?dt[e]||n(e):Y.extend({},e);var r,i,s,o,u,a,f=[],l=!e.once&&[],c=function(t){r=e.memory&&t,i=!0,a=o||0,o=0,u=f.length,s=!0;for(;f&&a<u;a++)if(f[a].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}s=!1,f&&(l?l.length&&c(l.shift()):r?f=[]:h.disable())},h={add:function(){if(f){var t=f.length;(function n(t){Y.each(t,function(t,r){var i=Y.type(r);i==="function"&&(!e.unique||!h.has(r))?f.push(r):r&&r.length&&i!=="string"&&n(r)})})(arguments),s?u=f.length:r&&(o=t,c(r))}return this},remove:function(){return f&&Y.each(arguments,function(e,t){var n;while((n=Y.inArray(t,f,n))>-1)f.splice(n,1),s&&(n<=u&&u--,n<=a&&a--)}),this},has:function(e){return Y.inArray(e,f)>-1},empty:function(){return f=[],this},disable:function(){return f=l=r=t,this},disabled:function(){return!f},lock:function(){return l=t,r||h.disable(),this},locked:function(){return!l},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],f&&(!i||l)&&(s?l.push(t):c(t)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!i}};return h},Y.extend({Deferred:function(e){var t=[["resolve","done",Y.Callbacks("once memory"),"resolved"],["reject","fail",Y.Callbacks("once memory"),"rejected"],["notify","progress",Y.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return Y.Deferred(function(n){Y.each(t,function(t,r){var s=r[0],o=e[t];i[r[1]](Y.isFunction(o)?function(){var e=o.apply(this,arguments);e&&Y.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n:this,[e])}:n[s])}),e=null}).promise()},promise:function(e){return typeof e=="object"?Y.extend(e,r):r}},i={};return r.pipe=r.then,Y.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=o.fire,i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=$.call(arguments),r=n.length,i=r!==1||e&&Y.isFunction(e.promise)?r:0,s=i===1?e:Y.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?$.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&Y.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),Y.support=function(){var t,n,r,i,s,o,u,a,f,l,c,h=R.createElement("div");h.setAttribute("className","t"),h.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=h.getElementsByTagName("*"),r=h.getElementsByTagName("a")[0],r.style.cssText="top:1px;float:left;opacity:.5";if(!n||!n.length||!r)return{};i=R.createElement("select"),s=i.appendChild(R.createElement("option")),o=h.getElementsByTagName("input")[0],t={leadingWhitespace:h.firstChild.nodeType===3,tbody:!h.getElementsByTagName("tbody").length,htmlSerialize:!!h.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:o.value==="on",optSelected:s.selected,getSetAttribute:h.className!=="t",enctype:!!R.createElement("form").enctype,html5Clone:R.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:R.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,i.disabled=!0,t.optDisabled=!s.disabled;try{delete h.test}catch(p){t.deleteExpando=!1}!h.addEventListener&&h.attachEvent&&h.fireEvent&&(h.attachEvent("onclick",c=function(){t.noCloneEvent=!1}),h.cloneNode(!0).fireEvent("onclick"),h.detachEvent("onclick",c)),o=R.createElement("input"),o.value="t",o.setAttribute("type","radio"),t.radioValue=o.value==="t",o.setAttribute("checked","checked"),o.setAttribute("name","t"),h.appendChild(o),u=R.createDocumentFragment(),u.appendChild(h.lastChild),t.checkClone=u.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=o.checked,u.removeChild(o),u.appendChild(h);if(h.attachEvent)for(f in{submit:!0,change:!0,focusin:!0})a="on"+f,l=a in h,l||(h.setAttribute(a,"return;"),l=typeof h[a]=="function"),t[f+"Bubbles"]=l;return Y(function(){var n,r,i,s,o="padding:0;margin:0;border:0;display:block;overflow:hidden;",u=R.getElementsByTagName("body")[0];if(!u)return;n=R.createElement("div"),n.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",u.insertBefore(n,u.firstChild),r=R.createElement("div"),n.appendChild(r),r.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=r.getElementsByTagName("td"),i[0].style.cssText="padding:0;margin:0;border:0;display:none",l=i[0].offsetHeight===0,i[0].style.display="",i[1].style.display="none",t.reliableHiddenOffsets=l&&i[0].offsetHeight===0,r.innerHTML="",r.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=r.offsetWidth===4,t.doesNotIncludeMarginInBodyOffset=u.offsetTop!==1,e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(r,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(r,null)||{width:"4px"}).width==="4px",s=R.createElement("div"),s.style.cssText=r.style.cssText=o,s.style.marginRight=s.style.width="0",r.style.width="1px",r.appendChild(s),t.reliableMarginRight=!parseFloat((e.getComputedStyle(s,null)||{}).marginRight)),typeof r.style.zoom!="undefined"&&(r.innerHTML="",r.style.cssText=o+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=r.offsetWidth===3,r.style.display="block",r.style.overflow="visible",r.innerHTML="<div></div>",r.firstChild.style.width="5px",t.shrinkWrapBlocks=r.offsetWidth!==3,n.style.zoom=1),u.removeChild(n),n=r=i=s=null}),u.removeChild(h),n=r=i=s=o=u=h=null,t}();var vt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,mt=/([A-Z])/g;Y.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(Y.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?Y.cache[e[Y.expando]]:e[Y.expando],!!e&&!i(e)},data:function(e,n,r,i){if(!Y.acceptData(e))return;var s,o,u=Y.expando,a=typeof n=="string",f=e.nodeType,l=f?Y.cache:e,c=f?e[u]:e[u]&&u;if((!c||!l[c]||!i&&!l[c].data)&&a&&r===t)return;c||(f?e[u]=c=Y.deletedIds.pop()||++Y.uuid:c=u),l[c]||(l[c]={},f||(l[c].toJSON=Y.noop));if(typeof n=="object"||typeof n=="function")i?l[c]=Y.extend(l[c],n):l[c].data=Y.extend(l[c].data,n);return s=l[c],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[Y.camelCase(n)]=r),a?(o=s[n],o==null&&(o=s[Y.camelCase(n)])):o=s,o},removeData:function(e,t,n){if(!Y.acceptData(e))return;var r,s,o,u=e.nodeType,a=u?Y.cache:e,f=u?e[Y.expando]:Y.expando;if(!a[f])return;if(t){r=n?a[f]:a[f].data;if(r){Y.isArray(t)||(t in r?t=[t]:(t=Y.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(s=0,o=t.length;s<o;s++)delete r[t[s]];if(!(n?i:Y.isEmptyObject)(r))return}}if(!n){delete a[f].data;if(!i(a[f]))return}u?Y.cleanData([e],!0):Y.support.deleteExpando||a!=a.window?delete a[f]:a[f]=null},_data:function(e,t,n){return Y.data(e,t,n,!0)},acceptData:function(e){var t=e.nodeName&&Y.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),Y.fn.extend({data:function(e,n){var i,s,o,u,a,f=this[0],l=0,c=null;if(e===t){if(this.length){c=Y.data(f);if(f.nodeType===1&&!Y._data(f,"parsedAttrs")){o=f.attributes;for(a=o.length;l<a;l++)u=o[l].name,u.indexOf("data-")===0&&(u=Y.camelCase(u.substring(5)),r(f,u,c[u]));Y._data(f,"parsedAttrs",!0)}}return c}return typeof e=="object"?this.each(function(){Y.data(this,e)}):(i=e.split(".",2),i[1]=i[1]?"."+i[1]:"",s=i[1]+"!",Y.access(this,function(n){if(n===t)return c=this.triggerHandler("getData"+s,[i[0]]),c===t&&f&&(c=Y.data(f,e),c=r(f,e,c)),c===t&&i[1]?this.data(i[0]):c;i[1]=n,this.each(function(){var t=Y(this);t.triggerHandler("setData"+s,i),Y.data(this,e,n),t.triggerHandler("changeData"+s,i)})},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){Y.removeData(this,e)})}}),Y.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Y._data(e,t),n&&(!r||Y.isArray(n)?r=Y._data(e,t,Y.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=Y.queue(e,t),r=n.length,i=n.shift(),s=Y._queueHooks(e,t),o=function(){Y.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y._data(e,n)||Y._data(e,n,{empty:Y.Callbacks("once memory").add(function(){Y.removeData(e,t+"queue",!0),Y.removeData(e,n,!0)})})}}),Y.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?Y.queue(this[0],e):n===t?this:this.each(function(){var t=Y.queue(this,e,n);Y._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&Y.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Y.dequeue(this,e)})},delay:function(e,t){return e=Y.fx?Y.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=Y.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=Y._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var gt,yt,bt,wt=/[\t\r\n]/g,Et=/\r/g,St=/^(?:button|input)$/i,xt=/^(?:button|input|object|select|textarea)$/i,Tt=/^a(?:rea|)$/i,Nt=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Ct=Y.support.getSetAttribute;Y.fn.extend({attr:function(e,t){return Y.access(this,Y.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Y.removeAttr(this,e)})},prop:function(e,t){return Y.access(this,Y.prop,e,t,arguments.length>1)},removeProp:function(e){return e=Y.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o,u;if(Y.isFunction(e))return this.each(function(t){Y(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(tt);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{s=" "+i.className+" ";for(o=0,u=t.length;o<u;o++)~s.indexOf(" "+t[o]+" ")||(s+=t[o]+" ");i.className=Y.trim(s)}}}return this},removeClass:function(e){var n,r,i,s,o,u,a;if(Y.isFunction(e))return this.each(function(t){Y(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(tt);for(u=0,a=this.length;u<a;u++){i=this[u];if(i.nodeType===1&&i.className){r=(" "+i.className+" ").replace(wt," ");for(s=0,o=n.length;s<o;s++)while(r.indexOf(" "+n[s]+" ")>-1)r=r.replace(" "+n[s]+" "," ");i.className=e?Y.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return Y.isFunction(e)?this.each(function(n){Y(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,s=0,o=Y(this),u=t,a=e.split(tt);while(i=a[s++])u=r?u:!o.hasClass(i),o[u?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&Y._data(this,"__className__",this.className),this.className=this.className||e===!1?"":Y._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(wt," ").indexOf(t)>-1)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return n=Y.valHooks[s.type]||Y.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(s,"value"))!==t?r:(r=s.value,typeof r=="string"?r.replace(Et,""):r==null?"":r);return}return i=Y.isFunction(e),this.each(function(r){var s,o=Y(this);if(this.nodeType!==1)return;i?s=e.call(this,r,o.val()):s=e,s==null?s="":typeof s=="number"?s+="":Y.isArray(s)&&(s=Y.map(s,function(e){return e==null?"":e+""})),n=Y.valHooks[this.type]||Y.valHooks[this.nodeName.toLowerCase()];if(!n||!("set"in n)||n.set(this,s,"value")===t)this.value=s})}}),Y.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r,i,s=e.selectedIndex,o=[],u=e.options,a=e.type==="select-one";if(s<0)return null;n=a?s:0,r=a?s+1:u.length;for(;n<r;n++){i=u[n];if(i.selected&&(Y.support.optDisabled?!i.disabled:i.getAttribute("disabled")===null)&&(!i.parentNode.disabled||!Y.nodeName(i.parentNode,"optgroup"))){t=Y(i).val();if(a)return t;o.push(t)}}return a&&!o.length&&u.length?Y(u[s]).val():o},set:function(e,t){var n=Y.makeArray(t);return Y(e).find("option").each(function(){this.selected=Y.inArray(Y(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{},attr:function(e,n,r,i){var s,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;if(i&&Y.isFunction(Y.fn[n]))return Y(e)[n](r);if(typeof e.getAttribute=="undefined")return Y.prop(e,n,r);u=a!==1||!Y.isXMLDoc(e),u&&(n=n.toLowerCase(),o=Y.attrHooks[n]||(Nt.test(n)?yt:gt));if(r!==t){if(r===null){Y.removeAttr(e,n);return}return o&&"set"in o&&u&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,""+r),r)}return o&&"get"in o&&u&&(s=o.get(e,n))!==null?s:(s=e.getAttribute(n),s===null?t:s)},removeAttr:function(e,t){var n,r,i,s,o=0;if(t&&e.nodeType===1){r=t.split(tt);for(;o<r.length;o++)i=r[o],i&&(n=Y.propFix[i]||i,s=Nt.test(i),s||Y.attr(e,i,""),e.removeAttribute(Ct?i:n),s&&n in e&&(e[n]=!1))}},attrHooks:{type:{set:function(e,t){if(St.test(e.nodeName)&&e.parentNode)Y.error("type property can't be changed");else if(!Y.support.radioValue&&t==="radio"&&Y.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return gt&&Y.nodeName(e,"button")?gt.get(e,t):t in e?e.value:null},set:function(e,t,n){if(gt&&Y.nodeName(e,"button"))return gt.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!Y.isXMLDoc(e),o&&(n=Y.propFix[n]||n,s=Y.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):xt.test(e.nodeName)||Tt.test(e.nodeName)&&e.href?0:t}}}}),yt={get:function(e,n){var r,i=Y.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?Y.removeAttr(e,n):(r=Y.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},Ct||(bt={name:!0,id:!0,coords:!0},gt=Y.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(bt[n]?r.value!=="":r.specified)?r.value:t},set:function(e,t,n){var r=e.getAttributeNode(n);return r||(r=R.createAttribute(n),e.setAttributeNode(r)),r.value=t+""}},Y.each(["width","height"],function(e,t){Y.attrHooks[t]=Y.extend(Y.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),Y.attrHooks.contenteditable={get:gt.get,set:function(e,t,n){t===""&&(t="false"),gt.set(e,t,n)}}),Y.support.hrefNormalized||Y.each(["href","src","width","height"],function(e,n){Y.attrHooks[n]=Y.extend(Y.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),Y.support.style||(Y.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}),Y.support.optSelected||(Y.propHooks.selected=Y.extend(Y.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),Y.support.enctype||(Y.propFix.enctype="encoding"),Y.support.checkOn||Y.each(["radio","checkbox"],function(){Y.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),Y.each(["radio","checkbox"],function(){Y.valHooks[this]=Y.extend(Y.valHooks[this],{set:function(e,t){if(Y.isArray(t))return e.checked=Y.inArray(Y(e).val(),t)>=0}})});var kt=/^(?:textarea|input|select)$/i,Lt=/^([^\.]*|)(?:\.(.+)|)$/,At=/(?:^|\s)hover(\.\S+|)\b/,Ot=/^key/,Mt=/^(?:mouse|contextmenu)|click/,_t=/^(?:focusinfocus|focusoutblur)$/,Dt=function(e){return Y.event.special.hover?e:e.replace(At,"mouseenter$1 mouseleave$1")};Y.event={add:function(e,n,r,i,s){var o,u,a,f,l,c,h,p,d,v,m;if(e.nodeType===3||e.nodeType===8||!n||!r||!(o=Y._data(e)))return;r.handler&&(d=r,r=d.handler,s=d.selector),r.guid||(r.guid=Y.guid++),a=o.events,a||(o.events=a={}),u=o.handle,u||(o.handle=u=function(e){return typeof Y=="undefined"||!!e&&Y.event.triggered===e.type?t:Y.event.dispatch.apply(u.elem,arguments)},u.elem=e),n=Y.trim(Dt(n)).split(" ");for(f=0;f<n.length;f++){l=Lt.exec(n[f])||[],c=l[1],h=(l[2]||"").split(".").sort(),m=Y.event.special[c]||{},c=(s?m.delegateType:m.bindType)||c,m=Y.event.special[c]||{},p=Y.extend({type:c,origType:l[1],data:i,handler:r,guid:r.guid,selector:s,namespace:h.join(".")},d),v=a[c];if(!v){v=a[c]=[],v.delegateCount=0;if(!m.setup||m.setup.call(e,i,h,u)===!1)e.addEventListener?e.addEventListener(c,u,!1):e.attachEvent&&e.attachEvent("on"+c,u)}m.add&&(m.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),s?v.splice(v.delegateCount++,0,p):v.push(p),Y.event.global[c]=!0}e=null},global:{},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=Y.hasData(e)&&Y._data(e);if(!m||!(h=m.events))return;t=Y.trim(Dt(t||"")).split(" ");for(s=0;s<t.length;s++){o=Lt.exec(t[s])||[],u=a=o[1],f=o[2];if(!u){for(u in h)Y.event.remove(e,u+t[s],n,r,!0);continue}p=Y.event.special[u]||{},u=(r?p.delegateType:p.bindType)||u,d=h[u]||[],l=d.length,f=f?new RegExp("(^|\\.)"+f.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(c=0;c<d.length;c++)v=d[c],(i||a===v.origType)&&(!n||n.guid===v.guid)&&(!f||f.test(v.namespace))&&(!r||r===v.selector||r==="**"&&v.selector)&&(d.splice(c--,1),v.selector&&d.delegateCount--,p.remove&&p.remove.call(e,v));d.length===0&&l!==d.length&&((!p.teardown||p.teardown.call(e,f,m.handle)===!1)&&Y.removeEvent(e,u,m.handle),delete h[u])}Y.isEmptyObject(h)&&(delete m.handle,Y.removeData(e,"events",!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,i,s){if(!i||i.nodeType!==3&&i.nodeType!==8){var o,u,a,f,l,c,h,p,d,v,m=n.type||n,g=[];if(_t.test(m+Y.event.triggered))return;m.indexOf("!")>=0&&(m=m.slice(0,-1),u=!0),m.indexOf(".")>=0&&(g=m.split("."),m=g.shift(),g.sort());if((!i||Y.event.customEvent[m])&&!Y.event.global[m])return;n=typeof n=="object"?n[Y.expando]?n:new Y.Event(m,n):new Y.Event(m),n.type=m,n.isTrigger=!0,n.exclusive=u,n.namespace=g.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c=m.indexOf(":")<0?"on"+m:"";if(!i){o=Y.cache;for(a in o)o[a].events&&o[a].events[m]&&Y.event.trigger(n,r,o[a].handle.elem,!0);return}n.result=t,n.target||(n.target=i),r=r!=null?Y.makeArray(r):[],r.unshift(n),h=Y.event.special[m]||{};if(h.trigger&&h.trigger.apply(i,r)===!1)return;d=[[i,h.bindType||m]];if(!s&&!h.noBubble&&!Y.isWindow(i)){v=h.delegateType||m,f=_t.test(v+m)?i:i.parentNode;for(l=i;f;f=f.parentNode)d.push([f,v]),l=f;l===(i.ownerDocument||R)&&d.push([l.defaultView||l.parentWindow||e,v])}for(a=0;a<d.length&&!n.isPropagationStopped();a++)f=d[a][0],n.type=d[a][1],p=(Y._data(f,"events")||{})[n.type]&&Y._data(f,"handle"),p&&p.apply(f,r),p=c&&f[c],p&&Y.acceptData(f)&&p.apply(f,r)===!1&&n.preventDefault();return n.type=m,!s&&!n.isDefaultPrevented()&&(!h._default||h._default.apply(i.ownerDocument,r)===!1)&&(m!=="click"||!Y.nodeName(i,"a"))&&Y.acceptData(i)&&c&&i[m]&&(m!=="focus"&&m!=="blur"||n.target.offsetWidth!==0)&&!Y.isWindow(i)&&(l=i[c],l&&(i[c]=null),Y.event.triggered=m,i[m](),Y.event.triggered=t,l&&(i[c]=l)),n.result}return},dispatch:function(n){n=Y.event.fix(n||e.event);var r,i,s,o,u,a,f,l,c,h,p=(Y._data(this,"events")||{})[n.type]||[],d=p.delegateCount,v=[].slice.call(arguments),m=!n.exclusive&&!n.namespace,g=Y.event.special[n.type]||{},y=[];v[0]=n,n.delegateTarget=this;if(g.preDispatch&&g.preDispatch.call(this,n)===!1)return;if(d&&(!n.button||n.type!=="click"))for(s=n.target;s!=this;s=s.parentNode||this)if(s.disabled!==!0||n.type!=="click"){u={},f=[];for(r=0;r<d;r++)l=p[r],c=l.selector,u[c]===t&&(u[c]=Y(c,this).index(s)>=0),u[c]&&f.push(l);f.length&&y.push({elem:s,matches:f})}p.length>d&&y.push({elem:this,matches:p.slice(d)});for(r=0;r<y.length&&!n.isPropagationStopped();r++){a=y[r],n.currentTarget=a.elem;for(i=0;i<a.matches.length&&!n.isImmediatePropagationStopped();i++){l=a.matches[i];if(m||!n.namespace&&!l.namespace||n.namespace_re&&n.namespace_re.test(l.namespace))n.data=l.data,n.handleObj=l,o=((Y.event.special[l.origType]||{}).handle||l.handler).apply(a.elem,v),o!==t&&(n.result=o,o===!1&&(n.preventDefault(),n.stopPropagation()))}}return g.postDispatch&&g.postDispatch.call(this,n),n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,s,o=n.button,u=n.fromElement;return e.pageX==null&&n.clientX!=null&&(r=e.target.ownerDocument||R,i=r.documentElement,s=r.body,e.pageX=n.clientX+(i&&i.scrollLeft||s&&s.scrollLeft||0)-(i&&i.clientLeft||s&&s.clientLeft||0),e.pageY=n.clientY+(i&&i.scrollTop||s&&s.scrollTop||0)-(i&&i.clientTop||s&&s.clientTop||0)),!e.relatedTarget&&u&&(e.relatedTarget=u===e.target?n.toElement:u),!e.which&&o!==t&&(e.which=o&1?1:o&2?3:o&4?2:0),e}},fix:function(e){if(e[Y.expando])return e;var t,n,r=e,i=Y.event.fixHooks[e.type]||{},s=i.props?this.props.concat(i.props):this.props;e=Y.Event(r);for(t=s.length;t;)n=s[--t],e[n]=r[n];return e.target||(e.target=r.srcElement||R),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,i.filter?i.filter(e,r):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){Y.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=Y.extend(new Y.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?Y.event.trigger(i,null,t):Y.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},Y.event.handle=Y.event.dispatch,Y.removeEvent=R.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]=="undefined"&&(e[r]=null),e.detachEvent(r,n))},Y.Event=function(e,t){if(!(this instanceof Y.Event))return new Y.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?o:s):this.type=e,t&&Y.extend(this,t),this.timeStamp=e&&e.timeStamp||Y.now(),this[Y.expando]=!0},Y.Event.prototype={preventDefault:function(){this.isDefaultPrevented=o;var e=this.originalEvent;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=o;var e=this.originalEvent;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=o,this.stopPropagation()},isDefaultPrevented:s,isPropagationStopped:s,isImmediatePropagationStopped:s},Y.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){Y.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj,o=s.selector;if(!i||i!==r&&!Y.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),Y.support.submitBubbles||(Y.event.special.submit={setup:function(){if(Y.nodeName(this,"form"))return!1;Y.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=Y.nodeName(n,"input")||Y.nodeName(n,"button")?n.form:t;r&&!Y._data(r,"_submit_attached")&&(Y.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),Y._data(r,"_submit_attached",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&Y.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(Y.nodeName(this,"form"))return!1;Y.event.remove(this,"._submit")}}),Y.support.changeBubbles||(Y.event.special.change={setup:function(){if(kt.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")Y.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),Y.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),Y.event.simulate("change",this,e,!0)});return!1}Y.event.add(this,"beforeactivate._change",function(e){var t=e.target;kt.test(t.nodeName)&&!Y._data(t,"_change_attached")&&(Y.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&Y.event.simulate("change",this.parentNode,e,!0)}),Y._data(t,"_change_attached",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return Y.event.remove(this,"._change"),!kt.test(this.nodeName)}}),Y.support.focusinBubbles||Y.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){Y.event.simulate(t,e.target,Y.event.fix(e),!0)};Y.event.special[t]={setup:function(){n++===0&&R.addEventListener(e,r,!0)},teardown:function(){--n===0&&R.removeEventListener(e,r,!0)}}}),Y.fn.extend({on:function(e,n,r,i,o){var u,a;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=s;else if(!i)return this;return o===1&&(u=i,i=function(e){return Y().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=Y.guid++)),this.each(function(){Y.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,Y(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(o in e)this.off(o,n,e[o]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=s),this.each(function(){Y.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return Y(this.context).on(e,this.selector,t,n),this},die:function(e,t){return Y(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length==1?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){Y.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return Y.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||Y.guid++,r=0,i=function(n){var i=(Y._data(this,"lastToggle"+e.guid)||0)%r;return Y._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),Y.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){Y.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},Ot.test(t)&&(Y.event.fixHooks[t]=Y.event.keyHooks),Mt.test(t)&&(Y.event.fixHooks[t]=Y.event.mouseHooks)}),function(e,t){function n(e,t,n,r){n=n||[],t=t||L;var i,s,o,u,a=t.nodeType;if(a!==1&&a!==9)return[];if(!e||typeof e!="string")return n;o=w(t);if(!o&&!r)if(i=K.exec(e))if(u=i[1]){if(a===9){s=t.getElementById(u);if(!s||!s.parentNode)return n;if(s.id===u)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(u))&&E(t,s)&&s.id===u)return n.push(s),n}else{if(i[2])return _.apply(n,M.call(t.getElementsByTagName(e),0)),n;if((u=i[3])&&at&&t.getElementsByClassName)return _.apply(n,M.call(t.getElementsByClassName(u),0)),n}return d(e,t,n,r,o)}function r(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function i(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function s(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}function o(e,t,r,i){var s,o,u,a,f,l,c,h,p,d,v=!r&&t!==L,m=(v?"<s>":"")+e.replace(X,"$1<s>"),g=B[k][m];if(g)return i?0:M.call(g,0);f=e,l=[],h=0,p=y.preFilter,d=y.filter;while(f){if(!s||(o=V.exec(f)))o&&(f=f.slice(o[0].length),u.selector=c),l.push(u=[]),c="",v&&(f=" "+f);s=!1;if(o=$.exec(f))c+=o[0],f=f.slice(o[0].length),s=u.push({part:o.pop().replace(X," "),string:o[0],captures:o});for(a in d)(o=rt[a].exec(f))&&(!p[a]||(o=p[a](o,t,r)))&&(c+=o[0],f=f.slice(o[0].length),s=u.push({part:a,string:o.shift(),captures:o}));if(!s)break}return c&&(u.selector=c),i?f.length:f?n.error(e):M.call(B(m,l),0)}function u(e,t,n,r){var i=t.dir,s=O++;return e||(e=function(e){return e===n}),t.first?function(t){while(t=t[i])if(t.nodeType===1)return e(t)&&t}:r?function(t){while(t=t[i])if(t.nodeType===1&&e(t))return t}:function(t){var n,r=s+"."+v,o=r+"."+m;while(t=t[i])if(t.nodeType===1){if((n=t[k])===o)return t.sizset;if(typeof n=="string"&&n.indexOf(r)===0){if(t.sizset)return t}else{t[k]=o;if(e(t))return t.sizset=!0,t;t.sizset=!1}}}}function a(e,t){return e?function(n){var r=t(n);return r&&e(r===!0?n:r)}:t}function f(e,t,n){var r,i,s=0;for(;r=e[s];s++)y.relative[r.part]?i=u(i,y.relative[r.part],t,n):i=a(i,y.filter[r.part].apply(null,r.captures.concat(t,n)));return i}function l(e){return function(t){var n,r=0;for(;n=e[r];r++)if(n(t))return!0;return!1}}function c(e,t,r,i){var s=0,o=t.length;for(;s<o;s++)n(e,t[s],r,i)}function h(e,t,r,i,s,o){var u,a=y.setFilters[t.toLowerCase()];return a||n.error(t),(e||!(u=s))&&c(e||"*",i,u=[],s),u.length>0?a(u,r,o):[]}function p(e,r,i,s){var o,u,a,f,l,p,d,v,m,g,y,b,w,E=0,S=e.length,x=rt.POS,T=new RegExp("^"+x.source+"(?!"+F+")","i"),N=function(){var e=1,n=arguments.length-2;for(;e<n;e++)arguments[e]===t&&(m[e]=t)};for(;E<S;E++){o=e[E],u="",v=s;for(a=0,f=o.length;a<f;a++){l=o[a],p=l.string;if(l.part==="PSEUDO"){x.exec(""),d=0;while(m=x.exec(p)){g=!0,y=x.lastIndex=m.index+m[0].length;if(y>d){u+=p.slice(d,m.index),d=y,b=[r],$.test(u)&&(v&&(b=v),v=s);if(w=Z.test(u))u=u.slice(0,-5).replace($,"$&*"),d++;m.length>1&&m[0].replace(T,N),v=h(u,m[1],m[2],b,v,w)}u=""}}g||(u+=p),g=!1}u?$.test(u)?c(u,v||[r],i,s):n(u,r,i,s?s.concat(v):v):_.apply(i,v)}return S===1?i:n.uniqueSort(i)}function d(e,t,n,r,i){e=e.replace(X,"$1");var s,u,a,f,l,c,h,d,g,b,w=o(e,t,i),E=t.nodeType;if(rt.POS.test(e))return p(w,t,n,r);if(r)s=M.call(r,0);else if(w.length===1){if((c=M.call(w[0],0)).length>2&&(h=c[0]).part==="ID"&&E===9&&!i&&y.relative[c[1].part]){t=y.find.ID(h.captures[0].replace(nt,""),t,i)[0];if(!t)return n;e=e.slice(c.shift().string.length)}g=(w=G.exec(c[0].string))&&!w.index&&t.parentNode||t,d="";for(l=c.length-1;l>=0;l--){h=c[l],b=h.part,d=h.string+d;if(y.relative[b])break;if(y.order.test(b)){s=y.find[b](h.captures[0].replace(nt,""),g,i);if(s==null)continue;e=e.slice(0,e.length-d.length)+d.replace(rt[b],""),e||_.apply(n,M.call(s,0));break}}}if(e){u=S(e,t,i),v=u.dirruns++,s==null&&(s=y.find.TAG("*",G.test(e)&&t.parentNode||t));for(l=0;f=s[l];l++)m=u.runs++,u(f)&&n.push(f)}return n}var v,m,g,y,b,w,E,S,x,T,N=!0,C="undefined",k=("sizcache"+Math.random()).replace(".",""),L=e.document,A=L.documentElement,O=0,M=[].slice,_=[].push,D=function(e,t){return e[k]=t||!0,e},P=function(){var e={},t=[];return D(function(n,r){return t.push(n)>y.cacheLength&&delete e[t.shift()],e[n]=r},e)},H=P(),B=P(),j=P(),F="[\\x20\\t\\r\\n\\f]",I="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",q=I.replace("w","w#"),R="([*^$|!~]?=)",U="\\["+F+"*("+I+")"+F+"*(?:"+R+F+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+q+")|)|)"+F+"*\\]",z=":("+I+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+U+")|[^:]|\\\\.)*|.*))\\)|)",W=":(nth|eq|gt|lt|first|last|even|odd)(?:\\(((?:-\\d)?\\d*)\\)|)(?=[^-]|$)",X=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),V=new RegExp("^"+F+"*,"+F+"*"),$=new RegExp("^"+F+"*([\\x20\\t\\r\\n\\f>+~])"+F+"*"),J=new RegExp(z),K=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,Q=/^:not/,G=/[\x20\t\r\n\f]*[+~]/,Z=/:not\($/,et=/h\d/i,tt=/input|select|textarea|button/i,nt=/\\(?!\\)/g,rt={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),NAME:new RegExp("^\\[name=['\"]?("+I+")['\"]?\\]"),TAG:new RegExp("^("+I.replace("w","w*")+")"),ATTR:new RegExp("^"+U),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|nth|last|first)-child(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),POS:new RegExp(W,"ig"),needsContext:new RegExp("^"+F+"*[>+~]|"+W,"i")},it=function(e){var t=L.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}},st=it(function(e){return e.appendChild(L.createComment("")),!e.getElementsByTagName("*").length}),ot=it(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==C&&e.firstChild.getAttribute("href")==="#"}),ut=it(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),at=it(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!e.getElementsByClassName||!e.getElementsByClassName("e").length?!1:(e.lastChild.className="e",e.getElementsByClassName("e").length===2)}),ft=it(function(e){e.id=k+0,e.innerHTML="<a name='"+k+"'></a><div name='"+k+"'></div>",A.insertBefore(e,A.firstChild);var t=L.getElementsByName&&L.getElementsByName(k).length===2+L.getElementsByName(k+0).length;return g=!L.getElementById(k),A.removeChild(e),t});try{M.call(A.childNodes,0)[0].nodeType}catch(lt){M=function(e){var t,n=[];for(;t=this[e];e++)n.push(t);return n}}n.matches=function(e,t){return n(e,null,null,t)},n.matchesSelector=function(e,t){return n(t,null,null,[e]).length>0},b=n.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=b(e)}else if(i===3||i===4)return e.nodeValue}else for(;t=e[r];r++)n+=b(t);return n},w=n.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},E=n.contains=A.contains?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&r.nodeType===1&&n.contains&&n.contains(r))}:A.compareDocumentPosition?function(e,t){return t&&!!(e.compareDocumentPosition(t)&16)}:function(e,t){while(t=t.parentNode)if(t===e)return!0;return!1},n.attr=function(e,t){var n,r=w(e);return r||(t=t.toLowerCase()),y.attrHandle[t]?y.attrHandle[t](e):ut||r?e.getAttribute(t):(n=e.getAttributeNode(t),n?typeof e[t]=="boolean"?e[t]?t:null:n.specified?n.value:null:null)},y=n.selectors={cacheLength:50,createPseudo:D,match:rt,order:new RegExp("ID|TAG"+(ft?"|NAME":"")+(at?"|CLASS":"")),attrHandle:ot?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:g?function(e,t,n){if(typeof t.getElementById!==C&&!n){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}}:function(e,n,r){if(typeof n.getElementById!==C&&!r){var i=n.getElementById(e);return i?i.id===e||typeof i.getAttributeNode!==C&&i.getAttributeNode("id").value===e?[i]:t:[]}},TAG:st?function(e,t){if(typeof t.getElementsByTagName!==C)return t.getElementsByTagName(e)}:function(e,t){var n=t.getElementsByTagName(e);if(e==="*"){var r,i=[],s=0;for(;r=n[s];s++)r.nodeType===1&&i.push(r);return i}return n},NAME:function(e,t){if(typeof t.getElementsByName!==C)return t.getElementsByName(name)},CLASS:function(e,t,n){if(typeof t.getElementsByClassName!==C&&!n)return t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(nt,""),e[3]=(e[4]||e[5]||"").replace(nt,""),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1]==="nth"?(e[2]||n.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*(e[2]==="even"||e[2]==="odd")),e[4]=+(e[6]+e[7]||e[2]==="odd")):e[2]&&n.error(e[0]),e},PSEUDO:function(e,t,n){var r,i;if(rt.CHILD.test(e[0]))return null;if(e[3])e[2]=e[3];else if(r=e[4])J.test(r)&&(i=o(r,t,n,!0))&&(i=r.indexOf(")",r.length-i)-r.length)&&(r=r.slice(0,i),e[0]=e[0].slice(0,i)),e[2]=r;return e.slice(0,3)}},filter:{ID:g?function(e){return e=e.replace(nt,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace(nt,""),function(t){var n=typeof t.getAttributeNode!==C&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){return e==="*"?function(){return!0}:(e=e.replace(nt,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=H[k][e];return t||(t=H(e,new RegExp("(^|"+F+")"+e+"("+F+"|$)"))),function(e){return t.test(e.className||typeof e.getAttribute!==C&&e.getAttribute("class")||"")}},ATTR:function(e,t,r){return t?function(i){var s=n.attr(i,e),o=s+"";if(s==null)return t==="!=";switch(t){case"=":return o===r;case"!=":return o!==r;case"^=":return r&&o.indexOf(r)===0;case"*=":return r&&o.indexOf(r)>-1;case"$=":return r&&o.substr(o.length-r.length)===r;case"~=":return(" "+o+" ").indexOf(r)>-1;case"|=":return o===r||o.substr(0,r.length+1)===r+"-"}}:function(t){return n.attr(t,e)!=null}},CHILD:function(e,t,n,r){if(e==="nth"){var i=O++;return function(e){var t,s,o=0,u=e;if(n===1&&r===0)return!0;t=e.parentNode;if(t&&(t[k]!==i||!e.sizset)){for(u=t.firstChild;u;u=u.nextSibling)if(u.nodeType===1){u.sizset=++o;if(u===e)break}t[k]=i}return s=e.sizset-r,n===0?s===0:s%n===0&&s/n>=0}}return function(t){var n=t;switch(e){case"only":case"first":while(n=n.previousSibling)if(n.nodeType===1)return!1;if(e==="first")return!0;n=t;case"last":while(n=n.nextSibling)if(n.nodeType===1)return!1;return!0}}},PSEUDO:function(e,t,r,i){var s,o=y.pseudos[e]||y.pseudos[e.toLowerCase()];return o||n.error("unsupported pseudo: "+e),o[k]?o(t,r,i):o.length>1?(s=[e,e,"",t],function(e){return o(e,0,s)}):o}},pseudos:{not:D(function(e,t,n){var r=S(e.replace(X,"$1"),t,n);return function(e){return!r(e)}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!y.pseudos.empty(e)},empty:function(e){var t;e=e.firstChild;while(e){if(e.nodeName>"@"||(t=e.nodeType)===3||t===4)return!1;e=e.nextSibling}return!0},contains:D(function(e){return function(t){return(t.textContent||t.innerText||b(t)).indexOf(e)>-1}}),has:D(function(e){return function(t){return n(e,t).length>0}}),header:function(e){return et.test(e.nodeName)},text:function(e){var t,n;return e.nodeName.toLowerCase()==="input"&&(t=e.type)==="text"&&((n=e.getAttribute("type"))==null||n.toLowerCase()===t)},radio:r("radio"),checkbox:r("checkbox"),file:r("file"),password:r("password"),image:r("image"),submit:i("submit"),reset:i("reset"),button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},input:function(e){return tt.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&(!!e.type||!!e.href)},active:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t,n){return n?e.slice(1):[e[0]]},last:function(e,t,n){var r=e.pop();return n?e:[r]},even:function(e,t,n){var r=[],i=n?1:0,s=e.length;for(;i<s;i+=2)r.push(e[i]);return r},odd:function(e,t,n){var r=[],i=n?0:1,s=e.length;for(;i<s;i+=2)r.push(e[i]);return r},lt:function(e,t,n){return n?e.slice(+t):e.slice(0,+t)},gt:function(e,t,n){return n?e.slice(0,+t+1):e.slice(+t+1)},eq:function(e,t,n){var r=e.splice(+t,1);return n?e:r}}},x=A.compareDocumentPosition?function(e,t){return e===t?(T=!0,0):(!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition:e.compareDocumentPosition(t)&4)?-1:1}:function(e,t){if(e===t)return T=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],o=[],u=e.parentNode,a=t.parentNode,f=u;if(u===a)return s(e,t);if(!u)return-1;if(!a)return 1;while(f)i.unshift(f),f=f.parentNode;f=a;while(f)o.unshift(f),f=f.parentNode;n=i.length,r=o.length;for(var l=0;l<n&&l<r;l++)if(i[l]!==o[l])return s(i[l],o[l]);return l===n?s(e,o[l],-1):s(i[l],t,1)},[0,0].sort(x),N=!T,n.uniqueSort=function(e){var t,n=1;T=N,e.sort(x);if(T)for(;t=e[n];n++)t===e[n-1]&&e.splice(n--,1);return e},n.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},S=n.compile=function(e,t,n){var r,i,s,u=j[k][e];if(u&&u.context===t)return u;r=o(e,t,n);for(i=0,s=r.length;i<s;i++)r[i]=f(r[i],t,n);return u=j(e,l(r)),u.context=t,u.runs=u.dirruns=0,u},L.querySelectorAll&&function(){var e,t=d,r=/'|\\/g,i=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,s=[],u=[":active"],a=A.matchesSelector||A.mozMatchesSelector||A.webkitMatchesSelector||A.oMatchesSelector||A.msMatchesSelector;it(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||s.push("\\["+F+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||s.push(":checked")}),it(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&s.push("[*^$]="+F+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||s.push(":enabled",":disabled")}),s=s.length&&new RegExp(s.join("|")),d=function(e,n,i,u,a){if(!u&&!a&&(!s||!s.test(e)))if(n.nodeType===9)try{return _.apply(i,M.call(n.querySelectorAll(e),0)),i}catch(f){}else if(n.nodeType===1&&n.nodeName.toLowerCase()!=="object"){var l,c,h,p=n.getAttribute("id"),d=p||k,v=G.test(e)&&n.parentNode||n;p?d=d.replace(r,"\\$&"):n.setAttribute("id",d),l=o(e,n,a),d="[id='"+d+"']";for(c=0,h=l.length;c<h;c++)l[c]=d+l[c].selector;try{return _.apply(i,M.call(v.querySelectorAll(l.join(",")),0)),i}catch(f){}finally{p||n.removeAttribute("id")}}return t(e,n,i,u,a)},a&&(it(function(t){e=a.call(t,"div");try{a.call(t,"[test!='']:sizzle"),u.push(rt.PSEUDO.source,rt.POS.source,"!=")}catch(n){}}),u=new RegExp(u.join("|")),n.matchesSelector=function(t,r){r=r.replace(i,"='$1']");if(!w(t)&&!u.test(r)&&(!s||!s.test(r)))try{var o=a.call(t,r);if(o||e||t.document&&t.document.nodeType!==11)return o}catch(f){}return n(r,null,null,[t]).length>0})}(),y.setFilters.nth=y.setFilters.eq,y.filters=y.pseudos,n.attr=Y.attr,Y.find=n,Y.expr=n.selectors,Y.expr[":"]=Y.expr.pseudos,Y.unique=n.uniqueSort,Y.text=n.getText,Y.isXMLDoc=n.isXML,Y.contains=n.contains}(e);var Pt=/Until$/,Ht=/^(?:parents|prev(?:Until|All))/,Bt=/^.[^:#\[\.,]*$/,jt=Y.expr.match.needsContext,Ft={children:!0,contents:!0,next:!0,prev:!0};Y.fn.extend({find:function(e){var t,n,r,i,s,o,u=this;if(typeof e!="string")return Y(e).filter(function(){for(t=0,n=u.length;t<n;t++)if(Y.contains(u[t],this))return!0});o=this.pushStack("","find",e);for(t=0,n=this.length;t<n;t++){r=o.length,Y.find(e,this[t],o);if(t>0)for(i=r;i<o.length;i++)for(s=0;s<r;s++)if(o[s]===o[i]){o.splice(i--,1);break}}return o},has:function(e){var t,n=Y(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(Y.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(f(this,e,!1),"not",e)},filter:function(e){return this.pushStack(f(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?jt.test(e)?Y(e,this.context).index(this[0])>=0:Y.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=jt.test(e)||typeof e!="string"?Y(e,t||this.context):0;for(;r<i;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&n.nodeType!==11){if(o?o.index(n)>-1:Y.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return s=s.length>1?Y.unique(s):s,this.pushStack(s,"closest",e)},index:function(e){return e?typeof e=="string"?Y.inArray(this[0],Y(e)):Y.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?Y(e,t):Y.makeArray(e&&e.nodeType?[e]:e),r=Y.merge(this.get(),n);return this.pushStack(u(n[0])||u(r[0])?r:Y.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),Y.fn.andSelf=Y.fn.addBack,Y.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return Y.dir(e,"parentNode")},parentsUntil:function(e,t,n){return Y.dir(e,"parentNode",n)},next:function(e){return a(e,"nextSibling")},prev:function(e){return a(e,"previousSibling")},nextAll:function(e){return Y.dir(e,"nextSibling")},prevAll:function(e){return Y.dir(e,"previousSibling")},nextUntil:function(e,t,n){return Y.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return Y.dir(e,"previousSibling",n)},siblings:function(e){return Y.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Y.sibling(e.firstChild)},contents:function(e){return Y.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:Y.merge([],e.childNodes)}},function(e,t){Y.fn[e]=function(n,r){var i=Y.map(this,t,n);return Pt.test(e)||(r=n),r&&typeof r=="string"&&(i=Y.filter(r,i)),i=this.length>1&&!Ft[e]?Y.unique(i):i,this.length>1&&Ht.test(e)&&(i=i.reverse()),this.pushStack(i,e,$.call(arguments).join(","))}}),Y.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?Y.find.matchesSelector(t[0],e)?[t[0]]:[]:Y.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!Y(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var It="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",qt=/ jQuery\d+="(?:null|\d+)"/g,Rt=/^\s+/,Ut=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,zt=/<([\w:]+)/,Wt=/<tbody/i,Xt=/<|&#?\w+;/,Vt=/<(?:script|style|link)/i,$t=/<(?:script|object|embed|option|style)/i,Jt=new RegExp("<(?:"+It+")[\\s/>]","i"),Kt=/^(?:checkbox|radio)$/,Qt=/checked\s*(?:[^=]|=\s*.checked.)/i,Gt=/\/(java|ecma)script/i,Yt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Zt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},en=l(R),tn=en.appendChild(R.createElement("div"));Zt.optgroup=Zt.option,Zt.tbody=Zt.tfoot=Zt.colgroup=Zt.caption=Zt.thead,Zt.th=Zt.td,Y.support.htmlSerialize||(Zt._default=[1,"X<div>","</div>"]),Y.fn.extend({text:function(e){return Y.access(this,function(e){return e===t?Y.text(this):this.empty().append((this[0]&&this[0].ownerDocument||R).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(Y.isFunction(e))return this.each(function(t){Y(this).wrapAll(e.call(this,t))});if(this[0]){var t=Y(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return Y.isFunction(e)?this.each(function(t){Y(this).wrapInner(e.call(this,t))}):this.each(function(){var t=Y(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=Y.isFunction(e);return this.each(function(n){Y(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){Y.nodeName(this,"body")||Y(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!u(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=Y.clean(arguments);return this.pushStack(Y.merge(e,this),"before",this.selector)}},after:function(){if(!u(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=Y.clean(arguments);return this.pushStack(Y.merge(this,e),"after",this.selector)}},remove:function(e,t){var n,r=0;for(;(n=this[r])!=null;r++)if(!e||Y.filter(e,[n]).length)!t&&n.nodeType===1&&(Y.cleanData(n.getElementsByTagName("*")),Y.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n);return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&Y.cleanData(e.getElementsByTagName("*"));while(e.firstChild)e.removeChild(e.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return Y.clone(this,e,t)})},html:function(e){return Y.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(qt,""):t;if(typeof e=="string"&&!Vt.test(e)&&(Y.support.htmlSerialize||!Jt.test(e))&&(Y.support.leadingWhitespace||!Rt.test(e))&&!Zt[(zt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Ut,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(Y.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return u(this[0])?this.length?this.pushStack(Y(Y.isFunction(e)?e():e),"replaceWith",e):this:Y.isFunction(e)?this.each(function(t){var n=Y(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=Y(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;Y(this).remove(),t?Y(t).before(e):Y(n).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=[].concat.apply([],e);var i,s,o,u,a=0,f=e[0],l=[],h=this.length;if(!Y.support.checkClone&&h>1&&typeof f=="string"&&Qt.test(f))return this.each(function(){Y(this).domManip(e,n,r)});if(Y.isFunction(f))return this.each(function(i){var s=Y(this);e[0]=f.call(this,i,n?s.html():t),s.domManip(e,n,r)});if(this[0]){i=Y.buildFragment(e,this,l),o=i.fragment,s=o.firstChild,o.childNodes.length===1&&(o=s);if(s){n=n&&Y.nodeName(s,"tr");for(u=i.cacheable||h-1;a<h;a++)r.call(n&&Y.nodeName(this[a],"table")?c(this[a],"tbody"):this[a],a===u?o:Y.clone(o,!0,!0))}o=s=null,l.length&&Y.each(l,function(e,t){t.src?Y.ajax?Y.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):Y.error("no ajax"):Y.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Yt,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),Y.buildFragment=function(e,n,r){var i,s,o,u=e[0];return n=n||R,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,e.length===1&&typeof u=="string"&&u.length<512&&n===R&&u.charAt(0)==="<"&&!$t.test(u)&&(Y.support.checkClone||!Qt.test(u))&&(Y.support.html5Clone||!Jt.test(u))&&(s=!0,i=Y.fragments[u],o=i!==t),i||(i=n.createDocumentFragment(),Y.clean(e,n,i,r),s&&(Y.fragments[u]=o&&i)),{fragment:i,cacheable:s}},Y.fragments={},Y.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Y.fn[e]=function(n){var r,i=0,s=[],o=Y(n),u=o.length,a=this.length===1&&this[0].parentNode;if((a==null||a&&a.nodeType===11&&a.childNodes.length===1)&&u===1)return o[t](this[0]),this;for(;i<u;i++)r=(i>0?this.clone(!0):this).get(),Y(o[i])[t](r),s=s.concat(r);return this.pushStack(s,e,o.selector)}}),Y.extend({clone:function(e,t,n){var r,i,s,o;Y.support.html5Clone||Y.isXMLDoc(e)||!Jt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(tn.innerHTML=e.outerHTML,tn.removeChild(o=tn.firstChild));if((!Y.support.noCloneEvent||!Y.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!Y.isXMLDoc(e)){p(e,o),r=d(e),i=d(o);for(s=0;r[s];++s)i[s]&&p(r[s],i[s])}if(t){h(e,o);if(n){r=d(e),i=d(o);for(s=0;r[s];++s)h(r[s],i[s])}}return r=i=null,o},clean:function(e,t,n,r){var i,s,o,u,a,f,c,h,p,d,m,g,y=t===R&&en,b=[];if(!t||typeof t.createDocumentFragment=="undefined")t=R;for(i=0;(o=e[i])!=null;i++){typeof o=="number"&&(o+="");if(!o)continue;if(typeof o=="string")if(!Xt.test(o))o=t.createTextNode(o);else{y=y||l(t),c=t.createElement("div"),y.appendChild(c),o=o.replace(Ut,"<$1></$2>"),u=(zt.exec(o)||["",""])[1].toLowerCase(),a=Zt[u]||Zt._default,f=a[0],c.innerHTML=a[1]+o+a[2];while(f--)c=c.lastChild;if(!Y.support.tbody){h=Wt.test(o),p=u==="table"&&!h?c.firstChild&&c.firstChild.childNodes:a[1]==="<table>"&&!h?c.childNodes:[];for(s=p.length-1;s>=0;--s)Y.nodeName(p[s],"tbody")&&!p[s].childNodes.length&&p[s].parentNode.removeChild(p[s])}!Y.support.leadingWhitespace&&Rt.test(o)&&c.insertBefore(t.createTextNode(Rt.exec(o)[0]),c.firstChild),o=c.childNodes,c.parentNode.removeChild(c)}o.nodeType?b.push(o):Y.merge(b,o)}c&&(o=c=y=null);if(!Y.support.appendChecked)for(i=0;(o=b[i])!=null;i++)Y.nodeName(o,"input")?v(o):typeof o.getElementsByTagName!="undefined"&&Y.grep(o.getElementsByTagName("input"),v);if(n){m=function(e){if(!e.type||Gt.test(e.type))return r?r.push(e.parentNode?e.parentNode.removeChild(e):e):n.appendChild(e)};for(i=0;(o=b[i])!=null;i++)if(!Y.nodeName(o,"script")||!m(o))n.appendChild(o),typeof o.getElementsByTagName!="undefined"&&(g=Y.grep(Y.merge([],o.getElementsByTagName("script")),m),b.splice.apply(b,[i+1,0].concat(g)),i+=g.length)}return b},cleanData:function(e,t){var n,r,i,s,o=0,u=Y.expando,a=Y.cache,f=Y.support.deleteExpando,l=Y.event.special;for(;(i=e[o])!=null;o++)if(t||Y.acceptData(i)){r=i[u],n=r&&a[r];if(n){if(n.events)for(s in n.events)l[s]?Y.event.remove(i,s):Y.removeEvent(i,s,n.handle);a[r]&&(delete a[r],f?delete i[u]:i.removeAttribute?i.removeAttribute(u):i[u]=null,Y.deletedIds.push(r))}}}}),function(){var e,t;Y.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=Y.uaMatch(z.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),Y.browser=t,Y.sub=function(){function e(t,n){return new e.fn.init(t,n)}Y.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function n(n,r){return r&&r instanceof Y&&!(r instanceof e)&&(r=e(r)),Y.fn.init.call(this,n,r,t)},e.fn.init.prototype=e.fn;var t=e(R);return e}}();var nn,rn,sn,on=/alpha\([^)]*\)/i,un=/opacity=([^)]*)/,an=/^(top|right|bottom|left)$/,fn=/^(none|table(?!-c[ea]).+)/,ln=/^margin/,cn=new RegExp("^("+Z+")(.*)$","i"),hn=new RegExp("^("+Z+")(?!px)[a-z%]+$","i"),pn=new RegExp("^([-+])=("+Z+")","i"),dn={},vn={position:"absolute",visibility:"hidden",display:"block"},mn={letterSpacing:0,fontWeight:400},gn=["Top","Right","Bottom","Left"],yn=["Webkit","O","Moz","ms"],bn=Y.fn.toggle;Y.fn.extend({css:function(e,n){return Y.access(this,function(e,n,r){return r!==t?Y.style(e,n,r):Y.css(e,n)},e,n,arguments.length>1)},show:function(){return y(this,!0)},hide:function(){return y(this)},toggle:function(e,t){var n=typeof e=="boolean";return Y.isFunction(e)&&Y.isFunction(t)?bn.apply(this,arguments):this.each(function(){(n?e:g(this))?Y(this).show():Y(this).hide()})}}),Y.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=nn(e,"opacity");return n===""?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":Y.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=Y.camelCase(n),f=e.style;n=Y.cssProps[a]||(Y.cssProps[a]=m(f,a)),u=Y.cssHooks[n]||Y.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=pn.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(Y.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!Y.cssNumber[a]&&(r+="px");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=Y.camelCase(n);return n=Y.cssProps[a]||(Y.cssProps[a]=m(e.style,a)),u=Y.cssHooks[n]||Y.cssHooks[a],u&&"get"in u&&(s=u.get(e,!0,i)),s===t&&(s=nn(e,n)),s==="normal"&&n in mn&&(s=mn[n]),r||i!==t?(o=parseFloat(s),r||Y.isNumeric(o)?o||0:s):s},swap:function(e,t,n){var r,i,s={};for(i in t)s[i]=e.style[i],e.style[i]=t[i];r=n.call(e);for(i in t)e.style[i]=s[i];return r}}),e.getComputedStyle?nn=function(t,n){var r,i,s,o,u=e.getComputedStyle(t,null),a=t.style;return u&&(r=u[n],r===""&&!Y.contains(t.ownerDocument,t)&&(r=Y.style(t,n)),hn.test(r)&&ln.test(n)&&(i=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=u.width,a.width=i,a.minWidth=s,a.maxWidth=o)),r}:R.documentElement.currentStyle&&(nn=function(e,t){var n,r,i=e.currentStyle&&e.currentStyle[t],s=e.style;return i==null&&s&&s[t]&&(i=s[t]),hn.test(i)&&!an.test(t)&&(n=s.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),s.left=t==="fontSize"?"1em":i,i=s.pixelLeft+"px",s.left=n,r&&(e.runtimeStyle.left=r)),i===""?"auto":i}),Y.each(["height","width"],function(e,t){Y.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&fn.test(nn(e,"display"))?Y.swap(e,vn,function(){return E(e,t,r)}):E(e,t,r)},set:function(e,n,r){return b(e,n,r?w(e,t,r,Y.support.boxSizing&&Y.css(e,"boxSizing")==="border-box"):0)}}}),Y.support.opacity||(Y.cssHooks.opacity={get:function(e,t){return un.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=Y.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&Y.trim(s.replace(on,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=on.test(s)?s.replace(on,i):s+" "+i}}),Y(function(){Y.support.reliableMarginRight||(Y.cssHooks.marginRight={get:function(e,t){return Y.swap(e,{display:"inline-block"},function(){if(t)return nn(e,"marginRight")})}}),!Y.support.pixelPosition&&Y.fn.position&&Y.each(["top","left"],function(e,t){Y.cssHooks[t]={get:function(e,n){if(n){var r=nn(e,t);return hn.test(r)?Y(e).position()[t]+"px":r}}}})}),Y.expr&&Y.expr.filters&&(Y.expr.filters.hidden=function(e){return e.offsetWidth===0&&e.offsetHeight===0||!Y.support.reliableHiddenOffsets&&(e.style&&e.style.display||nn(e,"display"))==="none"},Y.expr.filters.visible=function(e){return!Y.expr.filters.hidden(e)}),Y.each({margin:"",padding:"",border:"Width"},function(e,t){Y.cssHooks[e+t]={expand:function(n){var r,i=typeof n=="string"?n.split(" "):[n],s={};for(r=0;r<4;r++)s[e+gn[r]+t]=i[r]||i[r-2]||i[0];return s}},ln.test(e)||(Y.cssHooks[e+t].set=b)});var wn=/%20/g,En=/\[\]$/,Sn=/\r?\n/g,xn=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Tn=/^(?:select|textarea)/i;Y.fn.extend({serialize:function(){return Y.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?Y.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Tn.test(this.nodeName)||xn.test(this.type))}).map(function(e,t){var n=Y(this).val();return n==null?null:Y.isArray(n)?Y.map(n,function(e,n){return{name:t.name,value:e.replace(Sn,"\r\n")}}):{name:t.name,value:n.replace(Sn,"\r\n")}}).get()}}),Y.param=function(e,n){var r,i=[],s=function(e,t){t=Y.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=Y.ajaxSettings&&Y.ajaxSettings.traditional);if(Y.isArray(e)||e.jquery&&!Y.isPlainObject(e))Y.each(e,function(){s(this.name,this.value)});else for(r in e)x(r,e[r],n,s);return i.join("&").replace(wn,"+")};var Nn,Cn,kn=/#.*$/,Ln=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,An=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,On=/^(?:GET|HEAD)$/,Mn=/^\/\//,_n=/\?/,Dn=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Pn=/([?&])_=[^&]*/,Hn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Bn=Y.fn.load,jn={},Fn={},In=["*/"]+["*"];try{Nn=U.href}catch(qn){Nn=R.createElement("a"),Nn.href="",Nn=Nn.href}Cn=Hn.exec(Nn.toLowerCase())||[],Y.fn.load=function(e,n,r){if(typeof e!="string"&&Bn)return Bn.apply(this,arguments);if(!this.length)return this;var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),Y.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(s="POST"),Y.ajax({url:e,type:s,dataType:"html",data:n,complete:function(e,t){r&&u.each(r,o||[e.responseText,t,e])}}).done(function(e){o=arguments,u.html(i?Y("<div>").append(e.replace(Dn,"")).find(i):e)}),this},Y.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){Y.fn[t]=function(e){return this.on(t,e)}}),Y.each(["get","post"],function(e,n){Y[n]=function(e,r,i,s){return Y.isFunction(r)&&(s=s||i,i=r,r=t),Y.ajax({type:n,url:e,data:r,success:i,dataType:s})}}),Y.extend({getScript:function(e,n){return Y.get(e,t,n,"script")},getJSON:function(e,t,n){return Y.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?C(e,Y.ajaxSettings):(t=e,e=Y.ajaxSettings),C(e,t),e},ajaxSettings:{url:Nn,isLocal:An.test(Cn[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":In},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":Y.parseJSON,"text xml":Y.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:T(jn),ajaxTransport:T(Fn),ajax:function(e,n){function r(e,n,r,o){var f,c,y,b,E,x=n;if(w===2)return;w=2,a&&clearTimeout(a),u=t,s=o||"",S.readyState=e>0?4:0,r&&(b=k(h,S,r));if(e>=200&&e<300||e===304)h.ifModified&&(E=S.getResponseHeader("Last-Modified"),E&&(Y.lastModified[i]=E),E=S.getResponseHeader("Etag"),E&&(Y.etag[i]=E)),e===304?(x="notmodified",f=!0):(f=L(h,b),x=f.state,c=f.data,y=f.error,f=!y);else{y=x;if(!x||e)x="error",e<0&&(e=0)}S.status=e,S.statusText=""+(n||x),f?v.resolveWith(p,[c,x,S]):v.rejectWith(p,[S,x,y]),S.statusCode(g),g=t,l&&d.trigger("ajax"+(f?"Success":"Error"),[S,h,f?c:y]),m.fireWith(p,[S,x]),l&&(d.trigger("ajaxComplete",[S,h]),--Y.active||Y.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var i,s,o,u,a,f,l,c,h=Y.ajaxSetup({},n),p=h.context||h,d=p!==h&&(p.nodeType||p instanceof Y)?Y(p):Y.event,v=Y.Deferred(),m=Y.Callbacks("once memory"),g=h.statusCode||{},y={},b={},w=0,E="canceled",S={readyState:0,setRequestHeader:function(e,t){if(!w){var n=e.toLowerCase();e=b[n]=b[n]||e,y[e]=t}return this},getAllResponseHeaders:function(){return w===2?s:null},getResponseHeader:function(e){var n;if(w===2){if(!o){o={};while(n=Ln.exec(s))o[n[1].toLowerCase()]=n[2]}n=o[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return w||(h.mimeType=e),this},abort:function(e){return e=e||E,u&&u.abort(e),r(0,e),this}};v.promise(S),S.success=S.done,S.error=S.fail,S.complete=m.add,S.statusCode=function(e){if(e){var t;if(w<2)for(t in e)g[t]=[g[t],e[t]];else t=e[S.status],S.always(t)}return this},h.url=((e||h.url)+"").replace(kn,"").replace(Mn,Cn[1]+"//"),h.dataTypes=Y.trim(h.dataType||"*").toLowerCase().split(tt),h.crossDomain==null&&(f=Hn.exec(h.url.toLowerCase()),h.crossDomain=!(!f||f[1]==Cn[1]&&f[2]==Cn[2]&&(f[3]||(f[1]==="http:"?80:443))==(Cn[3]||(Cn[1]==="http:"?80:443)))),h.data&&h.processData&&typeof h.data!="string"&&(h.data=Y.param(h.data,h.traditional)),N(jn,h,n,S);if(w===2)return S;l=h.global,h.type=h.type.toUpperCase(),h.hasContent=!On.test(h.type),l&&Y.active++===0&&Y.event.trigger("ajaxStart");if(!h.hasContent){h.data&&(h.url+=(_n.test(h.url)?"&":"?")+h.data,delete h.data),i=h.url;if(h.cache===!1){var x=Y.now(),T=h.url.replace(Pn,"$1_="+x);h.url=T+(T===h.url?(_n.test(h.url)?"&":"?")+"_="+x:"")}}(h.data&&h.hasContent&&h.contentType!==!1||n.contentType)&&S.setRequestHeader("Content-Type",h.contentType),h.ifModified&&(i=i||h.url,Y.lastModified[i]&&S.setRequestHeader("If-Modified-Since",Y.lastModified[i]),Y.etag[i]&&S.setRequestHeader("If-None-Match",Y.etag[i])),S.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+(h.dataTypes[0]!=="*"?", "+In+"; q=0.01":""):h.accepts["*"]);for(c in h.headers)S.setRequestHeader(c,h.headers[c]);if(!h.beforeSend||h.beforeSend.call(p,S,h)!==!1&&w!==2){E="abort";for(c in{success:1,error:1,complete:1})S[c](h[c]);u=N(Fn,h,n,S);if(!u)r(-1,"No Transport");else{S.readyState=1,l&&d.trigger("ajaxSend",[S,h]),h.async&&h.timeout>0&&(a=setTimeout(function(){S.abort("timeout")},h.timeout));try{w=1,u.send(y,r)}catch(C){if(!(w<2))throw C;r(-1,C)}}return S}return S.abort()},active:0,lastModified:{},etag:{}});var Rn=[],Un=/\?/,zn=/(=)\?(?=&|$)|\?\?/,Wn=Y.now();Y.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Rn.pop()||Y.expando+"_"+Wn++;return this[e]=!0,e}}),Y.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.data,f=n.url,l=n.jsonp!==!1,c=l&&zn.test(f),h=l&&!c&&typeof a=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&zn.test(a);if(n.dataTypes[0]==="jsonp"||c||h)return s=n.jsonpCallback=Y.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,o=e[s],c?n.url=f.replace(zn,"$1"+s):h?n.data=a.replace(zn,"$1"+s):l&&(n.url+=(Un.test(f)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||Y.error(s+" was not called"),u[0]},n.dataTypes[0]="json",e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,Rn.push(s)),u&&Y.isFunction(o)&&o(u[0]),u=o=t}),"script"}),Y.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return Y.globalEval(e),e}}}),Y.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),Y.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=R.head||R.getElementsByTagName("head")[0]||R.documentElement;return{send:function(i,s){n=R.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,i){if(i||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=t,i||s(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var Xn,Vn=e.ActiveXObject?function(){for(var e in Xn)Xn[e](0,1)}:!1,$n=0;Y.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&A()||O()}:A,function(e){Y.extend(Y.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(Y.ajaxSettings.xhr()),Y.support.ajax&&Y.ajaxTransport(function(n){if(!n.crossDomain||Y.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c,h;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=Y.noop,Vn&&delete Xn[o]);if(i)a.readyState!==4&&a.abort();else{u=a.status,l=a.getAllResponseHeaders(),c={},h=a.responseXML,h&&h.documentElement&&(c.xml=h);try{c.text=a.responseText}catch(e){}try{f=a.statusText}catch(p){f=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(d){i||s(-1,d)}c&&s(u,f,c,l)},n.async?a.readyState===4?setTimeout(r,0):(o=++$n,Vn&&(Xn||(Xn={},Y(e).unload(Vn)),Xn[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(0,1)}}}});var Jn,Kn,Qn=/^(?:toggle|show|hide)$/,Gn=new RegExp("^(?:([-+])=|)("+Z+")([a-z%]*)$","i"),Yn=/queueHooks$/,Zn=[H],er={"*":[function(e,t){var n,r,i,s=this.createTween(e,t),o=Gn.exec(t),u=s.cur(),a=+u||0,f=1;if(o){n=+o[2],r=o[3]||(Y.cssNumber[e]?"":"px");if(r!=="px"&&a){a=Y.css(s.elem,e,!0)||n||1;do i=f=f||".5",a/=f,Y.style(s.elem,e,a+r),f=s.cur()/u;while(f!==1&&f!==i)}s.unit=r,s.start=a,s.end=o[1]?a+(o[1]+1)*n:n}return s}]};Y.Animation=Y.extend(D,{tweener:function(e,t){Y.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],er[n]=er[n]||[],er[n].unshift(t)},prefilter:function(e,t){t?Zn.unshift(e):Zn.push(e)}}),Y.Tween=B,B.prototype={constructor:B,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(Y.cssNumber[n]?"":"px")},cur:function(){var e=B.propHooks[this.prop];return e&&e.get?e.get(this):B.propHooks._default.get(this)},run:function(e){var t,n=B.propHooks[this.prop];return this.options.duration?this.pos=t=Y.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):B.propHooks._default.set(this),this}},B.prototype.init.prototype=B.prototype,B.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=Y.css(e.elem,e.prop,!1,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){Y.fx.step[e.prop]?Y.fx.step[e.prop](e):e.elem.style&&(e.elem.style[Y.cssProps[e.prop]]!=null||Y.cssHooks[e.prop])?Y.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},B.propHooks.scrollTop=B.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Y.each(["toggle","show","hide"],function(e,t){var n=Y.fn[t];Y.fn[t]=function(r,i,s){return r==null||typeof r=="boolean"||!e&&Y.isFunction(r)&&Y.isFunction(i)?n.apply(this,arguments):this.animate(j(t,!0),r,i,s)}}),Y.fn.extend({fadeTo:function(e,t,n,r){return this.filter(g).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=Y.isEmptyObject(e),s=Y.speed(t,n,r),o=function(){var t=D(this,Y.extend({},e),s);i&&t.stop(!0)};return i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=Y.timers,o=Y._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Yn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&Y.dequeue(this,e)})}}),Y.each({slideDown:j("show"),slideUp:j("hide"),slideToggle:j("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Y.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),Y.speed=function(e,t,n){var r=e&&typeof e=="object"?Y.extend({},e):{complete:n||!n&&t||Y.isFunction(e)&&e,duration:e,easing:n&&t||t&&!Y.isFunction(t)&&t};r.duration=Y.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in Y.fx.speeds?Y.fx.speeds[r.duration]:Y.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){Y.isFunction(r.old)&&r.old.call(this),r.queue&&Y.dequeue(this,r.queue)},r},Y.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Y.timers=[],Y.fx=B.prototype.init,Y.fx.tick=function(){var e,t=Y.timers,n=0;for(;n<t.length;n++)e=t[n],!e()&&t[n]===e&&t.splice(n--,1);t.length||Y.fx.stop()},Y.fx.timer=function(e){e()&&Y.timers.push(e)&&!Kn&&(Kn=setInterval(Y.fx.tick,Y.fx.interval))},Y.fx.interval=13,Y.fx.stop=function(){clearInterval(Kn),Kn=null},Y.fx.speeds={slow:600,fast:200,_default:400},Y.fx.step={},Y.expr&&Y.expr.filters&&(Y.expr.filters.animated=function(e){return Y.grep(Y.timers,function(t){return e===t.elem}).length});var tr=/^(?:body|html)$/i;Y.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){Y.offset.setOffset(this,e,t)});var n,r,i,s,o,u,a,f,l,c,h=this[0],p=h&&h.ownerDocument;if(!p)return;return(i=p.body)===h?Y.offset.bodyOffset(h):(r=p.documentElement,Y.contains(r,h)?(n=h.getBoundingClientRect(),s=F(p),o=r.clientTop||i.clientTop||0,u=r.clientLeft||i.clientLeft||0,a=s.pageYOffset||r.scrollTop,f=s.pageXOffset||r.scrollLeft,l=n.top+a-o,c=n.left+f-u,{top:l,left:c}):{top:0,left:0})},Y.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return Y.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(Y.css(e,"marginTop"))||0,n+=parseFloat(Y.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=Y.css(e,"position");r==="static"&&(e.style.position="relative");var i=Y(e),s=i.offset(),o=Y.css(e,"top"),u=Y.css(e,"left"),a=(r==="absolute"||r==="fixed")&&Y.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),Y.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},Y.fn.extend({position:function(){if(!this[0])return;var e=this[0],t=this.offsetParent(),n=this.offset(),r=tr.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(Y.css(e,"marginTop"))||0,n.left-=parseFloat(Y.css(e,"marginLeft"))||0,r.top+=parseFloat(Y.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(Y.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||R.body;while(e&&!tr.test(e.nodeName)&&Y.css(e,"position")==="static")e=e.offsetParent;return e||R.body})}}),Y.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);Y.fn[e]=function(i){return Y.access(this,function(e,i,s){var o=F(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?Y(o).scrollLeft():s,r?s:Y(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),Y.each({Height:"height",Width:"width"},function(e,n){Y.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){Y.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return Y.access(this,function(n,r,i){var s;return Y.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?Y.css(n,r,i,u):Y.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQuery=e.$=Y,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return Y})})(window),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.4.4";var T=x.each=x.forEach=function(e,t,r){if(e==null)return;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};x.contains=x.include=function(e,t){return e==null?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,n){return x.isEmpty(t)?n?null:[]:x[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-Infinity;var r={computed:-Infinity,value:-Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return Infinity;var r={computed:Infinity,value:Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t||x.identity);return T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=function(e,t,n){return L(e,t,n,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){n=n==null?x.identity:k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return e==null?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,0,t):e[0]},x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,Math.max(e.length-t,0)):e[e.length-1]},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return T(e,function(e){x.isArray(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n))o.push(n),s.push(e[r])}),s},x.union=function(){return x.uniq(a.apply(r,arguments))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){var e=u.call(arguments),t=x.max(x.pluck(e,"length")),n=new Array(t);for(var r=0;r<t;r++)n[r]=x.pluck(e,""+r);return n},x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s},x.bind=function(e,t){if(e.bind===S&&S)return S.apply(e,u.call(arguments,1));var n=u.call(arguments,2);return function(){return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);return t.length===0&&(t=x.functions(e)),T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t){var n,r,i,s,o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)};return function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,f<=0?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},x.debounce=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&(t[t.length]=n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]==null&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var O=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;n.push(e),r.push(t);var o=0,u=!0;if(i=="[object Array]"){o=e.length,u=o==t.length;if(u)while(o--)if(!(u=O(e[o],t[o],n,r)))break}else{var a=e.constructor,l=t.constructor;if(a!==l&&!(x.isFunction(a)&&a instanceof a&&x.isFunction(l)&&l instanceof l))return!1;for(var c in e)if(x.has(e,c)){o++;if(!(u=x.has(t,c)&&O(e[c],t[c],n,r)))break}if(u){for(c in t)if(x.has(t,c)&&!(o--))break;u=!o}}return n.pop(),r.pop(),u};x.isEqual=function(e,t){return O(e,t,[],[])},x.isEmpty=function(e){if(e==null)return!0;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType===1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),typeof /./!="function"&&(x.isFunction=function(e){return typeof e=="function"}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){var r=Array(e);for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=x.invert(M.escape);var _={escape:new RegExp("["+x.keys(M.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(M.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return t==null?"":(""+t).replace(_[e],function(t){return M[e][t]})}}),x.result=function(e,t){if(e==null)return null;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),j.call(this,n.apply(x,e))}})};var D=0;x.uniqueId=function(e){var t=++D+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){if(x.isFunction(e))return t?e(t):e;var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||P).source,(n.interpolate||P).source,(n.evaluate||P).source].join("|")+"|$","g"),s=0,o="__p+='",u=e;e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(B,function(e){return"\\"+H[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(a){throw a.source=o,a}if(t)return r(t,x);var f=function(e){return r.call(this,e,x)};return f.source="function("+(n.variable||"obj")+"){\n"+o+"}",f.textsource=u,f},x.chain=function(e){return x(e).chain()};var j=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],j.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return j.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),define("underscore",function(e){return function(){var t,n;return t||e._}}(this)),function(){var e=this,t=e.Backbone,n=[],r=n.push,i=n.slice,s=n.splice,o;o="undefined"!=typeof exports?exports:e.Backbone={},o.VERSION="0.9.10";var u=e._;!u&&"undefined"!=typeof require&&(u=require("underscore")),o.$=e.jQuery||e.Zepto||e.ender,o.noConflict=function(){return e.Backbone=t,this},o.emulateHTTP=!1,o.emulateJSON=!1;var a=/\s+/,f=function(e,t,n,r){if(!n)return!0;if("object"==typeof n)for(var i in n)e[t].apply(e,[i,n[i]].concat(r));else{if(!a.test(n))return!0;n=n.split(a),i=0;for(var s=n.length;i<s;i++)e[t].apply(e,[n[i]].concat(r))}},l=function(e,t){var n,r=-1,i=e.length;switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);break;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,t[0]);break;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,t[0],t[1]);break;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,t[0],t[1],t[2]);break;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t)}},n=o.Events={on:function(e,t,n){return!f(this,"on",e,[t,n])||!t?this:(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:n,ctx:n||this}),this)},once:function(e,t,n){if(!f(this,"once",e,[t,n])||!t)return this;var r=this,i=u.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n),this},off:function(e,t,n){var r,i,s,o,a,l,c,h;if(!this._events||!f(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]:u.keys(this._events),a=0;for(l=o.length;a<l;a++)if(e=o[a],r=this._events[e]){s=[];if(t||n){c=0;for(h=r.length;c<h;c++)i=r[c],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&s.push(i)}this._events[e]=s}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!f(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&l(n,t),r&&l(r,arguments),this},listenTo:function(e,t,n){var r=this._listeners||(this._listeners={}),i=e._listenerId||(e._listenerId=u.uniqueId("l"));return r[i]=e,e.on(t,"object"==typeof t?this:n,this),this},stopListening:function(e,t,n){var r=this._listeners;if(r){if(e)e.off(t,"object"==typeof t?this:n,this),!t&&!n&&delete r[e._listenerId];else{"object"==typeof t&&(n=this);for(var i in r)r[i].off(t,n,this);this._listeners={}}return this}}};n.bind=n.on,n.unbind=n.off,u.extend(o,n);var c=o.Model=function(e,t){var n,r=e||{};this.cid=u.uniqueId("c"),this.attributes={},t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(r=this.parse(r,t)||{});if(n=u.result(this,"defaults"))r=u.defaults({},r,n);this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};u.extend(c.prototype,n,{changed:null,idAttribute:"id",initialize:function(){},toJSON:function(){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,n){var r,i,s,o,a,f,l;if(null==e)return this;"object"==typeof e?(i=e,n=t):(i={})[e]=t,n||(n={});if(!this._validate(i,n))return!1;s=n.unset,o=n.silent,e=[],a=this._changing,this._changing=!0,a||(this._previousAttributes=u.clone(this.attributes),this.changed={}),l=this.attributes,f=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],u.isEqual(l[r],t)||e.push(r),u.isEqual(f[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete l[r]:l[r]=t;if(!o){e.length&&(this._pending=!0),t=0;for(r=e.length;t<r;t++)this.trigger("change:"+e[t],this,l[e[t]],n)}if(a)return this;if(!o)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._changing=this._pending=!1,this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={},n;for(n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes,i;for(i in e)u.isEqual(r[i],t=e[i])||((n||(n={}))[i]=t);return n},previous:function(e){return null==e||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){e=e?u.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success;return e.success=function(e,n,r){if(!e.set(e.parse(n,r),r))return!1;t&&t(e,n,r)},this.sync("read",this,e)},save:function(e,t,n){var r,i,s=this.attributes;return null==e||"object"==typeof e?(r=e,n=t):(r={})[e]=t,r&&(!n||!n.wait)&&!this.set(r,n)?!1:(n=u.extend({validate:!0},n),this._validate(r,n)?(r&&n.wait&&(this.attributes=u.extend({},s,r)),void 0===n.parse&&(n.parse=!0),i=n.success,n.success=function(e,t,n){e.attributes=s;var o=e.parse(t,n);n.wait&&(o=u.extend(r||{},o));if(u.isObject(o)&&!e.set(o,n))return!1;i&&i(e,t,n)},e=this.isNew()?"create":n.patch?"patch":"update","patch"===e&&(n.attrs=r),e=this.sync(e,this,n),r&&n.wait&&(this.attributes=s),e):!1)},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(e,t,i){(i.wait||e.isNew())&&r(),n&&n(e,t,i)};if(this.isNew())return e.success(this,null,e),!1;var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||k();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return!this.validate||!this.validate(this.attributes,e)},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,t||{}),!1):!0}});var h=o.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this.models=[],this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))};u.extend(h.prototype,n,{model:c,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,i,o,a,f,l,c,h,p,d;c=[],h=t.at,p=this.comparator&&null==h&&0!=t.sort,d=u.isString(this.comparator)?this.comparator:null,n=0;for(i=e.length;n<i;n++)(o=this._prepareModel(a=e[n],t))?(f=this.get(o))?t.merge&&(f.set(a===o?o.attributes:a,t),p&&!l&&f.hasChanged(d)&&(l=!0)):(c.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,null!=o.id&&(this._byId[o.id]=o)):this.trigger("invalid",this,a,t);c.length&&(p&&(l=!0),this.length+=c.length,null!=h?s.apply(this.models,[h,0].concat(c)):r.apply(this.models,c)),l&&this.sort({silent:!0});if(t.silent)return this;n=0;for(i=c.length;n<i;n++)(o=c[n]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},remove:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,r,i,s;n=0;for(r=e.length;n<r;n++)if(s=this.get(e[n]))delete this._byId[s.id],delete this._byId[s.cid],i=this.indexOf(s),this.models.splice(i,1),this.length--,t.silent||(t.index=i,s.trigger("remove",s,this,t)),this._removeReference(s);return this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){if(null!=e)return this._idAttr||(this._idAttr=this.model.prototype.idAttribute),this._byId[e.id||e.cid||e[this._idAttr]||e]},at:function(e){return this.models[e]},where:function(e){return u.isEmpty(e)?[]:this.filter(function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},sort:function(e){if(!this.comparator)throw Error("Cannot sort a set without a comparator");return e||(e={}),u.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return u.invoke(this.models,"get",e)},update:function(e,t){t=u.extend({add:!0,merge:!0,remove:!0},t),t.parse&&(e=this.parse(e,t));var n,r,i,s,o=[],a=[],f={};u.isArray(e)||(e=e?[e]:[]);if(t.add&&!t.remove)return this.add(e,t);r=0;for(i=e.length;r<i;r++)n=e[r],s=this.get(n),t.remove&&s&&(f[s.cid]=!0),(t.add&&!s||t.merge&&s)&&o.push(n);if(t.remove){r=0;for(i=this.models.length;r<i;r++)n=this.models[r],f[n.cid]||a.push(n)}return a.length&&this.remove(a,t),o.length&&this.add(o,t),this},reset:function(e,t){t||(t={}),t.parse&&(e=this.parse(e,t));for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models.slice(),this._reset(),e&&this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},fetch:function(e){e=e?u.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success;return e.success=function(e,n,r){e[r.update?"update":"reset"](n,r),t&&t(e,n,r)},this.sync("read",this,e)},create:function(e,t){t=t?u.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(e,t,i){i.wait&&n.add(e,i),r&&r(e,t,i)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models.length=0,this._byId={}},_prepareModel:function(e,t){if(e instanceof c)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:!1},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){("add"===e||"remove"===e)&&n!==this||("destroy"===e&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=u.isFunction(t)?t:function(e){return e.get(t)};return u.sortedIndex(this.models,e,r,n)}}),u.each("forEach each map collect reduce foldl inject reduceRight foldr find detect filter select reject every all some any include contains invoke max min toArray size first head take initial rest tail drop last without indexOf shuffle lastIndexOf isEmpty chain".split(" "),function(e){h.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}}),u.each(["groupBy","countBy","sortBy"],function(e){h.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var p=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},d=/\((.*?)\)/g,v=/(\(\?)?:\w+/g,m=/\*\w+/g,g=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(p.prototype,n,{initialize:function(){},route:function(e,t,n){return u.isRegExp(e)||(e=this._routeToRegExp(e)),n||(n=this[t]),o.history.route(e,u.bind(function(r){r=this._extractParameters(e,r),n&&n.apply(this,r),this.trigger.apply(this,["route:"+t].concat(r)),this.trigger("route",t,r),o.history.trigger("route",this,t,r)},this)),this},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(this.routes)for(var e,t=u.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(g,"\\$&").replace(d,"(?:$1)?").replace(v,function(e,t){return t?e:"([^/]+)"}).replace(m,"(.*?)"),RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}});var y=o.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},b=/^[#\/]|\s+$/g,w=/^\/+|\/+$/g,E=/msie [\w.]+/,S=/\/$/;y.started=!1,u.extend(y.prototype,n,{interval:50,getHash:function(e){return(e=(e||this).location.href.match(/#(.*)$/))?e[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(S,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(b,"")},start:function(e){if(y.started)throw Error("Backbone.history has already been started");y.started=!0,this.options=u.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.options.pushState||!this.history||!this.history.pushState),e=this.getFragment();var t=document.documentMode,t=E.exec(navigator.userAgent.toLowerCase())&&(!t||7>=t);this.root=("/"+this.root+"/").replace(w,"/"),t&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(e)),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!t?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=e,e=this.location,t=e.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!t)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&t&&e.hash&&(this.fragment=this.getHash().replace(b,""),this.history.replaceState({},document.title,this.root+this.fragment+e.search));if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),y.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe)));if(e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e);return u.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0})},navigate:function(e,t){if(!y.started)return!1;if(!t||!0===t)t={trigger:t};e=this.getFragment(e||"");if(this.fragment!==e){this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)}},_updateHash:function(e,t,n){n?(n=e.href.replace(/(javascript:|#).*$/,""),e.replace(n+"#"+t)):e.hash="#"+t}}),o.history=new y;var x=o.View=function(e){this.cid=u.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},T=/^(\S+)\s*(.*)$/,N="model collection el id attributes className tagName events".split(" ");u.extend(x.prototype,n,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el[0],!1!==t&&this.delegateEvents(),this},delegateEvents:function(e){if(e||(e=u.result(this,"events"))){this.undelegateEvents();for(var t in e){var n=e[t];u.isFunction(n)||(n=this[e[t]]);if(!n)throw Error('Method "'+e[t]+'" does not exist');var r=t.match(T),i=r[1],r=r[2],n=u.bind(n,this),i=i+(".delegateEvents"+this.cid);""===r?this.$el.on(i,n):this.$el.on(i,r,n)}}},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid)},_configure:function(e){this.options&&(e=u.extend({},u.result(this,"options"),e)),u.extend(this,u.pick(e,N)),this.options=e},_ensureElement:function(){if(this.el)this.setElement(u.result(this,"el"),!1);else{var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className")),e=o.$("<"+u.result(this,"tagName")+">").attr(e),this.setElement(e,!1)}}});var C={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.sync=function(e,t,n){var r=C[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=u.result(t,"url")||k()),null==n.data&&t&&("create"===e||"update"===e||"patch"===e)&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}"GET"!==i.type&&!n.emulateJSON&&(i.processData=!1);var a=n.success;n.success=function(e){a&&a(t,e,n),t.trigger("sync",t,e,n)};var f=n.error;return n.error=function(e){f&&f(t,e,n),t.trigger("error",t,e,n)},e=n.xhr=o.ajax(u.extend(i,n)),t.trigger("request",t,e,n),e},o.ajax=function(){return o.$.ajax.apply(o.$,arguments)},c.extend=h.extend=p.extend=x.extend=y.extend=function(e,t){var n=this,r;r=e&&u.has(e,"constructor")?e.constructor:function(){return n.apply(this,arguments)},u.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.extend(r.prototype,e),r.__super__=n.prototype,r};var k=function(){throw Error('A "url" property or function must be specified')}}.call(this),define("backbone",["underscore","jquery"],function(e){return function(){var t,n;return t||e.Backbone}}(this)),(window._gsQueue||(window._gsQueue=[])).push(function(){window._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,n){var r=function(e,t,r){n.call(this,e,t,r),this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0},i=function(e){return e.jquery||typeof e.each=="function"&&e[0]&&e[0].nodeType&&e[0].style},s=function(e){var t=[];return e.each(function(){t.push(this)}),t},o=r.prototype=n.to({},.1,{}),u=[];r.version="1.9.1",o.constructor=r,o.kill()._gc=!1,r.killTweensOf=r.killDelayedCallsTo=n.killTweensOf,r.getTweensOf=n.getTweensOf,r.ticker=n.ticker,o.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),n.prototype.invalidate.call(this)},o.updateTo=function(e,t){var r=this.ratio,i;t&&this.timeline&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(i in e)this.vars[i]=e[i];if(this._initted)if(t)this._initted=!1;else{this._notifyPluginsOfEnabled&&this._firstPT&&n._onPluginEvent("_onDisable",this);if(this._time/this._duration>.998){var s=this._time;this.render(0,!0,!1),this._initted=!1,this.render(s,!0,!1)}else if(this._time>0){this._initted=!1,this._init();var o=1/(1-r),u=this._firstPT,a;while(u)a=u.s+u.c,u.c*=o,u.s=a-u.c,u=u._next}}return this},o.render=function(e,t,n){var r=this._dirty?this.totalDuration():this._totalDuration,i=this._time,s=this._totalTime,o=this._cycle,a,f,l,c,h,p,d;if(e>=r)this._totalTime=r,this._cycle=this._repeat,this._yoyo&&(this._cycle&1)!==0?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=this._duration,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(a=!0,f="onComplete"),this._duration===0&&((e===0||this._rawPrevTime<0)&&this._rawPrevTime!==e&&(n=!0),this._rawPrevTime=e);else if(e<=0){this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0;if(s!==0||this._duration===0&&this._rawPrevTime>0)f="onReverseComplete",a=this._reversed;e<0?(this._active=!1,this._duration===0&&(this._rawPrevTime>=0&&(n=!0),this._rawPrevTime=e)):this._initted||(n=!0)}else{this._totalTime=this._time=e,this._repeat!==0&&(c=this._duration+this._repeatDelay,this._cycle=this._totalTime/c>>0,this._cycle!==0&&this._cycle===this._totalTime/c&&this._cycle--,this._time=this._totalTime-this._cycle*c,this._yoyo&&(this._cycle&1)!==0&&(this._time=this._duration-this._time),this._time>this._duration?this._time=this._duration:this._time<0&&(this._time=0));if(this._easeType){h=this._time/this._duration,p=this._easeType,d=this._easePower;if(p===1||p===3&&h>=.5)h=1-h;p===3&&(h*=2),d===1?h*=h:d===2?h*=h*h:d===3?h*=h*h*h:d===4&&(h*=h*h*h*h),p===1?this.ratio=1-h:p===2?this.ratio=h:this._time/this._duration<.5?this.ratio=h/2:this.ratio=1-h/2}else this.ratio=this._ease.getRatio(this._time/this._duration)}if(i===this._time&&!n){s!==this._totalTime&&this._onUpdate&&(t||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||u));return}if(!this._initted){this._init();if(!this._initted)return;this._time&&!a?this.ratio=this._ease.getRatio(this._time/this._duration):a&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(this._time===0?0:1))}this._active||this._paused||(this._active=!0),s===0&&(this._startAt&&this._startAt.render(e,t,n),this.vars.onStart&&(this._totalTime!==0||this._duration===0)&&(t||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||u))),l=this._firstPT;while(l)l.f?l.t[l.p](l.c*this.ratio+l.s):l.t[l.p]=l.c*this.ratio+l.s,l=l._next;this._onUpdate&&(e<0&&this._startAt&&this._startAt.render(e,t,n),t||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||u)),this._cycle!==o&&(t||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||u)),f&&(this._gc||(e<0&&this._startAt&&(this._onUpdate||this._startAt.render(e,t,n)),a&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),t||this.vars[f]&&this.vars[f].apply(this.vars[f+"Scope"]||this,this.vars[f+"Params"]||u)))},r.to=function(e,t,n){return new r(e,t,n)},r.from=function(e,t,n){return n.runBackwards=!0,n.immediateRender=n.immediateRender!=0,new r(e,t,n)},r.fromTo=function(e,t,n,i){return i.startAt=n,i.immediateRender=i.immediateRender!=0&&n.immediateRender!=0,new r(e,t,i)},r.staggerTo=r.allTo=function(e,t,o,a,f,l,c){a=a||0;var h=o.delay||0,p=[],d=function(){o.onComplete&&o.onComplete.apply(o.onCompleteScope||this,o.onCompleteParams||u),f.apply(c||this,l||u)},v,m,g,y;e instanceof Array||(typeof e=="string"&&(e=n.selector(e)||e),i(e)&&(e=s(e))),v=e.length;for(g=0;g<v;g++){m={};for(y in o)m[y]=o[y];m.delay=h,g===v-1&&f&&(m.onComplete=d),p[g]=new r(e[g],t,m),h+=a}return p},r.staggerFrom=r.allFrom=function(e,t,n,i,s,o,u){return n.runBackwards=!0,n.immediateRender=n.immediateRender!=0,r.staggerTo(e,t,n,i,s,o,u)},r.staggerFromTo=r.allFromTo=function(e,t,n,i,s,o,u,a){return i.startAt=n,i.immediateRender=i.immediateRender!=0&&n.immediateRender!=0,r.staggerTo(e,t,i,s,o,u,a)},r.delayedCall=function(e,t,n,i,s){return new r(t,0,{delay:e,onComplete:t,onCompleteParams:n,onCompleteScope:i,onReverseComplete:t,onReverseCompleteParams:n,onReverseCompleteScope:i,immediateRender:!1,useFrames:s,overwrite:0})},r.set=function(e,t){return new r(e,0,t)},r.isTweening=function(e){var t=n.getTweensOf(e),r=t.length,i;while(--r>-1){i=t[r];if(i._active||i._startTime===i._timeline._time&&i._timeline._active)return!0}return!1};var a=function(e,t){var r=[],i=0,s=e._first;while(s)s instanceof n?r[i++]=s:(t&&(r[i++]=s),r=r.concat(a(s,t)),i=r.length),s=s._next;return r},f=r.getAllTweens=function(t){return a(e._rootTimeline,t).concat(a(e._rootFramesTimeline,t))};r.killAll=function(e,n,r,i){n==null&&(n=!0),r==null&&(r=!0);var s=f(i!=0),o=s.length,u=n&&r&&i,a,l,c;for(c=0;c<o;c++){l=s[c];if(u||l instanceof t||(a=l.target===l.vars.onComplete)&&r||n&&!a)e?l.totalTime(l.totalDuration()):l._enabled(!1,!1)}},r.killChildTweensOf=function(e,t){if(e==null)return;var o=n._tweenLookup,u,a,f,l,c;typeof e=="string"&&(e=n.selector(e)||e),i(e)&&(e=s(e));if(e instanceof Array){l=e.length;while(--l>-1)r.killChildTweensOf(e[l],t);return}u=[];for(f in o){a=o[f].target.parentNode;while(a)a===e&&(u=u.concat(o[f].tweens)),a=a.parentNode}c=u.length;for(l=0;l<c;l++)t&&u[l].totalTime(u[l].totalDuration()),u[l]._enabled(!1,!1)};var l=function(e,n,r,i){n===undefined&&(n=!0),r===undefined&&(r=!0);var s=f(i),o=n&&r&&i,u=s.length,a,l;while(--u>-1)l=s[u],(o||l instanceof t||(a=l.target===l.vars.onComplete)&&r||n&&!a)&&l.paused(e)};return r.pauseAll=function(e,t,n){l(!0,e,t,n)},r.resumeAll=function(e,t,n){l(!1,e,t,n)},o.progress=function(e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&(this._cycle&1)!==0?1-e:e)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},o.totalProgress=function(e){return arguments.length?this.totalTime(this.totalDuration()*e,!1):this._totalTime/this.totalDuration()},o.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),e>this._duration&&(e=this._duration),this._yoyo&&(this._cycle&1)!==0?e=this._duration-e+this._cycle*(this._duration+this._repeatDelay):this._repeat!==0&&(e+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(e,t)):this._time},o.duration=function(t){return arguments.length?e.prototype.duration.call(this,t):this._duration},o.totalDuration=function(e){return arguments.length?this._repeat===-1?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=this._repeat===-1?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},o.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},o.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},o.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},r},!0),window._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,n){var r=function(e){t.call(this,e),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var n=this.vars,r=i.length,s,o;while(--r>-1){o=n[i[r]];if(o){s=o.length;while(--s>-1)o[s]==="{self}"&&(o=n[i[r]]=o.concat(),o[s]=this)}}n.tweens instanceof Array&&this.add(n.tweens,0,n.align,n.stagger)},i=["onStartParams","onUpdateParams","onCompleteParams","onReverseCompleteParams","onRepeatParams"],s=[],o=function(e){var t={},n;for(n in e)t[n]=e[n];return t},u=r.prototype=new t;return r.version="1.9.1",u.constructor=r,u.kill()._gc=!1,u.to=function(e,t,r,i){return this.add(new n(e,t,r),i)},u.from=function(e,t,r,i){return this.add(n.from(e,t,r),i)},u.fromTo=function(e,t,r,i,s){return this.add(n.fromTo(e,t,r,i),s)},u.staggerTo=function(e,t,i,s,u,a,f,l){var c=new r({onComplete:a,onCompleteParams:f,onCompleteScope:l}),h,p;typeof e=="string"&&(e=n.selector(e)||e),!(e instanceof Array)&&typeof e.each=="function"&&e[0]&&e[0].nodeType&&e[0].style&&(p=[],e.each(function(){p.push(this)}),e=p),s=s||0;for(h=0;h<e.length;h++)i.startAt&&(i.startAt=o(i.startAt)),c.add(new n(e[h],t,o(i)),h*s);return this.add(c,u)},u.staggerFrom=function(e,t,n,r,i,s,o,u){return n.immediateRender=n.immediateRender!=0,n.runBackwards=!0,this.staggerTo(e,t,n,r,i,s,o,u)},u.staggerFromTo=function(e,t,n,r,i,s,o,u,a){return r.startAt=n,r.immediateRender=r.immediateRender!=0&&n.immediateRender!=0,this.staggerTo(e,t,r,i,s,o,u,a)},u.call=function(e,t,r,i){return this.add(n.delayedCall(0,e,t,r),i)},u.set=function(e,t,r){return r=this._parseTimeOrLabel(r,0,!0),t.immediateRender==null&&(t.immediateRender=r===this._time&&!this._paused),this.add(new n(e,0,t),r)},r.exportRoot=function(e,t){e=e||{},e.smoothChildTiming==null&&(e.smoothChildTiming=!0);var i=new r(e),s=i._timeline,o,u;t==null&&(t=!0),s._remove(i,!0),i._startTime=0,i._rawPrevTime=i._time=i._totalTime=s._time,o=s._first;while(o)u=o._next,(!t||!(o instanceof n&&o.target===o.vars.onComplete))&&i.add(o,o._startTime-o._delay),o=u;return s.add(i,0),i},u.add=function(i,s,o,u){var a,f,l,c,h;typeof s!="number"&&(s=this._parseTimeOrLabel(s,0,!0,i));if(!(i instanceof e)){if(i instanceof Array){o=o||"normal",u=u||0,a=s,f=i.length;for(l=0;l<f;l++)(c=i[l])instanceof Array&&(c=new r({tweens:c})),this.add(c,a),typeof c!="string"&&typeof c!="function"&&(o==="sequence"?a=c._startTime+c.totalDuration()/c._timeScale:o==="start"&&(c._startTime-=c.delay())),a+=u;return this._uncache(!0)}if(typeof i=="string")return this.addLabel(i,s);if(typeof i!="function")throw"Cannot add "+i+" into the timeline: it is neither a tween, timeline, function, nor a string.";i=n.delayedCall(0,i)}t.prototype.add.call(this,i,s);if(this._gc&&!this._paused&&this._time===this._duration&&this._time<this.duration()){h=this;while(h._gc&&h._timeline)h._timeline.smoothChildTiming?h.totalTime(h._totalTime,!0):h._enabled(!0,!1),h=h._timeline}return this},u.remove=function(t){if(t instanceof e)return this._remove(t,!1);if(t instanceof Array){var n=t.length;while(--n>-1)this.remove(t[n]);return this}return typeof t=="string"?this.removeLabel(t):this.kill(null,t)},u.append=function(e,t){return this.add(e,this._parseTimeOrLabel(null,t,!0,e))},u.insert=u.insertMultiple=function(e,t,n,r){return this.add(e,t||0,n,r)},u.appendMultiple=function(e,t,n,r){return this.add(e,this._parseTimeOrLabel(null,t,!0,e),n,r)},u.addLabel=function(e,t){return this._labels[e]=this._parseTimeOrLabel(t),this},u.removeLabel=function(e){return delete this._labels[e],this},u.getLabelTime=function(e){return this._labels[e]!=null?this._labels[e]:-1},u._parseTimeOrLabel=function(t,n,r,i){var s;if(i instanceof e&&i.timeline===this)this.remove(i);else if(i instanceof Array){s=i.length;while(--s>-1)i[s]instanceof e&&i[s].timeline===this&&this.remove(i[s])}if(typeof n=="string")return this._parseTimeOrLabel(n,r&&typeof t=="number"&&this._labels[n]==null?t-this.duration():0,r);n=n||0;if(typeof t!="string"||!isNaN(t)&&this._labels[t]==null)t==null&&(t=this.duration());else{s=t.indexOf("=");if(s===-1)return this._labels[t]==null?r?this._labels[t]=this.duration()+n:n:this._labels[t]+n;n=parseInt(t.charAt(s-1)+"1",10)*Number(t.substr(s+1)),t=s>1?this._parseTimeOrLabel(t.substr(0,s-1),0,r):this.duration()}return Number(t)+n},u.seek=function(e,t){return this.totalTime(typeof e=="number"?e:this._parseTimeOrLabel(e),t!==!1)},u.stop=function(){return this.paused(!0)},u.gotoAndPlay=function(e,t){return this.play(e,t)},u.gotoAndStop=function(e,t){return this.pause(e,t)},u.render=function(e,t,n){this._gc&&this._enabled(!0,!1),this._active=!this._paused;var r=this._dirty?this.totalDuration():this._totalDuration,i=this._time,o=this._startTime,u=this._timeScale,a=this._paused,f,l,c,h,p;if(e>=r)this._totalTime=this._time=r,this._reversed||this._hasPausedChild()||(l=!0,h="onComplete",this._duration===0&&(e===0||this._rawPrevTime<0)&&this._rawPrevTime!==e&&(p=!0)),this._rawPrevTime=e,e=r+1e-6;else if(e<=0){this._totalTime=this._time=0;if(i!==0||this._duration===0&&this._rawPrevTime>0)h="onReverseComplete",l=this._reversed;e<0?(this._active=!1,this._duration===0&&this._rawPrevTime>=0&&(p=!0)):this._initted||(p=!0),this._rawPrevTime=e,e=-0.000001}else this._totalTime=this._time=this._rawPrevTime=e;if(this._time===i&&!n&&!p)return;this._initted||(this._initted=!0),i===0&&this.vars.onStart&&this._time!==0&&(t||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||s));if(this._time>i){f=this._first;while(f){c=f._next;if(this._paused&&!a)break;if(f._active||f._startTime<=this._time&&!f._paused&&!f._gc)f._reversed?f.render((f._dirty?f.totalDuration():f._totalDuration)-(e-f._startTime)*f._timeScale,t,n):f.render((e-f._startTime)*f._timeScale,t,n);f=c}}else{f=this._last;while(f){c=f._prev;if(this._paused&&!a)break;if(f._active||f._startTime<=i&&!f._paused&&!f._gc)f._reversed?f.render((f._dirty?f.totalDuration():f._totalDuration)-(e-f._startTime)*f._timeScale,t,n):f.render((e-f._startTime)*f._timeScale,t,n);f=c}}this._onUpdate&&(t||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||s)),h&&!this._gc&&(o===this._startTime||u!==this._timeScale)&&(this._time===0||r>=this.totalDuration())&&(l&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),t||this.vars[h]&&this.vars[h].apply(this.vars[h+"Scope"]||this,this.vars[h+"Params"]||s))},u._hasPausedChild=function(){var e=this._first;while(e){if(e._paused||e instanceof r&&e._hasPausedChild())return!0;e=e._next}return!1},u.getChildren=function(e,t,r,i){i=i||-9999999999;var s=[],o=this._first,u=0;while(o)o._startTime<i||(o instanceof n?t!==!1&&(s[u++]=o):(r!==!1&&(s[u++]=o),e!==!1&&(s=s.concat(o.getChildren(!0,t,r)),u=s.length))),o=o._next;return s},u.getTweensOf=function(e,t){var r=n.getTweensOf(e),i=r.length,s=[],o=0;while(--i>-1)if(r[i].timeline===this||t&&this._contains(r[i]))s[o++]=r[i];return s},u._contains=function(e){var t=e.timeline;while(t){if(t===this)return!0;t=t.timeline}return!1},u.shiftChildren=function(e,t,n){n=n||0;var r=this._first,i=this._labels,s;while(r)r._startTime>=n&&(r._startTime+=e),r=r._next;if(t)for(s in i)i[s]>=n&&(i[s]+=e);return this._uncache(!0)},u._kill=function(e,t){if(!e&&!t)return this._enabled(!1,!1);var n=t?this.getTweensOf(t):this.getChildren(!0,!0,!1),r=n.length,i=!1;while(--r>-1)n[r]._kill(e,t)&&(i=!0);return i},u.clear=function(e){var t=this.getChildren(!1,!0,!0),n=t.length;this._time=this._totalTime=0;while(--n>-1)t[n]._enabled(!1,!1);return e!==!1&&(this._labels={}),this._uncache(!0)},u.invalidate=function(){var e=this._first;while(e)e.invalidate(),e=e._next;return this},u._enabled=function(e,n){if(e===this._gc){var r=this._first;while(r)r._enabled(e,!0),r=r._next}return t.prototype._enabled.call(this,e,n)},u.progress=function(e){return arguments.length?this.totalTime(this.duration()*e,!1):this._time/this.duration()},u.duration=function(e){return arguments.length?(this.duration()!==0&&e!==0&&this.timeScale(this._duration/e),this):(this._dirty&&this.totalDuration(),this._duration)},u.totalDuration=function(e){if(!arguments.length){if(this._dirty){var t=0,n=this._last,r=999999999999,i,s;while(n)i=n._prev,n._dirty&&n.totalDuration(),n._startTime>r&&this._sortChildren&&!n._paused?this.add(n,n._startTime-n._delay):r=n._startTime,n._startTime<0&&!n._paused&&(t-=n._startTime,this._timeline.smoothChildTiming&&(this._startTime+=n._startTime/this._timeScale),this.shiftChildren(-n._startTime,!1,-9999999999),r=0),s=n._startTime+n._totalDuration/n._timeScale,s>t&&(t=s),n=i;this._duration=this._totalDuration=t,this._dirty=!1}return this._totalDuration}return this.totalDuration()!==0&&e!==0&&this.timeScale(this._totalDuration/e),this},u.usesFrames=function(){var t=this._timeline;while(t._timeline)t=t._timeline;return t===e._rootFramesTimeline},u.rawTime=function(){return this._paused||this._totalTime!==0&&this._totalTime!==this._totalDuration?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},r},!0),window._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(e,t,n){var r=function(t){e.call(this,t),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._dirty=!0},i=[],s=new n(null,null,1,0),o=function(e){while(e){if(e._paused)return!0;e=e._timeline}return!1},u=r.prototype=new e;return u.constructor=r,u.kill()._gc=!1,r.version="1.9.1",u.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),e.prototype.invalidate.call(this)},u.addCallback=function(e,n,r,i){return this.add(t.delayedCall(0,e,r,i),n)},u.removeCallback=function(e,t){if(t==null)this._kill(null,e);else{var n=this.getTweensOf(e,!1),r=n.length,i=this._parseTimeOrLabel(t);while(--r>-1)n[r]._startTime===i&&n[r]._enabled(!1,!1)}return this},u.tweenTo=function(e,n){n=n||{};var r={ease:s,overwrite:2,useFrames:this.usesFrames(),immediateRender:!1},o,u;for(o in n)r[o]=n[o];return r.time=this._parseTimeOrLabel(e),u=new t(this,Math.abs(Number(r.time)-this._time)/this._timeScale||.001,r),r.onStart=function(){u.target.paused(!0),u.vars.time!==u.target.time()&&u.duration(Math.abs(u.vars.time-u.target.time())/u.target._timeScale),n.onStart&&n.onStart.apply(n.onStartScope||u,n.onStartParams||i)},u},u.tweenFromTo=function(e,t,n){n=n||{},n.startAt={time:this._parseTimeOrLabel(e)};var r=this.tweenTo(t,n);return r.duration(Math.abs(r.vars.time-r.vars.startAt.time)/this._timeScale||.001)},u.render=function(e,t,n){this._gc&&this._enabled(!0,!1),this._active=!this._paused;var r=this._dirty?this.totalDuration():this._totalDuration,s=this._duration,o=this._time,u=this._totalTime,a=this._startTime,f=this._timeScale,l=this._rawPrevTime,c=this._paused,h=this._cycle,p,d,v,m,g;if(e>=r)this._locked||(this._totalTime=r,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(d=!0,m="onComplete",s===0&&(e===0||this._rawPrevTime<0)&&this._rawPrevTime!==e&&(g=!0)),this._rawPrevTime=e,this._yoyo&&(this._cycle&1)!==0?(this._time=0,e=-0.000001):(this._time=s,e=s+1e-6);else if(e<=0){this._locked||(this._totalTime=this._cycle=0),this._time=0;if(o!==0||s===0&&this._rawPrevTime>0&&!this._locked)m="onReverseComplete",d=this._reversed;e<0?(this._active=!1,s===0&&this._rawPrevTime>=0&&(g=!0)):this._initted||(g=!0),this._rawPrevTime=e,e=s===0?0:-0.000001}else{this._time=this._rawPrevTime=e;if(!this._locked){this._totalTime=e;if(this._repeat!==0){var y=s+this._repeatDelay;this._cycle=this._totalTime/y>>0,this._cycle!==0&&this._cycle===this._totalTime/y&&this._cycle--,this._time=this._totalTime-this._cycle*y,this._yoyo&&(this._cycle&1)!==0&&(this._time=s-this._time),this._time>s?(this._time=s,e=s+1e-6):this._time<0?this._time=e=0:e=this._time}}}if(this._cycle!==h&&!this._locked){var b=this._yoyo&&(h&1)!==0,w=b===(this._yoyo&&(this._cycle&1)!==0),E=this._totalTime,S=this._cycle,x=this._rawPrevTime,T=this._time;this._totalTime=h*s,this._cycle<h?b=!b:this._totalTime+=s,this._time=o,this._rawPrevTime=s===0?l-1e-5:l,this._cycle=h,this._locked=!0,o=b?0:s,this.render(o,t,s===0),t||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||i),w&&(o=b?s+1e-6:-0.000001,this.render(o,!0,!1)),this._time=T,this._totalTime=E,this._cycle=S,this._rawPrevTime=x,this._locked=!1}if(this._time===o&&!n&&!g){u!==this._totalTime&&this._onUpdate&&(t||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||i));return}this._initted||(this._initted=!0),u===0&&this.vars.onStart&&this._totalTime!==0&&(t||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||i));if(this._time>o){p=this._first;while(p){v=p._next;if(this._paused&&!c)break;if(p._active||p._startTime<=this._time&&!p._paused&&!p._gc)p._reversed?p.render((p._dirty?p.totalDuration():p._totalDuration)-(e-p._startTime)*p._timeScale,t,n):p.render((e-p._startTime)*p._timeScale,t,n);p=v}}else{p=this._last;while(p){v=p._prev;if(this._paused&&!c)break;if(p._active||p._startTime<=o&&!p._paused&&!p._gc)p._reversed?p.render((p._dirty?p.totalDuration():p._totalDuration)-(e-p._startTime)*p._timeScale,t,n):p.render((e-p._startTime)*p._timeScale,t,n);p=v}}this._onUpdate&&(t||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||i)),m&&(this._locked||!this._gc&&(a===this._startTime||f!==this._timeScale)&&(this._time===0||r>=this.totalDuration())&&(d&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),t||this.vars[m]&&this.vars[m].apply(this.vars[m+"Scope"]||this,this.vars[m+"Params"]||i)))},u.getActive=function(e,t,n){e==null&&(e=!0),t==null&&(t=!0),n==null&&(n=!1);var r=[],i=this.getChildren(e,t,n),s=0,u=i.length,a,f;for(a=0;a<u;a++)f=i[a],f._paused||f._timeline._time>=f._startTime&&f._timeline._time<f._startTime+f._totalDuration/f._timeScale&&(o(f._timeline)||(r[s++]=f));return r},u.getLabelAfter=function(e){e||e!==0&&(e=this._time);var t=this.getLabelsArray(),n=t.length,r;for(r=0;r<n;r++)if(t[r].time>e)return t[r].name;return null},u.getLabelBefore=function(e){e==null&&(e=this._time);var t=this.getLabelsArray(),n=t.length;while(--n>-1)if(t[n].time<e)return t[n].name;return null},u.getLabelsArray=function(){var e=[],t=0,n;for(n in this._labels)e[t++]={time:this._labels[n],name:n};return e.sort(function(e,t){return e.time-t.time}),e},u.progress=function(e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&(this._cycle&1)!==0?1-e:e)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},u.totalProgress=function(e){return arguments.length?this.totalTime(this.totalDuration()*e,!1):this._totalTime/this.totalDuration()},u.totalDuration=function(t){return arguments.length?this._repeat===-1?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(e.prototype.totalDuration.call(this),this._totalDuration=this._repeat===-1?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},u.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),e>this._duration&&(e=this._duration),this._yoyo&&(this._cycle&1)!==0?e=this._duration-e+this._cycle*(this._duration+this._repeatDelay):this._repeat!==0&&(e+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(e,t)):this._time},u.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},u.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},u.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},u.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.getLabelBefore(this._time+1e-8)},r},!0),function(){var e=180/Math.PI,t=Math.PI/180,n=[],r=[],i=[],s={},o=function(e,t,n,r){this.a=e,this.b=t,this.c=n,this.d=r,this.da=r-e,this.ca=n-e,this.ba=t-e},u=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",a=function(e,t,n,r){var i={a:e},s={},o={},u={c:r},a=(e+t)/2,f=(t+n)/2,l=(n+r)/2,c=(a+f)/2,h=(f+l)/2,p=(h-c)/8;return i.b=a+(e-a)/4,s.b=c+p,i.c=s.a=(i.b+s.b)/2,s.c=o.a=(c+h)/2,o.b=h-p,u.b=l+(r-l)/4,o.c=u.a=(o.b+u.b)/2,[i,s,o,u]},f=function(e,t,s,o,u){var f=e.length-1,l=0,c=e[0].a,h,p,d,v,m,g,y,b,w,E,S,x,T;for(h=0;h<f;h++)m=e[l],p=m.a,d=m.d,v=e[l+1].d,u?(S=n[h],x=r[h],T=(x+S)*t*.25/(o?.5:i[h]||.5),g=d-(d-p)*(o?t*.5:T/S),y=d+(v-d)*(o?t*.5:T/x),b=d-(g+(y-g)*(S*3/(S+x)+.5)/4)):(g=d-(d-p)*t*.5,y=d+(v-d)*t*.5,b=d-(g+y)/2),g+=b,y+=b,m.c=w=g,h!==0?m.b=c:m.b=c=m.a+(m.c-m.a)*.6,m.da=d-p,m.ca=w-p,m.ba=c-p,s?(E=a(p,c,w,d),e.splice(l,1,E[0],E[1],E[2],E[3]),l+=4):l++,c=y;m=e[l],m.b=c,m.c=c+(m.d-c)*.4,m.da=m.d-m.a,m.ca=m.c-m.a,m.ba=c-m.a,s&&(E=a(m.a,c,m.c,m.d),e.splice(l,1,E[0],E[1],E[2],E[3]))},l=function(e,t,i,s){var u=[],a,f,l,c,h,p;if(s){e=[s].concat(e),f=e.length;while(--f>-1)typeof (p=e[f][t])=="string"&&p.charAt(1)==="="&&(e[f][t]=s[t]+Number(p.charAt(0)+p.substr(2)))}a=e.length-2;if(a<0)return u[0]=new o(e[0][t],0,0,e[a<-1?0:1][t]),u;for(f=0;f<a;f++)l=e[f][t],c=e[f+1][t],u[f]=new o(l,0,0,c),i&&(h=e[f+2][t],n[f]=(n[f]||0)+(c-l)*(c-l),r[f]=(r[f]||0)+(h-c)*(h-c));return u[f]=new o(e[f][t],0,0,e[f+1][t]),u},c=function(e,t,o,a,c,h){var p={},d=[],v=h||e[0],m,g,y,b,w,E,S,x;c=typeof c=="string"?","+c+",":u,t==null&&(t=1);for(g in e[0])d.push(g);if(e.length>1){x=e[e.length-1],S=!0,m=d.length;while(--m>-1){g=d[m];if(Math.abs(v[g]-x[g])>.05){S=!1;break}}S&&(e=e.concat(),h&&e.unshift(h),e.push(e[1]),h=e[e.length-3])}n.length=r.length=i.length=0,m=d.length;while(--m>-1)g=d[m],s[g]=c.indexOf(","+g+",")!==-1,p[g]=l(e,g,s[g],h);m=n.length;while(--m>-1)n[m]=Math.sqrt(n[m]),r[m]=Math.sqrt(r[m]);if(!a){m=d.length;while(--m>-1)if(s[g]){y=p[d[m]],E=y.length-1;for(b=0;b<E;b++)w=y[b+1].da/r[b]+y[b].da/n[b],i[b]=(i[b]||0)+w*w}m=i.length;while(--m>-1)i[m]=Math.sqrt(i[m])}m=d.length,b=o?4:1;while(--m>-1)g=d[m],y=p[g],f(y,t,o,a,s[g]),S&&(y.splice(0,b),y.splice(y.length-b,b));return p},h=function(e,t,n){t=t||"soft";var r={},i=t==="cubic"?3:2,s=t==="soft",u=[],a,f,l,c,h,p,d,v,m,g,y;s&&n&&(e=[n].concat(e));if(e==null||e.length<i+1)throw"invalid Bezier data";for(m in e[0])u.push(m);p=u.length;while(--p>-1){m=u[p],r[m]=h=[],g=0,v=e.length;for(d=0;d<v;d++)a=n==null?e[d][m]:typeof (y=e[d][m])=="string"&&y.charAt(1)==="="?n[m]+Number(y.charAt(0)+y.substr(2)):Number(y),s&&d>1&&d<v-1&&(h[g++]=(a+h[g-2])/2),h[g++]=a;v=g-i+1,g=0;for(d=0;d<v;d+=i)a=h[d],f=h[d+1],l=h[d+2],c=i===2?0:h[d+3],h[g++]=y=i===3?new o(a,f,l,c):new o(a,(2*f+a)/3,(2*f+l)/3,l);h.length=g}return r},p=function(e,t,n){var r=1/n,i=e.length,s,o,u,a,f,l,c,h,p,d,v;while(--i>-1){d=e[i],u=d.a,a=d.d-u,f=d.c-u,l=d.b-u,s=o=0;for(h=1;h<=n;h++)c=r*h,p=1-c,s=o-(o=(c*c*a+3*p*(c*f+p*l))*c),v=i*n+h-1,t[v]=(t[v]||0)+s*s}},d=function(e,t){t=t>>0||6;var n=[],r=[],i=0,s=0,o=t-1,u=[],a=[],f,l,c,h;for(f in e)p(e[f],n,t);c=n.length;for(l=0;l<c;l++)i+=Math.sqrt(n[l]),h=l%t,a[h]=i,h===o&&(s+=i,h=l/t>>0,u[h]=a,r[h]=s,i=0,a=[]);return{length:s,lengths:r,segments:u}},v=window._gsDefine.plugin({propName:"bezier",priority:-1,API:2,init:function(e,t,n){this._target=e,t instanceof Array&&(t={values:t}),this._func={},this._round={},this._props=[],this._timeRes=t.timeResolution==null?6:parseInt(t.timeResolution,10);var r=t.values||[],i={},s=r[0],o=t.autoRotate||n.vars.orientToBezier,u,a,f,l,p;this._autoRotate=o?o instanceof Array?o:[["x","y","rotation",o===!0?0:Number(o)||0]]:null;for(u in s)this._props.push(u);f=this._props.length;while(--f>-1)u=this._props[f],this._overwriteProps.push(u),a=this._func[u]=typeof e[u]=="function",i[u]=a?e[u.indexOf("set")||typeof e["get"+u.substr(3)]!="function"?u:"get"+u.substr(3)]():parseFloat(e[u]),p||i[u]!==r[0][u]&&(p=i);this._beziers=t.type!=="cubic"&&t.type!=="quadratic"&&t.type!=="soft"?c(r,isNaN(t.curviness)?1:t.curviness,!1,t.type==="thruBasic",t.correlate,p):h(r,t.type,i),this._segCount=this._beziers[u].length;if(this._timeRes){var v=d(this._beziers,this._timeRes);this._length=v.length,this._lengths=v.lengths,this._segments=v.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(o=this._autoRotate){o[0]instanceof Array||(this._autoRotate=o=[o]),f=o.length;while(--f>-1)for(l=0;l<3;l++)u=o[f][l],this._func[u]=typeof e[u]=="function"?e[u.indexOf("set")||typeof e["get"+u.substr(3)]!="function"?u:"get"+u.substr(3)]:!1}return!0},set:function(t){var n=this._segCount,r=this._func,i=this._target,s,o,u,a,f,l,c,h,p,d;if(!this._timeRes)s=t<0?0:t>=1?n-1:n*t>>0,l=(t-s*(1/n))*n;else{p=this._lengths,d=this._curSeg,t*=this._length,u=this._li;if(t>this._l2&&u<n-1){h=n-1;while(u<h&&(this._l2=p[++u])<=t);this._l1=p[u-1],this._li=u,this._curSeg=d=this._segments[u],this._s2=d[this._s1=this._si=0]}else if(t<this._l1&&u>0){while(u>0&&(this._l1=p[--u])>=t);u===0&&t<this._l1?this._l1=0:u++,this._l2=p[u],this._li=u,this._curSeg=d=this._segments[u],this._s1=d[(this._si=d.length-1)-1]||0,this._s2=d[this._si]}s=u,t-=this._l1,u=this._si;if(t>this._s2&&u<d.length-1){h=d.length-1;while(u<h&&(this._s2=d[++u])<=t);this._s1=d[u-1],this._si=u}else if(t<this._s1&&u>0){while(u>0&&(this._s1=d[--u])>=t);u===0&&t<this._s1?this._s1=0:u++,this._s2=d[u],this._si=u}l=(u+(t-this._s1)/(this._s2-this._s1))*this._prec}o=1-l,u=this._props.length;while(--u>-1)a=this._props[u],f=this._beziers[a][s],c=(l*l*f.da+3*o*(l*f.ca+o*f.ba))*l+f.a,this._round[a]&&(c=c+(c>0?.5:-0.5)>>0),r[a]?i[a](c):i[a]=c;if(this._autoRotate){var v=this._autoRotate,m,g,y,b,w,E,S;u=v.length;while(--u>-1)a=v[u][2],E=v[u][3]||0,S=v[u][4]===!0?1:e,f=this._beziers[v[u][0]][s],m=this._beziers[v[u][1]][s],g=f.a+(f.b-f.a)*l,b=f.b+(f.c-f.b)*l,g+=(b-g)*l,b+=(f.c+(f.d-f.c)*l-b)*l,y=m.a+(m.b-m.a)*l,w=m.b+(m.c-m.b)*l,y+=(w-y)*l,w+=(m.c+(m.d-m.c)*l-w)*l,c=Math.atan2(w-y,b-g)*S+E,r[a]?r[a].call(i,c+3.1415):i[a]=c+3.1415}}}),m=v.prototype;v.bezierThrough=c,v.cubicToQuadratic=a,v._autoCSS=!0,v.quadraticToCubic=function(e,t,n){return new o(e,(2*t+e)/3,(2*t+n)/3,n)},v._cssRegister=function(){var e=window._gsDefine.globals.CSSPlugin;if(!e)return;var n=e._internals,r=n._parseToProxy,i=n._setPluginRatio,s=n.CSSPropTween;n._registerComplexSpecialProp("bezier",{parser:function(e,n,o,u,a,f){n instanceof Array&&(n={values:n}),f=new v;var l=n.values,c=l.length-1,h=[],p={},d,m,g;if(c<0)return a;for(d=0;d<=c;d++)g=r(e,l[d],u,a,f,c!==d),h[d]=g.end;for(m in n)p[m]=n[m];return p.values=h,a=new s(e,"bezier",0,0,g.pt,2),a.data=g,a.plugin=f,a.setRatio=i,p.autoRotate===0&&(p.autoRotate=!0),p.autoRotate&&!(p.autoRotate instanceof Array)&&(d=p.autoRotate===!0?0:Number(p.autoRotate)*t,p.autoRotate=g.end.left!=null?[["left","top","rotation",d,!0]]:g.end.x!=null?[["x","y","rotation",d,!0]]:!1),p.autoRotate&&(u._transform||u._enableTransforms(!1),g.autoRotate=u._target._gsTransform),f._onInitTween(g.proxy,p,u._tween),a}})},m._roundProps=function(e,t){var n=this._overwriteProps,r=n.length;while(--r>-1)if(e[n[r]]||e.bezier||e.bezierThrough)this._round[n[r]]=t},m._kill=function(e){var t=this._props,n,r;for(n in this._beziers)if(n in e){delete this._beziers[n],delete this._func[n],r=t.length;while(--r>-1)t[r]===n&&t.splice(r,1)}return this._super._kill.call(this,e)}}(),window._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(e,t){var n=function(){e.call(this,"css"),this._overwriteProps.length=0},r,i,s,o,u={},a=n.prototype=new e("css");a.constructor=n,n.version="1.9.1",n.API=2,n.defaultTransformPerspective=0,a="px",n.suffixMap={top:a,right:a,bottom:a,left:a,width:a,height:a,fontSize:a,padding:a,margin:a,perspective:a};var f=/(?:\d|\-\d|\.\d|\-\.\d)+/g,l=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,c=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,h=/[^\d\-\.]/g,p=/(?:\d|\-|\+|=|#|\.)*/g,d=/opacity *= *([^)]*)/,v=/opacity:([^;]*)/,m=/alpha\(opacity *=.+?\)/i,g=/([A-Z])/g,y=/-([a-z])/gi,b=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,w=function(e,t){return t.toUpperCase()},E=/(?:Left|Right|Width)/i,S=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,x=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,T=/,(?=[^\)]*(?:\(|$))/gi,N=Math.PI/180,C=180/Math.PI,k={},L=document,A=L.createElement("div"),O=L.createElement("img"),M=n._internals={_specialProps:u},_=navigator.userAgent,D,P,H,B,j,F,I=function(){var e=_.indexOf("Android"),t=L.createElement("div"),n;return H=_.indexOf("Safari")!==-1&&_.indexOf("Chrome")===-1&&(e===-1||Number(_.substr(e+8,1))>3),j=H&&Number(_.substr(_.indexOf("Version/")+8,1))<6,B=_.indexOf("Firefox")!==-1,/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(_),F=parseFloat(RegExp.$1),t.innerHTML="<a style='top:1px;opacity:.55;'>a</a>",n=t.getElementsByTagName("a")[0],n?/^0.55/.test(n.style.opacity):!1}(),q=function(e){return d.test(typeof e=="string"?e:(e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100:1},R=function(e){window.console&&console.log(e)},U="",z="",W=function(e,t){t=t||A;var n=t.style,r,i;if(n[e]!==undefined)return e;e=e.charAt(0).toUpperCase()+e.substr(1),r=["O","Moz","ms","Ms","Webkit"],i=5;while(--i>-1&&n[r[i]+e]===undefined);return i>=0?(z=i===3?"ms":r[i],U="-"+z.toLowerCase()+"-",z+e):null},X=L.defaultView?L.defaultView.getComputedStyle:function(){},V=n.getStyle=function(e,t,n,r,i){var s;return!I&&t==="opacity"?q(e):(!r&&e.style[t]?s=e.style[t]:(n=n||X(e,null))?(e=n.getPropertyValue(t.replace(g,"-$1").toLowerCase()),s=e||n.length?e:n[t]):e.currentStyle&&(n=e.currentStyle,s=n[t]),i==null||!!s&&s!=="none"&&s!=="auto"&&s!=="auto auto"?s:i)},$=function(e,t,n){var r={},i=e._gsOverwrittenClassNamePT,s,o;if(i&&!n){while(i)i.setRatio(0),i=i._next;e._gsOverwrittenClassNamePT=null}if(t=t||X(e,null))if(s=t.length)while(--s>-1)r[t[s].replace(y,w)]=t.getPropertyValue(t[s]);else for(s in t)r[s]=t[s];else if(t=e.currentStyle||e.style)for(s in t)r[s.replace(y,w)]=t[s];return I||(r.opacity=q(e)),o=xt(e,t,!1),r.rotation=o.rotation*C,r.skewX=o.skewX*C,r.scaleX=o.scaleX,r.scaleY=o.scaleY,r.x=o.x,r.y=o.y,St&&(r.z=o.z,r.rotationX=o.rotationX*C,r.rotationY=o.rotationY*C,r.scaleZ=o.scaleZ),r.filters&&delete r.filters,r},J=function(e,t,n,r){var i={},s=e.style,o,u,a;for(u in n)u!=="cssText"&&u!=="length"&&isNaN(u)&&t[u]!==(o=n[u])&&u.indexOf("Origin")===-1&&(typeof o=="number"||typeof o=="string")&&(i[u]=o!==""&&o!=="auto"&&o!=="none"||typeof t[u]!="string"||t[u].replace(h,"")===""?o:0,s[u]!==undefined&&(a=new lt(s,u,s[u],a)));if(r)for(u in r)u!=="className"&&(i[u]=r[u]);return{difs:i,firstMPT:a}},K={width:["Left","Right"],height:["Top","Bottom"]},Q=["marginLeft","marginRight","marginTop","marginBottom"],G=function(e,t,n){var r=parseFloat(t==="width"?e.offsetWidth:e.offsetHeight),i=K[t],s=i.length;n=n||X(e,null);while(--s>-1)r-=parseFloat(V(e,"padding"+i[s],n,!0))||0,r-=parseFloat(V(e,"border"+i[s]+"Width",n,!0))||0;return r},Y=function(e,t,n,r,i){if(r==="px"||!r)return n;if(r==="auto"||!n)return 0;var s=E.test(t),o=e,u=A.style,a=n<0,f;return a&&(n=-n),r==="%"&&t.indexOf("border")!==-1?f=n/100*(s?e.clientWidth:e.clientHeight):(u.cssText="border-style:solid; border-width:0; position:absolute; line-height:0;",r==="%"||!o.appendChild?(o=e.parentNode||L.body,u[s?"width":"height"]=n+r):u[s?"borderLeftWidth":"borderTopWidth"]=n+r,o.appendChild(A),f=parseFloat(A[s?"offsetWidth":"offsetHeight"]),o.removeChild(A),f===0&&!i&&(f=Y(e,t,n,r,!0))),a?-f:f},Z=function(e,t){if(e==null||e===""||e==="auto"||e==="auto auto")e="0 0";var n=e.split(" "),r=e.indexOf("left")!==-1?"0%":e.indexOf("right")!==-1?"100%":n[0],i=e.indexOf("top")!==-1?"0%":e.indexOf("bottom")!==-1?"100%":n[1];i==null?i="0":i==="center"&&(i="50%");if(r==="center"||isNaN(parseFloat(r)))r="50%";return t&&(t.oxp=r.indexOf("%")!==-1,t.oyp=i.indexOf("%")!==-1,t.oxr=r.charAt(1)==="=",t.oyr=i.charAt(1)==="=",t.ox=parseFloat(r.replace(h,"")),t.oy=parseFloat(i.replace(h,""))),r+" "+i+(n.length>2?" "+n[2]:"")},et=function(e,t){return typeof e=="string"&&e.charAt(1)==="="?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2)):parseFloat(e)-parseFloat(t)},tt=function(e,t){return e==null?t:typeof e=="string"&&e.charAt(1)==="="?parseInt(e.charAt(0)+"1",10)*Number(e.substr(2))+t:parseFloat(e)},nt=function(e,t,n,r){var i=1e-6,s,o,u,a,f;return e==null?f=t:typeof e=="number"?f=e*N:(s=Math.PI*2,o=e.split("_"),u=Number(o[0].replace(h,""))*(e.indexOf("rad")===-1?N:1)-(e.charAt(1)==="="?0:t),a=o[1],a&&r&&(r[n]=t+u),a==="short"?(u%=s,u!==u%(s/2)&&(u=u<0?u+s:u-s)):a==="cw"&&u<0?u=(u+s*9999999999)%s-(u/s|0)*s:a==="ccw"&&u>0&&(u=(u-s*9999999999)%s-(u/s|0)*s),f=t+u),f<i&&f>-i&&(f=0),f},rt={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},it=function(e,t,n){return e=e<0?e+1:e>1?e-1:e,(e*6<1?t+(n-t)*e*6:e<.5?n:e*3<2?t+(n-t)*(2/3-e)*6:t)*255+.5|0},st=function(e){var t,n,r,i,s,o;return!e||e===""?rt.black:typeof e=="number"?[e>>16,e>>8&255,e&255]:(e.charAt(e.length-1)===","&&(e=e.substr(0,e.length-1)),rt[e]?rt[e]:e.charAt(0)==="#"?(e.length===4&&(t=e.charAt(1),n=e.charAt(2),r=e.charAt(3),e="#"+t+t+n+n+r+r),e=parseInt(e.substr(1),16),[e>>16,e>>8&255,e&255]):e.substr(0,3)==="hsl"?(e=e.match(f),i=Number(e[0])%360/360,s=Number(e[1])/100,o=Number(e[2])/100,n=o<=.5?o*(s+1):o+s-o*s,t=o*2-n,e.length>3&&(e[3]=Number(e[3])),e[0]=it(i+1/3,t,n),e[1]=it(i,t,n),e[2]=it(i-1/3,t,n),e):(e=e.match(f)||rt.transparent,e[0]=Number(e[0]),e[1]=Number(e[1]),e[2]=Number(e[2]),e.length>3&&(e[3]=Number(e[3])),e))},ot="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(a in rt)ot+="|"+a+"\\b";ot=new RegExp(ot+")","gi");var ut=function(e,t,n,r){if(e==null)return function(e){return e};var i=t?(e.match(ot)||[""])[0]:"",s=e.split(i).join("").match(c)||[],o=e.substr(0,e.indexOf(s[0])),u=e.charAt(e.length-1)===")"?")":"",a=e.indexOf(" ")!==-1?" ":",",l=s.length,h=l>0?s[0].replace(f,""):"",p;return l?t?(p=function(e){var t,f,d,v;if(typeof e=="number")e+=h;else if(r&&T.test(e)){v=e.replace(T,"|").split("|");for(d=0;d<v.length;d++)v[d]=p(v[d]);return v.join(",")}t=(e.match(ot)||[i])[0],f=e.split(t).join("").match(c)||[],d=f.length;if(l>d--)while(++d<l)f[d]=n?f[(d-1)/2>>0]:s[d];return o+f.join(a)+a+t+u+(e.indexOf("inset")!==-1?" inset":"")},p):(p=function(e){var t,i,f;if(typeof e=="number")e+=h;else if(r&&T.test(e)){i=e.replace(T,"|").split("|");for(f=0;f<i.length;f++)i[f]=p(i[f]);return i.join(",")}t=e.match(c)||[],f=t.length;if(l>f--)while(++f<l)t[f]=n?t[(f-1)/2>>0]:s[f];return o+t.join(a)+u},p):function(e){return e}},at=function(e){return e=e.split(","),function(t,n,r,i,s,o,u){var a=(n+"").split(" "),f;u={};for(f=0;f<4;f++)u[e[f]]=a[f]=a[f]||a[(f-1)/2>>0];return i.parse(t,u,s,o)}},ft=M._setPluginRatio=function(e){this.plugin.setRatio(e);var t=this.data,n=t.proxy,r=t.firstMPT,i=1e-6,s,o,u,a;while(r)s=n[r.v],r.r?s=s>0?s+.5>>0:s-.5>>0:s<i&&s>-i&&(s=0),r.t[r.p]=s,r=r._next;t.autoRotate&&(t.autoRotate.rotation=n.rotation);if(e===1){r=t.firstMPT;while(r){o=r.t;if(!o.type)o.e=o.s+o.xs0;else if(o.type===1){a=o.xs0+o.s+o.xs1;for(u=1;u<o.l;u++)a+=o["xn"+u]+o["xs"+(u+1)];o.e=a}r=r._next}}},lt=function(e,t,n,r,i){this.t=e,this.p=t,this.v=n,this.r=i,r&&(r._prev=this,this._next=r)},ct=M._parseToProxy=function(e,t,n,r,i,s){var o=r,u={},a={},f=n._transform,l=k,c,h,p,d,v;n._transform=null,k=t,r=v=n.parse(e,t,r,i),k=l,s&&(n._transform=f,o&&(o._prev=null,o._prev&&(o._prev._next=null)));while(r&&r!==o){if(r.type<=1){h=r.p,a[h]=r.s+r.c,u[h]=r.s,s||(d=new lt(r,"s",h,d,r.r),r.c=0);if(r.type===1){c=r.l;while(--c>0)p="xn"+c,h=r.p+"_"+p,a[h]=r.data[p],u[h]=r[p],s||(d=new lt(r,p,h,d,r.rxp[p]))}}r=r._next}return{proxy:u,end:a,firstMPT:d,pt:v}},ht=M.CSSPropTween=function(e,t,n,i,s,u,a,f,l,c,h){this.t=e,this.p=t,this.s=n,this.c=i,this.n=a||"css_"+t,e instanceof ht||o.push(this.n),this.r=f,this.type=u||0,l&&(this.pr=l,r=!0),this.b=c===undefined?n:c,this.e=h===undefined?n+i:h,s&&(this._next=s,s._prev=this)},pt=n.parseComplex=function(e,t,n,r,i,s,o,u,a,c){o=new ht(e,t,0,0,o,c?2:1,null,!1,u,n,r),r+="";var h=n.split(", ").join(",").split(" "),p=r.split(", ").join(",").split(" "),d=h.length,v=D!==!1,m,g,y,b,w,E,S,x,N,C,k,L;if(r.indexOf(",")!==-1||n.indexOf(",")!==-1)h=h.join(" ").replace(T,", ").split(" "),p=p.join(" ").replace(T,", ").split(" "),d=h.length;d!==p.length&&(h=(s||"").split(" "),d=h.length),o.plugin=a,o.setRatio=c;for(m=0;m<d;m++){b=h[m],w=p[m],x=parseFloat(b);if(x||x===0)o.appendXtra("",x,et(w,x),w.replace(l,""),v&&w.indexOf("px")!==-1,!0);else if(i&&(b.charAt(0)==="#"||b.indexOf("rgb")===0||rt[b]||b.indexOf("hsl")===0))L=w.charAt(w.length-1)===","?"),":")",b=st(b),w=st(w),N=b.length+w.length>6,N&&!I&&w[3]===0?(o["xs"+o.l]+=o.l?" transparent":"transparent",o.e=o.e.split(p[m]).join("transparent")):(I||(N=!1),o.appendXtra(N?"rgba(":"rgb(",b[0],w[0]-b[0],",",!0,!0).appendXtra("",b[1],w[1]-b[1],",",!0).appendXtra("",b[2],w[2]-b[2],N?",":L,!0),N&&(b=b.length<4?1:b[3],o.appendXtra("",b,(w.length<4?1:w[3])-b,L,!1)));else{E=b.match(f);if(!E)o["xs"+o.l]+=o.l?" "+b:b;else{S=w.match(l);if(!S||S.length!==E.length)return o;y=0;for(g=0;g<E.length;g++)k=E[g],C=b.indexOf(k,y),o.appendXtra(b.substr(y,C-y),Number(k),et(S[g],k),"",v&&b.substr(C+k.length,2)==="px",g===0),y=C+k.length;o["xs"+o.l]+=b.substr(y)}}}if(r.indexOf("=")!==-1&&o.data){L=o.xs0+o.data.s;for(m=1;m<o.l;m++)L+=o["xs"+m]+o.data["xn"+m];o.e=L+o["xs"+m]}return o.l||(o.type=-1,o.xs0=o.e),o.xfirst||o},dt=9;a=ht.prototype,a.l=a.pr=0;while(--dt>0)a["xn"+dt]=0,a["xs"+dt]="";a.xs0="",a._next=a._prev=a.xfirst=a.data=a.plugin=a.setRatio=a.rxp=null,a.appendXtra=function(e,t,n,r,i,s){var o=this,u=o.l;return o["xs"+u]+=s&&u?" "+e:e||"",!n&&u!==0&&!o.plugin?(o["xs"+u]+=t+(r||""),o):(o.l++,o.type=o.setRatio?2:1,o["xs"+o.l]=r||"",u>0?(o.data["xn"+u]=t+n,o.rxp["xn"+u]=i,o["xn"+u]=t,o.plugin||(o.xfirst=new ht(o,"xn"+u,t,n,o.xfirst||o,0,o.n,i,o.pr),o.xfirst.xs0=0),o):(o.data={s:t+n},o.rxp={},o.s=t,o.c=n,o.r=i,o))};var vt=function(e,t){t=t||{},this.p=t.prefix?W(e)||e:e,u[e]=u[this.p]=this,this.format=t.formatter||ut(t.defaultValue,t.color,t.collapsible,t.multi),t.parser&&(this.parse=t.parser),this.clrs=t.color,this.multi=t.multi,this.keyword=t.keyword,this.dflt=t.defaultValue,this.pr=t.priority||0},mt=M._registerComplexSpecialProp=function(e,t,n){typeof t!="object"&&(t={parser:n});var r=e.split(","),i=t.defaultValue,s,o;n=n||[i];for(s=0;s<r.length;s++)t.prefix=s===0&&t.prefix,t.defaultValue=n[s]||i,o=new vt(r[s],t)},gt=function(e){if(!u[e]){var t=e.charAt(0).toUpperCase()+e.substr(1)+"Plugin";mt(e,{parser:function(e,n,r,i,s,o,a){var f=(window.GreenSockGlobals||window).com.greensock.plugins[t];return f?(f._cssRegister(),u[r].parse(e,n,r,i,s,o,a)):(R("Error: "+t+" js file not loaded."),s)}})}};a=vt.prototype,a.parseComplex=function(e,t,n,r,i,s){var o=this.keyword,u,a,f,l,c,h;this.multi&&(T.test(n)||T.test(t)?(a=t.replace(T,"|").split("|"),f=n.replace(T,"|").split("|")):o&&(a=[t],f=[n]));if(f){l=f.length>a.length?f.length:a.length;for(u=0;u<l;u++)t=a[u]=a[u]||this.dflt,n=f[u]=f[u]||this.dflt,o&&(c=t.indexOf(o),h=n.indexOf(o),c!==h&&(n=h===-1?f:a,n[u]+=" "+o));t=a.join(", "),n=f.join(", ")}return pt(e,this.p,t,n,this.clrs,this.dflt,r,this.pr,i,s)},a.parse=function(e,t,n,r,i,o,u){return this.parseComplex(e.style,this.format(V(e,this.p,s,!1,this.dflt)),this.format(t),i,o)},n.registerSpecialProp=function(e,t,n){mt(e,{parser:function(e,r,i,s,o,u,a){var f=new ht(e,i,0,0,o,2,i,!1,n);return f.plugin=u,f.setRatio=t(e,r,s._tween,i),f},priority:n})};var yt="scaleX,scaleY,scaleZ,x,y,z,skewX,rotation,rotationX,rotationY,perspective".split(","),bt=W("transform"),wt=U+"transform",Et=W("transformOrigin"),St=W("perspective")!==null,xt=function(e,t,r){var i=r?e._gsTransform||{skewY:0}:{skewY:0},s=i.scaleX<0,o=2e-5,u=1e5,a=-Math.PI+1e-4,f=Math.PI-1e-4,l=St?parseFloat(V(e,Et,t,!1,"0 0 0").split(" ")[2])||i.zOrigin||0:0,c,h,p,d,v,m,g,y,b,w,E,x,T;bt?c=V(e,wt,t,!0):e.currentStyle&&(c=e.currentStyle.filter.match(S),c=c&&c.length===4?c[0].substr(4)+","+Number(c[2].substr(4))+","+Number(c[1].substr(4))+","+c[3].substr(4)+","+(i?i.x:0)+","+(i?i.y:0):null),h=(c||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[],p=h.length;while(--p>-1)d=Number(h[p]),h[p]=(v=d-(d|=0))?(v*u+(v<0?-0.5:.5)|0)/u+d:d;if(h.length===16){var N=h[8],C=h[9],k=h[10],L=h[12],A=h[13],O=h[14];i.zOrigin&&(O=-i.zOrigin,L=N*O-h[12],A=C*O-h[13],O=k*O+i.zOrigin-h[14]);if(!r||L!==i.x||A!==i.y||O!==i.z){var M=h[0],_=h[1],D=h[2],P=h[3],H=h[4],B=h[5],j=h[6],F=h[7],I=h[11],q=i.rotationX=Math.atan2(j,k),R=q<a||q>f,U,z,W,X,$,J,K,Q;q&&($=Math.cos(-q),J=Math.sin(-q),U=H*$+N*J,z=B*$+C*J,W=j*$+k*J,X=F*$+I*J,N=H*-J+N*$,C=B*-J+C*$,k=j*-J+k*$,I=F*-J+I*$,H=U,B=z,j=W),q=i.rotationY=Math.atan2(N,M),q&&(K=q<a||q>f,$=Math.cos(-q),J=Math.sin(-q),U=M*$-N*J,z=_*$-C*J,W=D*$-k*J,X=P*$-I*J,C=_*J+C*$,k=D*J+k*$,I=P*J+I*$,M=U,_=z,D=W),q=i.rotation=Math.atan2(_,B),q&&(Q=q<a||q>f,$=Math.cos(-q),J=Math.sin(-q),M=M*$+H*J,z=_*$+B*J,B=_*-J+B*$,j=D*-J+j*$,_=z),Q&&R?i.rotation=i.rotationX=0:Q&&K?i.rotation=i.rotationY=0:K&&R&&(i.rotationY=i.rotationX=0),i.scaleX=(Math.sqrt(M*M+_*_)*u+.5>>0)/u,i.scaleY=(Math.sqrt(B*B+C*C)*u+.5>>0)/u,i.scaleZ=(Math.sqrt(j*j+k*k)*u+.5>>0)/u,i.skewX=0,i.perspective=I?1/(I<0?-I:I):0,i.x=L,i.y=A,i.z=O}}else if(!St||h.length===0||i.x!==h[4]||i.y!==h[5]||!i.rotationX&&!i.rotationY){var G=h.length>=6,Y=G?h[0]:1,Z=h[1]||0,et=h[2]||0,tt=G?h[3]:1;i.x=h[4]||0,i.y=h[5]||0,m=Math.sqrt(Y*Y+Z*Z),g=Math.sqrt(tt*tt+et*et),y=Y||Z?Math.atan2(Z,Y):i.rotation||0,b=et||tt?Math.atan2(et,tt)+y:i.skewX||0,w=m-Math.abs(i.scaleX||0),E=g-Math.abs(i.scaleY||0),Math.abs(b)>Math.PI/2&&Math.abs(b)<Math.PI*1.5&&(s?(m*=-1,b+=y<=0?Math.PI:-Math.PI,y+=y<=0?Math.PI:-Math.PI):(g*=-1,b+=b<=0?Math.PI:-Math.PI)),x=(y-i.rotation)%Math.PI,T=(b-i.skewX)%Math.PI;if(i.skewX===undefined||w>o||w<-o||E>o||E<-o||x>a&&x<f&&x*u>>0!==0||T>a&&T<f&&T*u>>0!==0)i.scaleX=m,i.scaleY=g,i.rotation=y,i.skewX=b;St&&(i.rotationX=i.rotationY=i.z=0,i.perspective=parseFloat(n.defaultTransformPerspective)||0,i.scaleZ=1)}i.zOrigin=l;for(p in i)i[p]<o&&i[p]>-o&&(i[p]=0);return r&&(e._gsTransform=i),i},Tt=function(e){var t=this.data,n=-t.rotation,r=n+t.skewX,i=1e5,s=(Math.cos(n)*t.scaleX*i>>0)/i,o=(Math.sin(n)*t.scaleX*i>>0)/i,u=(Math.sin(r)*-t.scaleY*i>>0)/i,a=(Math.cos(r)*t.scaleY*i>>0)/i,f=this.t.style,l=this.t.currentStyle,c,h;if(!l)return;h=o,o=-u,u=-h,c=l.filter,f.filter="";var v=this.t.offsetWidth,m=this.t.offsetHeight,g=l.position!=="absolute",y="progid:DXImageTransform.Microsoft.Matrix(M11="+s+", M12="+o+", M21="+u+", M22="+a,b=t.x,w=t.y,E,S;t.ox!=null&&(E=(t.oxp?v*t.ox*.01:t.ox)-v/2,S=(t.oyp?m*t.oy*.01:t.oy)-m/2,b+=E-(E*s+S*o),w+=S-(E*u+S*a));if(!g){var T=F<8?1:-1,N,C,k;E=t.ieOffsetX||0,S=t.ieOffsetY||0,t.ieOffsetX=Math.round((v-((s<0?-s:s)*v+(o<0?-o:o)*m))/2+b),t.ieOffsetY=Math.round((m-((a<0?-a:a)*m+(u<0?-u:u)*v))/2+w);for(dt=0;dt<4;dt++)C=Q[dt],N=l[C],h=N.indexOf("px")!==-1?parseFloat(N):Y(this.t,C,parseFloat(N),N.replace(p,""))||0,h!==t[C]?k=dt<2?-t.ieOffsetX:-t.ieOffsetY:k=dt<2?E-t.ieOffsetX:S-t.ieOffsetY,f[C]=(t[C]=Math.round(h-k*(dt===0||dt===2?1:T)))+"px";y+=", sizingMethod='auto expand')"}else E=v/2,S=m/2,y+=", Dx="+(E-(E*s+S*o)+b)+", Dy="+(S-(E*u+S*a)+w)+")";c.indexOf("DXImageTransform.Microsoft.Matrix(")!==-1?f.filter=c.replace(x,y):f.filter=y+" "+c,(e===0||e===1)&&s===1&&o===0&&u===0&&a===1&&(!g||y.indexOf("Dx=0, Dy=0")!==-1)&&(!d.test(c)||parseFloat(RegExp.$1)===100)&&c.indexOf("gradient(")===-1&&f.removeAttribute("filter")},Nt=function(e){var t=this.data,n=this.t.style,r=t.perspective,i=t.scaleX,s=0,o=0,u=0,a=0,f=t.scaleY,l=0,c=0,h=0,p=0,d=t.scaleZ,v=0,m=0,g=0,y=r?-1/r:0,b=t.rotation,w=t.zOrigin,E=",",S=1e5,x,T,N,C,k,L,A,O,M;B&&(A=V(this.t,"top",null,!1,"0"),O=parseFloat(A)||0,M=A.substr((O+"").length),t._ffFix=!t._ffFix,n.top=(t._ffFix?O+.05:O-.05)+(M===""?"px":M));if(b||t.skewX)N=i*Math.cos(b),C=f*Math.sin(b),b-=t.skewX,s=i*-Math.sin(b),f*=Math.cos(b),i=N,a=C;b=t.rotationY,b&&(x=Math.cos(b),T=Math.sin(b),N=i*x,C=a*x,k=d*-T,L=y*-T,o=i*T,l=a*T,d*=x,y*=x,i=N,a=C,h=k,m=L),b=t.rotationX,b&&(x=Math.cos(b),T=Math.sin(b),N=s*x+o*T,C=f*x+l*T,k=p*x+d*T,L=g*x+y*T,o=s*-T+o*x,l=f*-T+l*x,d=p*-T+d*x,y=g*-T+y*x,s=N,f=C,p=k,g=L),w&&(v-=w,u=o*v,c=l*v,v=d*v+w),u=(N=(u+=t.x)-(u|=0))?(N*S+(N<0?-0.5:.5)|0)/S+u:u,c=(N=(c+=t.y)-(c|=0))?(N*S+(N<0?-0.5:.5)|0)/S+c:c,v=(N=(v+=t.z)-(v|=0))?(N*S+(N<0?-0.5:.5)|0)/S+v:v,n[bt]="matrix3d("+(i*S>>0)/S+E+(a*S>>0)/S+E+(h*S>>0)/S+E+(m*S>>0)/S+E+(s*S>>0)/S+E+(f*S>>0)/S+E+(p*S>>0)/S+E+(g*S>>0)/S+E+(o*S>>0)/S+E+(l*S>>0)/S+E+(d*S>>0)/S+E+(y*S>>0)/S+E+u+E+c+E+v+E+(r?1+ -v/r:1)+")"},Ct=function(e){var t=this.data,n=this.t,r,i,s,o,u,a,f,l;B&&(r=V(n,"top",null,!1,"0"),i=parseFloat(r)||0,s=r.substr((i+"").length),t._ffFix=!t._ffFix,n.style.top=(t._ffFix?i+.05:i-.05)+(s===""?"px":s)),!t.rotation&&!t.skewX?n.style[bt]="matrix("+t.scaleX+",0,0,"+t.scaleY+","+t.x+","+t.y+")":(o=t.rotation,u=o-t.skewX,a=1e5,f=t.scaleX*a,l=t.scaleY*a,n.style[bt]="matrix("+(Math.cos(o)*f>>0)/a+","+(Math.sin(o)*f>>0)/a+","+(Math.sin(u)*-l>>0)/a+","+(Math.cos(u)*l>>0)/a+","+t.x+","+t.y+")")};mt("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,transformPerspective,directionalRotation",{parser:function(e,t,n,r,i,o,u){if(r._transform)return i;var a=r._transform=xt(e,s,!0),f=e.style,l=1e-6,c=yt.length,h=u,p={},d,v,m,g,y,b,w;if(typeof h.transform=="string"&&bt)m=f.cssText,f[bt]=h.transform,f.display="block",d=xt(e,null,!1),f.cssText=m;else if(typeof h=="object"){d={scaleX:tt(h.scaleX!=null?h.scaleX:h.scale,a.scaleX),scaleY:tt(h.scaleY!=null?h.scaleY:h.scale,a.scaleY),scaleZ:tt(h.scaleZ!=null?h.scaleZ:h.scale,a.scaleZ),x:tt(h.x,a.x),y:tt(h.y,a.y),z:tt(h.z,a.z),perspective:tt(h.transformPerspective,a.perspective)},w=h.directionalRotation;if(w!=null)if(typeof w=="object")for(m in w)h[m]=w[m];else h.rotation=w;d.rotation=nt("rotation"in h?h.rotation:"shortRotation"in h?h.shortRotation+"_short":"rotationZ"in h?h.rotationZ:a.rotation*C,a.rotation,"rotation",p),St&&(d.rotationX=nt("rotationX"in h?h.rotationX:"shortRotationX"in h?h.shortRotationX+"_short":a.rotationX*C||0,a.rotationX,"rotationX",p),d.rotationY=nt("rotationY"in h?h.rotationY:"shortRotationY"in h?h.shortRotationY+"_short":a.rotationY*C||0,a.rotationY,"rotationY",p)),d.skewX=h.skewX==null?a.skewX:nt(h.skewX,a.skewX),d.skewY=h.skewY==null?a.skewY:nt(h.skewY,a.skewY);if(v=d.skewY-a.skewY)d.skewX+=v,d.rotation+=v}y=a.z||a.rotationX||a.rotationY||d.z||d.rotationX||d.rotationY||d.perspective,!y&&h.scale!=null&&(d.scaleZ=1);while(--c>-1){n=yt[c],g=d[n]-a[n];if(g>l||g<-l||k[n]!=null)b=!0,i=new ht(a,n,a[n],g,i),n in p&&(i.e=p[n]),i.xs0=0,i.plugin=o,r._overwriteProps.push(i.n)}g=h.transformOrigin;if(g||St&&y&&a.zOrigin)bt?(b=!0,g=(g||V(e,n,s,!1,"50% 50%"))+"",n=Et,i=new ht(f,n,0,0,i,-1,"css_transformOrigin"),i.b=f[n],i.plugin=o,St?(m=a.zOrigin,g=g.split(" "),a.zOrigin=(g.length>2?parseFloat(g[2]):m)||0,i.xs0=i.e=f[n]=g[0]+" "+(g[1]||"50%")+" 0px",i=new ht(a,"zOrigin",0,0,i,-1,i.n),i.b=m,i.xs0=i.e=a.zOrigin):i.xs0=i.e=f[n]=g):Z(g+"",a);return b&&(r._transformType=y||this._transformType===3?3:2),i},prefix:!0}),mt("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),mt("borderRadius",{defaultValue:"0px",parser:function(e,t,n,r,o,u){t=this.format(t);var a=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],f=e.style,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N;y=parseFloat(e.offsetWidth),b=parseFloat(e.offsetHeight),l=t.split(" ");for(c=0;c<a.length;c++)this.p.indexOf("border")&&(a[c]=W(a[c])),d=p=V(e,a[c],s,!1,"0px"),d.indexOf(" ")!==-1&&(p=d.split(" "),d=p[0],p=p[1]),v=h=l[c],m=parseFloat(d),E=d.substr((m+"").length),S=v.charAt(1)==="=",S?(g=parseInt(v.charAt(0)+"1",10),v=v.substr(2),g*=parseFloat(v),w=v.substr((g+"").length-(g<0?1:0))||""):(g=parseFloat(v),w=v.substr((g+"").length)),w===""&&(w=i[n]||E),w!==E&&(x=Y(e,"borderLeft",m,E),T=Y(e,"borderTop",m,E),w==="%"?(d=x/y*100+"%",p=T/b*100+"%"):w==="em"?(N=Y(e,"borderLeft",1,"em"),d=x/N+"em",p=T/N+"em"):(d=x+"px",p=T+"px"),S&&(v=parseFloat(d)+g+w,h=parseFloat(p)+g+w)),o=pt(f,a[c],d+" "+p,v+" "+h,!1,"0px",o);return o},prefix:!0,formatter:ut("0px 0px 0px 0px",!1,!0)}),mt("backgroundPosition",{defaultValue:"0 0",parser:function(e,t,n,r,i,o){var u="background-position",a=s||X(e,null),f=this.format((a?F?a.getPropertyValue(u+"-x")+" "+a.getPropertyValue(u+"-y"):a.getPropertyValue(u):e.currentStyle.backgroundPositionX+" "+e.currentStyle.backgroundPositionY)||"0 0"),l=this.format(t),c,h,p,d,v,m;if(f.indexOf("%")!==-1!=(l.indexOf("%")!==-1)){m=V(e,"backgroundImage").replace(b,"");if(m&&m!=="none"){c=f.split(" "),h=l.split(" "),O.setAttribute("src",m),p=2;while(--p>-1)f=c[p],d=f.indexOf("%")!==-1,d!==(h[p].indexOf("%")!==-1)&&(v=p===0?e.offsetWidth-O.width:e.offsetHeight-O.height,c[p]=d?parseFloat(f)/100*v+"px":parseFloat(f)/v*100+"%");f=c.join(" ")}}return this.parseComplex(e.style,f,l,i,o)},formatter:Z}),mt("backgroundSize",{defaultValue:"0 0",formatter:Z}),mt("perspective",{defaultValue:"0px",prefix:!0}),mt("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),mt("transformStyle",{prefix:!0}),mt("backfaceVisibility",{prefix:!0}),mt("margin",{parser:at("marginTop,marginRight,marginBottom,marginLeft")}),mt("padding",{parser:at("paddingTop,paddingRight,paddingBottom,paddingLeft")}),mt("clip",{defaultValue:"rect(0px,0px,0px,0px)"}),mt("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),mt("autoRound,strictUnits",{parser:function(e,t,n,r,i){return i}}),mt("border",{defaultValue:"0px solid #000",parser:function(e,t,n,r,i,o){return this.parseComplex(e.style,this.format(V(e,"borderTopWidth",s,!1,"0px")+" "+V(e,"borderTopStyle",s,!1,"solid")+" "+V(e,"borderTopColor",s,!1,"#000")),this.format(t),i,o)},color:!0,formatter:function(e){var t=e.split(" ");return t[0]+" "+(t[1]||"solid")+" "+(e.match(ot)||["#000"])[0]}}),mt("float,cssFloat,styleFloat",{parser:function(e,t,n,r,i,s){var o=e.style,u="cssFloat"in o?"cssFloat":"styleFloat";return new ht(o,u,0,0,i,-1,n,!1,0,o[u],t)}});var kt=function(e){var t=this.t,n=t.filter,r=this.s+this.c*e>>0,i;r===100&&(n.indexOf("atrix(")===-1&&n.indexOf("radient(")===-1?(t.removeAttribute("filter"),i=!V(this.data,"filter")):(t.filter=n.replace(m,""),i=!0)),i||(this.xn1&&(t.filter=n=n||"alpha(opacity=100)"),n.indexOf("opacity")===-1?t.filter+=" alpha(opacity="+r+")":t.filter=n.replace(d,"opacity="+r))};mt("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(e,t,n,r,i,o){var u=parseFloat(V(e,"opacity",s,!1,"1")),a=e.style,f;return t=parseFloat(t),n==="autoAlpha"&&(f=V(e,"visibility",s),u===1&&f==="hidden"&&t!==0&&(u=0),i=new ht(a,"visibility",0,0,i,-1,null,!1,0,u!==0?"visible":"hidden",t===0?"hidden":"visible"),i.xs0="visible",r._overwriteProps.push(i.n)),I?i=new ht(a,"opacity",u,t-u,i):(i=new ht(a,"opacity",u*100,(t-u)*100,i),i.xn1=n==="autoAlpha"?1:0,a.zoom=1,i.type=2,i.b="alpha(opacity="+i.s+")",i.e="alpha(opacity="+(i.s+i.c)+")",i.data=e,i.plugin=o,i.setRatio=kt),i}});var Lt=function(e){if(e===1||e===0){this.t.className=e===1?this.e:this.b;var t=this.data,n=this.t.style,r=n.removeProperty?"removeProperty":"removeAttribute";while(t)t.v?n[t.p]=t.v:n[r](t.p.replace(g,"-$1").toLowerCase()),t=t._next}else this.t.className!==this.b&&(this.t.className=this.b)};mt("className",{parser:function(e,t,n,i,o,u,a){var f=e.className,l=e.style.cssText,c,h;return o=i._classNamePT=new ht(e,n,0,0,o,2),o.setRatio=Lt,o.pr=-11,r=!0,o.b=f,o.e=t.charAt(1)!=="="?t:t.charAt(0)==="+"?f+" "+t.substr(2):f.split(t.substr(2)).join(""),i._tween._duration&&(h=$(e,s,!0),e.className=o.e,c=J(e,h,$(e),a),e.className=f,o.data=c.firstMPT,e.style.cssText=l,o=o.xfirst=i.parse(e,c.difs,o,u)),o}});var At=function(e){if(e===1||e===0)if(this.data._totalTime===this.data._totalDuration){var t=this.e==="all",n=this.t.style,r=t?n.cssText.split(";"):this.e.split(","),i=n.removeProperty?"removeProperty":"removeAttribute",s=r.length,o=u.transform.parse,a;while(--s>-1)a=r[s],t&&(a=a.substr(0,a.indexOf(":")).split(" ").join("")),u[a]&&(a=u[a].parse===o?bt:u[a].p),a&&n[i](a.replace(g,"-$1").toLowerCase())}};mt("clearProps",{parser:function(e,t,n,i,s){return s=new ht(e,n,0,0,s,2),s.setRatio=At,s.e=t,s.pr=-10,s.data=i._tween,r=!0,s}}),a="bezier,throwProps,physicsProps,physics2D".split(","),dt=a.length;while(dt--)gt(a[dt]);return a=n.prototype,a._firstPT=null,a._onInitTween=function(e,t,u){if(!e.nodeType)return!1;this._target=e,this._tween=u,this._vars=t,D=t.autoRound,r=!1,i=t.suffixMap||n.suffixMap,s=X(e,""),o=this._overwriteProps;var a=e.style,f,l,c,h,p,d,m,g,y;if(P&&a.zIndex===""){f=V(e,"zIndex",s);if(f==="auto"||f==="")a.zIndex=0}typeof t=="string"&&(h=a.cssText,f=$(e,s),a.cssText=h+";"+t,f=J(e,f,$(e)).difs,!I&&v.test(t)&&(f.opacity=parseFloat(RegExp.$1)),t=f,a.cssText=h),this._firstPT=l=this.parse(e,t,null);if(this._transformType){y=this._transformType===3;if(!bt)a.zoom=1;else if(H){P=!0;if(a.zIndex===""){m=V(e,"zIndex",s);if(m==="auto"||m==="")a.zIndex=0}j&&(a.WebkitBackfaceVisibility=this._vars.WebkitBackfaceVisibility||(y?"visible":"hidden"))}c=l;while(c&&c._next)c=c._next;g=new ht(e,"transform",0,0,null,2),this._linkCSSP(g,null,c),g.setRatio=y&&St?Nt:bt?Ct:Tt,g.data=this._transform||xt(e,s,!0),o.pop()}if(r){while(l){d=l._next,c=h;while(c&&c.pr>l.pr)c=c._next;(l._prev=c?c._prev:p)?l._prev._next=l:h=l,(l._next=c)?c._prev=l:p=l,l=d}this._firstPT=h}return!0},a.parse=function(e,t,n,r){var o=e.style,a,f,l,c,h,d,v,m,g,y;for(a in t){d=t[a],f=u[a];if(f)n=f.parse(e,d,a,this,n,r,t);else{h=V(e,a,s)+"",g=typeof d=="string";if(a==="color"||a==="fill"||a==="stroke"||a.indexOf("Color")!==-1||g&&!d.indexOf("rgb"))g||(d=st(d),d=(d.length>3?"rgba(":"rgb(")+d.join(",")+")"),n=pt(o,a,h,d,!0,"transparent",n,0,r);else if(!g||d.indexOf(" ")===-1&&d.indexOf(",")===-1){l=parseFloat(h),v=l||l===0?h.substr((l+"").length):"";if(h===""||h==="auto")a==="width"||a==="height"?(l=G(e,a,s),v="px"):(l=a!=="opacity"?0:1,v="");y=g&&d.charAt(1)==="=",y?(c=parseInt(d.charAt(0)+"1",10),d=d.substr(2),c*=parseFloat(d),m=d.replace(p,"")):(c=parseFloat(d),m=g?d.substr((c+"").length)||"":""),m===""&&(m=i[a]||v),d=c||c===0?(y?c+l:c)+m:t[a],v!==m&&m!==""&&(c||c===0)&&(l||l===0)&&(l=Y(e,a,l,v),m==="%"?(l/=Y(e,a,100,"%")/100,l>100&&(l=100),t.strictUnits!==!0&&(h=l+"%")):m==="em"?l/=Y(e,a,1,"em"):(c=Y(e,a,c,m),m="px"),y&&(c||c===0)&&(d=c+l+m)),y&&(c+=l),!l&&l!==0||!c&&c!==0?!!d||d+""!="NaN"&&d!=null?(n=new ht(o,a,c||l||0,0,n,-1,"css_"+a,!1,0,h,d),n.xs0=a==="display"&&d==="none"?h:d):R("invalid "+a+" tween value: "+t[a]):(n=new ht(o,a,l,c-l,n,0,"css_"+a,D!==!1&&(m==="px"||a==="zIndex"),0,h,d),n.xs0=m)}else n=pt(o,a,h,d,!0,null,n,0,r)}r&&n&&!n.plugin&&(n.plugin=r)}return n},a.setRatio=function(e){var t=this._firstPT,n=1e-6,r,i,s;if(e!==1||this._tween._time!==this._tween._duration&&this._tween._time!==0)if(e||this._tween._time!==this._tween._duration&&this._tween._time!==0||this._tween._rawPrevTime===-0.000001)while(t){r=t.c*e+t.s,t.r?r=r>0?r+.5>>0:r-.5>>0:r<n&&r>-n&&(r=0);if(!t.type)t.t[t.p]=r+t.xs0;else if(t.type===1){s=t.l;if(s===2)t.t[t.p]=t.xs0+r+t.xs1+t.xn1+t.xs2;else if(s===3)t.t[t.p]=t.xs0+r+t.xs1+t.xn1+t.xs2+t.xn2+t.xs3;else if(s===4)t.t[t.p]=t.xs0+r+t.xs1+t.xn1+t.xs2+t.xn2+t.xs3+t.xn3+t.xs4;else if(s===5)t.t[t.p]=t.xs0+r+t.xs1+t.xn1+t.xs2+t.xn2+t.xs3+t.xn3+t.xs4+t.xn4+t.xs5;else{i=t.xs0+r+t.xs1;for(s=1;s<t.l;s++)i+=t["xn"+s]+t["xs"+(s+1)];t.t[t.p]=i}}else t.type===-1?t.t[t.p]=t.xs0:t.setRatio&&t.setRatio(e);t=t._next}else while(t)t.type!==2?t.t[t.p]=t.b:t.setRatio(e),t=t._next;else while(t)t.type!==2?t.t[t.p]=t.e:t.setRatio(e),t=t._next},a._enableTransforms=function(e){this._transformType=e||this._transformType===3?3:2},a._linkCSSP=function(e,t,n,r){return e&&(t&&(t._prev=e),e._next&&(e._next._prev=e._prev),n?n._next=e:!r&&this._firstPT===null&&(this._firstPT=e),e._prev?e._prev._next=e._next:this._firstPT===e&&(this._firstPT=e._next),e._next=t,e._prev=n),e},a._kill=function(t){var n=t,r=!1,i,s,o;if(t.css_autoAlpha||t.css_alpha){n={};for(s in t)n[s]=t[s];n.css_opacity=1,n.css_autoAlpha&&(n.css_visibility=1)}return t.css_className&&(i=this._classNamePT)&&(o=i.xfirst,o&&o._prev?this._linkCSSP(o._prev,i._next,o._prev._prev):o===this._firstPT&&(this._firstPT=null),i._next&&this._linkCSSP(i._next,i._next._next,o._prev),this._target._gsOverwrittenClassNamePT=this._linkCSSP(i,this._target._gsOverwrittenClassNamePT),this._classNamePT=null,r=!0),e.prototype._kill.call(this,n)||r},e.activate([n]),n},!0),function(){var e=window._gsDefine.plugin({propName:"roundProps",priority:-1,API:2,init:function(e,t,n){return this._tween=n,!0}}),t=e.prototype;t._onInitAllProps=function(){var e=this._tween,t=e.vars.roundProps instanceof Array?e.vars.roundProps:e.vars.roundProps.split(","),n=t.length,r={},i=e._propLookup.roundProps,s,o,u;while(--n>-1)r[t[n]]=1;n=t.length;while(--n>-1){s=t[n],o=e._firstPT;while(o)u=o._next,o.pg?o.t._roundProps(r,!0):o.n===s&&(this._add(o.t,s,o.s,o.c),u&&(u._prev=o._prev),o._prev?o._prev._next=u:e._firstPT===o&&(e._firstPT=u),o._next=o._prev=null,e._propLookup[s]=i),o=u}return!1},t._add=function(e,t,n,r){this._addTween(e,t,n,n+r,t,!0),this._overwriteProps.push(t)}}(),window._gsDefine.plugin({propName:"attr",API:2,init:function(e,t,n){var r;if(typeof e.setAttribute!="function")return!1;this._target=e,this._proxy={};for(r in t)this._addTween(this._proxy,r,parseFloat(e.getAttribute(r)),t[r],r),this._overwriteProps.push(r);return!0},set:function(e){this._super.setRatio.call(this,e);var t=this._overwriteProps,n=t.length,r;while(--n>-1)r=t[n],this._target.setAttribute(r,this._proxy[r]+"")}}),window._gsDefine.plugin({propName:"directionalRotation",API:2,init:function(e,t,n){typeof t!="object"&&(t={rotation:t}),this.finals={},this._tween=n;var r=t.useRadians===!0?Math.PI*2:360,i,s,o,u,a,f,l;for(i in t)i!=="useRadians"&&(f=(t[i]+"").split("_"),s=f[0],l=f[1],o=parseFloat(typeof e[i]!="function"?e[i]:e[i.indexOf("set")||typeof e["get"+i.substr(3)]!="function"?i:"get"+i.substr(3)]()),u=this.finals[i]=typeof s=="string"&&s.charAt(1)==="="?o+parseInt(s.charAt(0)+"1",10)*Number(s.substr(2)):Number(s)||0,a=u-o,l==="short"?(a%=r,a!==a%(r/2)&&(a=a<0?a+r:a-r)):l==="cw"&&a<0?a=(a+r*9999999999)%r-(a/r|0)*r:l==="ccw"&&a>0&&(a=(a-r*9999999999)%r-(a/r|0)*r),this._addTween(e,i,o,o+a,i),this._overwriteProps.push(i));return!0},set:function(e){var t;if(e!==1)this._super.setRatio.call(this,e);else{t=this._firstPT;while(t)t.f?t.t[t.p](this.finals[t.p]):t.t[t.p]=this.finals[t.p],t=t._next}}})._autoCSS=!0,window._gsDefine("easing.Back",["easing.Ease"],function(e){var t=window.GreenSockGlobals||window,n=t.com.greensock,r=Math.PI*2,i=Math.PI/2,s=n._class,o=function(t,n){var r=s("easing."+t,function(){},!0),i=r.prototype=new e;return i.constructor=r,i.getRatio=n,r},u=e.register||function(){},a=function(e,t,n,r,i){var o=s("easing."+e,{easeOut:new t,easeIn:new n,easeInOut:new r},!0);return u(o,e),o},f=function(t,n){var r=s("easing."+t,function(e){this._p1=e||e===0?e:1.70158,this._p2=this._p1*1.525},!0),i=r.prototype=new e;return i.constructor=r,i.getRatio=n,i.config=function(e){return new r(e)},r},l=a("Back",f("BackOut",function(e){return(e-=1)*e*((this._p1+1)*e+this._p1)+1}),f("BackIn",function(e){return e*e*((this._p1+1)*e-this._p1)}),f("BackInOut",function(e){return(e*=2)<1?.5*e*e*((this._p2+1)*e-this._p2):.5*((e-=2)*e*((this._p2+1)*e+this._p2)+2)})),c=s("easing.SlowMo",function(e,t,n){t=t||t===0?t:.7,e==null?e=.7:e>1&&(e=1),this._p=e!==1?t:0,this._p1=(1-e)/2,this._p2=e,this._p3=this._p1+this._p2,this._calcEnd=n===!0},!0),h=c.prototype=new e,p,d;return h.constructor=c,h.getRatio=function(e){var t=e+(.5-e)*this._p;return e<this._p1?this._calcEnd?1-(e=1-e/this._p1)*e:t-(e=1-e/this._p1)*e*e*e*t:e>this._p3?this._calcEnd?1-(e=(e-this._p3)/this._p1)*e:t+(e-t)*(e=(e-this._p3)/this._p1)*e*e*e:this._calcEnd?1:t},c.ease=new c(.7,.7),h.config=c.config=function(e,t,n){return new c(e,t,n)},p=s("easing.SteppedEase",function(e){e=e||1,this._p1=1/e,this._p2=e+1},!0),h=p.prototype=new e,h.constructor=p,h.getRatio=function(e){return e<0?e=0:e>=1&&(e=.999999999),(this._p2*e>>0)*this._p1},h.config=p.config=function(e){return new p(e)},a("Bounce",o("BounceOut",function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}),o("BounceIn",function(e){return(e=1-e)<1/2.75?1-7.5625*e*e:e<2/2.75?1-(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?1-(7.5625*(e-=2.25/2.75)*e+.9375):1-(7.5625*(e-=2.625/2.75)*e+.984375)}),o("BounceInOut",function(e){var t=e<.5;return t?e=1-e*2:e=e*2-1,e<1/2.75?e=7.5625*e*e:e<2/2.75?e=7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?e=7.5625*(e-=2.25/2.75)*e+.9375:e=7.5625*(e-=2.625/2.75)*e+.984375,t?(1-e)*.5:e*.5+.5})),a("Circ",o("CircOut",function(e){return Math.sqrt(1-(e-=1)*e)}),o("CircIn",function(e){return-(Math.sqrt(1-e*e)-1)}),o("CircInOut",function(e){return(e*=2)<1?-0.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)})),d=function(t,n,i){var o=s("easing."+t,function(e,t){this._p1=e||1,this._p2=t||i,this._p3=this._p2/r*(Math.asin(1/this._p1)||0)},!0),u=o.prototype=new e;return u.constructor=o,u.getRatio=n,u.config=function(e,t){return new o(e,t)},o},a("Elastic",d("ElasticOut",function(e){return this._p1*Math.pow(2,-10*e)*Math.sin((e-this._p3)*r/this._p2)+1},.3),d("ElasticIn",function(e){return-(this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*r/this._p2))},.3),d("ElasticInOut",function(e){return(e*=2)<1?-0.5*this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*r/this._p2):this._p1*Math.pow(2,-10*(e-=1))*Math.sin((e-this._p3)*r/this._p2)*.5+1},.45)),a("Expo",o("ExpoOut",function(e){return 1-Math.pow(2,-10*e)}),o("ExpoIn",function(e){return Math.pow(2,10*(e-1))-.001}),o("ExpoInOut",function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))})),a("Sine",o("SineOut",function(e){return Math.sin(e*i)}),o("SineIn",function(e){return-Math.cos(e*i)+1}),o("SineInOut",function(e){return-0.5*(Math.cos(Math.PI*e)-1)})),s("easing.EaseLookup",{find:function(t){return e.map[t]}},!0),u(t.SlowMo,"SlowMo","ease,"),u(p,"SteppedEase","ease,"),l},!0)}),function(e){var t=e.GreenSockGlobals||e,n=function(e){var n=e.split("."),r=t,i;for(i=0;i<n.length;i++)r[n[i]]=r=r[n[i]]||{};return r},r=n("com.greensock"),i=function(){},s,o,u,a,f,l={},c=function(r,i,s,o){this.sc=l[r]?l[r].sc:[],l[r]=this,this.gsClass=null,this.func=s;var u=[];this.check=function(a){var f=i.length,h=f,p,d,v,m;while(--f>-1)(p=l[i[f]]||new c(i[f],[])).gsClass?(u[f]=p.gsClass,h--):a&&p.sc.push(this);if(h===0&&s){d=("com.greensock."+r).split("."),v=d.pop(),m=n(d.join("."))[v]=this.gsClass=s.apply(s,u),o&&(t[v]=m,typeof define=="function"&&define.amd?define((e.GreenSockAMDPath?e.GreenSockAMDPath+"/":"")+r.split(".").join("/"),[],function(){return m}):typeof module!="undefined"&&module.exports&&(module.exports=m));for(f=0;f<this.sc.length;f++)this.sc[f].check()}},this.check(!0)},h=e._gsDefine=function(e,t,n,r){return new c(e,t,n,r)},p=r._class=function(e,t,n){return t=t||function(){},h(e,[],function(){return t},n),t};h.globals=t;var d=[0,0,1,1],v=[],m=p("easing.Ease",function(e,t,n,r){this._func=e,this._type=n||0,this._power=r||0,this._params=t?d.concat(t):d},!0),g=m.map={},y=m.register=function(e,t,n,i){var s=t.split(","),o=s.length,u=(n||"easeIn,easeOut,easeInOut").split(","),a,f,l,c;while(--o>-1){f=s[o],a=i?p("easing."+f,null,!0):r.easing[f]||{},l=u.length;while(--l>-1)c=u[l],g[f+"."+c]=g[c+f]=a[c]=e.getRatio?e:e[c]||new e}};u=m.prototype,u._calcEnd=!1,u.getRatio=function(e){if(this._func)return this._params[0]=e,this._func.apply(null,this._params);var t=this._type,n=this._power,r=t===1?1-e:t===2?e:e<.5?e*2:(1-e)*2;return n===1?r*=r:n===2?r*=r*r:n===3?r*=r*r*r:n===4&&(r*=r*r*r*r),t===1?1-r:t===2?r:e<.5?r/2:1-r/2},s=["Linear","Quad","Cubic","Quart","Quint,Strong"],o=s.length;while(--o>-1)u=s[o]+",Power"+o,y(new m(null,null,1,o),u,"easeOut",!0),y(new m(null,null,2,o),u,"easeIn"+(o===0?",easeNone":"")),y(new m(null,null,3,o),u,"easeInOut");g.linear=r.easing.Linear.easeIn,g.swing=r.easing.Quad.easeInOut;var b=p("events.EventDispatcher",function(e){this._listeners={},this._eventTarget=e||this});u=b.prototype,u.addEventListener=function(e,t,n,r,i){i=i||0;var s=this._listeners[e],o=0,u,l;s==null&&(this._listeners[e]=s=[]),l=s.length;while(--l>-1)u=s[l],u.c===t&&u.s===n?s.splice(l,1):o===0&&u.pr<i&&(o=l+1);s.splice(o,0,{c:t,s:n,up:r,pr:i}),this===a&&!f&&a.wake()},u.removeEventListener=function(e,t){var n=this._listeners[e],r;if(n){r=n.length;while(--r>-1)if(n[r].c===t){n.splice(r,1);return}}},u.dispatchEvent=function(e){var t=this._listeners[e],n,r,i;if(t){n=t.length,r=this._eventTarget;while(--n>-1)i=t[n],i.up?i.c.call(i.s||r,{type:e,target:r}):i.c.call(i.s||r)}};var w=e.requestAnimationFrame,E=e.cancelAnimationFrame,S=Date.now||function(){return(new Date).getTime()};s=["ms","moz","webkit","o"],o=s.length;while(--o>-1&&!w)w=e[s[o]+"RequestAnimationFrame"],E=e[s[o]+"CancelAnimationFrame"]||e[s[o]+"CancelRequestAnimationFrame"];p("Ticker",function(e,t){var n=this,r=S(),s=t!==!1&&w,o,u,l,c,h,p=function(e){n.time=(S()-r)/1e3;if(!o||n.time>=h||e===!0)n.frame++,h=n.time+c,n.dispatchEvent("tick");e!==!0&&(l=u(p))};b.call(n),this.time=this.frame=0,this.tick=function(){p(!0)},this.sleep=function(){if(l==null)return;!s||!E?clearTimeout(l):E(l),u=i,l=null,n===a&&(f=!1)},this.wake=function(){l&&n.sleep(),u=o===0?i:!s||!w?function(e){return setTimeout(e,c*1e3)}:w,n===a&&(f=!0),p()},this.fps=function(e){if(!arguments.length)return o;o=e,c=1/(o||60),h=this.time+c,n.wake()},this.useRAF=function(e){if(!arguments.length)return s;s=e,n.fps(o)},n.fps(e),setTimeout(function(){s&&!l&&n.useRAF(!1)},1e3)}),u=r.Ticker.prototype=new r.events.EventDispatcher,u.constructor=r.Ticker;var x=p("core.Animation",function(e,t){this.vars=t||{},this._duration=this._totalDuration=e||0,this._delay=Number(this.vars.delay)||0,this._timeScale=1,this._active=this.vars.immediateRender===!0,this.data=this.vars.data,this._reversed=this.vars.reversed===!0;if(!H)return;f||a.wake();var n=this.vars.useFrames?P:H;n.add(this,n._time),this.vars.paused&&this.paused(!0)});a=x.ticker=new r.Ticker,u=x.prototype,u._dirty=u._gc=u._initted=u._paused=!1,u._totalTime=u._time=0,u._rawPrevTime=-1,u._next=u._last=u._onUpdate=u._timeline=u.timeline=null,u._paused=!1,u.play=function(e,t){return arguments.length&&this.seek(e,t),this.reversed(!1),this.paused(!1)},u.pause=function(e,t){return arguments.length&&this.seek(e,t),this.paused(!0)},u.resume=function(e,t){return arguments.length&&this.seek(e,t),this.paused(!1)},u.seek=function(e,t){return this.totalTime(Number(e),t!==!1)},u.restart=function(e,t){return this.reversed(!1),this.paused(!1),this.totalTime(e?-this._delay:0,t!==!1)},u.reverse=function(e,t){return arguments.length&&this.seek(e||this.totalDuration(),t),this.reversed(!0),this.paused(!1)},u.render=function(){},u.invalidate=function(){return this},u._enabled=function(e,t){return f||a.wake(),this._gc=!e,this._active=e&&!this._paused&&this._totalTime>0&&this._totalTime<this._totalDuration,t!==!0&&(e&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!e&&this.timeline&&this._timeline._remove(this,!0)),!1},u._kill=function(e,t){return this._enabled(!1,!1)},u.kill=function(e,t){return this._kill(e,t),this},u._uncache=function(e){var t=e?this:this.timeline;while(t)t._dirty=!0,t=t.timeline;return this},u.eventCallback=function(e,t,n,r){if(e==null)return null;if(e.substr(0,2)==="on"){var i=this.vars,s;if(arguments.length===1)return i[e];if(t==null)delete i[e];else{i[e]=t,i[e+"Params"]=n,i[e+"Scope"]=r;if(n){s=n.length;while(--s>-1)n[s]==="{self}"&&(n=i[e+"Params"]=n.concat(),n[s]=this)}}e==="onUpdate"&&(this._onUpdate=t)}return this},u.delay=function(e){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+e-this._delay),this._delay=e,this):this._delay},u.duration=function(e){return arguments.length?(this._duration=this._totalDuration=e,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&e!==0&&this.totalTime(this._totalTime*(e/this._duration),!0),this):(this._dirty=!1,this._duration)},u.totalDuration=function(e){return this._dirty=!1,arguments.length?this.duration(e):this._totalDuration},u.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),e>this._duration&&(e=this._duration),this.totalTime(e,t)):this._time},u.totalTime=function(e,t){f||a.wake();if(!arguments.length)return this._totalTime;if(this._timeline){e<0&&(e+=this.totalDuration());if(this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var n=this._totalDuration,r=this._timeline;e>n&&(e=n),this._startTime=(this._paused?this._pauseTime:r._time)-(this._reversed?n-e:e)/this._timeScale,r._dirty||this._uncache(!1);if(!r._active)while(r._timeline)r.totalTime(r._totalTime,!0),r=r._timeline}this._gc&&this._enabled(!0,!1),this._totalTime!==e&&this.render(e,t,!1)}return this},u.startTime=function(e){return arguments.length?(e!==this._startTime&&(this._startTime=e,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,e-this._delay)),this):this._startTime},u.timeScale=function(e){if(!arguments.length)return this._timeScale;e=e||1e-6;if(this._timeline&&this._timeline.smoothChildTiming){var t=this._pauseTime||this._pauseTime===0?this._pauseTime:this._timeline.totalTime();this._startTime=t-(t-this._startTime)*this._timeScale/e}return this._timeScale=e,this._uncache(!1)},u.reversed=function(e){return arguments.length?(e!=this._reversed&&(this._reversed=e,this.totalTime(this._totalTime,!0)),this):this._reversed},u.paused=function(e){return arguments.length?(e!=this._paused&&this._timeline&&(!f&&!e&&a.wake(),!e&&this._timeline.smoothChildTiming&&(this._startTime+=this._timeline.rawTime()-this._pauseTime,this._uncache(!1)),this._pauseTime=e?this._timeline.rawTime():null,this._paused=e,this._active=!this._paused&&this._totalTime>0&&this._totalTime<this._totalDuration),this._gc&&!e&&this._enabled(!0,!1),this):this._paused};var T=p("core.SimpleTimeline",function(e){x.call(this,0,e),this.autoRemoveChildren=this.smoothChildTiming=!0});u=T.prototype=new x,u.constructor=T,u.kill()._gc=!1,u._first=u._last=null,u._sortChildren=!1,u.add=function(e,t,n,r){var i,s;e._startTime=Number(t||0)+e._delay,e._paused&&this!==e._timeline&&(e._pauseTime=e._startTime+(this.rawTime()-e._startTime)/e._timeScale),e.timeline&&e.timeline._remove(e,!0),e.timeline=e._timeline=this,e._gc&&e._enabled(!0,!0),i=this._last;if(this._sortChildren){s=e._startTime;while(i&&i._startTime>s)i=i._prev}return i?(e._next=i._next,i._next=e):(e._next=this._first,this._first=e),e._next?e._next._prev=e:this._last=e,e._prev=i,this._timeline&&this._uncache(!0),this},u.insert=u.add,u._remove=function(e,t){return e.timeline===this&&(t||e._enabled(!1,!0),e.timeline=null,e._prev?e._prev._next=e._next:this._first===e&&(this._first=e._next),e._next?e._next._prev=e._prev:this._last===e&&(this._last=e._prev),this._timeline&&this._uncache(!0)),this},u.render=function(e,t,n){var r=this._first,i;this._totalTime=this._time=this._rawPrevTime=e;while(r){i=r._next;if(r._active||e>=r._startTime&&!r._paused)r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(e-r._startTime)*r._timeScale,t,n):r.render((e-r._startTime)*r._timeScale,t,n);r=i}},u.rawTime=function(){return f||a.wake(),this._totalTime};var N=p("TweenLite",function(e,t,n){x.call(this,t,n);if(e==null)throw"Cannot tween a null target.";this.target=e=typeof e!="string"?e:N.selector(e)||e;var r=e.jquery||typeof e.each=="function"&&e[0]&&e[0].nodeType&&e[0].style,i=this.vars.overwrite,s,o,u;this._overwrite=i=i==null?D[N.defaultOverwrite]:typeof i=="number"?i>>0:D[i];if((r||e instanceof Array)&&typeof e[0]!="number"){this._targets=u=r&&!e.slice?k(e):e.slice(0),this._propLookup=[],this._siblings=[];for(s=0;s<u.length;s++){o=u[s];if(!o){u.splice(s--,1);continue}if(typeof o=="string"){o=u[s--]=N.selector(o),typeof o=="string"&&u.splice(s+1,1);continue}if(typeof o.each=="function"&&o[0]&&o[0].nodeType&&o[0].style){u.splice(s--,1),this._targets=u=u.concat(k(o));continue}this._siblings[s]=B(o,this,!1),i===1&&this._siblings[s].length>1&&j(o,this,null,1,this._siblings[s])}}else this._propLookup={},this._siblings=B(e,this,!1),i===1&&this._siblings.length>1&&j(e,this,null,1,this._siblings);(this.vars.immediateRender||t===0&&this._delay===0&&this.vars.immediateRender!==!1)&&this.render(-this._delay,!1,!0)},!0),C=function(e){return typeof e.each=="function"&&e[0]&&e[0].nodeType&&e[0].style},k=function(e){var t=[];return e.each(function(){t.push(this)}),t},L=function(e,t){var n={},r;for(r in e)!_[r]&&(!(r in t)||r==="x"||r==="y"||r==="width"||r==="height"||r==="className")&&(!A[r]||A[r]&&A[r]._autoCSS)&&(n[r]=e[r],delete e[r]);e.css=n};u=N.prototype=new x,u.constructor=N,u.kill()._gc=!1,u.ratio=0,u._firstPT=u._targets=u._overwrittenProps=u._startAt=null,u._notifyPluginsOfEnabled=!1,N.version="1.9.1",N.defaultEase=u._ease=new m(null,null,1,1),N.defaultOverwrite="auto",N.ticker=a,N.autoSleep=!0,N.selector=e.$||e.jQuery||function(t){return e.$?(N.selector=e.$,e.$(t)):e.document?e.document.getElementById(t.charAt(0)==="#"?t.substr(1):t):t};var A=N._plugins={},O=N._tweenLookup={},M=0,_={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,orientToBezier:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1},D={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},P=x._rootFramesTimeline=new T,H=x._rootTimeline=new T;H._startTime=a.time,P._startTime=a.frame,H._active=P._active=!0,x._updateRoot=function(){H.render((a.time-H._startTime)*H._timeScale,!1,!1),P.render((a.frame-P._startTime)*P._timeScale,!1,!1);if(!(a.frame%120)){var e,t,n;for(n in O){t=O[n].tweens,e=t.length;while(--e>-1)t[e]._gc&&t.splice(e,1);t.length===0&&delete O[n]}n=H._first;if(!n||n._paused)if(N.autoSleep&&!P._first&&a._listeners.tick.length===1){while(n&&n._paused)n=n._next;n||a.sleep()}}},a.addEventListener("tick",x._updateRoot);var B=function(e,t,n){var r=e._gsTweenID,i,s;O[r||(e._gsTweenID=r="t"+M++)]||(O[r]={target:e,tweens:[]});if(t){i=O[r].tweens,i[s=i.length]=t;if(n)while(--s>-1)i[s]===t&&i.splice(s,1)}return O[r].tweens},j=function(e,t,n,r,i){var s,o,u,a;if(r===1||r>=4){a=i.length;for(s=0;s<a;s++)if((u=i[s])!==t)u._gc||u._enabled(!1,!1)&&(o=!0);else if(r===5)break;return o}var f=t._startTime+1e-10,l=[],c=0,h=t._duration===0,p;s=i.length;while(--s>-1)(u=i[s])!==t&&!u._gc&&!u._paused&&(u._timeline!==t._timeline?(p=p||F(t,0,h),F(u,p,h)===0&&(l[c++]=u)):u._startTime<=f&&u._startTime+u.totalDuration()/u._timeScale+1e-10>f&&((h||!u._initted)&&f-u._startTime<=2e-10||(l[c++]=u)));s=c;while(--s>-1)u=l[s],r===2&&u._kill(n,e)&&(o=!0),(r!==2||!u._firstPT&&u._initted)&&u._enabled(!1,!1)&&(o=!0);return o},F=function(e,t,n){var r=e._timeline,i=r._timeScale,s=e._startTime;while(r._timeline){s+=r._startTime,i*=r._timeScale;if(r._paused)return-100;r=r._timeline}return s/=i,s>t?s-t:n&&s===t||!e._initted&&s-t<2e-10?1e-10:(s+=e.totalDuration()/e._timeScale/i)>t?0:s-t-1e-10};u._init=function(){var e=this.vars,t=this._overwrittenProps,n=this._duration,r=e.ease,i,s,o;if(e.startAt){e.startAt.overwrite=0,e.startAt.immediateRender=!0,this._startAt=N.to(this.target,0,e.startAt);if(e.immediateRender){this._startAt=null;if(this._time===0&&n!==0)return}}else if(e.runBackwards&&e.immediateRender&&n!==0){if(this._time===0){e.overwrite=e.delay=0,e.runBackwards=!1,this._startAt=N.to(this.target,0,e),e.overwrite=this._overwrite,e.runBackwards=!0,e.delay=this._delay;return}this._startAt&&(this._startAt.render(-1,!0),this._startAt=null)}r?r instanceof m?this._ease=e.easeParams instanceof Array?r.config.apply(r,e.easeParams):r:this._ease=typeof r=="function"?new m(r,e.easeParams):g[r]||N.defaultEase:this._ease=N.defaultEase,this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null;if(this._targets){i=this._targets.length;while(--i>-1)this._initProps(this._targets[i],this._propLookup[i]={},this._siblings[i],t?t[i]:null)&&(s=!0)}else s=this._initProps(this.target,this._propLookup,this._siblings,t);s&&N._onPluginEvent("_onInitAllProps",this),t&&(this._firstPT||typeof this.target!="function"&&this._enabled(!1,!1));if(e.runBackwards){o=this._firstPT;while(o)o.s+=o.c,o.c=-o.c,o=o._next}this._onUpdate=e.onUpdate,this._initted=!0},u._initProps=function(e,t,n,r){var i,s,o,u,a,f,l;if(e==null)return!1;this.vars.css||e.style&&e.nodeType&&A.css&&this.vars.autoCSS!==!1&&L(this.vars,e);for(i in this.vars){if(_[i]){if(i==="onStartParams"||i==="onUpdateParams"||i==="onCompleteParams"||i==="onReverseCompleteParams"||i==="onRepeatParams")if(a=this.vars[i]){s=a.length;while(--s>-1)a[s]==="{self}"&&(a=this.vars[i]=a.concat(),a[s]=this)}}else if(A[i]&&(u=new A[i])._onInitTween(e,this.vars[i],this)){this._firstPT=f={_next:this._firstPT,t:u,p:"setRatio",s:0,c:1,f:!0,n:i,pg:!0,pr:u._priority},s=u._overwriteProps.length;while(--s>-1)t[u._overwriteProps[s]]=this._firstPT;if(u._priority||u._onInitAllProps)o=!0;if(u._onDisable||u._onEnable)this._notifyPluginsOfEnabled=!0}else this._firstPT=t[i]=f={_next:this._firstPT,t:e,p:i,f:typeof e[i]=="function",n:i,pg:!1,pr:0},f.s=f.f?e[i.indexOf("set")||typeof e["get"+i.substr(3)]!="function"?i:"get"+i.substr(3)]():parseFloat(e[i]),l=this.vars[i],f.c=typeof l=="string"&&l.charAt(1)==="="?parseInt(l.charAt(0)+"1",10)*Number(l.substr(2)):Number(l)-f.s||0;f&&f._next&&(f._next._prev=f)}return r&&this._kill(r,e)?this._initProps(e,t,n,r):this._overwrite>1&&this._firstPT&&n.length>1&&j(e,this,t,this._overwrite,n)?(this._kill(t,e),this._initProps(e,t,n,r)):o},u.render=function(e,t,n){var r=this._time,i,s,o;if(e>=this._duration)this._totalTime=this._time=this._duration,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(i=!0,s="onComplete"),this._duration===0&&((e===0||this._rawPrevTime<0)&&this._rawPrevTime!==e&&(n=!0),this._rawPrevTime=e);else if(e<=0){this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0;if(r!==0||this._duration===0&&this._rawPrevTime>0)s="onReverseComplete",i=this._reversed;e<0?(this._active=!1,this._duration===0&&(this._rawPrevTime>=0&&(n=!0),this._rawPrevTime=e)):this._initted||(n=!0)}else{this._totalTime=this._time=e;if(this._easeType){var u=e/this._duration,a=this._easeType,f=this._easePower;if(a===1||a===3&&u>=.5)u=1-u;a===3&&(u*=2),f===1?u*=u:f===2?u*=u*u:f===3?u*=u*u*u:f===4&&(u*=u*u*u*u),a===1?this.ratio=1-u:a===2?this.ratio=u:e/this._duration<.5?this.ratio=u/2:this.ratio=1-u/2}else this.ratio=this._ease.getRatio(e/this._duration)}if(this._time===r&&!n)return;if(!this._initted){this._init();if(!this._initted)return;this._time&&!i?this.ratio=this._ease.getRatio(this._time/this._duration):i&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(this._time===0?0:1))}this._active||this._paused||(this._active=!0),r===0&&(this._startAt&&this._startAt.render(e,t,n),this.vars.onStart&&(this._time!==0||this._duration===0)&&(t||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||v))),o=this._firstPT;while(o)o.f?o.t[o.p](o.c*this.ratio+o.s):o.t[o.p]=o.c*this.ratio+o.s,o=o._next;this._onUpdate&&(e<0&&this._startAt&&this._startAt.render(e,t,n),t||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||v)),s&&(this._gc||(e<0&&this._startAt&&(this._onUpdate||this._startAt.render(e,t,n)),i&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),t||this.vars[s]&&this.vars[s].apply(this.vars[s+"Scope"]||this,this.vars[s+"Params"]||v)))},u._kill=function(e,t){e==="all"&&(e=null);if(e==null)if(t==null||t===this.target)return this._enabled(!1,!1);t=typeof t!="string"?t||this._targets||this.target:N.selector(t)||t;var n,r,i,s,o,u,a,f;if((t instanceof Array||C(t))&&typeof t[0]!="number"){n=t.length;while(--n>-1)this._kill(e,t[n])&&(u=!0)}else{if(this._targets){n=this._targets.length;while(--n>-1)if(t===this._targets[n]){o=this._propLookup[n]||{},this._overwrittenProps=this._overwrittenProps||[],r=this._overwrittenProps[n]=e?this._overwrittenProps[n]||{}:"all";break}}else{if(t!==this.target)return!1;o=this._propLookup,r=this._overwrittenProps=e?this._overwrittenProps||{}:"all"}if(o){a=e||o,f=e!==r&&r!=="all"&&e!==o&&(e==null||e._tempKill!==!0);for(i in a){if(s=o[i]){s.pg&&s.t._kill(a)&&(u=!0);if(!s.pg||s.t._overwriteProps.length===0)s._prev?s._prev._next=s._next:s===this._firstPT&&(this._firstPT=s._next),s._next&&(s._next._prev=s._prev),s._next=s._prev=null;delete o[i]}f&&(r[i]=1)}this._firstPT||this._enabled(!1,!1)}}return u},u.invalidate=function(){return this._notifyPluginsOfEnabled&&N._onPluginEvent("_onDisable",this),this._firstPT=null,this._overwrittenProps=null,this._onUpdate=null,this._startAt=null,this._initted=this._active=this._notifyPluginsOfEnabled=!1,this._propLookup=this._targets?{}:[],this},u._enabled=function(e,t){f||a.wake();if(e&&this._gc){var n=this._targets,r;if(n){r=n.length;while(--r>-1)this._siblings[r]=B(n[r],this,!0)}else this._siblings=B(this.target,this,!0)}return x.prototype._enabled.call(this,e,t),this._notifyPluginsOfEnabled&&this._firstPT?N._onPluginEvent(e?"_onEnable":"_onDisable",this):!1},N.to=function(e,t,n){return new N(e,t,n)},N.from=function(e,t,n){return n.runBackwards=!0,n.immediateRender=n.immediateRender!=0,new N(e,t,n)},N.fromTo=function(e,t,n,r){return r.startAt=n,r.immediateRender=r.immediateRender!=0&&n.immediateRender!=0,new N(e,t,r)},N.delayedCall=function(e,t,n,r,i){return new N(t,0,{delay:e,onComplete:t,onCompleteParams:n,onCompleteScope:r,onReverseComplete:t,onReverseCompleteParams:n,onReverseCompleteScope:r,immediateRender:!1,useFrames:i,overwrite:0})},N.set=function(e,t){return new N(e,0,t)},N.killTweensOf=N.killDelayedCallsTo=function(e,t){var n=N.getTweensOf(e),r=n.length;while(--r>-1)n[r]._kill(t,e)},N.getTweensOf=function(e){if(e==null)return;e=typeof e!="string"?e:N.selector(e)||e;var t,n,r,i;if((e instanceof Array||C(e))&&typeof e[0]!="number"){t=e.length,n=[];while(--t>-1)n=n.concat(N.getTweensOf(e[t]));t=n.length;while(--t>-1){i=n[t],r=t;while(--r>-1)i===n[r]&&n.splice(t,1)}}else{n=B(e).concat(),t=n.length;while(--t>-1)n[t]._gc&&n.splice(t,1)}return n};var I=p("plugins.TweenPlugin",function(e,t){this._overwriteProps=(e||"").split(","),this._propName=this._overwriteProps[0],this._priority=t||0,this._super=I.prototype},!0);u=I.prototype,I.version="1.9.1",I.API=2,u._firstPT=null,u._addTween=function(e,t,n,r,i,s){var o,u;r!=null&&(o=typeof r=="number"||r.charAt(1)!=="="?Number(r)-n:parseInt(r.charAt(0)+"1",10)*Number(r.substr(2)))&&(this._firstPT=u={_next:this._firstPT,t:e,p:t,s:n,c:o,f:typeof e[t]=="function",n:i||t,r:s},u._next&&(u._next._prev=u))},u.setRatio=function(e){var t=this._firstPT,n=1e-6,r;while(t)r=t.c*e+t.s,t.r?r=r+(r>0?.5:-0.5)>>0:r<n&&r>-n&&(r=0),t.f?t.t[t.p](r):t.t[t.p]=r,t=t._next},u._kill=function(e){var t=this._overwriteProps,n=this._firstPT,r;if(e[this._propName]!=null)this._overwriteProps=[];else{r=t.length;while(--r>-1)e[t[r]]!=null&&t.splice(r,1)}while(n)e[n.n]!=null&&(n._next&&(n._next._prev=n._prev),n._prev?(n._prev._next=n._next,n._prev=null):this._firstPT===n&&(this._firstPT=n._next)),n=n._next;return!1},u._roundProps=function(e,t){var n=this._firstPT;while(n){if(e[this._propName]||n.n!=null&&e[n.n.split(this._propName+"_").join("")])n.r=t;n=n._next}},N._onPluginEvent=function(e,t){var n=t._firstPT,r,i,s,o,u;if(e==="_onInitAllProps"){while(n){u=n._next,i=s;while(i&&i.pr>n.pr)i=i._next;(n._prev=i?i._prev:o)?n._prev._next=n:s=n,(n._next=i)?i._prev=n:o=n,n=u}n=t._firstPT=s}while(n)n.pg&&typeof n.t[e]=="function"&&n.t[e]()&&(r=!0),n=n._next;return r},I.activate=function(e){var t=e.length;while(--t>-1)e[t].API===I.API&&(A[(new e[t])._propName]=e[t]);return!0},h.plugin=function(e){if(!e||!e.propName||!e.init||!e.API)throw"illegal plugin definition.";var t=e.propName,n=e.priority||0,r=e.overwriteProps,i={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},s=p("plugins."+t.charAt(0).toUpperCase()+t.substr(1)+"Plugin",function(){I.call(this,t,n),this._overwriteProps=r||[]},e.global===!0),o=s.prototype=new I(t),u;o.constructor=s,s.API=e.API;for(u in i)typeof e[u]=="function"&&(o[i[u]]=e[u]);return s.version=e.version,I.activate([s]),s},s=e._gsQueue;if(s){for(o=0;o<s.length;o++)s[o]();for(u in l)l[u].func||e.console.log("GSAP encountered missing dependency: com.greensock."+u)}f=!1}(window),define("greensock/TweenMax",function(){}),define("text",["module"],function(e){var t,n,r,i,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],o=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,u=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,a=typeof location!="undefined"&&location.href,f=a&&location.protocol&&location.protocol.replace(/\:/,""),l=a&&location.hostname,c=a&&(location.port||undefined),h=[],p=e.config&&e.config()||{};t={version:"2.0.5+",strip:function(e){if(e){e=e.replace(o,"");var t=e.match(u);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:p.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=s[t];try{e=new ActiveXObject(n)}catch(r){}if(e){s=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,p.isBuild&&(h[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}p.isBuild=i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),h=p.useXhr||t.useXhr;!a||h(u,f,l,c)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(h.hasOwnProperty(n)){var s=t.jsEscape(h[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(p.env==="node"||!p.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node)n=require.nodeRequire("fs"),t.get=function(e,t){var r=n.readFileSync(e,"utf8");r.indexOf("﻿")===0&&(r=r.substring(1)),t(r)};else if(p.env==="xhr"||!p.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);p.onXhr&&p.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r(o)):n(s.responseText))},s.send(null)};else if(p.env==="rhino"||!p.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(p.env==="xpconnect"||!p.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),t.get=function(e,t){var n,s,o={},u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),s=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),s.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),s.readString(n.available(),o),s.close(),n.close(),t(o.value)}catch(a){throw new Error((u&&u.path||"")+": "+a)}};return t}),define("text!interaction_view/template/animateitem_view_for_webapp.js",[],function(){return'<div class="iView dynamic hide <%=isMasterOverlay?"masterhide":""%>" data-type="<%=iType%>" id="<%=id%>" style="width: 0px; height: 0px; backgroud-repeat:no-repeat;background-postion:center;">\n    <%if(iType=="RichText"||iType=="Region"){%>\n                    <div class="iText nanoscrollbar Element" style="position:absolute;left: -<%=iCommon[iPageDirection].iWidth/2%>px; top: -<%=iCommon[iPageDirection].iHeight/2%>px;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;overflow:hidden;padding:0;margin:0;">\n                        <% if(iDetail.iStaticImage&&iDetail.iImg&&iDetail.iImg[0]){%>\n                            <img src="<%=iDetail.iImg[0].picture%>" style="width:100%;height:auto;"/>\n                        <% }else{%>\n                          <%=iDetail.iText%>\n                        <% } %>\n                    </div>      \n    <%}%>\n    <%if(iType=="TextLabel"||iType=="BookButton"){%>\n                    <div class="iTextLabel nanoscrollbar Element" style="position:absolute;left: -<%=iCommon[iPageDirection].iWidth/2%>px; top: -<%=iCommon[iPageDirection].iHeight/2%>px;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;overflow:hidden;">\n                        <% if(iDetail.iStaticImage&&iDetail.iImg&&iDetail.iImg[0]){%>\n                            <img src="<%=iDetail.iImg[0].picture%>" style="width:100%;height:auto;"/>\n                        <% }else{%>\n                          <%=iDetail.iText%>\n                        <% } %>\n                    </div>      \n    <%}%>\n    <%if(iType==\'Image\'){%>\n        <div class="iImage Element" style="position:absolute;left: -<%=iCommon[iPageDirection].iWidth/2%>px; top: -<%=iCommon[iPageDirection].iHeight/2%>px;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;<%=iDetail.iMask?"overflow:hidden;":""%>">\n            <%if(iDetail.iImg&&iDetail.iImg[0]){%>\n                <%if(typeof isSubOverlay!="undefined"&&isSubOverlay&&(typeof isLayerOverlay=="undefined"||!isLayerOverlay)){%>\n                    <% if(iDetail.iMask){%>\n                        <img draggable="false" id="<%=preload_id%>" class="Context" style="width:<%=iDetail.iMask_data.width%>px;height:<%=iDetail.iMask_data.height%>px;position:absolute;max-width:none;">\n                    <%}else{%>\n                        <img draggable="false" id="<%=preload_id%>" class="Context" style="width:100%;height:100%;position:absolute;">\n                    <% } %>\n                <%}else{ %>\n                    <% if(iDetail.iMask){%>\n                        <img draggable="false" id="<%=preload_id%>" class="Context" style="width:<%=iDetail.iMask_data.width%>px;height:<%=iDetail.iMask_data.height%>px;position:absolute;max-width:none;">\n                    <%}else{%>\n                        <img draggable="false" id="<%=preload_id%>" class="Context" style="width:100%;height:100%;position:absolute;">\n                    <% } %>\n                <%}%>\n            <%}%>\n        </div>\n    <%}%>\n    <%if(iType==\'Link\'){%>\n        <div class="iLink Element" style="position:absolute;left: -<%=iCommon[iPageDirection].iWidth/2%>px; top: -<%=iCommon[iPageDirection].iHeight/2%>px;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;"></div>\n    <%}%>\n    <%if(iType==\'SearchInput\'){%>\n        <div class="iSearchInput Element" style="position:absolute;left: -<%=iCommon[iPageDirection].iWidth/2%>px; top: -<%=iCommon[iPageDirection].iHeight/2%>px;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">\n            <form class="search" style="position:relative; cursor:default;">\n                  <input type="text" placeholder="输入关键字" class="input-medium search-query" style="cursor:default; width:<%=iCommon[iPageDirection].iWidth-14%>px; height:<%=iCommon[iPageDirection].iHeight-2%>px; line-height:<%=iCommon[iPageDirection].iHeight-2%>px; border-radius:8px; border-color:<%=iDetail.border_color%>; color:<%=iDetail.text_color%>; background-color:transparent;">\n                  <button class="btn" type="submit" style="cursor:default; position:absolute; top:0; right:0; display:block; width:30px; height:<%=iCommon[iPageDirection].iHeight-2%>px; line-height:30px; background:none; border:none; margin:0 0 0 -30px; padding:0; text-shadow:none; color:#ccc;">\n                    <i class="icon-search"></i>\n                  </button>\n            </form>        \n        </div>\n    <%}%>\n    <%if(iType==\'Tree\'){%>\n        <div class="iTree Element" style="position:absolute;left: -<%=iCommon[iPageDirection].iWidth/2%>px; top: -<%=iCommon[iPageDirection].iHeight/2%>px;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">       \n        </div>\n    <%}%>\n    <%if(iType==\'Grid\'){%>\n        <div class="iGrid Element" style="overflow:hidden;position:absolute;left: -<%=iCommon[iPageDirection].iWidth/2%>px; top: -<%=iCommon[iPageDirection].iHeight/2%>px;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">\n        </div>\n    <%}%>\n    <%if(iType==\'Gallery\'){%>\n        <div class="iGallery Element nanoscrollbar" style="overflow:hidden;position:absolute;left: -<%=iCommon[iPageDirection].iWidth/2%>px; top: -<%=iCommon[iPageDirection].iHeight/2%>px;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;overflow:hidden;">\n        </div>\n    <%}%>\n    <%if(iType==\'PageIndex\'){%>\n        <div class="iPageIndex Element nanoscrollbar" style="overflow:hidden;position:absolute;left: -<%=parseInt(iCommon[iPageDirection].iWidth/2,10)-0.5%>px; top: -<%=parseInt(iCommon[iPageDirection].iHeight/2,10)-0.5%>px;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">\n        </div>\n    <%}%>\n    <%if(iType==\'Cell\'){%>\n        <div class="iCell Element" style="overflow:hidden;position:absolute;left: -<%=parseInt(iCommon[iPageDirection].iWidth/2,10)+1%>px; top: -<%=iCommon[iPageDirection].iHeight/2%>px;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth+1.5%>px;height:<%=iCommon[iPageDirection].iHeight%>px;overflow:hidden;">\n        </div>\n    <%}%>\n    <%if(iType==\'TabBar\'){%>\n        <div class="iTabBar Element" style="overflow:hidden;position:absolute;left: -<%=iCommon[iPageDirection].iWidth/2%>px; top: -<%=iCommon[iPageDirection].iHeight/2%>px;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;overflow:hidden;">\n        </div>\n    <%}%>\n    <%if(iType=="WebContent"||iType=="FormView"){%>\n                    <div class="i<%=iType%> nanoscrollbar Element iMouseWheel disableMouseWheelY disableMouseWheelX disableDragX disableDragY" style="position:absolute;left: -<%=iCommon[iPageDirection].iWidth/2%>px; top: -<%=iCommon[iPageDirection].iHeight/2%>px;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;-webkit-overflow-scrolling:touch;overflow:auto;">\n                       <% if(interaction_view.getWebContentSrc(iDetail)&&interaction_view.getWebContentSrc(iDetail).src){%>\n                        <iframe src="<%=interaction_view.getWebContentSrc(iDetail).src||""%>" style="position:absolute;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;min-height:<%=iCommon[iPageDirection].iHeight%>px;height:100%;border:none;overflow:visible;"></iframe>\n                        <% } %>\n                        <% if(interaction_view.getWebContentSrc(iDetail)&&interaction_view.getWebContentSrc(iDetail).content){%>\n                           <iframe style="position:absolute;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;min-height:<%=iCommon[iPageDirection].iHeight%>px;height:100%;border:none;overflow:visible;"></iframe>\n                        <% } %>                           \n                    </div>      \n    <%}%>\n    <%if(iType==\'Slide\'){%>\n        <div class="iSlide Element" style="position:absolute;left: -<%=iCommon[iPageDirection].iWidth/2%>px; top: -<%=iCommon[iPageDirection].iHeight/2%>px;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">\n            <div class="slidecontent" style="position:absolute;width:100%;height:100%;line-height:<%=iCommon[iPageDirection].iHeight%>px;">\n                <%if(iDetail.iImg){%>\n                    <%_.each(iDetail.iImg,function(i,index){%>\n                        <%if(_g.getUrlParameterByName("-playmode")=="1"){%>\n                            <img data-index="<%=index%>" id="<%=preload_id[index]%>" class="Context" style="width:100%;height:100%;position:absolute;margin:auto;display:inline;verticle-align:middle;">\n                        <%}else{ %>\n                            <img data-index="<%=index%>" id="<%=preload_id[index]%>" class="Context" style="width:100%;height:100%;position:absolute;margin:auto;display:inline;verticle-align:middle;">\n                        <%}%>               \n                    <%})%>\n                <%}%>\n            </div>\n        </div>\n    <%}%>\n    <%if(iType==\'CycleImage\'){%>\n        <div class="iCycleImage Element" style="overflow:hidden;position:absolute;left: -<%=iCommon[iPageDirection].iWidth/2%>px; top: -<%=iCommon[iPageDirection].iHeight/2%>px;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">\n            <div class="slidecontent" style="position:absolute;width:100%;height:100%;line-height:<%=iCommon[iPageDirection].iHeight%>px;">\n                <%if(iDetail.iImg){%>\n                    <%_.each(iDetail.iImg,function(i,index){%>\n                        <%if(_g.getUrlParameterByName("-playmode")=="1"){%>\n                            <img data-index="<%=index%>" id="<%=preload_id[index]%>" class="Context" style="width:100%;height:100%;position:absolute;margin:auto;display:inline;verticle-align:middle;">\n                        <%}else{ %>\n                            <img data-index="<%=index%>" id="<%=preload_id[index]%>" class="Context" style="width:100%;height:100%;position:absolute;margin:auto;display:inline;verticle-align:middle;">\n                        <%}%>\n                    <%})%>\n                <%}%>\n            </div>\n        </div>\n    <%}%>\n    <%if(iType==\'Video\'){%>\n        <div class="iVideo Element" style="position:absolute;left: -<%=iCommon[iPageDirection].iWidth/2%>px; top: -<%=iCommon[iPageDirection].iHeight/2%>px;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">\n        </div>\n    <%}%>\n    <%if(iType==\'Audio\'){%>\n        <% if(iDetail.iControl){%>\n            <div class="iAudio Element" style="position:absolute;left: -<%=iCommon[iPageDirection].iWidth/2%>px; top: -<%=iCommon[iPageDirection].iHeight/2%>px;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">\n            </div>\n        <% }else{ %>\n            <div class="iAudio Element" style="position:absolute;left: -9999px; top: -9999px;background-color:transparent;">\n            </div>            \n        <% } %>\n    <%}%>\n    <%if(iType=="AnimationControl"){%>\n        <% if(iDetail.iControlType==2){%>\n            <div class="iAC Element" style="position:absolute;left: -<%=iCommon[iPageDirection].iWidth/2%>px; top: -<%=iCommon[iPageDirection].iHeight/2%>px;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">\n            </div>\n        <% }else{ %>\n            <div class="iAC Element" style="position:absolute;left: -9999px; top: -9999px;background-color:transparent;">\n            </div>            \n        <% } %>\n    <%}%>\n    <%if(iType==\'Button\'){%>\n        <div class="iButton Element" style="position:absolute;left: -<%=iCommon[iPageDirection].iWidth/2%>px; top: -<%=iCommon[iPageDirection].iHeight/2%>px;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">\n            <%if(iDetail.iconNormal&&iDetail.iconNormal[0]){%>\n                <img class="Context iconNormal" id="<%=preload_id[0]%>" style="width:100%;height:100%;position:absolute;">\n            <%}%>\n            <%if(iDetail.iconActive&&iDetail.iconActive[0]){%>\n                <img class="Context iconActive" id="<%=preload_id[1]%>" style="width:100%;height:100%;position:absolute;display:none;">\n            <%}%>\n        </div>\n    <%}%>\n    <%if(iType=="Map"){%>\n        <div class="iMap nanoscrollbar Element" style="position:absolute;left: -<%=iCommon[iPageDirection].iWidth/2%>px; top: -<%=iCommon[iPageDirection].iHeight/2%>px;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">\n            <iframe style="width: 100%; height: 100%;" src="<%=iDetail.iText + \'&view=view\'%>" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"></iframe>\n        </div>\n    <%}%>\n    <%if(iType=="Pay"){%>\n                    <div class="iPay nanoscrollbar Element" style="position:absolute;left: -<%=iCommon[iPageDirection].iWidth/2%>px; top: -<%=iCommon[iPageDirection].iHeight/2%>px;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">\n                        <%=iDetail.iText%>\n                    </div>      \n    <%}%>\n    <%if(iType=="LayerRef"||iType=="LayerSlide"){%>\n         <div class="iLayerRef Element" style="position:absolute;left: -<%=iCommon[iPageDirection].iWidth/2%>px; top: -<%=iCommon[iPageDirection].iHeight/2%>px;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">\n            <div class="layer-mask" style="position:absolute;width:100%;height:100%;overflow:hidden;">\n                <%if(iDetail.layer_ids&&iDetail.layer_ids.length>0){%>\n                    <div class="layer-content" style="position:absolute;width:100%;height:100%;">\n                    <% _.each(iDetail.layer_ids,function(layerid){ %>\n                        <% if(interaction_view.ilayerlist.get(layerid)){ %>\n                        <div class="layer-item" data-index="<%=iDetail.layer_ids.indexOf(layerid)%>" data-id="<%=layerid%>" style="position:absolute;opacity:0;width:<%=interaction_view.ilayerlist.get(layerid).toJSON().layer_width%>px;height:<%=interaction_view.ilayerlist.get(layerid).toJSON().layer_height%>px;left:0px;right:0px;">\n                             <div href="" class="layer-bg" style="position:absolute;width:100%;height:100%;text-align:center;line-height:<%=interaction_view.ilayerlist.get(layerid).toJSON().layer_height%>px;background-color:<%=interaction_view.ilayerlist.get(layerid).toJSON().bg_color%>;opacity:<%=interaction_view.ilayerlist.get(layerid).toJSON().bg_opacity%>">\n                               <% if(interaction_view.ilayerlist.get(layerid).get("picture")){ %>\n                                <img src="<%=interaction_view.ilayerlist.get(layerid).get("picture")%>" style="<%=(interaction_view.ilayerlist.get(layerid).toJSON().layer_width>=interaction_view.ilayerlist.get(layerid).toJSON().layer_height)?"width:auto;height:100%;":"width:100%;height:auto;"%>margin:auto">\n                               <% } %>\n                            </div>                         \n                        </div>\n                        <% } %>\n                    <% }) %>             \n                  </div>\n                 <% } %>\n            </div>  \n          </div>    \n    <%}%>\n    <%if(iType=="Shape"){%>\n        <% if (_g.device.svg()){%><div class="iShape nanoscrollbar Element" style="position:absolute;left: -<%=iCommon[iPageDirection].iWidth/2%>px; top: -<%=iCommon[iPageDirection].iHeight/2%>px;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">\n            <%=iDetail.iSvg%>\n        </div><% }else{ %>\n        <div class="iImage Element" style="position:absolute;left: <%=-iCommon[iPageDirection].iWidth/2%>px; top: <%=-iCommon[iPageDirection].iHeight/2%>px;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">\n            <img draggable="false" class="Context" style="width:100%;height:100%;position:absolute;" src="<%=iDetail.iImg[0].picture%>">  \n        </div><% } %>\n    <%}%>\n    <%if(iType==\'DragDrop\'){%>\n        <div class="iDragDrop Element" style="position:absolute;left: -<%=iCommon[iPageDirection].iWidth/2%>px; top: -<%=iCommon[iPageDirection].iHeight/2%>px;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">\n            <%if(iDetail.iconNormal&&iDetail.iconNormal[0]){%>\n                <img class="Context iconNormal" id="<%=preload_id[0]%>" style="width:100%;height:100%;position:absolute;">\n            <%}%>\n            <%if(iDetail.iconActive&&iDetail.iconActive[0]){%>\n                <img class="Context iconActive" id="<%=preload_id[1]%>" style="width:100%;height:100%;position:absolute;display:none;">\n            <%}%>\n        </div>\n    <%}%>\n    <%if(iType=="Variable"){%>\n        <div class="iVariable nanoscrollbar Element" style="position:absolute;left: -<%=iCommon[iPageDirection].iWidth/2%>px; top: -<%=iCommon[iPageDirection].iHeight/2%>px;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">\n            <%=iDetail.initial%>\n        </div>\n    <%}%>\n    <%if(iType=="Timer"){%>\n        <div class="iTimer nanoscrollbar Element" style="position:absolute;left: -<%=iCommon[iPageDirection].iWidth/2%>px; top: -<%=iCommon[iPageDirection].iHeight/2%>px;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">\n            <%=iDetail.formatTime%>\n        </div>\n    <%}%>\n</div>\n'}),define("text!interaction_view/template/staticitem_view.js",[],function(){return'<div class="iView static hide <%=isMasterOverlay?"masterhide":""%>" data-type="<%=iType%>" id="<%=id%>" style="position:absolute; left: <%=iCommon[iPageDirection].iStartx%>px; top: <%=iCommon[iPageDirection].iStarty%>px;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px; backgroud-repeat:no-repeat;background-postion:center;">\n    <%if(iType==\'Cell\'){%>\n        <div class="iCell Element" style="overflow:hidden;position:absolute;left: 0px; top:0px;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;overflow:hidden;">\n        </div>\n    <%}%>\n    <%if(iType==\'Image\'){%>\n        <div class="iImage Element" style="position:absolute;left: <%=-iCommon[iPageDirection].iWidth/2%>px; top: <%=-iCommon[iPageDirection].iHeight/2%>px;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;<%=iDetail.iMask?"overflow:hidden;":""%>">\n            <%if(iDetail.iImg&&iDetail.iImg[0]){%>\n                <%if(typeof isSubOverlay!="undefined"&&isSubOverlay&&(typeof isLayerOverlay=="undefined"||!isLayerOverlay)){%>\n                    <% if(iDetail.iMask){%>\n                        <img draggable="false" id="<%=preload_id%>" class="Context" style="width:<%=iDetail.iMask_data.width%>px;height:<%=iDetail.iMask_data.height%>px;position:absolute;max-width:none;">\n                    <%}else{%>\n                        <img draggable="false" id="<%=preload_id%>" class="Context" style="width:100%;height:100%;position:absolute;">\n                    <% } %>\n                <%}else{ %>\n                    <% if(iDetail.iMask){%>\n                        <img draggable="false" id="<%=preload_id%>" class="Context" style="width:<%=iDetail.iMask_data.width%>px;height:<%=iDetail.iMask_data.height%>px;position:absolute;max-width:none;">\n                    <%}else{%>\n                        <img draggable="false" id="<%=preload_id%>" class="Context" style="width:100%;height:100%;position:absolute;">\n                    <% } %>\n                <%}%>\n            <%}%>\n        </div>\n    <%}%>\n    <%if(iType=="RichText"||iType=="Region"){%>\n                    <div class="iText nanoscrollbar Element" style="position:absolute;left: 0; top: 0;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;overflow:hidden;padding:0;margin:0;">\n                        <% if(iDetail.iStaticImage&&iDetail.iImg&&iDetail.iImg[0]){%>\n                            <img src="<%=iDetail.iImg[0].picture%>" style="width:100%;height:auto;"/>\n                        <% }else{%>\n                          <%=iDetail.iText%>\n                        <% } %>\n                    </div>      \n    <%}%>\n    <%if(iType=="TextLabel"||iType=="BookButton"){%>\n                    <div class="iTextLabel nanoscrollbar Element" style="position:absolute;left: 0; top: 0;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;overflow:hidden;">\n                        <% if(iDetail.iStaticImage&&iDetail.iImg&&iDetail.iImg[0]){%>\n                            <img src="<%=iDetail.iImg[0].picture%>" style="width:100%;height:auto;"/>\n                        <% }else{%>\n                          <%=iDetail.iText%>\n                        <% } %>\n                    </div>      \n    <%}%>\n    <%if(iType==\'Link\'){%>\n        <div class="iLink Element" style="position:absolute;left: 0; top: 0;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;"></div>\n    <%}%>\n    <%if(iType==\'SearchInput\'){%>\n        <div class="iSearchInput Element" style="position:absolute;left: 0; top: 0;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">\n            <form class="search" style="position:relative; cursor:default;">\n                  <input type="text" placeholder="输入关键字" class="input-medium search-query" style="cursor:default; width:<%=iCommon[iPageDirection].iWidth-14%>px; height:<%=iCommon[iPageDirection].iHeight-2%>px; line-height:<%=iCommon[iPageDirection].iHeight-2%>px; border-radius:8px; border-color:<%=iDetail.border_color%>; color:<%=iDetail.text_color%>; background-color:transparent;">\n                  <button class="btn" type="submit" style="cursor:default; position:absolute; top:0; right:0; display:block; width:30px; height:<%=iCommon[iPageDirection].iHeight-2%>px; line-height:30px; background:none; border:none; margin:0 0 0 -30px; padding:0; text-shadow:none; color:#ccc;">\n                    <i class="icon-search"></i>\n                  </button>\n            </form>        \n        </div>\n    <%}%>\n    <%if(iType==\'Tree\'){%>\n        <div class="iTree Element" style="position:absolute;left: 0; top: 0;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">       \n        </div>\n    <%}%>\n    <%if(iType==\'Grid\'){%>\n        <div class="iGrid Element" style="overflow:hidden;position:absolute;left: 0; top: 0;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">\n        </div>\n    <%}%>\n    <%if(iType==\'Gallery\'){%>\n        <div class="iGallery Element nanoscrollbar" style="overflow:hidden;position:absolute;left: 0; top: 0;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;overflow:hidden;">\n        </div>\n    <%}%>\n    <%if(iType==\'PageIndex\'){%>\n        <div class="iPageIndex Element nanoscrollbar" style="overflow:hidden;position:absolute;left: 0; top: 0;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">\n        </div>\n    <%}%>\n    <%if(iType==\'TabBar\'){%>\n        <div class="iTabBar Element" style="overflow:hidden;position:absolute;left: 0; top: 0;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;overflow:hidden;">\n        </div>\n    <%}%>\n    <%if(iType=="WebContent"||iType=="FormView"){%>\n                    <div class="i<%=iType%> nanoscrollbar Element iMouseWheel disableMouseWheelY disableMouseWheelX disableDragX disableDragY" style="position:absolute;left: 0; top: 0;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;-webkit-overflow-scrolling:touch;overflow:auto;">\n                       <% if(interaction_view.getWebContentSrc(iDetail)&&interaction_view.getWebContentSrc(iDetail).src){%>\n                        <iframe src="<%=interaction_view.getWebContentSrc(iDetail).src||""%><%=interaction_view.getWebContentSrc(iDetail).src.indexOf(\'?\')>=0 && (\'&\' + window.location.search.replace("?","")) || window.location.search %>" style="position:absolute;background-color:transparent;width:100%;min-height:<%=iCommon[iPageDirection].iHeight%>px;height:100%;border:none;overflow:visible;"></iframe>\n                        <% } %>\n                        <% if(interaction_view.getWebContentSrc(iDetail)&&interaction_view.getWebContentSrc(iDetail).content){%>\n                           <iframe style="position:absolute;background-color:transparent;width:100%;min-height:<%=iCommon[iPageDirection].iHeight%>px;height:100%;border:none;overflow:visible;"></iframe>\n                        <% } %>                           \n                    </div>      \n    <%}%>\n    <%if(iType==\'Slide\'){%>\n        <div class="iSlide Element" style="position:absolute;left: 0; top: 0;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">\n            <div class="slidecontent" style="position:absolute;width:100%;height:100%;line-height:<%=iCommon[iPageDirection].iHeight%>px;">\n                <%if(iDetail.iImg){%>\n                    <%_.each(iDetail.iImg,function(i,index){%>\n                        <%if(_g.getUrlParameterByName("-playmode")=="1"){%>\n                            <img data-index="<%=index%>" id="<%=preload_id[index]%>" class="Context" style="width:100%;height:100%;position:absolute;margin:auto;display:inline;verticle-align:middle;">\n                        <%}else{ %>\n                            <img data-index="<%=index%>" id="<%=preload_id[index]%>" class="Context" style="width:100%;height:100%;position:absolute;margin:auto;display:inline;verticle-align:middle;">\n                        <%}%>               \n                    <%})%>\n                <%}%>\n            </div>\n        </div>\n    <%}%>\n    <%if(iType==\'CycleImage\'){%>\n        <div class="iCycleImage Element" style="overflow:hidden;position:absolute;left: 0; top: 0;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">\n            <div class="slidecontent" style="position:absolute;width:100%;height:100%;line-height:<%=iCommon[iPageDirection].iHeight%>px;">\n                <%if(iDetail.iImg){%>\n                    <%_.each(iDetail.iImg,function(i,index){%>\n                        <%if(_g.getUrlParameterByName("-playmode")=="1"){%>\n                            <img data-index="<%=index%>" id="<%=preload_id[index]%>" class="Context" style="width:100%;height:100%;position:absolute;margin:auto;display:inline;verticle-align:middle;">\n                        <%}else{ %>\n                            <img data-index="<%=index%>" id="<%=preload_id[index]%>" class="Context" style="width:100%;height:100%;position:absolute;margin:auto;display:inline;verticle-align:middle;">\n                        <%}%>\n                    <%})%>\n                <%}%>\n            </div>\n        </div>\n    <%}%>\n    <%if(iType==\'Video\'){%>\n        <div class="iVideo Element" style="position:absolute;left: 0; top: 0;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">\n        </div>\n    <%}%>\n    <%if(iType==\'Audio\'){%>\n        <% if(iDetail.iControl){%>\n            <div class="iAudio Element" style="position:absolute;left: 0; top: 0;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">\n            </div>\n        <% }else{ %>\n            <div class="iAudio Element" style="position:absolute;left: -9999px; top: -9999px;background-color:transparent;">\n            </div>            \n        <% } %>\n    <%}%>\n    <%if(iType=="AnimationControl"){%>\n        <% if(iDetail.iControlType==2){%>\n            <div class="iAC Element" style="position:absolute;left: 0; top: 0;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">\n            </div>\n        <% }else{ %>\n            <div class="iAC Element" style="position:absolute;left: -9999px; top: -9999px;background-color:transparent;">\n            </div>            \n        <% } %>\n    <%}%>\n    <%if(iType==\'Button\'){%>\n        <div class="iButton Element" style="position:absolute;left: 0; top: 0;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">\n            <%if(iDetail.iconNormal&&iDetail.iconNormal[0]){%>\n                <img class="Context iconNormal" id="<%=preload_id[0]%>" style="width:100%;height:100%;position:absolute;">\n            <%}%>\n            <%if(iDetail.iconActive&&iDetail.iconActive[0]){%>\n                <img class="Context iconActive" id="<%=preload_id[1]%>" style="width:100%;height:100%;position:absolute;display:none;">\n            <%}%>\n        </div>\n    <%}%>\n    <%if(iType=="Map"){%>\n        <div class="iMap nanoscrollbar Element" style="position:absolute;left: 0; top: 0;background-color:transparent;width:100%;height:100%;">\n            <% if(typeof epub360_book_type =="undefined"){ %>\n                <iframe style="width: 100%; height: 100%;" src="<%=iDetail.iText + \'&view=view\'%>" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"></iframe>\n            <% }else{ %>\n                <iframe style="width: 100%; height: 100%;" src=".<%=iDetail.iText + \'&view=view\'%>" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"></iframe>\n            <% }%>\n        </div>      \n    <%}%>\n    <%if(iType=="Pay"){%>\n                    <div class="iPay nanoscrollbar Element" style="position:absolute;left: 0; top: 0;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">\n                        <%=iDetail.iText%>\n                    </div>      \n    <%}%>\n    <%if(iType=="LayerRef"||iType=="LayerSlide"){%>\n         <div class="iLayerRef Element" style="position:absolute;left: 0; top: 0;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">\n            <div class="layer-mask" style="position:absolute;width:100%;height:100%;overflow:hidden;">\n                <%if(iDetail.layer_ids&&iDetail.layer_ids.length>0){%>\n                    <div class="layer-content" style="position:absolute;width:100%;height:100%;">\n                    <% _.each(iDetail.layer_ids,function(layerid){ %>\n                        <% if(interaction_view.ilayerlist.get(layerid)){ %>\n                        <div class="layer-item" data-index="<%=iDetail.layer_ids.indexOf(layerid)%>" data-id="<%=layerid%>" style="position:absolute;opacity:0;width:<%=interaction_view.ilayerlist.get(layerid).toJSON().layer_width%>px;height:<%=interaction_view.ilayerlist.get(layerid).toJSON().layer_height%>px;left:0px;right:0px;">\n                             <div href="" class="layer-bg" style="position:absolute;width:100%;height:100%;text-align:center;line-height:<%=interaction_view.ilayerlist.get(layerid).toJSON().layer_height%>px;background-color:<%=interaction_view.ilayerlist.get(layerid).toJSON().bg_color%>;opacity:<%=interaction_view.ilayerlist.get(layerid).toJSON().bg_opacity%>">\n                               <% if(interaction_view.ilayerlist.get(layerid).get("picture")){ %>\n                                <img src="<%=interaction_view.ilayerlist.get(layerid).get("picture")%>" style="<%=(interaction_view.ilayerlist.get(layerid).toJSON().layer_width>=interaction_view.ilayerlist.get(layerid).toJSON().layer_height)?"width:auto;height:100%;":"width:100%;height:auto;"%>margin:auto">\n                               <% } %>\n                            </div>                         \n                        </div>\n                        <% } %>\n                    <% }) %>             \n                  </div>\n                 <% } %>\n            </div>  \n          </div>    \n    <%}%>\n    <%if(iType=="Shape"){%>\n        <% if (_g.device.svg()){%><div class="iShape nanoscrollbar Element" style="position:absolute;left: 0; top: 0;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">\n            <%=iDetail.iSvg%>\n        </div><% }else{ %>\n        <div class="iImage Element" style="position:absolute;left: <%=-iCommon[iPageDirection].iWidth/2%>px; top: <%=-iCommon[iPageDirection].iHeight/2%>px;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">\n            <img draggable="false" class="Context" style="width:100%;height:100%;position:absolute;" src="<%=iDetail.iImg[0].picture%>">  \n        </div><% } %>\n    <%}%>\n    <%if(iType==\'DragDrop\'){%>\n        <div class="iDragDrop Element" style="position:absolute;left: 0; top: 0;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">\n            <%if(iDetail.iconNormal&&iDetail.iconNormal[0]){%>\n                <img class="Context iconNormal" id="<%=preload_id[0]%>" style="width:100%;height:100%;position:absolute;">\n            <%}%>\n            <%if(iDetail.iconActive&&iDetail.iconActive[0]){%>\n                <img class="Context iconActive" id="<%=preload_id[1]%>" style="width:100%;height:100%;position:absolute;display:none;">\n            <%}%>\n        </div>\n    <%}%>\n    <%if(iType=="Variable"){%>\n        <div class="iVariable nanoscrollbar Element" style="position:absolute;left: 0; top: 0;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">\n            <%=iDetail.initial%>\n        </div>\n    <%}%>\n    <%if(iType=="Timer"){%>\n        <div class="iTimer nanoscrollbar Element" style="position:absolute;left: 0; top: 0;background-color:transparent;width:<%=iCommon[iPageDirection].iWidth%>px;height:<%=iCommon[iPageDirection].iHeight%>px;">\n            <%=iDetail.formatTime%>\n        </div>\n    <%}%>\n</div>\n'}),define("text!interaction_view/template/message.js",[],function(){return'<div class="status <%=type%>">\n<p><%=msg%></p>\n<a href="#" class="close">Close</a>\n</div>'}),define("text!interaction_view/template/slidenumber.js",[],function(){return'<%if(slidelength>1){%>\n<% if(iDetail.slideno_horizontal){%>\n<nav class="iView nav-horizen slidenumber" data-id="<%=id%>" style="left:<%=iDetail.slideno_horizontal_data.x%>px;top:<%=iDetail.slideno_horizontal_data.y%>px;">\n    <%for(i=0;i<slidelength;i++){%><li class="<%=0==i?"active":""%>"><a href="#" data-index="<%=i%>"></a></li><% } %>\n</nav>\n<% } %>\n<% if(iDetail.slideno_vertical){%>\n<nav class="iView nav-vertical slidenumber" data-id="<%=id%>" style="left:<%=iDetail.slideno_vertical_data.x%>px;top:<%=iDetail.slideno_vertical_data.y%>px;">\n    <%for(i=0;i<slidelength;i++){%><li class="<%=0==i?"active":""%>"><a href="#" data-index="<%=i%>"></a></li><% } %>\n</nav>\n<% } %>\n<% } %>\n'}),define("text!interaction_view/template/imgpreview.js",[],function(){return'<div class="btn-group action-control" style="position: absolute;left: 0;top: 0;z-index: 100001;background: transparent;width: 100%;height: 100%;">\n    <button class="btn preview-left enabled" href="#" rel="tooltip" data-original-title="PREV" style="color: #FFF;position: absolute;left: 0;top: 50%;background-color: transparent;background: none;">\n        <i class="icon-chevron-left icon-2x"></i>\n    </button>\n    <button class="btn preview-right enabled" href="#" rel="tooltip" data-original-title="NEXT" style="color: #FFF;background: transparent;position: absolute;right: 0px;top: 50%;">\n        <i class="icon-chevron-right icon-2x"></i>\n    </button>\n</div>'}),function(){var e={uuid:function(){function e(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return e()+e()+e()+e()+e()+e()+e()+e()},getUrlParameterByName:function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=t.exec(location.search);return n==null?null:decodeURIComponent(n[1].replace(/\+/g," "))},parseTemplate:function(e){var t=null;return typeof e=="function"&&(t=e),typeof e=="string"&&(t=_.template(e)),t},renderT:function(e,t,n,r,i){if(!e)return!1;t||(t={});var s=r||null,o=$.extend(!0,{},t);s&&typeof _gDebug!="undefined"&&_gDebug&&_g.debug&&_g.debug.enabled&&_g.debug.query_user_template(s)&&!i&&(e=_g.debug.query_user_template(s));if(n){var u={};u[n]=o,o=u}var a=_g.parseTemplate(e);s&&_g.debug&&_g.debug.enabled&&(_g.debug.template[s]={data:o,template:typeof e=="string"?e:e.textsource,debug:!0});var f=$(a(o));return s&&_g.debug&&_g.debug.enabled&&(_g.debug.template[s].el=f),_g.generator&&(_g.generator.autoWidget(f),(f.hasClass("c-slimscroll")||f.find(".c-slimscroll").length)&&_g.generator.autoScroll(f)),f.find("[data-toggle=tooltip],.c-tooltip-btn").each(function(){var e=$(this),t=$(this).data().template;t?require(["text!"+t],function(){var n=require("text!"+t);e.tooltip({template:n})}):$(this).tooltip()}),f},browserSupport:function(e){var t=!1,n={msie:1,chrome:1,mozilla:1,safari:1,opera:1,success:null,fail:null};e=e?$.extend(!0,{},n,e):$.extend(!0,{},n);var r=parseInt($.browser.version,10);return $.browser.msie&&e.msie==1||$.browser.chrome&&e.chrome==1||$.browser.mozilla&&e.mozilla==1||$.browser.safari&&e.safrai==1&&$.browser.opera&&e.opera==1?t=!0:$.browser.msie&&e.msie==0||$.browser.chrome&&e.chrome==0||$.browser.mozilla&&e.mozilla==0||$.browser.safari&&e.safrai==0&&$.browser.opera&&e.opera==0?t=!1:($.browser.msie&&(t=r>=e.msie),$.browser.chrome&&(t=r>=e.chrome),$.browser.mozilla&&(t=r>=e.mozilla),$.browser.opera&&(t=r>=e.opera),$.browser.safari&&(t=r>=e.safari)),t?e.success&&e.success():e.fail&&e.fail(),t},array:{move2first:function(e,t){var n=[];n.push(t);for(i=0;i<e.length;i++)e[i]!=t&&n.push(e[i]);return n},move2last:function(e,t){var n=[];for(i=0;i<e.length;i++)e[i]!=t&&n.push(e[i]);return n.push(t),n},randomPick:function(e){return e[Math.floor(Math.random()*e.length)]},maptree:function(e){var t={treesource:null,mapdata:null,idAttribute:"id"};e=e?$.extend(!0,{},t,e):$.extend(!0,{},t);if(!e.treesource||!e.mapdata)return[];var n=[];return _.each(e.treesource,function(t){t.children&&(t.children=_g.array.maptree({treesource:t.children,mapdata:e.mapdata,idAttribute:e.idAttribute}));var r=_.find(e.mapdata,function(n){return n[e.idAttribute]==t[e.idAttribute]});r&&(t=$.extend(!0,t,r)),n.push(t)}),n},toDict:function(e,t){var n={},r;for(i=0;i<e.length;i++)r=e[i][t],n[r]=e[i];return n},treeToList:function(e,t,n){var r={childrenKey:"children",parentKey:"parent",idAttribute:"id"};t=t?$.extend(!0,{},r,t):$.extend(!0,{},r);if(!e)return[];var i=[];return _.each(e,function(r){if(r[t.childrenKey].length){var s=_g.array.toTreeList(r[t.childrenKey],t,n?n:e);for(j=0;j<s.length;j++)i.push(s[j]);r.children=_.pluck(r.children,"id")}else delete r.children;i.push(r)}),i},listToTree:function(e,t,n){var r={childrenKey:"children",parentKey:"parent",idAttribute:"id"};t=t?$.extend(!0,{},r,t):$.extend(!0,{},r);var i=[];return n&&(e=_.map(e,function(e){return typeof e=="string"&&(e=_.find(n,function(n){return n[t.idAttribute]==e})),e})),_.each(e,function(r){var s=$.extend(!0,{},r);n||s[t.parentKey],s[t.childrenKey]&&s[t.childrenKey].length?(s[t.childrenKey]=_g.array.listToTree(s[t.childrenKey],t,n?n:e),i.push(s)):i.push(s)}),i}},object:{jsonparse:function(e){if(!e)return null;try{return a=JSON.parse(e),a}catch(t){return e}},equal:function(e,t){},treeToArray:function(e){},getKeyByValue:function(e,t){try{var n=_.keys(e)[_.values(e).indexOf(t)];return n}catch(r){return undefined}}},string:{randomGenerate:function(e){e=e?e:10;var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890";for(var r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t},getUrlExt:function(e){return e.match(/(.[^.]+|)$/)[0]},getUrlNameWithOutExt:function(e){return e.substr(0,e.lastIndexOf("."))||e},getFileNameByPath:function(e){return e.replace(/^.*[\\\/]/,"")},string2boolean:function(e){return e=="true"?!0:!1},capitalize:function(e){return e=e.substring(0,1).toUpperCase()+e.substring(1),e},rmfirst:function(e){return e.replace(/^.(\s+)?/,"")},rmlast:function(e){return e.replace(/(\s+)?.$/,"")},isPureEng:function(e){var t=0,n=e;if(n=="")return!0;for(var r=0;r<n.length;r++)if(!(n.charCodeAt(r)>=48&&n.charCodeAt(r)<=57||n.charCodeAt(r)>=65&&n.charCodeAt(r)<=90||n.charCodeAt(r)>=97&&n.charCodeAt(r)<=122))return!1;return!0},isEng:function(e){var t=0,n=e;if(n=="")return!0;for(var r=0;r<n.length;r++)if(!(n.charCodeAt(r)==32||n.charCodeAt(r)>=48&&n.charCodeAt(r)<=57||n.charCodeAt(r)>=65&&n.charCodeAt(r)<=90||n.charCodeAt(r)>=97&&n.charCodeAt(r)<=122))return!1;return!0},isPureChi:function(e){var t=0,n=e;if(n=="")return!0;for(var r=0;r<n.length;r++)if(!(n.charCodeAt(r)>=19968&&n.charCodeAt(r)<=64041))return!1;return!0},isChi:function(e){var t=0,n=e;if(n=="")return!0;for(var r=0;r<n.length;r++)if(!(n.charCodeAt(r)==32||n.charCodeAt(r)>=19968&&n.charCodeAt(r)<=64041))return!1;return!0},autoName:function(e,t,n,r){e||(e=""),n||(n=""),r||(r=1);var i=e+r+n;return t.indexOf(i)!=-1?_g.string.autoName(e,t,n,r+1):i}},"boolean":{randomPick:function(){return!!Math.round(Math.random()*1)}},number:{random:function(e,t){return typeof e=="undefined"&&(e=0),typeof t=="undefined"&&(t=100),Math.random()*(t-e)+e},randomInt:function(e,t){return typeof e=="undefined"&&(e=0),typeof t=="undefined"&&(t=100),Math.floor(Math.random()*(t-e+1))+e},round:function(e,t){var n=e;typeof t==undefined&&(t=.5);var r=parseInt(e),i=e-r;i<t?n=r:n=r+1},rgbToHex:function(e,t,n){return"#"+((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)},hexToRgb:function(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,n,r){return t+t+n+n+r+r});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null},decimal:function(e,t){return Number(e.toFixed(t))}},hasTouch:function(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}}(),inIframe:function(){try{return window.self!==window.top}catch(e){return!0}},supportFlash:function(){return typeof swfobject!="undefined"&&swfobject.getFlashPlayerVersion().major!==0?!0:!1},isMSIE11:function(){return!!navigator.userAgent.match(/Trident\/7\./)},getRGBA:function(e,t){t=t!=undefined?Number(t):1;if(!e)return"transparent";var n=_g.number.hexToRgb(e);if(n)var r="rgba("+n.r+","+n.g+","+n.b+","+t+")";else r="rgba(255,255,255,1)";return r}};typeof require=="undefined"?(window._g||(window._g={}),window._g=$.extend(!0,{},window._g,e),e=undefined):define("_g/base",["jquery","backbone"],function(){return window._g||(window._g={}),window._g=$.extend(!0,{},window._g,e),e=undefined,window._g})}(window),function(){var e={log:function(e){console.log(e)},serverError:function(e){$(document).trigger("serverError"),_g.error[e]&&_g.error[e]()}};typeof require=="undefined"?(window._g||(window._g={}),window._g.error=e):define("_g/error",["_g/base"],function(){return window._g.error=e,window._g.error})}(window),function(){var e={buttonGroupT:['<div class="_g_btn_group <%=opts.className||""%>">',"</div>"].join(""),buttonT:'   <button class="btn _g_btn _g_btn_confirm <%=opts.className||""%>" type="button" data-name="<%=opts.name%>"><%=opts.name%></button>',buttonGroupList:[],scale:function(e,t){$(e).css("zoom",t).css("-moz-transform","scale("+t+")").css("-o-transform","scale("+t+")")},center:function(e){var t={containment:null};typeof e=="string"?e={containments:null,Item:e}:e=e?$.extend({},t,e):t;if(!e.Item)return!1;$(e.Item).css({left:"50%",top:"50%","margin-top":function(){return-($(this).height()/2)},"margin-left":function(){return-($(this).width()/2)}})},centerImage:function(e){var t={containment:null,parentWidth:null,parentHeight:null,width:null,height:null,setParent:!0};e=e?$.extend({},t,e):t;if(!e.Item||!e.containment)return!1;var n=0,r=0;return e.setParent&&$(e.containment).css({"line-height":e.parentHeight+"px","text-align":"center"}),e.width/e.height>=e.parentWidth/e.parentHeight?($(e.Item).css({width:"100%",height:"auto","verticle-align":"middle"}),r=e.parentWidth,height=e.parentWidth/(e.width/e.height)):($(e.Item).css({width:"auto",height:"100%","verticle-align":"middle"}),height=e.parentHeight,r=e.parentHeight*(e.width/e.height)),{width:r,height:height}},fitImage:function(e){if(!e||!e.items)return!1;e.fit||(e.fit=0),$(e.items).each(function(){var t=$(this);e.width==undefined&&(e.width=$(this).width()),e.height==undefined&&(e.height=$(this).height());var n=e.width,r=e.height,i=$(this).parent();e.parentHeight=e.parentHeight||i.height(),e.parentWidth=e.parentWidth||i.width(),e.fit==0&&(t.css({width:"100%",height:"100%",top:"",left:""}),n=e.parentWidth,r=e.parentHeight);if(e.fit==1){i.css({"line-height":e.parentHeight+"px"}),e.useMargin||i.css("text-align","center");if(e.width/e.height>=e.parentWidth/e.parentHeight){n=e.parentWidth,r=e.parentWidth/(e.width/e.height),t.css({width:"100%",height:"auto","vertical-align":"middle",left:"",top:"",display:"inline-block",position:"relative"});if(e.useMargin){var s=e.parentWidth/(e.width/e.height);t.css("margin-top",(e.parentHeight-s)/2+"px"),t.css("margin-bottom",(e.parentHeight-s)/2+"px"),t.css({"margin-left":0,"margin-right":0}),t.css("position","absolute")}}else{r=e.parentHeight,n=e.parentHeight*(e.width/e.height),t.css({width:"auto",height:"100%","vertical-align":"middle",left:"",top:"",display:"inline-block",position:"relative"});if(e.useMargin){var o=e.parentHeight*(e.width/e.height);t.css("margin-left",(e.parentWidth-o)/2+"px"),t.css("margin-right",(e.parentWidth-o)/2+"px"),t.css({"margin-top":0,"margin-bottom":0}),t.css("position","absolute")}}}e.fit==2&&(i.css({"line-height":e.parentHeight+"px","text-align":"center",overflow:"hidden"}),e.width/e.height>=e.parentWidth/e.parentHeight?(t.css({width:e.parentHeight*e.width/e.height+"px",height:e.parentHeight+"px","verticle-align":"middle",position:"absolute",left:"-"+(e.parentHeight*e.width/e.height-e.parentWidth)/2+"px",top:0,"max-width":"none"}),e.useMargin&&(t.css("left",""),t.css("margin-left","-"+(e.parentHeight*e.width/e.height-e.parentWidth)/2+"px"))):(t.css({position:"absolute",width:e.parentWidth+"px",height:e.parentWidth/(e.width/e.height)+"px","verticle-align":"middle",top:"-"+(e.parentWidth/(e.width/e.height)-e.parentHeight)/2+"px",left:0,"max-height":"none"}),e.useMargin&&(t.css("top",""),t.css("margin-top","-"+(e.parentWidth/(e.width/e.height)-e.parentHeight)/2+"px")))),e.explicitSize&&t.css({width:n,height:r})})},opacity:function(e,t){},addShade:function(e){var t={name:"_g_shadow",zindex:99999,color:"#000000",opacity:.8,containment:"body"};e=e?$.extend({},t,e):t,$(containment).append('<div id="'+e.name+'" style="z-index:'+e.zindex+";background:"+e.color+";opacity:"+e.opacity+';"></div>')},addButtonGroup:function(e){var t={containment:null,position:0,name:"_g_button"+_g.uuid(),className:null,confirmButton:{name:"确认",enable:!0,className:"btn-small btn-primary",onClick:null},cancelButton:{name:"取消",enable:!0,className:"btn-small",onClick:null},remove:function(){e.$el&&e.$el.remove()},getButton:function(t){return e.$el.find('[data-name="'+t+'"]')},addButton:function(t){var n={name:null,className:null,onClick:null};t=t?$.extend(!0,{},n,t):n;if(!t.name)return!1;e.$el.append(_.template(_g.ui.buttonT,{opts:t})),t.onClick&&e.getButton(t.name).on("click",function(){t.onClick()})},removeButton:function(t){if(!t)return;e.$el.find('[data-name="'+t+'"]').remove()}};return e=e?$.extend(!0,{},t,e):$.extend(!0,{},t),e.containment?(e.position==0?($(e.containment).append(_.template(_g.ui.buttonGroupT,{opts:e})),e.$el=$(e.containment).children("._g_btn_group")):($(_.template(_g.ui.buttonGroupT,{opts:e})).insertAfter($(e.containment)),e.$el=$(e.containment).next("._g_btn_group")),e.confirmButton.enable&&e.addButton(e.confirmButton),e.cancelButton.enable&&e.addButton(e.cancelButton),e):!1},contenteditable:function(e){var t={eventType:0,mutiple:0,element:null,callback:null,type:0,enableControl:!1};e=e?$.extend(!0,{},t,e):$.extend(!0,{},t),e.onKeyDown=function(t,n){var r=t.keyCode?t.keyCode:t.which;r==13&&e.mutiple==0&&(e.enableClose=!0,e.$this.blur(),$(document).off("keydown",e.onKeyDown),e.result())},e.result=function(){if(e.$this.data("before")!==e.$this.html()){e.$this.data("before",e.$this.html());var t=e.type==0?e.$this.text():e.$this.html();e.callback&&e.callback(t)}},e.enableEdit=!1;if(!e.element)return!1;e.element&&(e.$this=$(e.element),e.$this.addClass("_g_contenteditable"),e.eventType==0&&$(e.element).attr("contenteditable","true"),e.eventType==1&&($(e.element).attr("contenteditable","false"),$(e.element).on("dblclick",function(){$(this).attr("contenteditable","true"),$(this).focus()})),$(e.element).on("focus",function(){return e.focus?!1:(e.focus=!0,e.$this.data("before",e.$this.html()),$(document).on("keydown",e.onKeyDown),e.enableControl&&(e.buttonGroup=_g.ui.addButtonGroup({containment:e.$this,position:1,confirmButton:{onClick:function(){e.enableClose=!0,e.$this.blur()}},cancelButton:{onClick:function(){e.enableClose=!0,e.$this.html(e.$this.data("before")),e.$this.blur()}}})),e.$this)}).on("blur",function(t){if(e.enableControl){if(!e.enableClose)return e.$this.focus(),!1;e.enableClose=!1,e.buttonGroup.remove()}return e.focus=!1,$(document).off("keydown",e.onKeyDown),e.eventType==1&&$(e.element).attr("contenteditable","false"),e.result(),!1}))},sortByIds:function(e){var t={containment:null,items:"li",ids:null};e=e?$.extend({},t,e):t;if(!e.containment||!e.ids)return;_.each(e.ids,function(t){if($(e.containment).children(e.items+'[id="'+t+'"]').length>0){var n=$(e.containment).children(e.items+'[id="'+t+'"]').detach();$(e.containment).append(n)}})},sortTreeByIds:function(e,t){var n={containment:null,items:"li",ids:null,childrenKey:"children",wrap:"ul",wrapClass:null};e=e?$.extend({},n,e):n;if(!e.containment||!e.ids)return;e.root=t||e.containment,_.each(e.ids,function(n){if($(e.root).find(e.items+'[id="'+n.id+'"]').length>0){var r=$(e.root).find(e.items+'[id="'+n.id+'"]').detach();!$(e.containment).is(e.wrap)&&!$(e.containment).children(e.wrap).length&&($(e.containment).append(document.createElement(e.wrap)),e.wrapClass&&$(e.containment).children(e.wrap).addClass(e.wrapClass),e.containment=$(e.containment).children(e.wrap)),$(e.containment).append(r)}n[e.childrenKey]&&_g.ui.sortTreeByIds({containment:$(e.containment).find(e.items+'[id="'+n.id+'"]'),items:e.items,ids:n[e.childrenKey],childrenKey:e.childrenKey},t?t:e.containment)})},findById:function(e){var t={containment:null,id:null};return e=e?$.extend({},t,e):t,!e.containment||!e.id?[]:$(e.containment).find('[id="'+e.id+'"],[data-id="'+e.id+'"]').first()},moveTo:function(e){var t={containment:null,sourceId:null,targetId:null,wrap:null,wrapClass:null,position:0};e=e?$.extend({},t,e):t;if(!e.containment)return!1;var n=_g.ui.findById({containment:e.containment,id:e.sourceId}),r=_g.ui.findById({containment:e.containment,id:e.targetId});e.wrap&&(r.has(e.wrap).length==0?(r.append(document.createElement(e.wrap)),r=r.children(e.wrap),e.wrapClass&&r.addClass(e.wrapClass)):r=r.children(e.wrap));var i=n.detach();e.position==0?r.prepend(i):r.append(i)},getTreeIds:function(e){var t={containment:null,items:null,idAttribute:"id",wrap:"ul"};e=e?$.extend({},t,e):t;var n=[];if(!e.containment||!e.items)return!1;if(e.wrap&&!$(e.containment).is(e.wrap)){if(!($(e.containment).children("ul").length>0))return[];e.containment=$(e.containment).children("ul")}return $(e.containment).children(e.items).each(function(){var t={};t.id=$(this).attr(e.idAttribute),t.children=_g.ui.getTreeIds({containment:$(this),items:e.items,idAttribute:e.idAttribute,wrap:e.wrap}),n.push(t)}),n},dialog:function(e){var t={className:null}},createDomMask:function(e){var t={containment:null,item:null,x:null,y:null,height:null,width:null,moveTo:function(t){e.offsetX=0-t.x,e.offsetY=0-t.y,$(e.item).css("left",e.offsetX),$(e.item).css("top",e.offsetY)},resize:function(t){$(e.containment).width(t.w),$(e.containment).height(t.h)}};return e=e?$.extend({},t,e):t,!e.containment||!e.item?!1:($(e.containment).css("overflow","hidden"),e.moveTo({x:e.x,y:e.y}),e.resize({w:e.width,h:e.height}),e)},clearSelection:function(){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){var e=window.getSelection();e.removeAllRanges()}},isOverflowed:function(e){var t={x:!1,y:!1},n=0;return $.zoom&&$.zoom!=1&&(n=2),$(e)[0].offsetHeight+n<$(e)[0].scrollHeight&&(t.y=$(e)[0].scrollHeight||1),$(e)[0].offsetWidth+n<$(e)[0].scrollWidth&&(t.x=$(e)[0].scrollWidth||1),t}};typeof require=="undefined"?(window._g||(window._g={}),window._g.ui=e):define("_g/ui",["jquery","_g/base","_g/error"],function(){return window._g.ui=e,window._g.ui})}(window),function(){var e={getValueByType:function(e,t){t=t?t.toLowerCase():t;switch(t){case"number":return Number(e);case"boolean":if(e=="false")return!1;if(e=="true")return!0;return Boolean(e);case"numberboolean":if(e=="false")return 0;if(e=="true")return 1;return Boolean(e)?1:0;case"string":return String(e);case"object":return _g.object.jsonparse(e);default:return e}},bindPopOver:function(e){var t={containment:null,trigger:"click",getData:null,callback:null,onChange:null};e=e?$.extend(!0,{},t,e):t;if(!e.containment)return!1;$(e.containment).find(".c-popover-btn").on(e.trigger,function(){var t=$(this).data();if(e.getData){var n=require("text!"+t.template),r=e.getData(this);t.content=_g.renderT(n,r,"data")}t.container=t.container?$(t.container):$(this).closest(".c-popover-containment")[0],t.container||(t.container="body"),t.viewport={selector:$(this).closest(".c-popover-viewport")[0],padding:t.padding||0},t.viewport.selector||(t.viewport.selector="body"),t.elm=$(this),t.callback=e.callback,t.beforeClose=e.beforeClose,t.onChange=e.onChange,t.onShow=e.onShow,t.onClose=e.onClose,t.getContent=function(){var t=e.getData(this);return _g.renderT(n,t,"data")};var i=_g.form.popover(t);return!1})},bindListAction:function(e){var t={containment:null,listClass:".c-list",callback:null};e=e?$.extend(!0,{},t,e):t;if(!e.containment)return!1;if(!e.containment.hasClass(e.listClass)&&!e.containment.find(e.listClass).length)return!1;var n=e.containment.hasClass(e.listClass)?e.containment.data():e.containment.find(e.listClass).first().data();e.containment.find(".c-list-add").on("click",function(){if(e.callback){var t=_g.util.serializeValue({containment:e.containment});e.callback("add",n.target,t,this)}return!1}),e.containment.find(".c-list-remove").on("click",function(){return e.callback&&callback("remove",n.target),!1})},bindFormChange:function(e){var t={containment:null,$item:null,callback:null,silentDisplay:!1};e=e?$.extend(!0,{},t,e):t;if(!e.containment)return!1;$(e.containment).find(".slider").each(function(){var t=$(this).find("input"),n=t.data();if(n.target){var r=$(e.containment).find('[name="'+n.target+'"]');r.on("change",function(){var e=t.slider("getValue");e!=Number($(this).val())&&t.slider("setValue",Number($(this).val()))}),t.on("slide",function(e){var t=Number(r.val());t!=e.value&&(r.closest(".spinner").spinner("value",e.value),r.trigger("change"))})}}),$(e.containment).find("[rel=form]").each(function(){var t=$(this).data();if(t.value!=undefined){$(this).find("[data-value]").removeClass("active");if(t.mutiple||t.multiple){var n=t.value.split(",");for(i=0;i<n.length;i++)$(this).find('[data-value="'+n[i]+'"]').addClass("active")}else $(this).find('[data-value="'+t.value+'"]').addClass("active")}var r=$(this);$(this).find("[data-value]").on("click",function(){var n=!1,i=$(this).data("value");t.silentdisplay||r.find("[data-show]").text($(this).text()||i);if(!t.multiple&&!t.mutiple)$(this).hasClass("active")||(i=_g.util.getValueByType(i,t.type),r.data("value",i),$(this).addClass("active"),$(this).siblings().length?$(this).siblings().removeClass("active"):$(this).parent().siblings().children().removeClass("active"),t.value=i,n=!0);else{$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active");var s=[];r.find("[data-value]").each(function(){var e=$(this).data("value");$(this).hasClass("active")&&s.push(_g.util.getValueByType(e,t.type))}),s=s.join(","),console.log(s),r.data("value",s),t.value=s,n=!0}e.callback&&n&&e.callback(r,e,t)})});var n=e.$item?e.$item:"input,textarea,select";$(e.containment).find(n).on("change",function(){var t=$(this).data();t.name=$(this).attr("name")||$(this).attr("id"),e.callback&&e.callback($(this),e,t)})},serializeValue:function(e){var t={containment:null,typeAttr:"data-type",attrAttr:"data-attr",allowEmpty:!0};e=e?$.extend({},t,e):t;if(!e.containment)return!1;var n=e.containment,r={},i=function(t,n){if(t.attr("disabled")=="disabled")return;var i=t.attr("name")||t.attr("id"),s=t.attr(e.typeAttr),o=t.attr(e.attrAttr);if(!i)return;o?(typeof r[o]!="object"&&(r[o]={}),r[o][i]=n):r[i]=n},s=function(e,t){if(e.attr("disabled")=="disabled")return;var n=e.data(),i=n.name,s=n.type,o=n.attr;if(!i)return;o?(typeof r[o]!="object"&&(r[o]={}),r[o][i]=t):r[i]=t};return $(n).find('input[type="text"],input[type="email"],input[type="tel"],input[type="hidden"],textarea').each(function(){var t=$(this).attr("name")||$(this).attr("id"),n=$(this).attr(e.typeAttr),r=$(this).attr(e.attrAttr),s=_g.util.getValueByType($(this).val(),n);i($(this),s)}),$(n).find('input[type="checkbox"]').each(function(){var t=$(this).attr("name")||$(this).attr("id"),n=$(this).attr(e.typeAttr),s=$(this).attr(e.attrAttr);s&&typeof r[s]!="object"&&(r[s]={});var o=s?r[s][t]?r[s][t]:[]:r[t]?r[t]:[];if($(this).attr("checked")=="checked")n=="boolean"||n=="numberboolean"?o=_g.util.getValueByType($(this).attr("data-reverse")?!1:!0,n):o.push(_g.util.getValueByType($(this).val(),n));else if(n=="boolean"||n=="numberboolean")o=_g.util.getValueByType($(this).attr("data-reverse")?!0:!1,n);i($(this),o)}),$(n).find('input[type="radio"]:checked').each(function(){var t=$(this).attr("name")||$(this).attr("id"),n=$(this).attr(e.typeAttr),r=$(this).attr(e.attrAttr),s=_g.util.getValueByType($(this).val(),n);i($(this),s)}),$(n).find("select").each(function(){var t=$(this).attr("name")||$(this).attr("id"),n=$(this).attr(e.typeAttr),s=$(this).attr(e.attrAttr),o=Boolean($(this).attr("data-mutiple")),u;o?(s&&typeof r[s]!="object"&&(r[s]={}),u=s?r[s][t]?r[s][t]:[]:r[t]?r[t]:[],u.push($(this).val())):u=_g.util.getValueByType($(this).val(),n),i($(this),u)}),$(n).find("[rel=form]").each(function(){var e=$(this).data();if(e.mutiple||e.multiple)if(e.value!=undefined)var t=e.value;else var t="";else var t=_g.util.getValueByType(e.value,e.type);s($(this),t)}),r},disableLink:function(e){var t={containment:null,linkitem:"a",enabled:!0},n=e.linkitem||t.linkitem;return e=e?$.extend(!0,{},t,e):t,e.linkitem=n,e.containment?(e.func=function(){return!1},e.enable=function(){$(e.containment).find(e.linkitem).each(function(){$(this).on("click",e.func),e.enabled=!0})},e.disable=function(){$(e.containment).find(e.linkitem).each(function(){$(this).off("click",e.func),e.enabled=!1})},e.enable(),e):!1},domExist:function(e,t){return t||(t=document),typeof e=="string"&&(e=$(e)),jQuery.contains(t.documentElement,e[0])},getImageSizeBySrc:function(e,t,n){var r=new Image;r.onload=function(){if(n&&(this.width>n||this.height>n)){var e=this.width/this.height;e>1?(this.width=n,this.height=this.width/e):(this.height=n,this.width=this.height*e)}t&&t(this.width,this.height)},r.src=e}};typeof require=="undefined"?(window._g||(window._g={}),window._g.util=e,e=undefined):define("_g/util",["jquery","_g/base"],function(){return window._g.util=e,e=undefined,window._g.util})}(window),function(){var _g_mvc={_loadTemplate:function(e,t){},_CollectionforSaveAll:function(){var e=Backbone.Model.extend({initialize:function(){this.set("id","GlobalSave")},sync:function(e,t,n){var r=this.data;this.attributes=r;if(e=="create")return;e=="update"&&(n.url=this.url);if(e=="delete")return;if(e=="read")return;Backbone.emulateHTTP=!0,Backbone.emulateJSON=!0,Backbone.sync(e,t,n)}});return new e},createModel:function(opts){var defaults={defaults:{},autoIndex:!0,autoUpdate:!0,autoRemove:!0,enableSync:!0,createUrl:null,updateUrl:null,removeUrl:null,fetchUrl:null,staticFetchUrl:null,staticRemoveUrl:null,staticCreateUrl:null,staticUpdateUrl:null,fetchUrlName:null,removeUrlName:null,createUrlName:null,updateUrlName:null,debug:!1,bindChange:null,bindRemove:null,callback:null,initView:null,patchKeys:null,initialize:function(){this.iViewlist=[],this.iCollectionlist=[];if(!this.get("id")){this.set("isNew",!0);if(this.autoIndex){var prefix=this.get("type")||this.get("iType")||"M";this.set("id",prefix+"_"+_g.uuid()),this.preset()}else this.save({},{wait:!0,success:function(model,response){var returned=eval(response);(returned.Status=="Success"||returned.code==200)&&model.set("id",returned.ID.toString()),model.preset()}})}else this.preset()},patchSave:function(callback,opts){opts||(opts={});if(this.patchKeys&&this.patchKeys.length){var values=_.pick(this.toJSON(),this.patchKeys);this.save(values,{wait:!0,silent:opts.silent,patch:!0,success:function(model,response){if(callback){var returned=eval(response);callback(returned)}},error:function(e,t){_g.error.serverError("save_"+e.name),opts.onError&&opts.onError()}})}else this.save()},sync:function(e,t,n){var r,i=typeof _gDebug!="undefined"&&_gDebug||this.debug;if(!this.enableSync)return!1;if(e=="create"){var s=this.createUrlName||this.createUrl;_g.debug&&_g.debug.enabled&&(_g.debug.data[s]={}),r=i?_g.debug&&_g.debug.query_user_data(s)?_g.debug.query_user_data(s):this.staticCreateUrl||this.createUrl:this.createUrl;if(!r)return;n.url=r}if(e=="update"||e=="patch"){var s=this.updateUrlName||this.updateUrl;_g.debug&&_g.debug.enabled&&(_g.debug.data[s]={}),r=i?_g.debug&&_g.debug.query_user_data(s)?_g.debug.query_user_data(s):this.staticUpdateUrl||this.updateUrl:this.updateUrl;if(!r)return;n.url=r}if(e=="delete"){var s=this.removeUrlName||this.removeUrl;_g.debug&&_g.debug.enabled&&(_g.debug.data[s]={}),r=i?_g.debug&&_g.debug.query_user_data(s)?_g.debug.query_user_data(s):this.staticRemoveUrl||this.removeUrl:this.removeUrl;if(!r)return;n.url=r}if(e=="read"){var s=this.fetchUrlName||this.fetchUrl;r=i?this.staticFetchUrl:this.fetchUrl,_g.debug&&_g.debug.enabled&&(_g.debug.data[s]={}),r=i?_g.debug&&_g.debug.query_user_data(s)?_g.debug.query_user_data(s):this.staticFetchUrl||this.fetchUrl:this.fetchUrl;if(!r)return;n.url=r}n.url=typeof n.url=="string"?n.url:n.url(t.attributes),Backbone.emulateHTTP=!0,Backbone.emulateJSON=!0,Backbone.sync(e,t,n)},addView:function(e,t){typeof t=="function"&&(this[e]=new t({model:this}));if(typeof t=="object"){var n=_g.mvc.createView(t);this[e]=new n({model:this})}this[e]&&this.iViewlist.push(this[e])},addCollection:function(e,t){typeof t=="function"&&(this[e]=new t);if(typeof view=="object"){var n=_g.mvc.createCollection(t);this[e]=new n}this[e]&&this.iCollectionlist.push(this[e])},preset:function(){this.callback&&this.callback(this);var e=this;this.autoUpdate&&this.on("change",function(){e.updateAllViews()}),this.autoRemove&&this.on("destroy",function(e,t,n){e.removeAllViews(),e.bindRemove&&e.bindRemove(e,n)}),this.bindChange&&this.bindChange(),this.initView&&this.addView("iview",this.initView)},updateAllViews:function(){_.each(this.iViewlist,function(e){e.$el&&e.update()})},removeView:function(e){this[e]&&(this[e].$el.remove(),this.iViewlist=_.reject(this.iViewlist,function(t){return t==this[e]}),this[e]=null)},removeAllViews:function(e){_.each(this.iViewlist,function(t){t.$el&&(e?t.undelegateEvents():t.$el.remove())})}};opts=opts?$.extend(!0,{},defaults,opts):defaults;var Model=Backbone.Model.extend(opts);return Model},createView:function(e){var t={template:null,className:null,containment:null,wrap:null,wrapClassName:null,autoRender:!0,position:1,parseData:null,callback:null,bindChange:null,parseTemplate:null,templateKey:null,templateName:null,afterRender:null,afterUpdate:null,initialize:function(){_.bindAll(this),this.autoRender&&this.render(),this.callback&&this.callback(this)},createEl:function(){var e=this.model.toJSON(),t;return this.parseData&&(e=this.parseData()),this.parseTemplate?t=this.parseTemplate(this.template):t=this.template,_g.renderT(t,e,this.templateKey,this.templateName)},render:function(e,t){var n=this;if(!this.model||!this.template)return!1;if(!_g.util.domExist(this.$el)){if(!e&&!this.containment)return!1;e||(e=$(this.containment)),t||(t=this.position),this.wrap&&!$(this.containment).is(this.wrap)&&($(this.containment).children(this.wrap).length==0&&$(this.containment).append(document.createElement(this.wrap)),e=$(this.containment).children(this.wrap),this.containment&&this.wrapClassName&&e.addClass(this.wrapClassName));var r=this.createEl(),i=r;return this.setElement(i),t==1?e.append(i):e.prepend(i),this.className&&this.$el.addClass(this.className),this.afterRender&&this.afterRender(this),this}var r=this.createEl(),i=r;this.$el.replaceWith(i),this.setElement(i),this.afterUpdate&&this.afterUpdate(this)},update:function(){this.render()},afterUpdate:function(){this.afterRender&&this.afterRender(this)},events:{}};e=e?$.extend(!0,{},t,e):t;var n=Backbone.View.extend(e);return n},createCollection:function(e){var t={enableSync:!1,fetchUrl:null,staticFetchUrl:null,saveUrl:null,staticSaveUrl:null,debug:!1,bindRemove:!1,bindReset:!0,bindAdd:null,callback:null,patchKeys:null,name:null,initialize:function(){var e=this;this.bindRemove&&this.on("remove",function(t){typeof e.bindRemove=="function"?e.bindRemove(t):t.removeAllViews()}),this.bindReset&&this.on("reset",function(t,n){typeof e.bindReset=="function"?e.bindReset(t,n):_.each(n.previousModels,function(e){e.removeAllViews()}),e.afterReset&&e.afterReset(t,n)}),this.bindAdd&&this.on("add",function(t){e.bindAdd()}),this.callback&&this.callback(this)},sortByIds:function(e){var t=this;this.reset(_.map(e,function(e){return t.get(e)}),{silent:!0})},sync:function(e,t,n){var r=typeof _gDebug!="undefined"&&_gDebug||this.debug;if(!this.enableSync)return!1;if(e=="read"){var i=r?this.staticFetchUrl?this.staticFetchUrl:this.fetchUrl:this.fetchUrl?this.fetchUrl:this.staticFetchUrl;if(!i)return;n.url=i}if(!n.url)return!1;n.url=typeof n.url=="string"?n.url:n.url(t.toJSON()),Backbone.emulateHTTP=!0,Backbone.emulateJSON=!0,Backbone.sync(e,t,n)},getAll:function(e){var t=this;this.fetch({success:function(t,n){e&&e(n)},error:function(){_g.error.serverError("get_"+t.name)}})},saveAll:function(e){var t=this,n=typeof _gDebug!="undefined"&&_gDebug||this.debug,r=n?this.staticSaveUrl?this.staticSaveUrl:this.saveUrl:this.saveUrl?this.saveUrl:this.staticSaveUrl;if(!r)return!1;var i=_g.mvc._CollectionforSaveAll();this.patchKeys&&this.patchKeys.length?i.data=_.map(this.toJSON(),function(e){var n=$.extend(!0,{},e);return n=_.pick(n,t.patchKeys),n}):i.data=this.toJSON(),i.url=r,i.save({},{wait:!0,success:function(t,n){e&&e(n)},error:function(){_g.error.serverError("save_"+t.name)}})},refreshView:function(e){var t={containment:null,viewname:null};e=e?$.extend({},t,e):t,this.length>0&&(_.each(this.at(0).iViewlist,function(t){containment=e.containment||t.containment,containment&&(t.wrap&&!$(containment).is(t.wrap)?$(containment).children(t.wrap).empty():$(containment).empty())}),this.each(function(t){e.containment&&(t.iview.containment=e.containment),e.viewname?t[viewname].update():t.iview.update()}))},removeAllViews:function(e){this.each(function(t){t.removeAllViews(e)})}};e=e?$.extend(!0,{},t,e):t;var n=Backbone.Collection.extend(e);return n},createTreeByData:function(e){var t={collection:null,data:null,treeLevel:0,parent:null},n=e.parent,r;e=e?$.extend(!0,{},t,e):t,e.parent=n;if(!e.collection||!e.data)return null;var i=$.extend(!0,[],e.data);if(typeof e.collection=="function")r=new e.collection;else{var s=_g.mvc.createCollection(e.collection);r=new s}return r.parent=n,r.refreshTreeView=function(e){this.refreshView(e),this.each(function(t){t.icollection.refreshTreeView({containment:t.iview.$el,viewname:e?e.viewname:null})})},r.getModels=function(){var e=_g.mvc.getTreeModels(r);return e},r.getModelsJSON=function(){var e=r.getModels();return e=_.map(e,function(e){return e.toJSON()}),e},r.getModel=function(e){return _g.mvc.getTreeModel(r,e)},r.on("add",function(t){t.treeLevel=e.treeLevel,t.icollection=_g.mvc.createTreeByData({collection:e.collection,data:[],treeLevel:e.treeLevel+1}),r.parent&&(r.View=typeof r.View=="object"?$.extend(!0,{},r.View,{containment:r.parent.iview.$el}):r.View.extend({containment:r.parent.iview.$el})),t.addView("iview",r.View),_g.ui.sortByIds({containment:t.iview.wrap?t.iview.$el.parent(t.iview.wrap):t.iview.$el.parent(),ids:r.pluck("id")}),t.icollection.parent=t,t.icollection.View=r.View}),r.saveAll=function(e){var t=typeof _gDebug!="undefined"&&_gDebug||this.debug,n=t?this.staticSaveUrl?this.staticSaveUrl:this.saveUrl:this.saveUrl;if(!n)return!1;var r=_g.mvc._CollectionforSaveAll();r.data=_g.mvc.getTreeData(this),r.url=n,r.save({},{wait:!0,success:function(t,n){e&&e(n)},error:function(){}})},_.each(i,function(t){var n;t.children?n=$.extend(!0,[],t.children):n=[],delete t.children,r.add(t,{silent:!0});var i=r.at(r.length-1);i.treeLevel=e.treeLevel,console.log(n),i.icollection=_g.mvc.createTreeByData({collection:e.collection,data:n,treeLevel:e.treeLevel+1,parent:i})}),r},createTreeView:function(e){var t={collection:null,view:null,containment:null,wrap:null,wrapClassName:null,template:null,className:null,parseTemplate:null,templateKey:null,templateName:null,update:function(e){if(!this.model||!this.template||!this.containment)return!1;if(!_g.util.domExist(this.$el))this.render();else{var t=this.createEl(),n=null;this.wrap&&(n=this.$el.children(this.wrap).detach()),this.$el.replaceWith(t),this.setElement(t)}this.afterUpdate&&this.afterUpdate(this)}},n=e.collection;e=e?$.extend(!0,{},t,e):t;var r={};e.collection=n;if(!e.collection||!e.view)return!1;e.containment&&(r.containment=e.containment),e.wrap&&(r.wrap=e.wrap),e.template&&(r.template=e.template),e.templateKey&&(r.templateKey=e.templateKey),e.templateName&&(r.templateName=e.templateName),e.parseTemplate&&(r.parseTemplate=e.parseTemplate),e.parseData&&(r.parseData=e.parseData),e.callback&&(r.callback=e.callback),e.wrapClassName&&(r.wrapClassName=e.wrapClassName),e.className&&(r.className=e.className),r.update=e.update;var i=typeof e.view=="function"?e.view.extend(r):$.extend(!0,e.view,r);e.collection.View=i,e.collection.each(function(t){t.addView("iview",i);if(t.icollection){if(!e.useJquerySel){typeof e.containment!="string"&&(e.containment=e.containment.selector);var n=e.containment+(e.wrap?" >"+e.wrap:"")+' >[id="'+t.id+'"]'}else{var n=e.containment.children('[id="'+t.id+'"]');if(e.wrap)if(!n.children(e.wrap+e.wrapClassName?"."+e.wrapClassName:"").length){var r=$(document.createElement(e.wrap));n.append(r),e.wrapClassName&&r.addClass(e.wrapClassName),n=r}else n=n.children(e.wrap+e.wrapClassName?"."+e.wrapClassName:"")}_g.mvc.createTreeView({collection:t.icollection,view:e.view,wrapClassName:e.wrapClassName,containment:n,wrap:e.wrap||null,template:e.template||null,useJquerySel:e.useJquerySel})}})},sortTreeByIds:function(e){var t=function(n,r,s){return n?(n.reset([],{silent:e.silent}),_.each(r,function(r){r.children=r.children||[];var o=i.get(r.id);o.treeLevel=s,o.icollection=t(o.icollection,r.children,s+1),n.add(o,{silent:e.silent}),o.collection=n}),n):null},n={collection:null,ids:null,treeLevel:0,silent:!0},r=e.collection;e=e?$.extend(!0,{},n,e):n,e.collection=r;if(!e.collection||!e.ids)return!1;var i=new Backbone.Collection;i.add(_g.mvc.getTreeModels(e.collection));var s=t(e.collection,e.ids,e.treeLevel);return s},getTreeModels:function(e){var t=[];return e.each(function(e){t.push(e);if(e.icollection){var n=_g.mvc.getTreeModels(e.icollection);_.each(n,function(e){t.push(e)})}}),t},getTreeModel:function(e,t){if(!e||!t)return!1;var n=_g.mvc.getTreeModels(e);return _.find(n,function(e){return e.id==t})},getTreeData:function(e,t){var n=[];return e.each(function(e){var r=$.extend(!0,{},e.toJSON());t&&t.filter&&(r=_.pick(r,t.filter)),e.icollection&&(r.children=_g.mvc.getTreeData(e.icollection,t)),n.push(r)}),n},moveTo:function(e){e.silent==undefined&&(e.silent=!0);var t=null;if(e.fromIndex!=undefined&&e.toIndex!=undefined)t=e.collection.at(e.fromIndex),e.collection.remove(t,{silent:e.silent}),e.collection.add(t,{at:e.toIndex,silent:e.silent});else if(e.sourceId!=undefined&&e.targetId!=undefined&&e.position!=undefined){t=e.collection.get(e.sourceId),e.collection.remove(t,{silent:e.silent});var n=e.collection.get(e.targetId),r=e.collection.indexOf(n);if(e.position==-1)var i=r;else var i=r+1;e.collection.add(t,{at:i,silent:e.silent})}}};typeof require=="undefined"?(window._g||(window._g={}),window._g.mvc=_g_mvc,_g_mvc=undefined):define("_g/mvc",["jquery","backbone","_g/base","_g/ui","_g/util"],function(){return window._g.mvc=_g_mvc,_g_mvc=undefined,window._g.mvc})}(window),define("text!interaction_view/template/page.js",[],function(){return'<section class="Presentation" id="<%=id%>">\n    <div class="interaction-area typo">\n      <div class="interaction-view"></div>\n   </div>\n</section>'}),define("text!interaction_view/template/pagegroup.js",[],function(){return'<section class="group" id="<%=id%>"></section>'}),define("interaction_view/view/page",["_g/mvc","text!interaction_view/template/page.js","text!interaction_view/template/pagegroup.js"],function(){var e={template:require("text!interaction_view/template/page.js"),className:null,containment:"div.slides",wrap:null,wrapClassName:null,autoRender:!0,position:1,parseData:null,callback:function(){this.model.get("type")!="page_group"&&(this.overlays=$.extend(!0,{},this.model.get("overlays")),this.animations=$.extend(!0,{},this.model.get("animations")),this.actions=$.extend(!0,{},this.model.get("actions"))),this.model.get("type")=="page"&&this.renderbg()},bindChange:null,parseTemplate:function(){var e=this.model.get("type");return e=="page_group"?_g.parseTemplate(require("text!interaction_view/template/pagegroup.js")):_g.parseTemplate(require("text!interaction_view/template/page.js"))},renderbg:function(){var e=this.$el;interaction_view.screen_mode==2&&(e=this.$el.children()),this.model.get("picture")&&e.css({"background-image":"url("+this.model.get("picture")+")","background-size":"contain","background-position":"center center","background-repeat":"no-repeat"});var t=_g.getRGBA(this.model.get("bg_color"),this.model.get("bg_opacity"));e.css({"background-color":t})},afterload:function(){var e=this;e.animations=_.map(e.animations,function(t){return t.pageid=e.model.id,t}),e.model.iAnimationlist.reset(e.animations),overlays=_.filter(e.overlays,function(t){return t.pageid=e.model.id,interaction_view.model[t.iType]}),overlays=_.map(overlays,function(e){return new interaction_view.model[e.iType](e)}),e.model.iOverlaylist.reset(overlays),e.model.iOverlaylist.each(function(e){e.iview.setZindex()}),e.actions=_.map(e.actions,function(t){return t.pageid=e.model.id,t}),e.model.iActionlist.reset(e.actions),e.startLoad()},prepareLoad:function(){var e=this,t=_.map(e.animations,function(t){var n=$.extend(!0,{},t);return n.pageid=e.model.id,n});e.model.iAnimationlist.reset(t);var n=_.filter(e.overlays,function(t){return t.pageid=e.model.id,interaction_view.model[t.iType]});n=_.map(n,function(e){var t=$.extend(!0,{},e);return new interaction_view.model[t.iType](t)}),e.model.iOverlaylist.reset(n),e.model.iOverlaylist.each(function(e){e.iview.setZindex()});var r=_.map(e.actions,function(t){var n=$.extend(!0,{},t);return n.pageid=e.model.id,n});e.model.iActionlist.reset(r)},startLoad:function(){var e=this;this.model.ipreloadlist.length==0?interaction_view.finishPagePreload(this.model.id):this.model.ipreloadlist.preload()},afterpreload:function(){var e=this;e.model.iOverlaylist.each(function(e){e.iview.preloaded||e.iview.afterpreload()}),e.hasRenderActionlist?e.model.iActionlist.each(function(e){e.iview&&_.include([0,1,2,4],e.get("iType"))&&e.iview.render()}):(e.model.iActionlist.each(function(e){e.iview&&e.iview.render()}),e.hasRenderActionlist=!0)},clearPageLoad:function(){if(this.model.get("loaded")){var e=this.$el.find(".interaction-view");e.empty(),this.model.isStartLoad=!1,this.ipreloadlist=new interaction_view.collection.Preload,this.model.unset("loaded",{silent:!0})}presentation.pageClearCenter(this.model.id)}};return e}),define("interaction_view/view/subcontainer",["interaction_view/view/page"],function(){var e=require("interaction_view/view/page"),t=$.extend({},e,{template:null,className:null,containment:null,wrap:null,wrapClassName:null,autoRender:!1,position:1,parseData:null,afterload:function(){var e=this;overlays=_.filter(e.model.suboverlays,function(t){return t.path=e.model.iOverlaylist.path,t.isSubOverlay=!0,interaction_view.model[t.iType]}),overlays=_.map(overlays,function(e){return new interaction_view.model[e.iType](e)}),e.model.iOverlaylist.reset(overlays),e.startSubLoad()},startSubLoad:function(){var e=this;e.model.ipreloadlist.length==0?e.model.iview.afterSubOverlayPreload():e.model.ipreloadlist.preload()}});return t}),function(e,t){function r(){if(n.READY)return;n.event.determineEventTypes(),n.utils.each(n.gestures,function(e){n.detection.register(e)}),n.event.onTouch(n.DOCUMENT,n.EVENT_MOVE,n.detection.detect),n.event.onTouch(n.DOCUMENT,n.EVENT_END,n.detection.detect),n.READY=!0}var n=function(e,t){return new n.Instance(e,t||{})};n.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},n.HAS_POINTEREVENTS=e.navigator.pointerEnabled||e.navigator.msPointerEnabled,n.HAS_TOUCHEVENTS="ontouchstart"in e,n.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android|silk/i,n.NO_MOUSEEVENTS=n.HAS_TOUCHEVENTS&&e.navigator.userAgent.match(n.MOBILE_REGEX),n.EVENT_TYPES={},n.DIRECTION_DOWN="down",n.DIRECTION_LEFT="left",n.DIRECTION_UP="up",n.DIRECTION_RIGHT="right",n.POINTER_MOUSE="mouse",n.POINTER_TOUCH="touch",n.POINTER_PEN="pen",n.EVENT_START="start",n.EVENT_MOVE="move",n.EVENT_END="end",n.DOCUMENT=e.document,n.plugins=n.plugins||{},n.gestures=n.gestures||{},n.READY=!1,n.utils={extend:function(n,r,i){for(var s in r){if(n[s]!==t&&i)continue;n[s]=r[s]}return n},each:function(e,n,r){var i,s;if("forEach"in e)e.forEach(n,r);else if(e.length!==t){for(i=0,s=e.length;i<s;i++)if(n.call(r,e[i],i,e)===!1)return}else for(i in e)if(e.hasOwnProperty(i)&&n.call(r,e[i],i,e)===!1)return},hasParent:function(e,t){while(e){if(e==t)return!0;e=e.parentNode}return!1},getCenter:function(t){var r=[],i=[];return n.utils.each(t,function(e){r.push(typeof e.clientX!="undefined"?e.clientX:e.pageX),i.push(typeof e.clientY!="undefined"?e.clientY:e.pageY)}),{pageX:(Math.min.apply(Math,r)+Math.max.apply(Math,r))/2,pageY:(Math.min.apply(Math,i)+Math.max.apply(Math,i))/2}},getVelocity:function(t,n,r){return{x:Math.abs(n/t)||0,y:Math.abs(r/t)||0}},getAngle:function(t,n){var r=n.pageY-t.pageY,i=n.pageX-t.pageX;return Math.atan2(r,i)*180/Math.PI},getDirection:function(t,r){var i=Math.abs(t.pageX-r.pageX),s=Math.abs(t.pageY-r.pageY);return i>=s?t.pageX-r.pageX>0?n.DIRECTION_LEFT:n.DIRECTION_RIGHT:t.pageY-r.pageY>0?n.DIRECTION_UP:n.DIRECTION_DOWN},getDistance:function(t,n){var r=n.pageX-t.pageX,i=n.pageY-t.pageY;return Math.sqrt(r*r+i*i)},getScale:function(t,n){return t.length>=2&&n.length>=2?this.getDistance(n[0],n[1])/this.getDistance(t[0],t[1]):1},getRotation:function(t,n){return t.length>=2&&n.length>=2?this.getAngle(n[1],n[0])-this.getAngle(t[1],t[0]):0},isVertical:function(t){return t==n.DIRECTION_UP||t==n.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(t,r){if(!r||!t||!t.style)return;n.utils.each(["webkit","khtml","moz","Moz","ms","o",""],function(e){n.utils.each(r,function(n,r){e&&(r=e+r.substring(0,1).toUpperCase()+r.substring(1)),r in t.style&&(t.style[r]=n)})}),r.userSelect=="none"&&(t.onselectstart=function(){return!1}),r.userDrag=="none"&&(t.ondragstart=function(){return!1})}},n.Instance=function(e,t){var i=this;return r(),this.element=e,this.enabled=!0,this.options=n.utils.extend(n.utils.extend({},n.defaults),t||{}),this.options.stop_browser_behavior&&n.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),n.event.onTouch(e,n.EVENT_START,function(e){i.enabled&&n.detection.startDetect(i,e)}),this},n.Instance.prototype={on:function(t,r){var i=t.split(" ");return n.utils.each(i,function(e){this.element.addEventListener(e,r,!1)},this),this},off:function(t,r){var i=t.split(" ");return n.utils.each(i,function(e){this.element.removeEventListener(e,r,!1)},this),this},trigger:function(t,r){r||(r={});var i=n.DOCUMENT.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=r;var s=this.element;return n.utils.hasParent(r.target,s)&&(s=r.target),s.dispatchEvent(i),this},enable:function(t){return this.enabled=t,this},reset:function(){i=null,s=!1,o=!1,n.PointerEvent.reset()}};var i=null,s=!1,o=!1;n.event={bindDom:function(e,t,r){var i=t.split(" ");n.utils.each(i,function(t){e.addEventListener(t,r,!1)})},onTouch:function(t,r,u){var a=this;this.bindDom(t,n.EVENT_TYPES[r],function(f){var l=f.type.toLowerCase();if(l.match(/mouse/)&&o)return;l.match(/touch/)||l.match(/pointerdown/)||l.match(/mouse/)&&f.which===1?s=!0:l.match(/mouse/)&&!f.which&&(s=!1),l.match(/touch|pointer/)&&(o=!0);var c=0;if(s){n.HAS_POINTEREVENTS&&r!=n.EVENT_END?c=n.PointerEvent.updatePointer(r,f):l.match(/touch/)?c=f.touches.length:o||(c=l.match(/up/)?0:1),c>0&&r==n.EVENT_END?r=n.EVENT_MOVE:c||(r=n.EVENT_END);if(c||i===null)i=f;u.call(n.detection,a.collectEventData(t,r,a.getTouchList(i,r),f)),n.HAS_POINTEREVENTS&&r==n.EVENT_END&&(c=n.PointerEvent.updatePointer(r,f))}c||(i=null,s=!1,o=!1,n.PointerEvent.reset())})},determineEventTypes:function(){var t;n.HAS_POINTEREVENTS?t=n.PointerEvent.getEvents():n.NO_MOUSEEVENTS?t=["touchstart","touchmove","touchend touchcancel"]:t=["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],n.EVENT_TYPES[n.EVENT_START]=t[0],n.EVENT_TYPES[n.EVENT_MOVE]=t[1],n.EVENT_TYPES[n.EVENT_END]=t[2]},getTouchList:function(t){return n.HAS_POINTEREVENTS?n.PointerEvent.getTouchList():t.touches?t.touches:(t.identifier=1,[t])},collectEventData:function(t,r,i,s){var o=n.POINTER_TOUCH;if(s.type.match(/mouse/)||n.PointerEvent.matchType(n.POINTER_MOUSE,s))o=n.POINTER_MOUSE;return{center:n.utils.getCenter(i),timeStamp:(new Date).getTime(),target:s.target,touches:i,eventType:r,pointerType:o,srcEvent:s,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return n.detection.stopDetect()}}}},n.PointerEvent={pointers:{},getTouchList:function(){var e=this,t=[];return n.utils.each(e.pointers,function(e){t.push(e)}),t},updatePointer:function(e,t){return e==n.EVENT_END?this.pointers={}:(t.identifier=t.pointerId,this.pointers[t.pointerId]=t),Object.keys(this.pointers).length},matchType:function(e,t){if(!t.pointerType)return!1;var r=t.pointerType,i={};return i[n.POINTER_MOUSE]=r===t.MSPOINTER_TYPE_MOUSE||r===n.POINTER_MOUSE,i[n.POINTER_TOUCH]=r===t.MSPOINTER_TYPE_TOUCH||r===n.POINTER_TOUCH,i[n.POINTER_PEN]=r===t.MSPOINTER_TYPE_PEN||r===n.POINTER_PEN,i[e]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},n.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(t,r){if(this.current)return;this.stopped=!1,this.current={inst:t,startEvent:n.utils.extend({},r),lastEvent:!1,name:""},this.detect(r)},detect:function(t){if(!this.current||this.stopped)return;t=this.extendEventData(t);var r=this.current.inst.options;return n.utils.each(this.gestures,function(e){if(!this.stopped&&r[e.name]!==!1&&e.handler.call(e,t,this.current.inst)===!1)return this.stopDetect(),!1},this),this.current&&(this.current.lastEvent=t),t.eventType==n.EVENT_END&&!t.touches.length-1&&this.stopDetect(),t},stopDetect:function(){this.previous=n.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(t){var r=this.current.startEvent;r&&(t.touches.length!=r.touches.length||t.touches===r.touches)&&(r.touches=[],n.utils.each(t.touches,function(e){r.touches.push(n.utils.extend({},e))}));var i=t.timeStamp-r.timeStamp,s=t.center.pageX-r.center.pageX,o=t.center.pageY-r.center.pageY,u=n.utils.getVelocity(i,s,o),a,f;return t.eventType==="end"?(a=this.current.lastEvent&&this.current.lastEvent.interimAngle,f=this.current.lastEvent&&this.current.lastEvent.interimDirection):(a=this.current.lastEvent&&n.utils.getAngle(this.current.lastEvent.center,t.center),f=this.current.lastEvent&&n.utils.getDirection(this.current.lastEvent.center,t.center)),n.utils.extend(t,{deltaTime:i,deltaX:s,deltaY:o,velocityX:u.x,velocityY:u.y,distance:n.utils.getDistance(r.center,t.center),angle:n.utils.getAngle(r.center,t.center),interimAngle:a,direction:n.utils.getDirection(r.center,t.center),interimDirection:f,scale:n.utils.getScale(r.touches,t.touches),rotation:n.utils.getRotation(r.touches,t.touches),startEvent:r}),t},register:function(r){var i=r.defaults||{};return i[r.name]===t&&(i[r.name]=!0),n.utils.extend(n.defaults,i,!0),r.index=r.index||1e3,this.gestures.push(r),this.gestures.sort(function(e,t){return e.index<t.index?-1:e.index>t.index?1:0}),this.gestures}},n.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,correct_for_drag_min_distance:!0,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(t,r){if(n.detection.current&&n.detection.current.name!=this.name&&this.triggered){r.trigger(this.name+"end",t),this.triggered=!1;return}if(r.options.drag_max_touches>0&&t.touches.length>r.options.drag_max_touches)return;switch(t.eventType){case n.EVENT_START:this.triggered=!1;break;case n.EVENT_MOVE:if(t.distance<r.options.drag_min_distance&&n.detection.current.name!=this.name)return;if(n.detection.current.name!=this.name){n.detection.current.name=this.name;if(r.options.correct_for_drag_min_distance&&t.distance>0){var i=Math.abs(r.options.drag_min_distance/t.distance);n.detection.current.startEvent.center.pageX+=t.deltaX*i,n.detection.current.startEvent.center.pageY+=t.deltaY*i,t=n.detection.extendEventData(t)}}if(n.detection.current.lastEvent.drag_locked_to_axis||r.options.drag_lock_to_axis&&r.options.drag_lock_min_distance<=t.distance)t.drag_locked_to_axis=!0;var s=n.detection.current.lastEvent.direction;t.drag_locked_to_axis&&s!==t.direction&&(n.utils.isVertical(s)?t.direction=t.deltaY<0?n.DIRECTION_UP:n.DIRECTION_DOWN:t.direction=t.deltaX<0?n.DIRECTION_LEFT:n.DIRECTION_RIGHT),this.triggered||(r.trigger(this.name+"start",t),this.triggered=!0),r.trigger(this.name,t),r.trigger(this.name+t.direction,t),(r.options.drag_block_vertical&&n.utils.isVertical(t.direction)||r.options.drag_block_horizontal&&!n.utils.isVertical(t.direction))&&t.preventDefault();break;case n.EVENT_END:this.triggered&&r.trigger(this.name+"end",t),this.triggered=!1}}},n.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:1e3,hold_threshold:1},timer:null,handler:function(t,r){switch(t.eventType){case n.EVENT_START:clearTimeout(this.timer),n.detection.current.name=this.name,this.timer=setTimeout(function(){n.detection.current&&n.detection.current.name=="hold"&&r.trigger("hold",t)},r.options.hold_timeout);break;case n.EVENT_MOVE:t.distance>r.options.hold_threshold&&clearTimeout(this.timer);break;case n.EVENT_END:clearTimeout(this.timer)}}},n.gestures.Release={name:"release",index:Infinity,handler:function(t,r){t.eventType==n.EVENT_END&&r.trigger(this.name,t)}},n.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_min_touches:1,swipe_max_touches:1,swipe_velocity:.7},handler:function(t,r){if(t.eventType==n.EVENT_END){if(r.options.swipe_max_touches>0&&t.touches.length<r.options.swipe_min_touches&&t.touches.length>r.options.swipe_max_touches)return;if(t.velocityX>r.options.swipe_velocity||t.velocityY>r.options.swipe_velocity)r.trigger(this.name,t),r.trigger(this.name+t.direction,t)}}},n.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(t,r){if(t.eventType==n.EVENT_END&&t.srcEvent.type!="touchcancel"){var i=n.detection.previous,s=!1;if(t.deltaTime>r.options.tap_max_touchtime||t.distance>r.options.tap_max_distance)return;i&&i.name=="tap"&&t.timeStamp-i.lastEvent.timeStamp<r.options.doubletap_interval&&t.distance<r.options.doubletap_distance&&(r.trigger("doubletap",t),s=!0);if(!s||r.options.tap_always)n.detection.current.name="tap",r.trigger(n.detection.current.name,t)}}},n.gestures.Touch={name:"touch",index:-Infinity,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(t,r){if(r.options.prevent_mouseevents&&t.pointerType==n.POINTER_MOUSE){t.stopDetect();return}r.options.prevent_default&&t.preventDefault(),t.eventType==n.EVENT_START&&r.trigger(this.name,t)}},n.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(t,r){if(n.detection.current.name!=this.name&&this.triggered){r.trigger(this.name+"end",t),this.triggered=!1;return}if(t.touches.length<2)return;r.options.transform_always_block&&t.preventDefault();switch(t.eventType){case n.EVENT_START:this.triggered=!1;break;case n.EVENT_MOVE:var i=Math.abs(1-t.scale),s=Math.abs(t.rotation);if(i<r.options.transform_min_scale&&s<r.options.transform_min_rotation)return;n.detection.current.name=this.name,this.triggered||(r.trigger(this.name+"start",t),this.triggered=!0),r.trigger(this.name,t),s>r.options.transform_min_rotation&&r.trigger("rotate",t),i>r.options.transform_min_scale&&(r.trigger("pinch",t),r.trigger("pinch"+(t.scale<1?"in":"out"),t));break;case n.EVENT_END:this.triggered&&r.trigger(this.name+"end",t),this.triggered=!1}}},typeof define=="function"&&define.amd?define("hammerjs",[],function(){return n}):typeof module=="object"&&module.exports?module.exports=n:e.Hammer=n}(window),function(e,t){function n(e,n){e.event.bindDom=function(e,r,i){n(e).on(r,function(e){var n=e.originalEvent||e;n.pageX===t&&(n.pageX=e.pageX,n.pageY=e.pageY),n.target||(n.target=e.target),n.which===t&&(n.which=n.button),n.preventDefault||(n.preventDefault=e.preventDefault),n.stopPropagation||(n.stopPropagation=e.stopPropagation),i.call(this,n)})},e.Instance.prototype.on=function(e,t){return n(this.element).on(e,t)},e.Instance.prototype.off=function(e,t){return n(this.element).off(e,t)},e.Instance.prototype.trigger=function(e,t){var r=n(this.element);return r.has(t.target).length&&(r=n(t.target)),r.trigger({type:e,gesture:t})},n.fn.hammer=function(t){return this.each(function(){var r=n(this),i=r.data("hammer");i?t=="reset"?e.detection.current=null:i&&t&&e.utils.extend(i.options,t):r.data("hammer",new e(this,t||{}))})}}typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("jquery.hammer",["hammerjs","jquery"],n):n(e.Hammer,e.jQuery||e.Zepto)}(this),function(e){function r(e){if(e in t.style)return e;var n=["Moz","Webkit","O","ms"],r=e.charAt(0).toUpperCase()+e.substr(1);if(e in t.style)return e;for(var i=0;i<n.length;++i){var s=n[i]+r;if(s in t.style)return s}}function i(){return t.style[n.transform]="",t.style[n.transform]="rotateY(90deg)",t.style[n.transform]!==""}function f(e){return typeof e=="string"&&this.parse(e),this}function l(e,t,n){t===!0?e.queue(n):t?e.queue(t,n):n()}function c(t){var n=[];return e.each(t,function(t){t=e.camelCase(t),t=e.transit.propertyMap[t]||e.cssProps[t]||t,t=d(t),e.inArray(t,n)===-1&&n.push(t)}),n}function h(t,n,r,i){var s=c(t);e.cssEase[r]&&(r=e.cssEase[r]);var o=""+m(n)+" "+r;parseInt(i,10)>0&&(o+=" "+m(i));var u=[];return e.each(s,function(e,t){u.push(t+" "+o)}),u.join(", ")}function p(t,r){r||(e.cssNumber[t]=!0),e.transit.propertyMap[t]=n.transform,e.cssHooks[t]={get:function(n){var r=e(n).css("transit:transform");return r.get(t)},set:function(n,r){var i=e(n).css("transit:transform");i.setFromString(t,r),e(n).css({"transit:transform":i})}}}function d(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function v(e,t){return typeof e=="string"&&!e.match(/^[\-0-9\.]+$/)?e:""+e+t}function m(t){var n=t;return e.fx.speeds[n]&&(n=e.fx.speeds[n]),v(n,"ms")}e.transit={version:"0.9.9",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var t=document.createElement("div"),n={},s=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;n.transition=r("transition"),n.transitionDelay=r("transitionDelay"),n.transform=r("transform"),n.transformOrigin=r("transformOrigin"),n.transform3d=i();var o={transition:"transitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"},u=n.transitionEnd=o[n.transition]||null;for(var a in n)n.hasOwnProperty(a)&&typeof e.support[a]=="undefined"&&(e.support[a]=n[a]);t=null,e.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},e.cssHooks["transit:transform"]={get:function(t){return e(t).data("transform")||new f},set:function(t,r){var i=r;i instanceof f||(i=new f(i)),n.transform==="WebkitTransform"&&!s?t.style[n.transform]=i.toString(!0):t.style[n.transform]=i.toString(),e(t).data("transform",i)}},e.cssHooks.transform={set:e.cssHooks["transit:transform"].set},e.fn.jquery<"1.8"&&(e.cssHooks.transformOrigin={get:function(e){return e.style[n.transformOrigin]},set:function(e,t){e.style[n.transformOrigin]=t}},e.cssHooks.transition={get:function(e){return e.style[n.transition]},set:function(e,t){e.style[n.transition]=t}}),p("scale"),p("translate"),p("translateZ"),p("rotate"),p("rotateX"),p("rotateY"),p("rotate3d"),p("perspective"),p("skewX"),p("skewY"),p("x",!0),p("y",!0),f.prototype={setFromString:function(e,t){var n=typeof t=="string"?t.split(","):t.constructor===Array?t:[t];n.unshift(e),f.prototype.set.apply(this,n)},set:function(e){var t=Array.prototype.slice.apply(arguments,[1]);this.setter[e]?this.setter[e].apply(this,t):this[e]=t.join(",")},get:function(e){return this.getter[e]?this.getter[e].apply(this):this[e]||0},setter:{rotate:function(e){this.rotate=v(e,"deg")},rotateX:function(e){this.rotateX=v(e,"deg")},rotateY:function(e){this.rotateY=v(e,"deg")},scale:function(e,t){t===undefined&&(t=e),this.scale=e+","+t},skewX:function(e){this.skewX=v(e,"deg")},skewY:function(e){this.skewY=v(e,"deg")},perspective:function(e){this.perspective=v(e,"px")},x:function(e){this.set("translate",e,null)},y:function(e){this.set("translate",null,e)},translate:function(e,t){this._translateX===undefined&&(this._translateX=0),this._translateY===undefined&&(this._translateY=0),e!==null&&e!==undefined&&(this._translateX=v(e,"px")),t!==null&&t!==undefined&&(this._translateY=v(t,"px")),this.translate=this._translateX+","+this._translateY},translateZ:function(e){this.translateZ=v(e,"px")}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},translateZ:function(){return this.translateZ||0},scale:function(){var e=(this.scale||"1,1").split(",");return e[0]&&(e[0]=parseFloat(e[0])),e[1]&&(e[1]=parseFloat(e[1])),e[0]===e[1]?e[0]:e},rotate3d:function(){var e=(this.rotate3d||"0,0,0,0deg").split(",");for(var t=0;t<=3;++t)e[t]&&(e[t]=parseFloat(e[t]));return e[3]&&(e[3]=v(e[3],"deg")),e}},parse:function(e){var t=this;e.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(e,n,r){t.setFromString(n,r)})},toString:function(e){var t=[];for(var r in this)if(this.hasOwnProperty(r)){if(!n.transform3d&&(r==="rotateX"||r==="rotateY"||r==="translateZ"||r==="perspective"||r==="transformOrigin"))continue;r[0]!=="_"&&(e&&r==="scale"?t.push(r+"3d("+this[r]+",1)"):e&&r==="translate"?t.push(r+"3d("+this[r]+",0)"):t.push(r+"("+this[r]+")"))}return t.join(" ")}},e.fn.transition=e.fn.transit=function(t,r,i,s){var o=this,a=0,f=!0;typeof r=="function"&&(s=r,r=undefined),typeof i=="function"&&(s=i,i=undefined),typeof t.easing!="undefined"&&(i=t.easing,delete t.easing),typeof t.duration!="undefined"&&(r=t.duration,delete t.duration),typeof t.complete!="undefined"&&(s=t.complete,delete t.complete),typeof t.queue!="undefined"&&(f=t.queue,delete t.queue),typeof t.delay!="undefined"&&(a=t.delay,delete t.delay),typeof r=="undefined"&&(r=e.fx.speeds._default),typeof i=="undefined"&&(i=e.cssEase._default),e.fx.off&&(r=0),r=m(r);var c=h(t,r,i,a),p=e.transit.enabled&&n.transition,d=p?parseInt(r,10)+parseInt(a,10):0;if(d===0){var v=function(e){o.css(t),s&&s.apply(o),e&&e()};return l(o,f,v),o}var g={},y=function(r){var i=!1,a=function(){i&&o.unbind(u,a),d>0&&o.each(function(){this.style[n.transition]=g[this]||null}),typeof s=="function"&&s.apply(o),typeof r=="function"&&r()};d>0&&u&&e.transit.useTransitionEnd?(i=!0,o.bind(u,a)):window.setTimeout(a,d),o.each(function(){d>0&&(this.style[n.transition]=c),e(this).css(t)})},b=function(e){this.offsetWidth,y(e)};return l(o,f,b),this},e.transit.getTransitionValue=h}(jQuery),define("jquery.transit",["jquery"],function(){}),function(e,t,n){function s(e,n){this.wrapper=typeof e=="string"?t.querySelector(e):e,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var r in n)this.options[r]=n[r];this.translateZ=this.options.HWCompositing&&i.hasPerspective?" translateZ(0)":"",this.options.useTransition=i.hasTransition&&this.options.useTransition,this.options.useTransform=i.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY=this.options.eventPassthrough=="vertical"?!1:this.options.scrollY,this.options.scrollX=this.options.eventPassthrough=="horizontal"?!1:this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing=typeof this.options.bounceEasing=="string"?i.ease[this.options.bounceEasing]||i.ease.circular:this.options.bounceEasing,this.options.resizePolling=this.options.resizePolling===undefined?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),this.options.shrinkScrollbars=="scale"&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,this.options.probeType==3&&(this.options.useTransition=!1),this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function o(e,n,r){var i=t.createElement("div"),s=t.createElement("div");return r===!0&&(i.style.cssText="position:absolute;z-index:9999",s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),s.className="iScrollIndicator",e=="h"?(r===!0&&(i.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",s.style.height="100%"),i.className="iScrollHorizontalScrollbar"):(r===!0&&(i.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",s.style.width="100%"),i.className="iScrollVerticalScrollbar"),i.style.cssText+=";overflow:hidden",n||(i.style.pointerEvents="none"),i.appendChild(s),i}function u(n,r){this.wrapper=typeof r.el=="string"?t.querySelector(r.el):r.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=n,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0};for(var s in r)this.options[s]=r[s];this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(i.addEvent(this.indicator,"touchstart",this),i.addEvent(e,"touchend",this)),this.options.disablePointer||(i.addEvent(this.indicator,"MSPointerDown",this),i.addEvent(e,"MSPointerUp",this)),this.options.disableMouse||(i.addEvent(this.indicator,"mousedown",this),i.addEvent(e,"mouseup",this))),this.options.fade&&(this.wrapperStyle[i.style.transform]=this.scroller.translateZ,this.wrapperStyle[i.style.transitionDuration]=i.isBadAndroid?"0.001s":"0ms",this.wrapperStyle.opacity="0")}var r=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)},i=function(){function o(e){return s===!1?!1:s===""?e:s+e.charAt(0).toUpperCase()+e.substr(1)}var r={},i=t.createElement("div").style,s=function(){var e=["t","webkitT","MozT","msT","OT"],t,n=0,r=e.length;for(;n<r;n++){t=e[n]+"ransform";if(t in i)return e[n].substr(0,e[n].length-1)}return!1}();r.getTime=Date.now||function(){return(new Date).getTime()},r.extend=function(e,t){for(var n in t)e[n]=t[n]},r.addEvent=function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,!!r):e.attachEvent(t,n)},r.removeEvent=function(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,!!r):e.detachEvent(t,n)},r.momentum=function(e,t,r,i,s,o){var u=e-t,a=n.abs(u)/r,f,l;return o=o===undefined?6e-4:o,f=e+a*a/(2*o)*(u<0?-1:1),l=a/o,f<i?(f=s?i-s/2.5*(a/8):i,u=n.abs(f-e),l=u/a):f>0&&(f=s?s/2.5*(a/8):0,u=n.abs(e)+f,l=u/a),{destination:n.round(f),duration:l}};var u=o("transform");return r.extend(r,{hasTransform:u!==!1,hasPerspective:o("perspective")in i,hasTouch:"ontouchstart"in e,hasPointer:navigator.msPointerEnabled,hasTransition:o("transition")in i}),r.isBadAndroid=/Android /.test(e.navigator.appVersion)&&!/Chrome\/\d/.test(e.navigator.appVersion),r.extend(r.style={},{transform:u,transitionTimingFunction:o("transitionTimingFunction"),transitionDuration:o("transitionDuration"),transitionDelay:o("transitionDelay"),transformOrigin:o("transformOrigin")}),r.hasClass=function(e,t){var n=new RegExp("(^|\\s)"+t+"(\\s|$)");return n.test(e.className)},r.addClass=function(e,t){if(r.hasClass(e,t))return;var n=e.className.split(" ");n.push(t),e.className=n.join(" ")},r.removeClass=function(e,t){if(!r.hasClass(e,t))return;var n=new RegExp("(^|\\s)"+t+"(\\s|$)","g");e.className=e.className.replace(n," ")},r.offset=function(e){var t=-e.offsetLeft,n=-e.offsetTop;while(e=e.offsetParent)t-=e.offsetLeft,n-=e.offsetTop;return{left:t,top:n}},r.preventDefaultException=function(e,t){for(var n in t)if(t[n].test(e[n]))return!0;return!1},r.extend(r.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),r.extend(r.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(e){return e*(2-e)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(e){return n.sqrt(1- --e*e)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(e){var t=4;return(e-=1)*e*((t+1)*e+t)+1}},bounce:{style:"",fn:function(e){return(e/=1)<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}},elastic:{style:"",fn:function(e){var t=.22,r=.4;return e===0?0:e==1?1:r*n.pow(2,-10*e)*n.sin((e-t/4)*2*n.PI/t)+1}}}),r.tap=function(e,n){var r=t.createEvent("Event");r.initEvent(n,!0,!0),r.pageX=e.pageX,r.pageY=e.pageY,e.target.dispatchEvent(r)},r.click=function(e){var n=e.target,r;/(SELECT|INPUT|TEXTAREA)/i.test(n.tagName)||(r=t.createEvent("MouseEvents"),r.initMouseEvent("click",!0,!0,e.view,1,n.screenX,n.screenY,n.clientX,n.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),r._constructed=!0,n.dispatchEvent(r))},r}();s.prototype={version:"5.1.1",_init:function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(e){if(e.target!=this.scroller||!this.isInTransition)return;this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd"))},_start:function(e){if(i.eventType[e.type]!=1&&e.button!==0)return;if(!this.enabled||this.initiated&&i.eventType[e.type]!==this.initiated)return;this.options.preventDefault&&!i.isBadAndroid&&!i.preventDefaultException(e.target,this.options.preventDefaultException)&&e.preventDefault();var t=e.touches?e.touches[0]:e,r;this.initiated=i.eventType[e.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=i.getTime(),this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,r=this.getComputedPosition(),this._translate(n.round(r.x),n.round(r.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=t.pageX,this.pointY=t.pageY,this._execEvent("beforeScrollStart")},_move:function(e){if(!this.enabled||i.eventType[e.type]!==this.initiated)return;this.options.preventDefault&&e.preventDefault();var t=e.touches?e.touches[0]:e,r=t.pageX-this.pointX,s=t.pageY-this.pointY,o=i.getTime(),u,a,f,l;this.pointX=t.pageX,this.pointY=t.pageY,this.distX+=r,this.distY+=s,f=n.abs(this.distX),l=n.abs(this.distY);if(o-this.endTime>300&&f<10&&l<10)return;!this.directionLocked&&!this.options.freeScroll&&(f>l+this.options.directionLockThreshold?this.directionLocked="h":l>=f+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n");if(this.directionLocked=="h"){if(this.options.eventPassthrough=="vertical")e.preventDefault();else if(this.options.eventPassthrough=="horizontal"){this.initiated=!1;return}s=0}else if(this.directionLocked=="v"){if(this.options.eventPassthrough=="horizontal")e.preventDefault();else if(this.options.eventPassthrough=="vertical"){this.initiated=!1;return}r=0}r=this.hasHorizontalScroll?r:0,s=this.hasVerticalScroll?s:0,(this.options.scrollX&&r||this.options.scrollY&&s)&&e.stopPropagation(),u=this.x+r,a=this.y+s;if(u>0||u<this.maxScrollX)u=this.options.bounce?this.x+r/3:u>0?0:this.maxScrollX;if(a>0||a<this.maxScrollY)a=this.options.bounce?this.y+s/3:a>0?0:this.maxScrollY;this.directionX=r>0?-1:r<0?1:0,this.directionY=s>0?-1:s<0?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(u,a),o-this.startTime>300&&(this.startTime=o,this.startX=this.x,this.startY=this.y,this.options.probeType==1&&this._execEvent("scroll")),this.options.probeType>1&&this._execEvent("scroll")},_end:function(e){if(!this.enabled||i.eventType[e.type]!==this.initiated)return;this.options.preventDefault&&!i.preventDefaultException(e.target,this.options.preventDefaultException)&&e.preventDefault();var t=e.changedTouches?e.changedTouches[0]:e,r,s,o=i.getTime()-this.startTime,u=n.round(this.x),a=n.round(this.y),f=n.abs(u-this.startX),l=n.abs(a-this.startY),c=0,h="";this.isInTransition=0,this.initiated=0,this.endTime=i.getTime();if(this.resetPosition(this.options.bounceTime))return;this.scrollTo(u,a);if(!this.moved){this.options.tap&&i.tap(e,this.options.tap),this.options.click&&i.click(e),this._execEvent("scrollCancel");return}if(this._events.flick&&o<200&&f<100&&l<100){this._execEvent("flick");return}this.options.momentum&&o<300&&(r=this.hasHorizontalScroll?i.momentum(this.x,this.startX,o,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:u,duration:0},s=this.hasVerticalScroll?i.momentum(this.y,this.startY,o,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:a,duration:0},u=r.destination,a=s.destination,c=n.max(r.duration,s.duration),this.isInTransition=1);if(this.options.snap){var p=this._nearestSnap(u,a);this.currentPage=p,c=this.options.snapSpeed||n.max(n.max(n.min(n.abs(u-p.x),1e3),n.min(n.abs(a-p.y),1e3)),300),u=p.x,a=p.y,this.directionX=0,this.directionY=0,h=this.options.bounceEasing}if(u!=this.x||a!=this.y){if(u>0||u<this.maxScrollX||a>0||a<this.maxScrollY)h=i.ease.quadratic;this.scrollTo(u,a,c,h);return}this._execEvent("scrollEnd")},_resize:function(){var e=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){e.refresh()},this.options.resizePolling)},resetPosition:function(e){var t=this.x,n=this.y;return e=e||0,!this.hasHorizontalScroll||this.x>0?t=0:this.x<this.maxScrollX&&(t=this.maxScrollX),!this.hasVerticalScroll||this.y>0?n=0:this.y<this.maxScrollY&&(n=this.maxScrollY),t==this.x&&n==this.y?!1:(this.scrollTo(t,n,e,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){var e=this.options.scrollerHeight||this.wrapper.offsetHeight;this.wrapperWidth=this.options.wrapperWidth||this.wrapper.clientWidth,this.wrapperHeight=this.options.wrapperHeight||this.wrapper.clientHeight,this.scrollerWidth=this.options.scrollerWidth||this.scroller.offsetWidth,this.scrollerHeight=this.options.scrollerHeight||this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=i.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)},off:function(e,t){if(!this._events[e])return;var n=this._events[e].indexOf(t);n>-1&&this._events[e].splice(n,1)},_execEvent:function(e){if(!this._events[e])return;var t=0,n=this._events[e].length;if(!n)return;for(;t<n;t++)this._events[e][t].apply(this,[].slice.call(arguments,1))},scrollBy:function(e,t,n,r){e=this.x+e,t=this.y+t,n=n||0,this.scrollTo(e,t,n,r)},scrollTo:function(e,t,n,r){r=r||i.ease.circular,this.isInTransition=this.options.useTransition&&n>0,!n||this.options.useTransition&&r.style?(this._transitionTimingFunction(r.style),this._transitionTime(n),this._translate(e,t)):this._animate(e,t,n,r.fn)},scrollToElement:function(e,t,r,s,o){e=e.nodeType?e:this.scroller.querySelector(e);if(!e)return;var u=i.offset(e);u.left-=this.wrapperOffset.left,u.top-=this.wrapperOffset.top,r===!0&&(r=n.round(e.offsetWidth/2-this.wrapper.offsetWidth/2)),s===!0&&(s=n.round(e.offsetHeight/2-this.wrapper.offsetHeight/2)),u.left-=r||0,u.top-=s||0,u.left=u.left>0?0:u.left<this.maxScrollX?this.maxScrollX:u.left,u.top=u.top>0?0:u.top<this.maxScrollY?this.maxScrollY:u.top,t=t===undefined||t===null||t==="auto"?n.max(n.abs(this.x-u.left),n.abs(this.y-u.top)):t,this.scrollTo(u.left,u.top,t,o)},_transitionTime:function(e){e=e||0,this.scrollerStyle[i.style.transitionDuration]=e+"ms",!e&&i.isBadAndroid&&(this.scrollerStyle[i.style.transitionDuration]="0.001s");if(this.indicators)for(var t=this.indicators.length;t--;)this.indicators[t].transitionTime(e)},_transitionTimingFunction:function(e){this.scrollerStyle[i.style.transitionTimingFunction]=e;if(this.indicators)for(var t=this.indicators.length;t--;)this.indicators[t].transitionTimingFunction(e)},_translate:function(e,t){this.options.useTransform?this.scrollerStyle[i.style.transform]="translate("+e+"px,"+t+"px)"+this.translateZ:(e=n.round(e),t=n.round(t),this.scrollerStyle.left=e+"px",this.scrollerStyle.top=t+"px"),this.x=e,this.y=t;if(this.indicators)for(var r=this.indicators.length;r--;)this.indicators[r].updatePosition()},_initEvents:function(t){var n=t?i.removeEvent:i.addEvent,r=this.options.bindToWrapper?this.wrapper:e;n(e,"orientationchange",this),n(e,"resize",this),this.options.click&&n(this.wrapper,"click",this,!0),this.options.disableMouse||(n(this.wrapper,"mousedown",this),n(r,"mousemove",this),n(r,"mousecancel",this),n(r,"mouseup",this)),i.hasPointer&&!this.options.disablePointer&&(n(this.wrapper,"MSPointerDown",this),n(r,"MSPointerMove",this),n(r,"MSPointerCancel",this),n(r,"MSPointerUp",this)),i.hasTouch&&!this.options.disableTouch&&(n(this.wrapper,"touchstart",this),n(r,"touchmove",this),n(r,"touchcancel",this),n(r,"touchend",this)),n(this.scroller,"transitionend",this),n(this.scroller,"webkitTransitionEnd",this),n(this.scroller,"oTransitionEnd",this),n(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var t=e.getComputedStyle(this.scroller,null),n,r;return this.options.useTransform?(t=t[i.style.transform].split(")")[0].split(", "),n=+(t[12]||t[4]),r=+(t[13]||t[5])):(n=+t.left.replace(/[^-\d.]/g,""),r=+t.top.replace(/[^-\d.]/g,"")),{x:n,y:r}},_initIndicators:function(){function a(e){for(var t=i.indicators.length;t--;)e.call(i.indicators[t])}var e=this.options.interactiveScrollbars,t=typeof this.options.scrollbars!="string",n=[],r,i=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(r={el:o("v",e,this.options.scrollbars),interactive:e,defaultScrollbars:!0,customStyle:t,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(r.el),n.push(r)),this.options.scrollX&&(r={el:o("h",e,this.options.scrollbars),interactive:e,defaultScrollbars:!0,customStyle:t,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(r.el),n.push(r))),this.options.indicators&&(n=n.concat(this.options.indicators));for(var s=n.length;s--;)this.indicators.push(new u(this,n[s]));this.options.fadeScrollbars&&(this.on("scrollEnd",function(){a(function(){this.fade()})}),this.on("scrollCancel",function(){a(function(){this.fade()})}),this.on("scrollStart",function(){a(function(){this.fade(1)})}),this.on("beforeScrollStart",function(){a(function(){this.fade(1,!0)})})),this.on("refresh",function(){a(function(){this.refresh()})}),this.on("destroy",function(){a(function(){this.destroy()}),delete this.indicators})},_initWheel:function(){i.addEvent(this.wrapper,"wheel",this),i.addEvent(this.wrapper,"mousewheel",this),i.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){i.removeEvent(this.wrapper,"wheel",this),i.removeEvent(this.wrapper,"mousewheel",this),i.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(e){if(!this.enabled)return;var t,r,i,s,o=this;"deltaX"in e?(t=-e.deltaX,r=-e.deltaY):"wheelDeltaX"in e?(t=e.wheelDeltaX/120*this.options.mouseWheelSpeed,r=e.wheelDeltaY/120*this.options.mouseWheelSpeed):"wheelDelta"in e?t=r=e.wheelDelta/120*this.options.mouseWheelSpeed:"detail"in e?t=r=-e.detail/3*this.options.mouseWheelSpeed:t=r=undefined;if(t&&!this.options.scrollX&&!this.wheelTimeout)return;if(r&&!this.options.scrollY&&!this.wheelTimeout)return;e.preventDefault(),e.stopPropagation(),this.wheelTimeout===undefined&&o._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){o._execEvent("scrollEnd"),o.wheelTimeout=undefined},400);if(t==undefined&&r==undefined)return;t*=this.options.invertWheelDirection,r*=this.options.invertWheelDirection,this.hasVerticalScroll||(r=0),this.hasHorizontalScroll||(t=0);if(this.options.snap){i=this.currentPage.pageX,s=this.currentPage.pageY,t>0?i--:t<0&&i++,r>0?s--:r<0&&s++,this.goToPage(i,s);return}i=this.x+n.round(this.hasHorizontalScroll?t:0),s=this.y+n.round(this.hasVerticalScroll?r:0),i>0?i=0:i<this.maxScrollX&&(i=this.maxScrollX),s>0?s=0:s<this.maxScrollY&&(s=this.maxScrollY),this.scrollTo(i,s,0),this.options.probeType>1&&this._execEvent("scroll")},_initSnap:function(){this.currentPage={},typeof this.options.snap=="string"&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var e=0,t,r=0,i,s,o,u=0,a,f=this.options.snapStepX||this.wrapperWidth,l=this.options.snapStepY||this.wrapperHeight,c;this.pages=[];if(!this.wrapperWidth||!this.wrapperHeight||!this.scrollerWidth||!this.scrollerHeight)return;if(this.options.snap===!0){s=n.round(f/2),o=n.round(l/2);while(u>-this.scrollerWidth){this.pages[e]=[],t=0,a=0;while(a>-this.scrollerHeight)this.pages[e][t]={x:n.max(u,this.maxScrollX),y:n.max(a,this.maxScrollY),width:f,height:l,cx:u-s,cy:a-o},a-=l,t++;u-=f,e++}}else{c=this.options.snap,t=c.length,i=-1;for(;e<t;e++){if(e===0||c[e].offsetLeft<=c[e-1].offsetLeft)r=0,i++;this.pages[r]||(this.pages[r]=[]),u=n.max(-c[e].offsetLeft,this.maxScrollX),a=n.max(-c[e].offsetTop,this.maxScrollY),s=u-n.round(c[e].offsetWidth/2),o=a-n.round(c[e].offsetHeight/2),this.pages[r][i]={x:u,y:a,width:c[e].offsetWidth,height:c[e].offsetHeight,cx:s,cy:o},u>this.maxScrollX&&r++}}this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1===0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=n.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=n.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}),this.on("flick",function(){var e=this.options.snapSpeed||n.max(n.max(n.min(n.abs(this.x-this.startX),1e3),n.min(n.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,e)})},_nearestSnap:function(e,t){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var r=0,i=this.pages.length,s=0;if(n.abs(e-this.absStartX)<this.snapThresholdX&&n.abs(t-this.absStartY)<this.snapThresholdY)return this.currentPage;e>0?e=0:e<this.maxScrollX&&(e=this.maxScrollX),t>0?t=0:t<this.maxScrollY&&(t=this.maxScrollY);for(;r<i;r++)if(e>=this.pages[r][0].cx){e=this.pages[r][0].x;break}i=this.pages[r].length;for(;s<i;s++)if(t>=this.pages[0][s].cy){t=this.pages[0][s].y;break}return r==this.currentPage.pageX&&(r+=this.directionX,r<0?r=0:r>=this.pages.length&&(r=this.pages.length-1),e=this.pages[r][0].x),s==this.currentPage.pageY&&(s+=this.directionY,s<0?s=0:s>=this.pages[0].length&&(s=this.pages[0].length-1),t=this.pages[0][s].y),{x:e,y:t,pageX:r,pageY:s}},goToPage:function(e,t,r,i){i=i||this.options.bounceEasing,e>=this.pages.length?e=this.pages.length-1:e<0&&(e=0),t>=this.pages[e].length?t=this.pages[e].length-1:t<0&&(t=0);var s=this.pages[e][t].x,o=this.pages[e][t].y;r=r===undefined?this.options.snapSpeed||n.max(n.max(n.min(n.abs(s-this.x),1e3),n.min(n.abs(o-this.y),1e3)),300):r,this.currentPage={x:s,y:o,pageX:e,pageY:t},this.scrollTo(s,o,r,i)},next:function(e,t){var n=this.currentPage.pageX,r=this.currentPage.pageY;n++,n>=this.pages.length&&this.hasVerticalScroll&&(n=0,r++),this.goToPage(n,r,e,t)},prev:function(e,t){var n=this.currentPage.pageX,r=this.currentPage.pageY;n--,n<0&&this.hasVerticalScroll&&(n=0,r--),this.goToPage(n,r,e,t)},_initKeys:function(t){var n={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40},r;if(typeof this.options.keyBindings=="object")for(r in this.options.keyBindings)typeof this.options.keyBindings[r]=="string"&&(this.options.keyBindings[r]=this.options.keyBindings[r].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(r in n)this.options.keyBindings[r]=this.options.keyBindings[r]||n[r];i.addEvent(e,"keydown",this),this.on("destroy",function(){i.removeEvent(e,"keydown",this)})},_key:function(e){if(!this.enabled)return;var t=this.options.snap,r=t?this.currentPage.pageX:this.x,s=t?this.currentPage.pageY:this.y,o=i.getTime(),u=this.keyTime||0,a=.25,f;this.options.useTransition&&this.isInTransition&&(f=this.getComputedPosition(),this._translate(n.round(f.x),n.round(f.y)),this.isInTransition=!1),this.keyAcceleration=o-u<200?n.min(this.keyAcceleration+a,50):0;switch(e.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?r+=t?1:this.wrapperWidth:s+=t?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?r-=t?1:this.wrapperWidth:s-=t?1:this.wrapperHeight;break;case this.options.keyBindings.end:r=t?this.pages.length-1:this.maxScrollX,s=t?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:r=0,s=0;break;case this.options.keyBindings.left:r+=t?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:s+=t?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:r-=t?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:s-=t?1:5+this.keyAcceleration>>0;break;default:return}if(t){this.goToPage(r,s);return}r>0?(r=0,this.keyAcceleration=0):r<this.maxScrollX&&(r=this.maxScrollX,this.keyAcceleration=0),s>0?(s=0,this.keyAcceleration=0):s<this.maxScrollY&&(s=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(r,s,0),this.keyTime=o},_animate:function(e,t,n,s){function c(){var h=i.getTime(),p,d,v;if(h>=l){o.isAnimating=!1,o._translate(e,t),o.resetPosition(o.options.bounceTime)||o._execEvent("scrollEnd");return}h=(h-f)/n,v=s(h),p=(e-u)*v+u,d=(t-a)*v+a,o._translate(p,d),o.isAnimating&&r(c),o.options.probeType==3&&o._execEvent("scroll")}var o=this,u=this.x,a=this.y,f=i.getTime(),l=f+n;this.isAnimating=!0,c()},handleEvent:function(e){switch(e.type){case"touchstart":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"MSPointerUp":case"mouseup":case"touchcancel":case"MSPointerCancel":case"mousecancel":this._end(e);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(e);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(e);break;case"keydown":this._key(e);break;case"click":e._constructed||(e.preventDefault(),e.stopPropagation())}}},u.prototype={handleEvent:function(e){switch(e.type){case"touchstart":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"MSPointerUp":case"mouseup":case"touchcancel":case"MSPointerCancel":case"mousecancel":this._end(e)}},destroy:function(){this.options.interactive&&(i.removeEvent(this.indicator,"touchstart",this),i.removeEvent(this.indicator,"MSPointerDown",this),i.removeEvent(this.indicator,"mousedown",this),i.removeEvent(e,"touchmove",this),i.removeEvent(e,"MSPointerMove",this),i.removeEvent(e,"mousemove",this),i.removeEvent(e,"touchend",this),i.removeEvent(e,"MSPointerUp",this),i.removeEvent(e,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(t){var n=t.touches?t.touches[0]:t;t.preventDefault(),t.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=n.pageX,this.lastPointY=n.pageY,this.startTime=i.getTime(),this.options.disableTouch||i.addEvent(e,"touchmove",this),this.options.disablePointer||i.addEvent(e,"MSPointerMove",this),this.options.disableMouse||i.addEvent(e,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(e){var t=e.touches?e.touches[0]:e,n,r,s,o,u=i.getTime();this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,n=t.pageX-this.lastPointX,this.lastPointX=t.pageX,r=t.pageY-this.lastPointY,this.lastPointY=t.pageY,s=this.x+n,o=this.y+r,this._pos(s,o),this.scroller.options.probeType==1&&u-this.startTime>300?(this.startTime=u,this.scroller._execEvent("scroll")):this.scroller.options.probeType>1&&this.scroller._execEvent("scroll"),e.preventDefault(),e.stopPropagation()},_end:function(t){if(!this.initiated)return;this.initiated=!1,t.preventDefault(),t.stopPropagation(),i.removeEvent(e,"touchmove",this),i.removeEvent(e,"MSPointerMove",this),i.removeEvent(e,"mousemove",this);if(this.scroller.options.snap){var r=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),s=this.options.snapSpeed||n.max(n.max(n.min(n.abs(this.scroller.x-r.x),1e3),n.min(n.abs(this.scroller.y-r.y),1e3)),300);if(this.scroller.x!=r.x||this.scroller.y!=r.y)this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=r,this.scroller.scrollTo(r.x,r.y,s,this.scroller.options.bounceEasing)}this.moved&&this.scroller._execEvent("scrollEnd")},transitionTime:function(e){e=e||0,this.indicatorStyle[i.style.transitionDuration]=e+"ms",!e&&i.isBadAndroid&&(this.indicatorStyle[i.style.transitionDuration]="0.001s")},transitionTimingFunction:function(e){this.indicatorStyle[i.style.transitionTimingFunction]=e},refresh:function(){this.transitionTime(),this.options.listenX&&!this.options.listenY?this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none":this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(i.addClass(this.wrapper,"iScrollBothScrollbars"),i.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(i.removeClass(this.wrapper,"iScrollBothScrollbars"),i.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px"));var e=this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.options.wrapperWidth||this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=n.max(n.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,this.options.shrink=="clip"?(this.minBoundaryX=-this.indicatorWidth+8,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.options.wrapperHeight||this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=n.max(n.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.options.shrink=="clip"?(this.minBoundaryY=-this.indicatorHeight+8,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var e=this.options.listenX&&n.round(this.sizeRatioX*this.scroller.x)||0,t=this.options.listenY&&n.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(e<this.minBoundaryX?(this.options.shrink=="scale"&&(this.width=n.max(this.indicatorWidth+e,8),this.indicatorStyle.width=this.width+"px"),e=this.minBoundaryX):e>this.maxBoundaryX?this.options.shrink=="scale"?(this.width=n.max(this.indicatorWidth-(e-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",e=this.maxPosX+this.indicatorWidth-this.width):e=this.maxBoundaryX:this.options.shrink=="scale"&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),t<this.minBoundaryY?(this.options.shrink=="scale"&&(this.height=n.max(this.indicatorHeight+t*3,8),this.indicatorStyle.height=this.height+"px"),t=this.minBoundaryY):t>this.maxBoundaryY?this.options.shrink=="scale"?(this.height=n.max(this.indicatorHeight-(t-this.maxPosY)*3,8),this.indicatorStyle.height=this.height+"px",t=this.maxPosY+this.indicatorHeight-this.height):t=this.maxBoundaryY:this.options.shrink=="scale"&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=e,this.y=t,this.scroller.options.useTransform?this.indicatorStyle[i.style.transform]="translate("+e+"px,"+t+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=e+"px",this.indicatorStyle.top=t+"px")},_pos:function(e,t){e<0?e=0:e>this.maxPosX&&(e=this.maxPosX),t<0?t=0:t>this.maxPosY&&(t=this.maxPosY),e=this.options.listenX?n.round(e/this.sizeRatioX):this.scroller.x,t=this.options.listenY?n.round(t/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(e,t)},fade:function(e,t){if(t&&!this.visible)return;clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var n=e?250:500,r=e?0:300;e=e?"1":"0",this.wrapperStyle[i.style.transitionDuration]=n+"ms",this.fadeTimeout=setTimeout(function(e){this.wrapperStyle.opacity=e,this.visible=+e}.bind(this,e),r)}},s.utils=i,typeof module!="undefined"&&module.exports?module.exports=s:e.IScroll=s}(window,document,Math),define("iScroll",function(){}),function(){var e=function(e){this.init(e)};e.prototype={init:function(e){var t={containment:".mask",contentel:".layer-content",mask_width:200,mask_height:100,content_width:1024,content_height:768,content_x:0,content_y:0,throw_enabled:!0,scrollX:!0,scrollY:!0,onScrollStart:null,onScrolling:null,onScrollEnd:null};return this.options=e?$.extend(!0,{},t,e):t,_.bindAll(this),this._initVaribles(),this._initScrollItems(),this.iScroll},_initVaribles:function(){this.dragged=!1,this.dragstart=!1,this.dragging=!1,this.sliding=!1},_initScrollItems:function(){var e=this;this.containment=this.mask=$(this.options.containment),this.content=$(this.options.contentel),this.containment.css({width:this.options.mask_width,height:this.options.mask_height,overflow:"hidden"}),this.content.css({width:this.options.content_width,height:this.options.content_height}),this.iScroll=new IScroll(this.containment[0],{mouseWheel:!0,probeType:3,click:!0,scrollX:this.options.scrollX,scrollY:this.options.scrollY,wrapperWidth:this.options.mask_width,wrapperHeight:this.options.mask_height,scrollerWidth:this.options.content_width,scrollerHeight:this.options.content_height}),this.iScroll.scrollTo(this.options.content_x,this.options.content_y),this.iScroll.on("scrollStart",function(){e.options.onScrollStart&&e.options.onScrollStart()}),this.iScroll.on("scroll",function(){var t=!1;console.log(this.y),e.dragstart&&(t=!0),e.options.onScrolling&&e.options.onScrolling({deltaX:this.x,deltaY:this.y,controller:t})}),this.iScroll.on("scrollEnd",function(){e.options.onScrollend&&e.options.onScrollend&&e.options.onScrollend({deltaX:this.x,deltaY:this.y})})},_checkX:function(e){return e-this.options.mask_width<-this.options.content_width&&(e=this.options.mask_width-this.options.content_width),e>0&&(e=0),e},_checkY:function(e){return e-this.options.mask_height<-this.options.content_height&&(e=this.options.mask_height-this.options.content_height),e>0&&(e=0),e},_getCurrentPosition:function(){var e={x:0,y:0};return e.x=this.iScroll.x,e.y=this.iScroll.y,e}},typeof require=="undefined"?(window._g||(window._g={}),window._g.scrollview=e):define("_g/scrollview",["_g/base","jquery.hammer","underscore","jquery.transit","iScroll"],function(){return window._g.scrollview=e,window._g.scrollview})}(window),define("interaction_view/model/base",["jquery","backbone","greensock/TweenMax","text!interaction_view/template/animateitem_view_for_webapp.js","text!interaction_view/template/staticitem_view.js","text!interaction_view/template/message.js","text!interaction_view/template/slidenumber.js","text!interaction_view/template/imgpreview.js","interaction_view/view/subcontainer","_g/scrollview"],function(){var AnimateElementTforwebapp=require("text!interaction_view/template/animateitem_view_for_webapp.js"),StaticElementTemplate=require("text!interaction_view/template/staticitem_view.js"),MessageTemplate=require("text!interaction_view/template/message.js"),slidenumberT=require("text!interaction_view/template/slidenumber.js"),imgpreviewT=require("text!interaction_view/template/imgpreview.js");window.interaction_view={model:{Base:Backbone.Model.extend({defaults:{iType:"iBasetype",iLock:!0,iVisibility:!0,iCommon:null,iDetail:null,iOptions:{iParent:null,iParentModel:null,iDraggable:!0,iResizable:!0,template:null,iParentdiv:".interaction-view",iAutoindex:!1,iSync:!1,iKeyscontrol:!0},iPage:null,iParentModel:null,iDraggable:!0,iResizable:!0,template:null,iParentdiv:".interaction-view",iAutoindex:!1,iSync:!1,iZindex:"-1",iAutofocus:!1,iKeyscontrol:!0,iUrl:null,callback:null,iBackground:"",iResources:null,iResourcesType:null,iResourcesProperties:null},options:{createwait:!0},initialize:function(){this.options=this.get("iOptions");if(!this.id){this.beforecreate();var e=this;this.get("iAutoindex")?(this.set("id",this.get("iType")+"_"+this.cid+(new Date).getTime()),this.setcollection(),this.setmodel()):(this.options&&this.options.createwait&&jqwait_simple(),this.savemodel(function(t){e.set("id",t.ID.toString()),e.setcollection(),e.setmodel()}))}else this.setcollection(),this.setmodel()},beforecreate:function(){},savemodel:function(callback){this.save({},{wait:!0,success:function(model,response){returned=eval(response),returned.Status=="Success"?(jqwait_simple_close(),callback&&callback(returned)):model_error({method:"create",status:returned.Status,msg:returned.Message,model:model})},error:function(){model_error({method:"create",status:"ServerError",msg:"server error or server is not available now,please try again!",model:model})}})},setmodel:function(){this.page=interaction_view.ipagelist.getPage(this.get("pageid"))||interaction_view.imasterlist.get(this.get("pageid")),this.setlist(),this.setview(),this.setsyncmodel()},createPath:function(){var e=interaction_view.createPath({path:this.get("path"),isSubOverlay:this.get("isSubOverlay"),page_id:this.get("pageid"),model:this});return e},setSubOverlays:function(){var e=this;e.suboverlays=this.getSubOverlays(),e.iOverlaylist=new interaction_view.collection.list,e.iAnimationlist=new interaction_view.collection.Animation,e.iActionlist=new interaction_view.collection.Action,e.ipreloadlist=new interaction_view.collection.Preload,e.subcontainer=e.ipreloadlist.subcontainer=e.iOverlaylist.subcontainer=e.iAnimationlist.subcontainer=e.iActionlist.subcontainer=!0,e.ipreloadlist.path=e.iOverlaylist.path=e.iAnimationlist.path=e.iActionlist.path=this.createPath(),e.ipreloadlist.pagetype=e.iOverlaylist.pagetype=e.iAnimationlist.pagetype=e.iActionlist.pagetype="sub"},getSubOverlays:function(){return this.get("suboverlays")},setlist:function(){},setresourcesmodel:function(){},validate:function(e){},setsyncmodel:function(){},setcollection:function(){},setview:function(){},url:function(){},sync:function(e,t,n){}})},collection:{Base:Backbone.Collection.extend({iSync:!1,initialize:function(){this.setonadd(),this.setonremove()},setonadd:function(){},setonremove:function(){},url:"",sync:function(e,t,n){},parse:function(e){},resetViewStatus:function(){this.each(function(e){e.iview.resetStatus()})}}),list:Backbone.Collection.extend({iSync:!0,url:"",setonadd:function(){this.on("add",function(e){})},setonremove:function(){},sync:function(e,t,n){e=="read"&&(n.url=context_url+"/overlayinit.json"),Backbone.emulateHTTP=!0,Backbone.emulateJSON=!0,Backbone.sync(e,t,n)},parse:function(e){},resetViewStatus:function(){this.each(function(e){e.iview.resetStatus()})},resetBindings:function(){this.each(function(e){e.get("iType")=="Binding"&&e.iview.resetBindingStatus()})}})},view:{Base:Backbone.View.extend({initialize:function(e){_.bindAll(this),this.model.bind("destroy",this.destroy),this.model.bind("change",this.change),this.initstart()},initstart:function(){this.preload(),this.renderDynamicElement(),this.render()},events:{},options:{},change:function(e){},bindImageSwitch:function(e,t){$("body > #imagepreview").find("button.preview-left").on("click",function(){return e.iview.preview_left(t),!1}),$("body > #imagepreview").find("button.preview-right").on("click",function(){return e.iview.preview_right(t),!1});if(interaction_view.ismobile){var n=this;$("body > #imagepreview").hammer().on("dragleft",function(e){return n.dragimage="left",e.gesture.preventDefault(),!1}),$("body > #imagepreview").hammer().on("dragright",function(e){return n.dragimage="right",e.gesture.preventDefault(),!1}),$("body > #imagepreview").hammer().on("dragend",function(r){return n.dragimage=="right"&&e.iview.preview_left(t),n.dragimage=="left"&&e.iview.preview_right(t),n.dragimage=null,r.gesture.preventDefault(),!1})}},initPage:function(){var e=this.model.get("pageid");this.model.iPageId=e,this.model.set("isMasterOverlay",!1);if(this.model.get("pagetype")=="LayerRef"){var t=this.model.get("parentpageid"),n=this.model.get("layerid"),r=interaction_view.ipagelist.getPage(t)||interaction_view.imasterlist.get(t);this.model.page=r.iOverlaylist.get(e).layer[n];var i=r.iOverlaylist.get(e);this.container=i.iview.$el.find(".layer-content").children(".layer-item[data-id="+n+"]"),this.model.iPageId=t}else if(this.model.get("pagetype")=="master")interaction_view.touchview?this.container=$(".reveal"):this.container=$('.Presentation[id="'+interaction_view.currentPage+'"]').find(".interaction-view"),this.model.set("isMasterOverlay",!0),this.model.isMasterOverlay=!0;else if(this.model.get("isSubOverlay")){this.path=this.model.get("path");var s=interaction_view.getContainerModelByPath(this.path);this.container=s.iview.$el.children(".Element"),this.model.page=interaction_view.getContainerModelByPath(this.path)}else this.model.get("pageid")?this.container=$('.Presentation[id="'+this.model.get("pageid")+'"]').find(".interaction-view"):this.container=$(".interaction-view");!this.getAnimations()&&this.model.get("pagetype")!="master"&&this.model.set("isStatic",!0)},renderStaticElement:function(){},renderDynamicElement:function(){this.initPage();if(this.model.get("isStatic"))var e=_.template(StaticElementTemplate,this.model.toJSON());else var e=_.template(AnimateElementTforwebapp,this.model.toJSON());this.container.append(e),this.setElement(this.container.find('div.iView[id="'+this.model.id+'"]').first());var t=this.getcommon();this.x=t.iStartx+t.iWidth/2,this.y=t.iStarty+t.iHeight/2,this.staticX=t.iStartx,this.staticY=t.iStarty,this.originWidth=t.iWidth,this.originHeight=t.iHeight,this.setSizeAdapt(),this.setScreenAdapt(),this.model.get("isStatic")?this.model.get("iType")=="Image"&&(this.$el.css({left:0,top:0,width:0,height:0}),TweenMax.to(this.$el[0],0,{x:this.x,y:this.y})):TweenMax.to(this.$el[0],0,{x:this.x,y:this.y}),this.model.get("pagetype")=="master"&&this.$el.addClass("master masterhide"),_.include(["CycleImage","Slide","Button"],this.model.get("iType"))&&this.setRatiofixxed(),this.model.get("iSlideNumber")&&this.renderSlideNumber()},setSizeAdapt:function(){if(typeof Reveal=="undefined"||!Reveal.adapt)return!1;var e=this.getdetail();if(!e.iSizeAdapt||!_.isObject(e.iSizeAdapt_data)||!_.keys(e.iSizeAdapt_data).length)return;var t=!1,n=null;e.iScreenAdapt&&(t=!0),e.iSizeAdapt&&(e.iScreenAdapt=!0,this.model.set("iDetail",e,{silent:!0}));if(t)switch(e.iScreenAdapt_data){case 1:e.iSizeAdapt_data.left=!0,e.iSizeAdapt_data.top=!0;break;case 2:e.iSizeAdapt_data.top=!0;break;case 3:e.iSizeAdapt_data.top=!0,e.iSizeAdapt_data.right=!0;break;case 4:e.iSizeAdapt_data.left=!0;break;case 5:break;case 6:e.iSizeAdapt_data.right=!0;break;case 7:e.iSizeAdapt_data.left=!0,e.iSizeAdapt_data.bottom=!0;break;case 8:e.iSizeAdapt_data.bottom=!0;break;case 9:e.iSizeAdapt_data.bottom=!0,e.iSizeAdapt_data.right=!0}e.iSizeAdapt_data.left&&e.iSizeAdapt_data.right&&e.iSizeAdapt_data.top&&e.iSizeAdapt_data.bottom?n=12:e.iSizeAdapt_data.top&&e.iSizeAdapt_data.bottom&&e.iSizeAdapt_data.left?n=15:e.iSizeAdapt_data.top&&e.iSizeAdapt_data.bottom&&e.iSizeAdapt_data.right?n=16:e.iSizeAdapt_data.bottom&&e.iSizeAdapt_data.right&&e.iSizeAdapt_data.left?n=13:e.iSizeAdapt_data.top&&e.iSizeAdapt_data.right&&e.iSizeAdapt_data.left?n=14:e.iSizeAdapt_data.left&&e.iSizeAdapt_data.right?n=10:e.iSizeAdapt_data.top&&e.iSizeAdapt_data.bottom?n=11:(e.iSizeAdapt_data.top&&(n=17),e.iSizeAdapt_data.left&&(n=20),e.iSizeAdapt_data.right&&(n=18),e.iSizeAdapt_data.bottom&&(n=19)),n&&(e.iScreenAdapt_data=n,this.model.set("iDetail",e,{silent:!0}))},setScreenAdapt:function(){if(typeof Reveal=="undefined"||!Reveal.adapt)return!1;var e=this.getdetail();if(!this.model.isMasterOverlay&&!e.iScreenAdapt)return!1;this.model.isMasterOverlay||(this.$el.addClass("fixed"),this.model.get("isStatic")||this.$el.css({left:0,top:0}));if(e.iScreenAdapt){var t=e.iScreenAdapt_data;t!=1&&interaction_view.adapt.elements.push({model:this.model,view:this,type:this.model.isMasterOverlay?"master":"page",adapt:t}),interaction_view.adapt.adjustElement({model:this.model,view:this,type:this.model.isMasterOverlay?"master":"page",adapt:t})}else t=e.iScreenAdapt?e.iScreenAdapt_data:null,interaction_view.adapt.elements.push({model:this.model,view:this,type:this.model.isMasterOverlay?"master":"page",adapt:t}),interaction_view.adapt.adjustElement({model:this.model,view:this,type:this.model.isMasterOverlay?"master":"page",adapt:t});interaction_view.adapt.excute({view:this,adapt:t,type:this.model.isMasterOverlay?"master":"page",model:this.model})},renderSlideNumber:function(){if(!this.model.get("iSlideNumber"))return;var e=this.getdetail(),t=this;this.$el.parent().find('nav.slidenumber[data-id="'+this.model.id+'"]').remove();if(this.getSlideLength()>1){var n=this.model.toJSON();n.slidelength=this.getSlideLength(),this.$el.parent().append(_.template(slidenumberT,n)),this.setSlideNumberPosition()}},renderBackGroud:function(){var e=this.getdetail(),t=e.bg_color,n=e.bg_opacity!=undefined?Number(e.bg_opacity):1;if(!t)t="transparent";else{var r=_g.number.hexToRgb(t);t="rgba("+r.r+","+r.g+","+r.b+","+n+")"}this.$el.children(".Element").css({background:t})},setSlideNumberPosition:function(){this.$el.parent().find('nav.slidenumber[data-id="'+this.model.id+'"]').each(function(){$(this).css({left:parseInt($(this).css("left"),10)-$(this).actual("outerWidth",{includeMargin:!0})/2,top:parseInt($(this).css("top"),10)-$(this).actual("outerHeight",{includeMargin:!0})/2})})},setSlideNumberDisplay:function(){this.getSlideLength()>1&&(this.$el.children(".Element").is(":hidden")?this.$el.parent().find('nav.slidenumber[data-id="'+this.model.id+'"]').hide():this.$el.parent().find('nav.slidenumber[data-id="'+this.model.id+'"]').show())},setFullView:function(e){var t=this;$("body").children("#imagepreview").remove(),$("body").append('<div id="imagepreview" style="z-index:10000;width:100%;height:100%;position:absolute;left:0;top:0;background:#000;"><button type="button" class="close" style="display:block;position: absolute; top: 10px; right: 10px; z-index: 9999; width: 32px; height: 32px; line-height: 32px; margin: 0; padding: 0; font-size: 32px; color: #ddd; box-shadow: 0; text-shadow: 0 1px 0 white; text-align: center; filter: alpha(opacity=100); -khtml-opacity: 1; opacity: 1;">×</button><img src="'+e.picture+'"</div>'),t.isFullSwitch()&&($("body > #imagepreview").append(imgpreviewT),t.bindImageSwitch(e.model,e.index)),_g.ui.fitImage({fit:1,items:"#imagepreview > img",width:e.width,height:e.height}),$("#imagepreview").on("click",function(){$(this).remove()}),$("#imagepreview button.close").on("click",function(){$(this).remove()})},preload:function(){},afterpreload:function(){this.setZindex(),this.setElementDisplay(),this.model.get("iSlideNumber")&&this.setSlideNumberDisplay(),this.setOtherDisplay(),this.copyelstyle=this.$el.attr("style"),this.copyelementstyle=this.$el.children(".Element").attr("style"),this.preloaded=!0},setSlideImageDisplay:function(){var e=this,t=this.getdetail();this.imageDisplay=t.iDisplay;if(!t.iImg||t.iImg.length==0)return;if(!this.imageDisplay)return!1;var n=this.getcommon();_.each(t.iImg,function(r){var i=_g.ui.fitImage({items:e.$el.find(".slidecontent").children()[t.iImg.indexOf(r)],parentWidth:n.iWidth,parentHeight:n.iHeight,width:r.width,height:r.height,fit:e.imageDisplay,useMargin:!0})})},setRatiofixxed:function(){var e=this,t=this.getdetail();if(!t.ratiofixxed||!t.iImg||t.iImg.length==0)return;var n=this.getcommon();_.each(t.iImg,function(r){var i=_g.ui.centerImage({containment:e.$el.find(".slidecontent"),Item:e.$el.find(".slidecontent").children()[t.iImg.indexOf(r)],parentWidth:n.iWidth,parentHeight:n.iHeight,width:r.width,height:r.height,setParent:!1});i.width<n.iWidth&&(e.$el.find(".slidecontent").children("[data-index="+t.iImg.indexOf(r)+"]").css("margin-left",(n.iWidth-i.width)/2+"px"),e.$el.find(".slidecontent").children("[data-index="+t.iImg.indexOf(r)+"]").css("margin-right",(n.iWidth-i.width)/2+"px")),i.height<n.iHeight&&(e.$el.find(".slidecontent").children("[data-index="+t.iImg.indexOf(r)+"]").css("margin-top",(n.iHeight-i.height)/2+"px"),e.$el.find(".slidecontent").children("[data-index="+t.iImg.indexOf(r)+"]").css("margin-bottom",(n.iHeight-i.height)/2+"px"))})},setElementDisplay:function(){this.$el.length>0,this.$el.children(".Element").length>0&&TweenMax.to(this.$el.children(".Element")[0],0,{scale:1});var e=this.model.toJSON().iDetail.iHidden||!1,t=this.model.page.iAnimationlist.where({overlay_id:this.model.id});if(t&&t[0]&&_.include([101,102,103],t[0].toJSON().iType)){var n=-9999,r=-9999;t[0]._animation&&t[0]._animation.css&&(n=t[0]._animation.css.x,r=t[0]._animation.css.y);if(t[0].toJSON().iType==101){e&&this.$el.addClass("hide");var i=this.getcommon().iWidth,s=this.getcommon().iHeight;_g.browserSupport({msie:9})?TweenMax.to(this.$el[0],0,{x:n,y:r}):$(this.$el[0]).css("margin",n+"px 0px 0px "+r+"px").removeClass("hide").show()}t[0].toJSON().iType==102&&_g.browserSupport({msie:9})&&(e&&this.$el.addClass("hide"),TweenMax.to(this.$el.children(".Element")[0],0,{scale:0})),t[0].toJSON().iType==103&&(e&&this.$el.addClass("hide"),TweenMax.to(this.$el[0],0,{opacity:0}))}else e?this.$el.addClass("hide"):this.model.get("iType")!="Video"&&this.$el.removeClass("hide");this.Clone=this.$el.clone()},setOtherDisplay:function(){},setZindex:function(){if(this.model.get("iType")=="Binding"||this.model.get("iType")=="DragDropGroup")return!1;if(this.model.get("iType")=="Audio"&&!this.model.get("iDetail").iControl)return!1;var e=this.model.page.iOverlaylist.indexOf(this.model);this.model.get("pagetype")=="master"&&(e+=1e3),this.$el&&this.$el.css("z-index",e),this.model.get("iSlideNumber")&&this.$el.parent().children('nav.slidenumber[data-id="'+this.model.id+'"]').css("z-index",e)},setMaskSlipable:function(e){var t=this,n=this.getMoveRange();n.x&&e.containment.addClass("iMouseWheel disableMouseWheelX disableDragX"),n.y&&e.containment.addClass("iMouseWheel disableMouseWheelY disableDragY");if(!n.x&&!n.y)return;var r=0,i=0,s,o;this.scrollview=new _g.scrollview({containment:e.containment,contentel:e.contentel,mask_width:this.$el.children(".Element").width(),mask_height:this.$el.children(".Element").height(),content_width:this.getLayerContentSize().width,content_height:this.getLayerContentSize().height,content_x:e.content_x,content_y:e.content_y,scrollX:n.x>0?!0:!1,scrollY:n.y>0?!0:!1,onScrollStart:function(){r=t.scrollview._getCurrentPosition().x,i=t.scrollview._getCurrentPosition().y},onScrolling:function(s){if(n.x>0){s.controller?t.scrollstart=!0:t.scrollstart=!1;var o=s.deltaX-r;(Math.abs(s.deltaX)>n.x+30||s.deltaX>30)&&e.containment.addClass("is_exceededX");var u=Math.abs(s.deltaX)/n.x;t.onBindingChangeTo({type:0,delta:o,deltarate:u,cdirection:0})}if(n.y>0){var a=s.deltaY-i;(Math.abs(s.deltaY)>n.y+30||s.deltaY>30)&&e.containment.addClass("is_exceededY");var u=Math.abs(s.deltaY)/n.y;t.onBindingChangeTo({type:0,delta:a,deltarate:u,cdirection:1})}},onScrollEnd:function(){t.scrollstart=!1,e.containment.removeClass("is_exceededY"),e.containment.removeClass("is_exceededX")}}),this.getdetail().iGravity&&_g.orientation.orientationEvents.push({scrollX:n.x>0?!0:!1,scrollY:n.y>0?!0:!1,speed:n.y?n.y/1200:n.x/1200,func:function(e,r){if(interaction_view.currentPage==t.model.iPageId){if(t.scrollstart)return;e&&(t.scrollview.iScroll.x+e>0&&(e=-t.scrollview.iScroll.x),t.scrollview.iScroll.x+e<-n.x&&(e=-t.scrollview.iScroll.x-n.x)),r&&(t.scrollview.iScroll.y+r>0&&(r=-t.scrollview.iScroll.y),t.scrollview.iScroll.y+r<-n.y&&(r=-t.scrollview.iScroll.y-n.y));if(n.x>0){var i=e,s=Math.abs(t.scrollview.iScroll.x+e)/n.x;t.onBindingChangeTo({type:0,delta:e,deltarate:s,cdirection:0})}if(n.y>0){var o=r,s=Math.abs(t.scrollview.iScroll.y+r)/n.y;t.onBindingChangeTo({type:0,delta:r,deltarate:s,cdirection:1})}t.scrollview.iScroll.scrollBy(e,r)}}}),this.$el.addClass("hascontrols")},getMoveRange:function(){var e=this.getLayerContentSize(),t=e.width,n=e.height,r=this.getcommon();return{x:t-r.iWidth,y:n-r.iHeight}},checkMaskPos:function(e,t){var n=this.getdetail(),r=!0,i=this.getLayerContentSize(),s=i.width,o=i.height;return e.left>0&&(e.left=0,r=!1),e.top>0&&(e.top=0,r=!1),Math.abs(e.left)+t.width>s&&(e.left=-(s-t.width),r=!1),Math.abs(e.top)+t.height>o&&(e.top=-(o-t.height),r=!1),r?null:{left:e.left,top:e.top}},render:function(){},renderCentrolPos:function(e){document.getElementById(this.model.id).style.left=e.x-100+"px",document.getElementById(this.model.id).style.top=e.x-100+"px"},destroy:function(e,t){},updateposition:function(){var e=this.getcommon();e&&(this.$el.css("left",e.iStartx+"px"),this.$el.css("top",e.iStarty+"px"),this.$el.width(e.iWidth),this.$el.height(e.iHeight))},updateel:function(){this.model.get("iTemplate")&&this.$el.html(this.model.get("iTemplate")(this.model.toJSON()))},getAnimations:function(){var e=this.model.page.iAnimationlist.where({overlay_id:this.model.id});return e.length?e:null},getcommon:function(){var e=null,t=this.model.toJSON();return this.model.get("iCommon")&&(e=t.iCommon[iPageDirection]),e},getdetail:function(){var e=this.model.toJSON();return e.iDetail},getCentralPos:function(){var e={},t=this.getcommon();return e.x=t.iStartx+t.iWidth/2,e.y=t.iStarty+t.iHeight/2,e},getCommonByCentralPos:function(e){var t=this.getcommon();return t.iStartx=e.x-t.iWidth/2,t.iStarty=e.y-t.iHight/2,t},setcommon:function(e){var t=this.model.toJSON(),n=t.iCommon;!_.isNaN(e.iStartx)&&!_.isNaN(e.iStarty)&&!_.isNaN(e.iWidth)&&!_.isNaN(e.iHeight)&&(n[iPageDirection]=e),this.model.set("iCommon",n)},setdetail:function(e){var t=this.model.toJSON(),n=t.iDetail;_.each(_.keys(e),function(t){n[t]=e[t]}),this.model.set("iDetail",n),this.updateinfo(),this.updatebackground(),this.updateresources()},settext:function(){var e=tinyMCE.getInstanceById("tEditor_"+this.model.id).getBody().innerHTML;this.setdetail({iText:e}),tinyMCE.getInstanceById("tEditor_"+this.model.id)&&(tinyMCE.execCommand("mceFocus",!1,"tEditor_"+this.model.id),tinyMCE.execCommand("mceRemoveControl",!1,"tEditor_"+this.model.id))},setCentralPos:function(e){var t=this.getcommon();t.iStartx=e.x-t.iWidth/2,t.iStarty=e.y-t.iHight/2,this.setcommon(t)},showdiv:function(){this.$el.removeClass("hide"),this.model.set("iVisibility",!0)},hidediv:function(){this.$el.addClass("hide"),this.model.set("iVisibility",!1)},resetStatus:function(){this.$el.attr("style",this.copyelstyle),this.$el.children(".Element").attr("style",this.copyelementstyle),this.setElementDisplay(),this.model.get("iSlideNumber")&&this.setSlideNumberDisplay(),this.resetOtherStatus&&this.resetOtherStatus()},sendToPreload:function(e){var t=$.extend({},{parentpageid:this.model.get("parentpageid"),overlay_id:this.model.id,elementtype:this.model.get("iType"),pageid:this.model.get("pageid"),pagetype:this.model.get("pagetype"),layerid:this.model.get("layerid")},e),n=new interaction_view.model.Preload(t);return this.preloadmodel=n,n},playTimeline:function(){console.log("begin to play timeline");if(this.autoplay){if(this.timeline){if(this.$el.children(".Element").is(":hidden"))return;!this.repeat&&this.timeline.time()==this.timeline.duration()?this.timeline.play(0):this.timeline.play()}}else{this.autoplay=!0,this.timeline.kill(),this.timeline=new TimelineMax({paused:!0,repeat:this.repeat,onComplete:this.setRewind}),this.setTimeline(),this.useIndex||this.setSlideDisplayAll();if(this.$el.children(".Element").is(":hidden"))return;this.timeline&&this.timeline.play()}},pauseTimeline:function(){this.timeline&&this.timeline.pause()},stopTimeline:function(){this.autoplay=!1,this.timeline.kill(),this.timeline=new TimelineMax({paused:!0,repeat:this.repeat}),this.setTimeline(),this.timeline.pause(1e-5),this.setSlideElementsDisplay&&this.setSlideElementsDisplay()},setRewind:function(){if(!this.timeline)return!1;var e=this,t=this.getdetail(),n=this.delay,r=function(){setTimeout(function(){e.timeline.pause(1e-5),e.currentIndex=0,e.useIndex&&e.drawCanvas(e.img_src[0],0)},n*1e3)},i=t.iRepeat?-1:0,s=t.iRewind;this.model.onAnimationStart&&(interaction_view.events.onAnimationEnd(this.model.onAnimationStart),this.model.onAnimationStart=null);if(!!i||!s)return null;r()},setLoopSwitch:function(){if(this.useIndex){this.setCanvasLoopSwitch();return}var e=this,t=0,n=this.delay;this.autoplay||(n=2);for(i=0;i<this.slidelength;i++){if(i==this.slidelength-1&&!this.repeat)return;var r=this.slideel.children('[data-index="'+i+'"]');this.timeline.add(TweenMax.to(r,1e-5,{css:{opacity:1}}),t),this.timeline.add(TweenMax.to(r,1e-5,{css:{opacity:0},onUpdateParams:[i+1<this.slidelength?i+1:0],onUpdate:this.onTimelineUpdate}),t+n);var s=this.slideel.children('[data-index="'+(i+1<this.slidelength?i+1:0)+'"]');this.timeline.add(TweenMax.to(s,1e-5,{css:{opacity:0}}),t),this.timeline.add(TweenMax.to(s,1e-5,{css:{opacity:1},onCompleteParams:[i+1<this.slidelength?i+1:0],onComplete:e.onChangeSlideTo}),t+n),t+=n+2e-5}},setCanvasLoopSwitch:function(){var e=this,t=0,n=this.delay,r=this.getdetail();this.autoplay||(n=2);for(i=0;i<this.slidelength;i++){if(i==this.slidelength-1&&!this.repeat)return;var s=r.iImg[i].picture,o=r.iImg[i+1<this.slidelength?i+1:0].picture;this.timeline.add(TweenMax.to(this.slideel,1e-5,{css:{opacity:1},onStartParams:[s,i],onStart:this.drawCanvas}),t),this.timeline.add(TweenMax.to(this.slideel,1e-5,{css:{opacity:1},onStartParams:[o,i+1],onStart:this.drawCanvas,onUpdateParams:[i+1<this.slidelength?i+1:0],onUpdate:this.onTimelineUpdate,onCompleteParams:[i+1<this.slidelength?i+1:0],onComplete:e.onChangeSlideTo}),t+n),t+=n+2e-5}},setNone:function(){var e=this,t=0,n=this.delay;this.autoplay||(n=.5);for(i=0;i<this.slidelength;i++){if(i==this.slidelength-1&&!this.repeat)return;var r=this.slideel.children('[data-index="'+i+'"]');this.timeline.add(TweenMax.to(r,1e-5,{css:{opacity:1}}),t),this.timeline.add(TweenMax.to(r,1e-5,{css:{opacity:0},onUpdateParams:[i+1<this.slidelength?i+1:0],onUpdate:this.onTimelineUpdate}),t+1e-5+n);var s=this.slideel.children('[data-index="'+(i+1<this.slidelength?i+1:0)+'"]');this.timeline.add(TweenMax.to(s,1e-5,{css:{opacity:0}}),t),this.timeline.add(TweenMax.to(s,1e-5,{css:{opacity:1},onCompleteParams:[i+1<this.slidelength?i+1:0],onComplete:e.onChangeSlideTo}),t+1e-5+n),t+=n+2e-5}},setFade:function(){var e=this,t=0,n=this.delay,r,s;this.autoplay||(n=0);for(i=0;i<this.slidelength;i++){i==0&&(r=this.slideel.children('[data-index="'+i+'"]'),this.timeline.add(TweenMax.to(r,0,{css:{opacity:1},onCompleteParams:[0],onComplete:e.onChangeSlideTo}),t),t+=n);if(i==this.slidelength-1){if(!this.repeat)break;r=this.slideel.children('[data-index="'+i+'"]'),this.timeline.add(TweenMax.to(r,1e-5,{css:{opacity:1}}),t),this.timeline.add(TweenMax.fromTo(r,.5,{opacity:1,ease:"Linear.easeNone"},{opacity:0,onUpdateParams:[i+1<this.slidelength?i+1:0],onUpdate:this.onTimelineUpdate}),t+1e-5),this.timeline.add(TweenMax.to(r,1e-5,{css:{opacity:0}}),t+.50001),s=this.slideel.children('[data-index="'+(i+1<this.slidelength?i+1:0)+'"]'),this.timeline.add(TweenMax.to(s,1e-5,{css:{opacity:1}}),t),this.timeline.add(TweenMax.fromTo(s,.5,{opacity:1},{opacity:1,ease:"Linear.easeNone"}),t+1e-5),this.timeline.add(TweenMax.to(s,1e-5,{css:{opacity:1},onCompleteParams:[i+1<this.slidelength?i+1:0],onComplete:e.onChangeSlideTo}),t+.50001),t+=n+.50002}else r=this.slideel.children('[data-index="'+i+'"]'),this.timeline.add(TweenMax.to(r,1e-5,{css:{opacity:1}}),t),this.timeline.add(TweenMax.fromTo(r,.5,{opacity:1,ease:"Linear.easeNone"},{opacity:1,onUpdateParams:[i+1<this.slidelength?i+1:0],onUpdate:this.onTimelineUpdate}),t+1e-5),this.timeline.add(TweenMax.to(r,1e-5,{css:{opacity:0}}),t+.50001),s=this.slideel.children('[data-index="'+(i+1<this.slidelength?i+1:0)+'"]'),this.timeline.add(TweenMax.to(s,1e-5,{css:{opacity:0}}),t),this.timeline.add(TweenMax.fromTo(s,.5,{opacity:0},{opacity:1,ease:"Linear.easeNone"}),t+1e-5),this.timeline.add(TweenMax.to(s,1e-5,{css:{opacity:1},onCompleteParams:[i+1<this.slidelength?i+1:0],onComplete:e.onChangeSlideTo}),t+.50001),t+=n+.50002}},setSlip:function(){var e=this,t=0,n=this.delay,r,s;this.autoplay||(n=0);for(i=0;i<this.slidelength;i++){if(i==this.slidelength-1&&!this.repeat)break;var o=this.getParamsForSlide(i).param,u=this.getParamsForSlide(i+1<this.slidelength?i+1:0).param1;o.onUpdateParams=[i+1<this.slidelength?i+1:0],o.onUpdate=this.onTimelineUpdate,i==0&&(r=this.slideel.children('[data-index="'+i+'"]'),this.timeline.add(TweenMax.to(r,0,{css:{opacity:1},onCompleteParams:[0],onComplete:e.onChangeSlideTo}),t),t+=n),r=this.slideel.children('[data-index="'+i+'"]'),this.timeline.add(TweenMax.to(r,1e-5,{css:{opacity:1}}),t),this.timeline.add(TweenMax.fromTo(r,.5,{left:"0px",top:"0px",ease:"Linear.easeNone"},_.clone(o)),t+1e-5),this.timeline.add(TweenMax.to(r,1e-5,{css:{opacity:0}}),t+.50001),s=this.slideel.children('[data-index="'+(i+1<this.slidelength?i+1:0)+'"]'),this.timeline.add(TweenMax.to(s,1e-5,{css:{opacity:1}}),t),this.timeline.add(TweenMax.fromTo(s,.5,_.clone(u),{top:"0px",left:"0px",ease:"Linear.easeNone"}),t+1e-5),this.timeline.add(TweenMax.to(s,1e-5,{css:{opacity:1},onCompleteParams:[i+1<this.slidelength?i+1:0],onComplete:e.onChangeSlideTo}),t+.50001),t+=n+.50002}},setFlip:function(){var e=this,t=0,n=this.delay,r,s;this.autoplay||(n=0),TweenLite.set(this.$el.children(".Element"),{perspective:800}),TweenLite.set(this.slideel,{transformStyle:"preserve-3d"}),TweenLite.set(this.slideel,{rotationY:0}),TweenLite.set(this.slideel.children(),{backfaceVisibility:"hidden"});var o={rotationY:0},u=180;for(i=0;i<this.slidelength;i++){if(i==this.slidelength-1&&!this.repeat)break;o.onUpdateParams=[i+1<this.slidelength?i+1:0],o.onUpdate=this.onTimelineUpdate,o.rotationY="-=180cw",i==0&&(r=this.slideel.children('[data-index="'+i+'"]'),this.timeline.add(TweenMax.to(r,0,{rotationY:u==180?0:180,opacity:1,onCompleteParams:[0],onComplete:e.onChangeSlideTo}),t),t+=n),r=this.slideel.children('[data-index="'+i+'"]'),s=this.slideel.children('[data-index="'+(i+1<this.slidelength?i+1:0)+'"]'),this.timeline.add(TweenMax.to(r,1e-5,{rotationY:u==180?0:180,opacity:1}),t),this.timeline.add(TweenMax.to(this.slideel,.5,_.clone(o)),t+1e-5),this.timeline.add(TweenMax.to(r,1e-5,{css:{opacity:0}}),t+.50001),this.timeline.add(TweenMax.to(s,1e-5,{css:{rotationY:u,opacity:1}}),t),this.timeline.add(TweenMax.to(s,1e-5,{onCompleteParams:[i+1<this.slidelength?i+1:0],onComplete:e.onChangeSlideTo}),t+.50001),t+=n+.50002,u=u==180?0:180}},setFlow:function(){function r(t){e.setElementTo(t),!e.getdetail().iRepeat&&e.getdetail().iRewind&&t>=e.slidelength-1&&TweenMax.to(e.slideel.find('[data-index="'+t+'"]'),.3,{opacity:1,onComplete:function(){e.CoverFlow.coverflow("select",0)}})}var e=this,t=0,n=this.delay;this.autoplay||(n=0);for(i=0;i<this.slidelength;i++){if(i==this.slidelength-1&&!this.repeat)break;i==0&&(t+=n);var s=this.slideel.find('[data-index="'+i+'"]');this.timeline.add(TweenMax.to(s,.3,{opacity:1,onUpdateParams:[i+1<e.slidelength?i+1:0],onUpdate:r}),t),t+=n+.3}},onBindingChangeTo:function(e){interaction_view.events.onBingChangeTo({type:e.type,page_id:this.model.page.id?this.model.page.id:this.model.get("layerid"),id:this.model.id,delta:e.delta,deltarate:e.deltarate,cdirection:e.cdirection})},onTimelineUpdate:function(e){var t=this.timeline.time();interaction_view.events.onBingChangeTo({type:0,page_id:this.model.page.id?this.model.page.id:this.model.get("layerid"),id:this.model.id,delta:-1,deltarate:t/this.timeline.duration(),cdirection:null})},onChangeSlideTo:function(e){this.currentIndex=e,this.model.trigger("slideTo",e),this.model.get("iSlideNumber")&&this.changeSlideNumber()},changeSlideNumber:function(){var e=this.$el.parent().children('nav.slidenumber[data-id="'+this.model.id+'"]').children(":nth-child("+(this.currentIndex+1)+")");e.each(function(){$(this).addClass("active").siblings().removeClass("active")})},onExecuteBinding:function(e){if(this.model.get("iType")=="LayerRef"){this.onExecuteBindingForLayerRef(e);return}var t=this;if(this.slideel&&this.slidelength>1&&this.timeline){var n=this.timeline.duration();this.repeat?singletime=n/this.slidelength:singletime=n/(this.slidelength-1);if(e.type==0){t.useIndex||t.setSlideDisplayAll(),i=e.deltarate*n;var r=parseInt(i/singletime,10);t.slideChangePatch(e.delta,r),t.onChangeSlideTo(r),t.useIndex?(t.indexTime=i,t.drawCanvas(t.img_src[r],r),t.autoplay&&(t.autoplay=!1,t.timeline.pause(i))):t.timeline.seek(i)}else{if(t.useIndex)var i=t.indexTime;else var i=t.timeline.time();console.log("stop at delta"+e.delta),t.model.get("iType")!="CycleImage"&&(i/singletime-parseInt(i/singletime,10)<.2?(i=parseInt(i/singletime,10)*singletime,r=parseInt(i/singletime,10)):i/singletime-parseInt(i/singletime,10)>.8?(i=(parseInt(i/singletime,10)+1)*singletime,r=parseInt(i/singletime,10)):(i=parseInt(i/singletime,10)*singletime,r=parseInt(i/singletime,10),e.delta<0&&i<n&&(i+=singletime,r=parseInt(i/singletime,10)))),console.log(i);if(i==0||i==1e-5)i=1e-5,e.reset&&e.revert&&(t.repeat?i=1e-5:i=t.timeline.duration(),r=parseInt(i/singletime,10));r>t.slidelength-1&&(r=0),t.useIndex?(t.indexTime=i,r!=undefined&&t.drawCanvas(t.img_src[r],r)):t.timeline.seek(i),t.useIndex||t.setSlideDisplay(r),t.onChangeSlideTo(r)}}},setSlideDisplay:function(e,t){this.autoplay||(this.slideel.children('[data-index="'+e+'"]').css({display:"block",opacity:1}),t&&this.slideel.children('[data-index="'+e+'"]').css("opacity",1),this.model.get("iType")=="LayerSlide"&&(this.onShow(e),this.onBeforeHide(e)),this.slideel.children('[data-index="'+e+'"]').siblings().hide(),t&&this.slideel.children('[data-index="'+e+'"]').siblings().css("opacity",0),this.model.get("iType")=="LayerSlide"&&this.onHide(e))},setSlideDisplayAll:function(){this.slideel.children().css("display","block")},setElementTo:function(e){var t=this,n=this.getdetail();if(n.iFade=="Flow"){var r=t.CoverFlow.children(".ui-state-active").index(),i=n.iImg.length-1;e=="prev"?e=r<=0?i:r-1:e=="next"?e=r>=i?0:r+1:e=="first"?e=0:e=="last"&&(e=i),e<0&&(e=0),e>i&&(e=i),t.CoverFlow.coverflow("select",e);return}if(!_.include(["first","last","prev","next"],e)){if(Number(e)==NaN||this.currentIndex==Number(e))return;e=Number(e)}var s=n.iRepeat,o=!1,u=null,a;if(!this.slidelength||e>=this.slidelength)return;var f=_g.number.decimal(this.timeline.duration(),5);s?a=_g.number.decimal(f/this.slidelength,5):a=_g.number.decimal(f/(this.slidelength-1),5);if(e=="first")u=1e-5;else if(e=="last")u=(this.slidelength-1)*a;else if(e=="prev"){o=!0;var l=!0;if(!s&&this.currentIndex==0)return!1;u==1e-5&&(u=0),u=this.timeline.time()-a>=0?parseInt(this.timeline.time()/a-1,10)*a:a*(this.slidelength-1),u=_g.number.decimal(u,5)}else if(e=="next"){o=!0;var c=!0;if(!s&&this.currentIndex==this.slidelength-1)return!1;u==1e-5&&(u=0),s?u=this.timeline.time()+a<f?parseInt(this.timeline.time()/a+1,10)*a:0:u=this.timeline.time()+a<=f?parseInt(this.timeline.time()/a+1,10)*a:0}else{if(!(Number(e)>=0&&Number(e)<this.slidelength))return!1;u=a*parseInt(e,10)+1e-5}console.log(u),u==0&&(u=1e-5),e=parseInt(u/a,10),e>this.slidelength-1&&(e=0);if(this.iFade!="None"&&this.iFade!="LoopSwitch"&&o){t.setSlideDisplayAll();if(c)var h=u==1e-5?f:u;if(l){var p=_g.number.decimal(t.timeline.time(),5);(p==0||p==1e-5)&&t.timeline.seek(f);var h=u}this.timeline.tweenTo(h,{onComplete:function(){c&&u==1e-5&&t.timeline.seek(1e-5),console.log("stop at "+t.timeline.time()),t.setSlideDisplay(e),t.onChangeSlideTo(e),t.onBindingChangeTo({type:1,delta:0})}})}else{t.useIndex?(t.indexTime=u,t.drawCanvas(t.img_src[e],e),t.autoplay&&(t.autoplay=!1,t.timeline.pause(u))):t.timeline.seek(u,!1);var d=Math.abs(this.timeline.time()/this.timeline.duration());t.useIndex||this.setSlideDisplay(e),this.onChangeSlideTo(e),this.onBindingChangeTo({type:1,delta:0})}},slideChangePatch:function(e,t){var n=this;if(e>0)for(i=n.currentIndex;i>t;i--)i<0&&(i=n.slidelength-1),i!=n.currentIndex&&n.onChangeSlideTo(i);if(e<0)for(i=n.currentIndex;i<t;i++)i>n.slidelength-1&&(i=0),i!=n.currentIndex&&n.onChangeSlideTo(i)},control:function(){var e=_g.touch.support,t="touchstart",n="touchmove",r="touchend";eCancel="touchcancel";var i=this,s=this.getdetail(),o=0,u=0,a;this.indexTime=0;var f=0,l=0,c=0,h,p=0,d=!1,v=!1,m=null,g=null,y=null,b=this.$el.children(".Element").width(),w=s.iSlidetype?s.iSlidetype:0,E=this.timeline.duration(),S=w=="横向"||Number(w)==0?0:1;this.repeat?a=this.singletime=E/this.slidelength:a=this.singletime=E/(this.slidelength-1);var x=this.repeat,T=function(e){h=0,p=0,i.autoplay&&(i.indexTime=i.timeline.time()),i.useIndex?o=i.indexTime:o=i.timeline.time(),d=!0,y=i.slideel.children(":visible").first().index(),console.log("control start")},N=function(e,t,n){i.useIndex||i.setSlideDisplayAll(),e>E&&(x?e-=E:(p+=1,p>5&&i.model.get("iSlideNumber")&&(S==0?i.$el.children(".Element").addClass("is_exceededX"):i.$el.children(".Element").addClass("is_exceededY")),e=E)),e<0&&(x?e=E+e:(p+=1,console.log(E-e),p>5&&i.model.get("iSlideNumber")&&(S==0?i.$el.children(".Element").addClass("is_exceededX"):i.$el.children(".Element").addClass("is_exceededY")),e=1e-5));var r=e/E;i.onBindingChangeTo({type:0,delta:t,deltarate:r,cdirection:S});if(i.model.get("iType")=="CycleImage"){var s=parseInt(e/a);s>i.slidelength-1&&(s=0);if(s==i.currentIndex)return e;n||i.slideChangePatch(t,s),i.onChangeSlideTo(s)}return console.log(e),i.useIndex?(i.indexTime=e,i.drawCanvas(i.img_src[s],s),i.autoplay&&(i.autoplay=!1,i.timeline.pause(o))):i.timeline.seek(e),e},C=function(e){if(i.model.get("iType")=="CycleImage")return;var t;i.useIndex?o=i.indexTime:o=i.timeline.time(),i.model.get("iType")!="CycleImage"?(o==1e-5&&(o=0),o/a-parseInt(o/a,10)<.2?(o=parseInt(o/a,10)*a,t=parseInt(o/a,10)):o/a-parseInt(o/a,10)>.8?(o=(parseInt(o/a,10)+1)*a,t=parseInt(o/a,10)):(o=parseInt(o/a,10)*a,t=parseInt(o/a,10),e<0&&o<E&&(o+=a,t=parseInt(o/a,10))),o=Math.round(o/a)*a+1e-5):t=parseInt(o/a,10),console.log("final time is"+o),o==0&&(o=1e-5),t>i.slidelength-1&&(t=0),i.useIndex?(i.drawCanvas(i.img_src[t],t),i.onChangeSlideTo(t),i.onBindingChangeTo({type:1,delta:e})):i.timeline.tweenTo(o,{onComplete:function(){i.useIndex||i.setSlideDisplay(t),i.onChangeSlideTo(t),i.onBindingChangeTo({type:1,delta:e})}})};if(_g.touch.support){var k,L,A;this.$el.children(".Element").on(t,function(e){e=e.originalEvent.touches[0];if(!i.testControl(e.target))return!1;if($(this).hasClass("is_exceededX")||$(this).hasClass("is_exceededY"))return;m=f=e.pageX,g=l=e.pageY,k=e.pageX,L=e.pageY,A=!0;var t=e.target;u=0,T(),setTimeout(function(){k===f&&!A&&L===l&&$(t).trigger("click")},200)}),this.$el.children(".Element").on(n,function(e){e=e.originalEvent.touches[0];if($(this).hasClass("is_exceededX")||$(this).hasClass("is_exceededY")){d=!1;return}if(d&&m!=null){h=w=="横向"||Number(w)==0?e.pageX-m:e.pageY-g,c=w=="横向"||Number(w)==0?e.pageX-f:e.pageY-l,moveOppositeDirection=w=="横向"||Number(w)==0?e.pageY-l:e.pageX-f,console.log("direction"+c),console.log("oppsite"+moveOppositeDirection);if(Math.abs(c)<=2&&Math.abs(moveOppositeDirection)>12){var t=w=="横向"||Number(w)==0?"is_exceededX":"is_exceededY";$(this).addClass(t);return}f=e.pageX,l=e.pageY;if(h==0)return;return i.model.get("iType")=="CycleImage"?u=o-h/b*E:u=o-h/b*a,N(u,c),!1}}),this.$el.children(".Element").on(r,function(e){e=e.originalEvent.touches[0],A=!1;if(d)return h!=0?(C(h),$(Reveal.options.containment).hammer("reset")):(i.setSlideDisplay(y),interaction_view.ismobile&&i.$el.children(".Element").trigger("click")),d=!1,console.log("control stop"),$(Reveal.options.containment).hammer().trigger("dragend"),!1;$(this).removeClass("is_exceededX"),$(this).removeClass("is_exceededY"),p=0}),this.$el.children(".Element").on(eCancel,function(e){e=e.originalEvent.touches[0];if(d)return h!=0?(C(h),$(Reveal.options.containment).hammer("reset")):i.setSlideDisplay(y),d=!1,console.log("control cancel"),!1;$(this).removeClass("is_exceededX"),$(this).removeClass("is_exceededY"),p=0})}this.$el.children(".Element").on("mousedown",function(e){if(!i.testControl(e.target))return!1;if($(this).hasClass("is_exceededX")||$(this).hasClass("is_exceededY"))return;u=0,m=f=e.pageX,g=l=e.pageY,T()}),this.$el.children(".Element").on("mousemove",function(e){if($(this).hasClass("is_exceededX")||$(this).hasClass("is_exceededY")){d=!1;return}if(d&&m!=null){h=w=="横向"||Number(w)==0?e.pageX-m:e.pageY-g,c=w=="横向"||Number(w)==0?e.pageX-f:e.pageY-l,f=e.pageX,l=e.pageY;if(h==0)return;return i.model.get("iType")=="CycleImage"?u=o-h/b*E:u=o-h/b*a,N(u,c),e.preventDefault(),!1}}),this.$el.children(".Element").on("mouseup",function(e){if(d)return h!=0?(C(h),e.preventDefault(),e.stopPropagation(),$(Reveal.options.containment).hammer("reset")):(i.setSlideDisplay(y),$(e.currentTarget).trigger("click")),d=!1,console.log("control stop"),!1;$(this).removeClass("is_exceededX"),$(this).removeClass("is_exceededY"),p=0}),this.$el.children(".Element").on("mouseleave",function(e){if(d)return h!=0?(C(h),e.preventDefault(),$(Reveal.options.containment).hammer("reset")):i.setSlideDisplay(y),d=!1,console.log("control cancel"),!1;$(this).removeClass("is_exceededX"),$(this).removeClass("is_exceededY"),p=0}),this.$el.children(".Element").addClass("iMouseWheel"),w=="横向"||Number(w)==0?this.$el.children(".Element").addClass("enableMouseWheelX disableDragX"):this.$el.children(".Element").addClass("enableMouseWheelY disableDragY"),this.$el.children(".Element").on("wheelstart",function(e,t){if(!$(e.target).is(this))return;u=0,m=f=0,g=l=0,h=0,i.useIndex?o=i.indexTime:o=i.timeline.time(),y=i.slideel.children(":visible").first().index(),v=!0,console.log("control start")}),this.$el.children(".Element").on("wheelmove",function(e,t){if(!$(e.target).is(this))return;if(!v)return!1;var n=_g.mousewheel.getMouseWheel(t),r=n.x,s=n.y;if(r==undefined&&s==undefined)return;var p=Math.max(-1,Math.min(1,r)),d=Math.max(-1,Math.min(1,s)),m=30;console.log("before currentX is "+f),f+=p*m,l+=d*m,console.log("after currentX is "+f),console.log("wheelX is"+p),h=w=="横向"||Number(w)==0?p:d,console.log("control moving");var g=1;if(h){c=w=="横向"||Number(w)==0?p:d;var y=w=="横向"||Number(w)==0?f:l;if(y){i.model.get("iType")=="CycleImage"&&(g=i.slidelength>50?i.slidelength/50:1);var b=w=="横向"||Number(w)==0?g*$(this).width():g*$(this).height();y>b&&(y=b),y<-b&&(y=-b),w=="横向"||Number(w)==0?f=y:l=y,i.model.get("iType")=="CycleImage"?u=o-y/b*E:u=o-y/$(this).width()*a,N(u,c)}}}),this.$el.children(".Element").on("wheelend",function(e,t){if(!v)return!1;var n=w=="横向"||Number(w)==0?f:l;C(n),console.log("control end"),f=l=0,v=!1});if(i.model.get("iType")=="CycleImage"&&s.iGravity){var O=i.slidelength>50?i.slidelength/50:1;_g.orientation.orientationEvents.push({scrollX:w=="横向"||Number(w)==0,scrollY:w!="横向"&&Number(w)!=0,page_id:i.model.iPageId,speed:1,func:function(e,t,n,r){if(interaction_view.currentPage==i.model.iPageId){var s=i.$el.children(".Element"),a=w=="横向"||Number(w)==0?e:t;if(!a)return;a=parseInt(a),deltaend=-a;var f=w=="横向"||Number(w)==0?O*s.width():O*s.height();u=o-deltaend/f*E,console.log(u),i.indexTime=o=N(u,a,!0)}}})}},getParamsForFade:function(e){param.opacity=1,param1.opacity=0},getParamsForSlide:function(e){var t=this.getdetail(),n=t.iSlidetype?t.iSlidetype:0,r=this.slideel.children('[data-index="'+e+'"]');_.include(["Slide","Gallery","CycleImage"],this.model.get("iType"))&&(r=this.slideel);var i={ease:"Linear.easeNone"},s={ease:"Linear.easeNone"};return n=="横向"||Number(n)==0?(i.opacity=1,i.left="-"+r.css("width"),s.left=r.css("width"),s.opacity=1):(i.opacity=1,i.top="-"+r.css("height"),s.top=r.css("height"),s.opacity=1),{param:i,param1:s}},getParamsForSlip:function(e){return param},getSlideDuration:function(){var e=this.getdetail(),t;return this.slidelength==0?0:(this.model.get("iType")!="CycleImage"?t=(this.delay+.50002)*this.slidelength:t=(this.delay+2e-5)*this.slidelength,t)},onShow:function(){this.model.get("iSlideNumber")&&this.setSlideNumberDisplay(),_.include(["Slide","LayerSlide","CycleImage"],this.model.get("iType"))&&this.autoplay&&this.playTimeline(),_.include(["PageIndex","Gallery","Grid"],this.model.get("iType"))&&this.resetOtherStatus(),this.otherOnShow&&this.otherOnShow()},onBeforeHide:function(){_.include(["Slide","LayerSlide","CycleImage"],this.model.get("iType"))&&this.timeline&&(this.timeline.paused()||this.timeline.pause())},onHide:function(){this.model.get("iSlideNumber")&&this.setSlideNumberDisplay()},loadSubOverlay:function(e){var t=require("interaction_view/view/subcontainer");t=_g.mvc.createView(t),this.subview=new t({model:this.model}),this.preloadmodel=e,this.subview.afterload()},clearPreload:function(){this.$el.children(".Element").length&&this.$el.children(".Element").find("img").each(function(){$(this).attr("src","")})}})}},window.iOverlaylist=new interaction_view.collection.Base,interaction_view.iOverlaylist=new interaction_view.collection.list,interaction_view.currentPage=null}),define("interaction_view/ui/animation",["jquery","backbone"],function(){window.animation=function(e){this.defaults={countTime:0,currentFrame:0,path:null,raster:null,animation:null},this.options=e,this.options=$.extend(!0,{},this.defaults,typeof e=="object"&&e),this.page=this.options.collection.page,this.options.old_animation=$.extend(!0,{},this.options.animation),this.init()},window.animation.prototype={init:function(){_.bindAll(this),this.handleVars(),this.options.animation.iKind==0&&this.setparam(),this.options.animation.iKind==1&&this.setgroupparam()},refresh:function(){this.options.animation=$.extend(!0,{},this.options.old_animation),this.init()},handleVars:function(){var e=this.options.animation,t=interaction_view.getVarsOp(this.page.id,[0,2]);_.each(this.options.animation.iTiming,function(n,r){typeof n!="object"&&(e.iTiming[r]=Number(t.var2val(n)))}),_.each(this.options.animation.iDetail,function(n,r){typeof n!="object"&&(e.iDetail[r]=Number(t.var2val(n)))})},cssTovalue:function(e){var t=e;return t=Number(e.split("px")[0]),t},EaseTypes:{0:"Linear.easeNone",1:"Power0.easeIn",2:"Power0.easeInOut",3:"Power0.easeOut",4:"Power1.easeIn",5:"Power1.easeInOut",6:"Power1.easeOut",7:"Power2.easeIn",8:"Power2.easeInOut",9:"Power2.easeOut",10:"Power3.easeIn",11:"Power3.easeInOut",12:"Power3.easeOut",13:"Power4.easeIn",14:"Power4.easeInOut",15:"Power4.easeOut",16:"Quad.easeIn",17:"Quad.easeInOut",18:"Quad.easeOut",19:"Cubic.easeIn",20:"Cubic.easeInOut",21:"Cubic.easeOut",22:"Quart.easeIn",23:"Quart.easeInOut",24:"Quart.easeOut",25:"Quint.easeIn",26:"Quint.easeInOut",27:"Quint.easeOut",28:"Strong.easeIn",29:"Strong.easeInOut",30:"Strong.easeOut",31:"Back.easeIn",32:"Back.easeInOut",33:"Back.easeOut",34:"Bounce.easeIn",35:"Bounce.easeInOut",36:"Bounce.easeOut",37:"Circ.easeIn",38:"Circ.easeInOut",39:"Circ.easeOut",40:"Elastic.easeIn",41:"Elastic.easeInOut",42:"Elastic.easeOut",43:"Expo.easeIn",44:"Expo.easeInOut",45:"Expo.easeOut",46:"Sine.easeIn",47:"Sine.easeInOut",48:"Sine.easeOut",49:"SlowMo.ease"},getTypeName:function(e){switch(e){case 100:return"出现动画";case 101:return"飞入";case 102:return"放大";case 103:return"渐现";case 200:return"消失动画";case 201:return"飞出";case 202:return"缩小";case 203:return"渐隐";case 300:return"运动路径";case 301:return"直线运动";case 302:return"曲线运动";case 400:return"强调动画";case 401:return"放大缩小";case 402:return"透明";case 403:return"旋转";case 500:return"媒体动画";case 501:return"播放";case 502:return"暂停";case 503:return"结束"}},setpathparam:function(e){var t=this,n;this.pathoriginalpoint={},this.obj=this.page.iOverlaylist.get(this.options.animation.overlay_id).iview.$el[0];var r=this.options.animation.iDetail.autoRotate||!1;if(r)var i=this.page.iOverlaylist.get(this.options.animation.overlay_id).iview.$el.find(".Element").first()[0];var s=this.options.animation.iDetail.closed;if(e==302){if(this.options.animation.iDetail.path.length<2)return this.param=null,!1;n=[],_.each(this.options.animation.iDetail.path,function(e,t,r){if(t!=0&&e.handleIn){var i={};i.x=e.handleIn.x+e.point.x,i.y=e.handleIn.y+e.point.y,n.push(i)}n.push({x:e.point.x,y:e.point.y});if(e.handleOut){var o={};o.x=e.handleOut.x+e.point.x,o.y=e.handleOut.y+e.point.y,n.push(o)}if(t==r.length-1&&s&&e.handleOut&&r[0].handleIn){var u=r[0].handleIn,a=r[0].point,i={};i.x=u.x+a.x,i.y=u.y+a.y,n.push(i),n.push(a)}}),this.param.bezier={values:n,type:"cubic",autoRotate:r}}if(e==301){if(this.options.animation.iDetail.path.length<2)return this.param=null,!1;n=[];var o;for(o=0;o<this.options.animation.iDetail.path.length;o++){if(o!=0){var u=this.options.animation.iDetail.path[o-1],a=this.options.animation.iDetail.path[o],f={x:(u.point.x+a.point.x)/2,y:(u.point.y+a.point.y)/2};n.push(f)}n.push({x:this.options.animation.iDetail.path[o].point.x,y:this.options.animation.iDetail.path[o].point.y});if(o==this.options.animation.iDetail.path.length-1&&s){var u=this.options.animation.iDetail.path[o],a=this.options.animation.iDetail.path[0],f={x:(u.point.x+a.point.x)/2,y:(u.point.y+a.point.y)/2};n.push(f),n.push({x:this.options.animation.iDetail.path[0].point.x,y:this.options.animation.iDetail.path[0].point.y})}}this.param.bezier={values:n,type:"quadratic",autoRotate:r}}},setappearparam:function(e){this.startshow=!0,this.fromparam={},this.fromparam.onStart=this.onStart,this.fromparam.immediateRender=!1,this.toparam={},this.toparam.onComplete=this.param.onComplete,this.toparam.delay=this.param.delay,this.toparam.repeat=this.param.repeat,this.toparam.ease=this.param.ease;var t,n,r;if(e==101){this.stopshow=!0,t=this.options.animation.iDetail.direction||0;var i=this.page.iOverlaylist.get(this.options.animation.overlay_id).iview.x,s=this.page.iOverlaylist.get(this.options.animation.overlay_id).iview.y,o=this.page.iOverlaylist.get(this.options.animation.overlay_id).iview.$el.find(".Element").first().width(),u=this.page.iOverlaylist.get(this.options.animation.overlay_id).iview.$el.find(".Element").first().height();n={};switch(t){case 0:n.y="-"+u,n.x=i;break;case 1:n.x=interaction_view.size.x+o,n.y=s;break;case 2:n.y=interaction_view.size.y+u,n.x=i;break;case 3:n.x="-"+o,n.y=s}this.param.css=n,this.fromparam.css={x:Number(n.x),y:Number(n.y)},this.toparam.css={x:Number(i),y:Number(s)},this.obj=this.page.iOverlaylist.get(this.options.animation.overlay_id).iview.$el[0]}if(e==102){t=this.options.animation.iDetail.direction||0,r={},n={};var a=this.page.iOverlaylist.get(this.options.animation.overlay_id);r.scale=0,this.param.css=r,this.fromparam.css={scale:0},this.toparam.css={scale:1},this.obj=this.page.iOverlaylist.get(this.options.animation.overlay_id).iview.$el.find(".Element").first()[0]}e==103&&(t=this.options.animation.iDetail.direction||0,r={},this.param.css={opacity:0},this.fromparam.css={opacity:0},this.toparam.css={opacity:1},this.obj=this.page.iOverlaylist.get(this.options.animation.overlay_id).iview.$el[0])},setdisappearparam:function(e){var t={};if(e==201){var n=this.options.animation.iDetail.direction||0;this.obj=this.page.iOverlaylist.get(this.options.animation.overlay_id).iview.$el[0];var r=this.page.iOverlaylist.get(this.options.animation.overlay_id).iview.$el.find(".Element").first().width()*2,i=this.page.iOverlaylist.get(this.options.animation.overlay_id).iview.$el.find(".Element").first().height()*2;switch(n){case 0:t.y="-"+i;break;case 1:t.x=interaction_view.size.x+r;break;case 2:t.y=interaction_view.size.y+i;break;case 3:t.x="-"+r}this.param.css=t}if(e==202){var s=this.page.iOverlaylist.get(this.options.animation.overlay_id);t.scale=0,this.param.css=t,this.obj=this.page.iOverlaylist.get(this.options.animation.overlay_id).iview.$el.find(".Element").first()[0]}e==203&&(this.param.css={opacity:0},this.obj=this.page.iOverlaylist.get(this.options.animation.overlay_id).iview.$el[0]),this.stophide=!0},setstrongparam:function(e){this.obj=this.page.iOverlaylist.get(this.options.animation.overlay_id).iview.$el.find(".Element").first()[0];if(e==401){var t=this.page.iOverlaylist.get(this.options.animation.overlay_id),n={};n.scale=_.isNumber(this.options.animation.iDetail.scale)?Number(this.options.animation.iDetail.scale):1,this.param.css=n}if(e==402){var r=this.options.animation.iDetail.opacity||0;this.obj=this.page.iOverlaylist.get(this.options.animation.overlay_id).iview.$el[0],this.param.css={opacity:r}}if(e==403){var i=_.isNumber(this.options.animation.iDetail.rotation)?Number(this.options.animation.iDetail.rotation):0,s=this.options.animation.iDetail.axial||0,o="_cw",u="+";i<0&&(o="_ccw"),i<0&&(u="-");var n={};s==0&&(n.rotation=u+"="+Math.abs(i)+o),s==1&&(n.rotationX=u+"="+Math.abs(i)+o),s==2&&(n.rotationY=u+"="+Math.abs(i)+o),this.param.css=n}},setgroupparam:function(){var e=this;this.param={},this.param.data=this.options.animation,this.param.onStartParams=["{self}"],this.param.onStart=this.onStart,this.param.onComplete=this.stop,this.param.onCompleteParams=["{self}"];var t=this.options.animation.iTiming.repeat||0;t==-1?this.param.repeat=-1:t&&t!=-2?this.param.repeat=t-1:t==-2&&(this.param.repeat=-1)},setparam:function(){var e=this;this.param={},this.param.data=this.options.animation;var t=this.page.iOverlaylist.get(this.options.animation.overlay_id);this.overlaymodel=t,this.param.onStartParams=["{self}"],this.param.onStart=this.onStart,this.param.onComplete=this.stop,this.param.onCompleteParams=["{self}"],this.param.ease=this.EaseTypes[this.options.animation.iTiming.ease||0];var n=this.options.animation.iTiming.repeat||0;n==-1?this.param.repeat=-1:n&&n!=-2?this.param.repeat=n-1:n==-2&&(this.param.repeat=-1);switch(this.options.animation.iType){case 100:return"出现动画";case 101:this.setappearparam(101);break;case 102:this.setappearparam(102);break;case 103:this.setappearparam(103);break;case 200:return"消失动画";case 201:this.setdisappearparam(201);break;case 202:this.setdisappearparam(202);break;case 203:this.setdisappearparam(203);break;case 300:return"运动路径";case 301:this.setpathparam(301);break;case 302:this.setpathparam(302);break;case 400:return"强调动画";case 401:this.setstrongparam(401);break;case 402:this.setstrongparam(402);break;case 403:this.setstrongparam(403);break;case 500:return"媒体动画";case 501:this.setmedia(501);break;case 502:this.setmedia(502);break;case 503:this.setmedia(503)}},setmedia:function(e){this.overlaymodel.get("iType")=="Audio"&&(this.isAudio=!0,e==501)},pathstop:function(e){var t=this.options.animation.iTiming.rewind||!1;t&&this.options.animation.iTiming.repeat!=-1&&this.options.animation.iTiming.repeat!=-2&&this.options.animation.iDetail.path&&this.options.animation.iDetail.path[0]&&e.pause(0)},animationstop:function(e){var t=this.options.animation.iTiming.rewind||!1;t&&e&&e.pause(0)},stop:function(e){console.log("动画结束stop"),this.stopshow&&this.showelement(),this.stophide&&this.hideelement(),this.animationstop(e),interaction_view.events.onAnimationEnd({overlay_id:this.options.animation.overlay_id,animation_id:this.options.animation.id,page_id:this.page.id,layer_id:this.options.collection.layerid})},forcestop:function(e){var t=this.options.animation.iTiming.rewind||!1;t?e.pause(0):e.pause(this.options.animation.iTiming.duration),this.options.collection.onComplete(this.options.animation.id)},addclickcontrol:function(){this.options.collection.addclickstop(this.options.animation.id)},onStart:function(e){console.log("动画开始start"),this.startshow&&this.showelement(),interaction_view.events.onAnimationStart({overlay_id:this.options.animation.overlay_id,animation_id:this.options.animation.id,page_id:this.page.id,layer_id:this.options.collection.layerid})},showelement:function(){var e=this.page.iOverlaylist.get(this.options.animation.overlay_id);e.iview.onBeforeShow&&e.iview.onBeforeShow(),e.iview.$el.removeClass("hide"),e.iview.onShow&&e.iview.onShow()},hideelement:function(){var e=this.page.iOverlaylist.get(this.options.animation.overlay_id);e.iview.onBeforeHide&&e.iview.onBeforeHide(),e.iview.$el.addClass("hide"),e.iview.onHide&&e.iview.onHide()}}}),define("interaction_view/model/action",["interaction_view/model/base","interaction_view/ui/animation"],function(){interaction_view.model.Action=interaction_view.model.Base.extend({defaults:{page_id:null,ref_id:null,index:null,layer_id:null,overlay_id:null},setcollection:function(){},setview:function(e){this.pageid=this.get("pageid"),this.parentpageid=this.get("parentpageid"),this.iPage_id=this.pageid;if(this.get("pagetype")=="LayerRef"){var t=this.get("parentpageid"),n=this.get("layerid"),r=interaction_view.ipagelist.getPage(t)||interaction_view.imasterlist.get(t);this.parentpage=r,this.page=r.iOverlaylist.get(this.pageid).layer[n],this.iPage_id=t}else this.get("path")?(this.path=this.get("path"),this.page=interaction_view.getContainerModelByPath(this.path)):this.page=interaction_view.ipagelist.getPage(this.pageid)||interaction_view.imasterlist.get(this.pageid);this.actionpatch(),this.iview=new interaction_view.view.Action({model:this})},setsyncmodel:function(){},actionpatch:function(){var e=this,t=this.get("iDetail");this.get("pagetype")=="LayerRef"&&(this.get("layer_id")||this.set("layer_id",this.get("layerid"))),t.results[0].iAction!=5&&t.results[0].iAction<7&&(t.results[0].iAction==6&&typeof t.results[0].values=="string"&&(t.results[0].values=[{id:t.results[0].values,page_id:e.pageid}]),t.results[0].values=_.map(t.results[0].values,function(t){return typeof t!="object"?{id:t,page_id:e.pageid}:t})),this.set("iDetail",t)}}),interaction_view.collection.Action=interaction_view.collection.Base.extend({initialize:function(){this.setonadd(),this.setonremove()},model:interaction_view.model.Action,setonadd:function(){this.on("add",function(e){})},onSingleComplete:function(){},onUpdate:function(){},onTotalComplete:function(){},resetStatus:function(){this.each(function(e){e.iview.resetStatus()})}}),interaction_view.view.Action=interaction_view.view.Base.extend({initstart:function(){},renderanimations:function(){this.timeline&&this.timeline.clear();var e=this,t=this.model.toJSON(),n=this.values;n&&n.length&&(e.timeline=interaction_view.generateTimeline({onStart:null,ids:n,iPage_id:this.model.iPage_id,page:this.model.page,paused:!0,foraction:!0}),e.timeline&&e.timeline.play(0))},onComplete:function(){},events:{},renderDynamicElement:function(){},getClassification:function(){if(!this.ref_id){if(_.isNumber(this.index)&&this.overlaymodel)return 4;if(this.animation_id)return 5;if(!_.isNumber(this.index)&&this.overlaymodel)return 1;if(!this.overlaymodel){if(this.overlay_id==this.model.page.id)return 2;if(interaction_view.ilayerlist.get(this.overlay_id))return 3}}if(this.ref_id&&this.model.get("pagetype")=="LayerRef"&&this.model.pageid==this.ref_id&&this.model.parentpageid==this.page_id){if(_.isNumber(this.index)&&this.overlaymodel)return 4;if(this.animation_id)return 5;if(!_.isNumber(this.index)&&this.overlaymodel)return 1;if(!this.overlaymodel){if(this.overlay_id==this.model.page.id)return 2;if(interaction_view.ilayerlist.get(this.overlay_id))return 3}}return 0},render:function(){this.iType=this.model.toJSON().iType,this.overlay_id=this.model.toJSON().overlay_id,this.page_id=this.model.toJSON().page_id,this.ref_id=this.model.toJSON().ref_id,this.index=this.model.toJSON().index,this.animation_id=this.model.toJSON().animation_id,this.layer_id=this.model.toJSON().layer_id;var e=this.model.toJSON().iDetail;if(!e||!e.results)return;var t=this;this.actiontype=e.results[0].iAction,this.values=e.results[0].values,this.overlaymodel=this.model.page.iOverlaylist.get(this.overlay_id);var n=this.getClassification();if(!n)return;switch(n){case 1:this.renderforoverlay();break;case 2:this.renderforpage();break;case 3:this.renderforlayer();break;case 4:this.renderforslideindex();break;case 5:this.renderforanimationaction()}},renderforoverlay:function(){switch(this.iType){case 8:case 9:case 10:case 11:case 12:_.include([11,12],this.iType)?this.renderfordragdrop("dragdropgroup"):this.renderfordragdrop("dragdrop");break;case 18:case 19:case 16:case 17:this.renderfortimer();break;case 22:this.renderforvariable();break;default:var e=this,t="tap",n=this.overlaymodel.iview.$el;if(this.iType==20)t="mouseenter";else if(this.iType==21)t="mouseleave";else if(this.iType==14||this.iType==15)t="hold";this.overlaymodel.iview.$el.css("cursor","pointer"),this.overlaymodel.iview.$el.addClass("hasaction"),_.include(["Slide","LayerSlide","CycleImage"],this.overlaymodel.get("iType"))&&(n=n.children(".Element")),_.include(["Button"],this.overlaymodel.get("iType"))&&console.log("button"),this.iType==1&&(n=this.overlaymodel.iview.$el.find("img.iconNormal")),this.iType==2&&(n=this.overlaymodel.iview.$el.find("img.iconActive"));if(!n)return;n.hammer().on(t,function(t){if(_.include(["Slide","LayerSlide","CycleImage","Button"],e.overlaymodel.get("iType"))&&e.overlaymodel.iview.slipable&&!$(t.target).is(t.currentTarget))return!1;if(e.iType==15){var n=!1;$(document).one("mouseup touchend touchcancel",function(){!n&&e.executeAction(e)&&(n=!0)})}else e.executeAction(e)})}},renderfordragdrop:function(e){var t=this,n={type:e,page_id:this.page_id,overlay_id:this.overlay_id,drop_type:this.iType,path:this.path,layer_id:this.layer_id,func:function(){t.executeAction(t)}};_.include([8,9,10],this.iType)&&interaction_view.events.dragDropEvents.push(n),_.include([11,12],this.iType)&&interaction_view.events.dragDropGroupEvents.push(n)},renderfortimer:function(){var e=this,t={type:this.iType,condition:String(this.model.attributes.condition),page_id:this.page_id,overlay_id:this.overlay_id,layer_id:this.layer_id,func:function(){e.executeAction(e)}};interaction_view.events.timerEvents.push(t)},renderforvariable:function(){var e=this,t={type:this.iType,condition:String(this.model.attributes.condition),page_id:this.page_id,overlay_id:this.overlay_id,layer_id:this.layer_id,func:function(){e.executeAction(e)}};interaction_view.events.variableEvents.push(t)},renderforanimationaction:function(){var e=this,t=this.model.page.iAnimationlist.get(this.animation_id);if(t){var n={type:"animation",page_id:this.page_id,overlay_id:this.overlay_id,animation_id:this.animation_id,path:this.path,layer_id:this.layer_id,func:function(){e.executeAction(e)}};this.iType==6&&interaction_view.events.animationStartEvents.push(n),this.iType==7&&interaction_view.events.animationEndEvents.push(n)}},renderforlayer:function(){var e=this,t=this.model.get("layerid"),n=this.model.parentpage.iOverlaylist.get(this.model.get("pageid")).toJSON().iDetail.layer_ids.indexOf(t);if(n==-1)return!1;this.iType==0&&this.model.parentpage&&this.model.parentpage.iOverlaylist.get(this.model.get("pageid")).iview.$el.children(".Element").on("click",function(t){if(!$(t.target).is(t.currentTarget)&&$(t.currentTarget).find(".layer-content").first().children().length>1)return!1;e.model.parentpage.iOverlaylist.get(e.model.get("pageid")).iview.currentIndex==n&&e.testControlforLayer(t)&&e.executeAction(e)}),this.iType==3&&interaction_view.events.pageStartEvents.push({type:"page",page_id:e.model.pageid,layer_id:this.model.get("layerid"),func:function(){e.executeAction(e)}}),this.iType==4&&this.model.parentpage&&(this.model.parentpage.iOverlaylist.get(this.model.get("pageid")).iview.$el.addClass("hasDblClick"),this.model.parentpage.iOverlaylist.get(this.model.get("pageid")).iview.$el.children(".Element").on("dblclick",function(t){if($(t.target).closest(".layer-item").index()!=e.model.parentpage.iOverlaylist.get(e.model.get("pageid")).iview.currentIndex)return;e.model.parentpage.iOverlaylist.get(e.model.get("pageid")).iview.currentIndex==n&&e.testControlforLayer(t)&&e.executeAction(e)}),interaction_view.touchview&&this.model.parentpage.iOverlaylist.get(this.model.get("pageid")).iview.$el.children(".Element").hammer().on("doubletap",function(t){if($(t.target).closest(".layer-item").index()!=e.model.parentpage.iOverlaylist.get(e.model.get("pageid")).iview.currentIndex)return;e.model.parentpage.iOverlaylist.get(e.model.get("pageid")).iview.currentIndex==n&&e.testControlforLayer(t)&&e.executeAction(e)}))},renderforpage:function(){var e=this;this.iType==0&&interaction_view.events.pageClickEvents.push({type:interaction_view.imasterlist.length&&e.model.page.id==interaction_view.imasterlist.at(0).id?"master":"page",page_id:e.model.page.id,func:function(){e.executeAction(e)}}),this.iType==3&&interaction_view.events.pageStartEvents.push({type:"page",page_id:e.model.page.id,func:function(){e.executeAction(e)}}),this.iType==4&&interaction_view.events.pageDblClickEvents.push({type:interaction_view.imasterlist.length&&e.model.page.id==interaction_view.imasterlist.at(0).id?"master":"page",page_id:e.model.page.id,func:function(){e.executeAction(e)}}),this.iType==51&&interaction_view.events.pageWXShareSuccessEvents.push({type:interaction_view.imasterlist.length&&e.model.page.id==interaction_view.imasterlist.at(0).id?"master":"page",page_id:e.model.page.id,func:function(){e.executeAction(e)}})},renderforslideindex:function(){this.overlaymodel.get("iType")!="CycleImage"&&this.overlaymodel.get("iType")!="Slide";if(!(this.overlaymodel.iview.slideel&&this.overlaymodel.iview.slidelength>0&&this.overlaymodel.iview.slidelength>this.index))return!1;var e=this;this.iType==0&&(this.overlaymodel.iview.slideel.find('[data-index="'+this.index+'"]').addClass("hasaction"),this.overlaymodel.iview.useIndex&&this.overlaymodel.iview.$el.children(".Element").addClass("hasaction"),this.overlaymodel.iview.getdetail().iFade=="Flow"?this.overlaymodel.iview.slideel.find('[data-index="'+this.index+'"]').on("click",function(t){e.overlaymodel.iview.currentIndex==e.index&&!e.overlaymodel.iview.CoverFlow.data("CoverFlowDisableClick")&&e.executeAction(e)}):this.overlaymodel.iview.$el.children(".Element").on("click",function(t){if(e.overlaymodel.iview.slipable&&!$(t.target).is(t.currentTarget))return!1;e.overlaymodel.iview.currentIndex==e.index&&e.executeAction(e)})),this.iType==5&&interaction_view.events.elementChangeToEvents.push({type:"slide",page_id:e.model.pageid,overlay_id:this.overlaymodel.id,index:this.index,func:function(){e.executeAction(e)}}),this.iType==4&&(this.overlaymodel.iview.$el.addClass("hasDblClick"),this.overlaymodel.iview.useIndex?(this.overlaymodel.iview.$el.children(".Element").on("dblclick",function(t){e.overlaymodel.iview.currentIndex==e.index&&e.executeAction(e)}),interaction_view.ismobile&&this.overlaymodel.iview.$el.children(".Element").hammer().on("doubletap",function(t){e.overlaymodel.iview.currentIndex==e.index&&e.executeAction(e)})):(this.overlaymodel.iview.slideel.find('[data-index="'+this.index+'"]').on("dblclick",function(t){e.executeAction(e)}),interaction_view.ismobile&&this.overlaymodel.iview.slideel.find('[data-index="'+this.index+'"]').hammer().on("doubletap",function(t){e.executeAction(e)})))},executeAction:function(e){if(typeof Reveal!="undefined"&&Reveal&&Reveal.isOverview()&&e.iType!=3)return!1;e.actiontype==0&&e.renderanimations(),e.actiontype==1&&e.rendershow(),e.actiontype==2&&e.renderhide(),e.actiontype==6&&e.setElementTo(),e.actiontype==5&&(interaction_view.foredit?global.message("warning","请使用playAll模式预览该功能"):e.renderpage()),e.actiontype==7&&(interaction_view.foredit?global.message("warning","请使用playAll模式预览该功能"):e.renderoverview()),e.actiontype==8&&(interaction_view.foredit?global.message("warning","请使用playAll模式预览该功能"):e.rendershare()),e.actiontype==10&&(interaction_view.foredit?global.message("warning","请使用playAll模式预览该功能"):e.renderurl()),e.actiontype==16&&(interaction_view.foredit?global.message("warning","请使用playAll模式预览该功能"):e.rendertel());if(e.actiontype==15&&_g.device.android()&&window.collecting&&window.collecting.startFunction){var t=interaction_view.currentPage,n=interaction_view.ipagelist.getPage(t);if(!n)return;var r=n.toJSON().nav&&n.toJSON().nav.thumbnail?n.toJSON().nav.thumbnail:null,i=interaction_view.doc.toJSON().title;window.collecting.startFunction(i,r,t)}this.overlaymodel&&this.overlaymodel.toJSON().iType=="Button"&&this.overlaymodel.get("isTabBarButton")&&this.syncTabButtons(),_.include([17,18,19],e.actiontype)&&e.rendertimer(e.actiontype),_.include([20,21],e.actiontype)&&e.rendervariable(e.actiontype),_.include([52,53],e.actiontype)&&e.rendermedia(e.actiontype),_.include([51],e.actiontype)&&e.renderWXShare(e.actiontype)},rendershare:function(){interaction_view.ismobile||share(interaction_view.doc.toJSON().title,context_url+"/player")},renderoverview:function(){Reveal.toggleOverview(!0)},renderclick:function(){},rendershow:function(){var e=this,t=this.values;t&&_.each(t,function(t){var n=t.page_id,r=interaction_view.getAnimationPage(n,e.model.page),i=r.iOverlaylist.get(t.id);i&&i.iview&&i.iview.$el&&(i.iview.onBeforeShow&&i.iview.onBeforeShow(),i.iview.$el.removeClass("hide"),i.iview.onShow&&i.iview.onShow())})},renderhide:function(){var e=this,t=this.values;t&&_.each(t,function(t){var n=t.page_id,r=interaction_view.getAnimationPage(n,e.model.page),i=r.iOverlaylist.get(t.id);i&&i.iview&&i.iview.$el&&(i.iview.onBeforeHide&&i.iview.onBeforeHide(),i.iview.$el.addClass("hide"),i.iview.onHide&&i.iview.onHide())})},renderpage:function(){var e=this.model.toJSON().iDetail,t=this.values,n=e.results[0].iActionDetail?e.results[0].iActionDetail.transition:0,r=null,i=null,n=e.results[0].iActionDetail?e.results[0].iActionDetail.transition?e.results[0].iActionDetail.transition:0:0,s=interaction_view.getVarsOp(interaction_view.currentPage,[0,2]);if(s.beginWithAT(t)){var o=interaction_view.ipagelist.length;t=Math.round(s.var2val(t)),t<0&&(t=0),t>o-1&&(t=o-1),t=interaction_view.ipagelist.at(t).id}if(n==0||n)if(!_.include(["first","last","prev","next"],t)){var u=interaction_view.ipagelist.getPage(t);u&&(n<4?interaction_view.ipagelist.getPage(t).iview.$el.attr("data-transition","linear"):n<8?interaction_view.ipagelist.getPage(t).iview.$el.attr("data-transition","page"):n==8?interaction_view.ipagelist.getPage(t).iview.$el.attr("data-transition","fade"):interaction_view.ipagelist.getPage(t).iview.$el.removeAttr("data-transition"))}var a=interaction_view.ipagelist.length;switch(t){case"first":t=Reveal.getFirst();break;case"last":t=Reveal.getLast();break;case"prev":t=Reveal.getLeft();break;case"next":t=Reveal.getRight();break;default:}t&&presentation.gotopage(t,n)},renderurl:function(){if(this.values.length==0||_.isEmpty(this.values[0].url))return;var e=this.values[0].url;e.indexOf("://")==-1&&(e="http://"+e),e+=e.indexOf("?")>=0&&"&"+window.location.search.replace("?","")||window.location.search,window.open(e,"_blank")},rendertel:function(){if(!interaction_view.ismobile)return;if(this.values.length==0||_.isEmpty(this.values[0].url))return;var e=this.values[0].url;window.location="tel:"+e},rendertimer:function(e){var t=this,n=this.values;n&&_.each(n,function(n){var r=n.page_id,i=interaction_view.getAnimationPage(r,t.model.page),s=i.iOverlaylist.get(n.id);if(s&&s.iview)switch(e){case 17:s.iview.startTimer();break;case 18:s.iview.stopTimerSimple();break;case 19:s.iview.resetTimer()}})},rendervariable:function(e){var t=this,n=this.values;n&&_.each(n,function(n){var r=n.page_id,i=interaction_view.getAnimationPage(r,t.model.page),s=i.iOverlaylist.get(n.id);if(s&&s.iview)switch(e){case 20:s.iview.setVariable(n.oper,n.value);break;case 21:interaction_view.events.onVariableChanged(s.iview)}})},rendermedia:function(e){var t=this,n=this.values;n&&_.each(n,function(n){var r=n.page_id,i=interaction_view.getAnimationPage(r,t.model.page),s=i.iOverlaylist.get(n.id);if(s&&s.iview)switch(e){case 52:interaction_view.media.play(s);break;case 53:interaction_view.media.pause(s)}})},renderWXShare:function(e){var t=this,n=this.values;if(n){var r=n.page_id,i=n.value;console.log("set sharing: "+i);if(_g.device.mobile()||_g.device.tablet()){var s=interaction_view.getVarsOp(r);i=s.var2val(i,!0)}shareTitle=i}},setElementTo:function(){if(!this.values||this.values.length==0)return;var e=this,t=this.model.toJSON().iDetail,n=this.values[0].id,r=this.values[0].page_id,i=interaction_view.getAnimationPage(r,e.model.page),s=t.results[0].iActionDetail?t.results[0].iActionDetail.index:null,o=interaction_view.getVarsOp(interaction_view.currentPage,[0,2]);o.beginWithAT(s)&&(s=o.var2val(s));if(n){var u=i.iOverlaylist.get(n);u&&u.iview&&u.iview.setElementTo(s)}if(this.overlaymodel&&this.overlaymodel.toJSON().iType=="Button"){var a=this.syncbuttons(i,this.model.toJSON().overlay_id,this.values[0]);a>0&&(this.overlaymodel.iview.groupcontrol=!0)}},syncbuttons:function(e,t,n){var r=this,i=0,s=_.filter(this.model.page.iActionlist.toJSON(),function(e){return r.model.page.iOverlaylist.get(e.overlay_id)&&r.model.page.iOverlaylist.get(e.overlay_id).get("iType")=="Button"&&e.iDetail.results[0].iAction==6});return _.each(s,function(e){if(e.overlay_id!=t){var s=r.model.page.iOverlaylist.get(e.overlay_id);s&&s.toJSON().iDetail.isSwitch&&e.iDetail.results&&e.iDetail.results[0].values[0].id==n.id&&e.iDetail.results[0].values[0].page_id==n.page_id&&(i+=1,s.iview.resetButtonStatus())}}),i},syncTabButtons:function(){var e=this,t=this.overlaymodel.get("path"),n=interaction_view.getContainerModelByPath(t);n.iOverlaylist.each(function(t){t.id!=e.overlaymodel.id&&t.iview.resetButtonStatus()})},resetStatus:function(){this.overlaymodel.iview.$el.off("click")},testControlforLayer:function(e){var t=$(e.target).closest(".iView");if($(e.target).closest(".iView").hasClass("hasaction"))return!1;if(t){var n=t.attr("data-type");if(n=="Slide"||n=="CycleImage")if(t.attr("data-iSlipable"))return!1}return!0}}),interaction_view.iActionlist=new interaction_view.collection.Action}),define("interaction_view/model/animation_view",["interaction_view/model/base","interaction_view/ui/animation"],function(){interaction_view.model.Animation=interaction_view.model.Base.extend({defaults:{},setcollection:function(){},setview:function(e){this.iview=new interaction_view.view.Animation({model:this})},setsyncmodel:function(){}}),interaction_view.collection.Animation=interaction_view.collection.Base.extend({initialize:function(){this.setonadd(),this.setonremove()},model:interaction_view.model.Animation,setonadd:function(){this.on("add",function(e){})},setParams:function(e){this.repeatTweens=[];if(this.where({iKind:0}).length==0)return;var t=this;this.iPage_id=this.pageid;if(this.pagetype=="LayerRef"){var n=this.layerid,r=interaction_view.ipagelist.getPage(this.parentpageid)||interaction_view.imasterlist.get(this.parentpageid);this.page=r.iOverlaylist.get(this.pageid).layer[n],this.iPage_id=this.parentpageid}else this.page=interaction_view.ipagelist.getPage(this.pageid)||interaction_view.imasterlist.get(this.pageid);this.each(function(e){e.tween=null;var n=e.toJSON();if(n.iKind==0&&!t.page.iOverlaylist.get(n.overlay_id))return;e._animation=new animation({collection:t,animation:e.toJSON()})})},setPlay:function(e){if(this.length==0)return;var t=this,n=function(){};this.timeline=interaction_view.generateTimeline({onStart:n,animations:this.models,iPage_id:this.iPage_id,page:this.page,paused:!0})},play:function(){if(this.length==0)return;this.setPlay(),this.timeline.play(0)},playMain:function(){if(this.length==0)return;this.setParams(),this.setPlay(),this.timeline.play(0),this.afterTimeLineCreated&&this.afterTimeLineCreated()},AddClickTween:function(e,t){if(interaction_view.SinglePreview)return;e.pause(),$('section[id="'+t+'"]').children(".interaction-view").css("cursor","pointer"),interaction_view.events.pageClickEvents.push({type:"waitaction",page_id:t,func:function(){$('section[id="'+t+'"]').children(".interaction-view").css("cursor","auto"),e.resume()}})},AddRepeatClickTween:function(e,t,n,r){if(interaction_view.SinglePreview)return;$('section[id="'+t+'"]').children(".interaction-view").css("cursor","pointer"),interaction_view.events.pageClickEvents.push({type:"waitaction",page_id:t,func:function(){$('section[id="'+t+'"]').children(".interaction-view").css("cursor","auto"),n.pause(),r._animation.stop(n)}})},AddRepeatTween:function(e){var t=e._animation.obj,n=$.extend(!0,{},e._animation.param),r=e.toJSON().iTiming.duration||0,i=e.toJSON().iTiming.repeat||0;_.include([101,102,103],e.get("iType"))?e.tween=TweenMax.fromTo(t,r,e._animation.fromparam,e._animation.toparam):e.tween=TweenMax.to(t,r,n),i==-2&&$(".interaction-view").one("click",function(){e._animation.forcestop(e.tween)}),e.collection.repeatTweens.push(e.tween)},AddMediaTween:function(e){var t=e.collection.page;if(interaction_view.SinglePreview){var n=t.iAnimationlist.timeline.getLabelTime(interaction_view.PreviewItemId+"_start"),r=t.iAnimationlist.timeline.getLabelTime(e.id+"_start");if(n>r)return}var i=t.iOverlaylist.get(e.get("overlay_id")),s=e.get("iType");i.onAnimationStart={overlay_id:e.get("overlay_id"),animation_id:e.id,page_id:t.id,layer_id:e.collection.layerid},interaction_view.events.onAnimationStart(i.onAnimationStart),s==501&&(i.get("iType")=="Audio"||i.get("iType")=="Video"?interaction_view.media.play(i):i.iview.playTimeline()),s==502&&(i.get("iType")=="Audio"||i.get("iType")=="Video"?i.loaded&&(interaction_view.media.pause(i),i.iview.slider&&i.iview.sliderstop()):i.iview.pauseTimeline()),s==503&&(i.get("iType")=="Audio"||i.get("iType")=="Video"?i.loaded&&i.media&&(i.iview.resetOtherStatus(),i.iview.slider&&(i.iview.sliderstop(),i.iview.onSliderChange(0))):i.iview.stopTimeline()),(s==502||s==503)&&i.onAnimationStart&&(interaction_view.events.onAnimationEnd(i.onAnimationStart),i.onAnimationStart=null),t.iAnimationlist.onComplete(e.id)},getMediaTime:function(e){var t=0,n=e.collection.page.iOverlaylist.get(e.toJSON().overlay_id);if(n.media){if(n.get("iType")=="Audio"||n.get("iType")=="Video")t=n.hls?n.media.getDuration():n.media.duration}else _.include(["CycleImage","Slide","LayerSlide"],n.get("iType"))&&(t=n.iview.getSlideDuration());return t},onSingleComplete:function(){},onUpdate:function(){},onTotalComplete:function(){},onComplete:function(e){},resetAnimationStatus:function(){_.each(this.repeatTweens,function(e){e.kill()}),this.repeatTweens=[],this.timeline&&this.timeline.pause(0)}}),interaction_view.view.Animation=interaction_view.view.Base.extend({events:{},renderDynamicElement:function(){},render:function(e){}}),interaction_view.iAnimationlist=new interaction_view.collection.Animation}),define("text!interaction_view/template/audiocontrol.js",[],function(){return'<div class="audiobar disableDragX disableDragY" style="height: 31px;width: 100%;position: absolute;">\n  <span class="audio-control status-play"></span>\n  <% if((iCommon[iPageDirection].iWidth-45)>0){%>\n  <span class="ui-slider-green ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all" aria-disabled="false" style="width:<%=(iCommon[iPageDirection].iWidth-45)>0?(iCommon[iPageDirection].iWidth-45):0%>px;left: 45px;">\n    <div class="ui-slider-range ui-widget-header ui-corner-all ui-slider-range-min g-slider-range" style="width: 0%;background-color: #444444;">\n    </div>\n    <a class="ui-slider-handle ui-state-default ui-corner-all g-slider-handle" href="#" style="left: 0%;">\n    </a>\n  </span>\n  <% } %>\n</div>'}),function(){var e={addEvent:function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,!!r):$(e).on(t,n)},removeEvent:function(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,!!r):$(e).off(t,n)},document:{disable_contextmenu:function(e){e||(e=document),e.oncontextmenu=function(e){return e&&e.preventDefault(),!1}},enable_contextmenu:function(e){e||(e=document),e.oncontextmenu=function(e){}},onCopy:function(e,t){$(document).on("copy",function(e){console.log(e)})},disable_paste:function(){document.disable_paste=!0},enable_paste:function(){document.disable_paste=!1}}};typeof require=="undefined"?(window._g||(window._g={}),window._g.event=e):define("_g/event",["_g/base"],function(){return window._g.event=e,window._g.event})}(window),function(){var e=function(e){this.init(e)};e.prototype={percent:0,init:function(e){var t={containment:".g-slider",handle:".g-slider-handle",range:".g-slider-range"};return this.options=e?$.extend(!0,{},t,e):t,_.bindAll(this),this.handle=$(this.options.containment).find(this.options.handle).first(),this.range=$(this.options.containment).find(this.options.range).first(),this._bindControl(),this},_bindControl:function(){var e=this;this.handle.hammer().on("dragstart",function(t){e.dragstart=!0,e.startleft=parseInt(e.handle.css("left"),10)}),this.handle.hammer().on("drag",function(t){return console.log("dragleft"),e.dragstart=!0,e._doDragingEvent(t),t.gesture.preventDefault(),!1}),this.handle.hammer().on("dragend",function(t){if(!e.dragstart)return;return e.dragstart=!1,e._doDragEndEvent(t),t.gesture.preventDefault(),!1})},_doDragingEvent:function(e){console.log(e);var t=this.startleft,n=this.handle.parent().width(),r=$.zoom||1;t+=e.gesture.deltaX/r,t<0&&(t=0),t>n&&(t=n),this.percent=_g.number.decimal(t/n,2)*100,this.handle.css("left",this.percent+"%"),this.range.css("width",this.percent+"%")},_doDragEndEvent:function(e){this.options.onChange&&this.options.onChange(this.percent)},change:function(e){this.dragstart||(this.handle.css("left",e+"%"),this.range.css("width",e+"%"))}},typeof require=="undefined"?(window._g||(window._g={}),window._g.slider=e):define("_g/slider",["_g/base","_g/event","jquery.hammer"],function(){return window._g.slider=e,window._g.slider})}(window),define("interaction_view/model/audio",["interaction_view/model/base","text!interaction_view/template/audiocontrol.js","_g/slider"],function(){var e=require("text!interaction_view/template/audiocontrol.js");interaction_view.model.Audio=interaction_view.model.Base.extend({defaults:{iType:"Audio",iLock:!0,iVisibility:!0,iCommon:{portait:{iStartx:400,iStarty:200,iWidth:200,iHeight:200},landscape:{iStartx:400,iStarty:200,iWidth:200,iHeight:200}},iDetail:{iAdapt:!1,iFullview:!1,iImg:null,iAnimation:[]},iParent:"",iChild:"",iOptions:{createfocus:!0},iParentModel:null,iDraggable:!0,iResizable:!0,iTemplate:null,iParentdiv:".interaction-view",iAutoindex:!1,iSync:!1,iZindex:"-1",iUrl:null,iAutofocus:!1,iKeyscontrol:!0,callback:null,iBackground:"rgba(62,189,255,0.5)",iResourcesProperties:[{id:"iImg",type:"single"}],iAnimationProperties:[{id:"iAnimation",type:"object"}]},setcollection:function(){iOverlaylist.get(this.id)||iOverlaylist.add(this)},setview:function(e){this.iview=new interaction_view.view.Audio({model:this})},setsyncmodel:function(){}}),interaction_view.view.Audio=interaction_view.view.Base.extend({events:{},bindSliderControl:function(){var e=this;this.$el.find(".audio-control").css("cursor","pointer"),this.$el.find(".audio-control").on("click",function(){return $(this).hasClass("status-play")?e.model.media&&interaction_view.media.play(e.model):$(this).hasClass("status-pause")&&(e.model.media&&interaction_view.media.pause(e.model),e.sliderstop()),!1})},render:function(t){var n=this.getdetail();n.iControl&&this.file&&(this.$el.children(".Element").append(_.template(e,this.model.toJSON())),this.$el.removeClass("hide"))},preload:function(){var e=this.getdetail();this.model.played=!1,this.model.time=0;var t;e.iFile&&e.iFile[0]&&(typeof epub360!="undefined"&&epub360.settings&&epub360.settings.disable_stream_media?t=e.iFile[0].file:typeof cbt_data=="undefined"||interaction_view.forpreview?_g.getUrlParameterByName("-playmode")=="1"?t=(e.iFile[0].file||e.iFile[0].content)+"_audio.m3u8":_g.getUrlParameterByName("-playmode")=="2"?t=e.iFile[0].file||e.iFile[0].content+"?avthumb/mp3/ab/32k":interaction_view.ismobile?t=e.iFile[0].file||e.iFile[0].content+"?avthumb/mp3/ab/32k":t=(e.iFile[0].file||e.iFile[0].content)+"_audio.m3u8":t=e.iFile[0].file||e.iFile[0].content,this.sendToPreload({file:t}),this.file=t)},setOtherDisplay:function(){var e=this.getdetail(),t=this;e.iControl&&this.file&&(this.slider=new _g.slider({containment:this.$el,onChange:function(e){t.model.media&&interaction_view.media.seek(t.model,null,e)}}),this.bindSliderControl())},resetStatus:function(){this.resetOtherStatus()},resetOtherStatus:function(){this.model.media&&(this.model.hls?interaction_view.media.audio.resetH(this.model):interaction_view.media.audio.reset(this.model),this.slider&&(this.sliderstop(),this.onSliderChange(0)))},sliderplay:function(){this.$el.find(".audio-control").addClass("status-pause").removeClass("status-play")},sliderstop:function(){this.$el.find(".audio-control").removeClass("status-pause").addClass("status-play")},onSliderChange:function(e){console.log("time change "+e),this.slider.change(e)}})}),define("interaction_view/model/chapter",["interaction_view/model/base"],function(){interaction_view.model.Chapter=interaction_view.model.Base.extend({defaults:{},setcollection:function(){},setmodel:function(){this.setview()},setview:function(e){this.icollection=new interaction_view.collection.Chapter,this.iview=new interaction_view.view.Chapter({model:this})},setsyncmodel:function(){}}),interaction_view.collection.Chapter=interaction_view.collection.Base.extend({initialize:function(){},model:interaction_view.model.Chapter}),interaction_view.view.Chapter=interaction_view.view.Base.extend({initstart:function(){},events:{},renderDynamicElement:function(){},render:function(e){}}),interaction_view.iChapter=new interaction_view.model.Chapter({id:"chapter"})}),define("interaction_view/model/cycleimage",["interaction_view/model/base","interaction_view/ui/animation","_g/base"],function(){interaction_view.model.CycleImage=interaction_view.model.Base.extend({defaults:{iType:"CycleImage",iLock:!0,iVisibility:!0,iCommon:{portait:{iStartx:400,iStarty:200,iWidth:200,iHeight:200},landscape:{iStartx:400,iStarty:200,iWidth:200,iHeight:200}},iDetail:{},iParent:"",iChild:"",iOptions:{createfocus:!0},iParentModel:null,iDraggable:!0,iResizable:!0,iTemplate:null,iParentdiv:".interaction-view",iAutoindex:!1,iSync:!1,isSlide:!0,iZindex:"-1",iUrl:null,iAutofocus:!1,iKeyscontrol:!0,callback:null,iBackground:"rgba(62,189,255,0.5)",iResourcesProperties:[{id:"iImg",type:"single"}],iAnimationProperties:[{id:"iAnimation",type:"object"}]},setcollection:function(){iOverlaylist.get(this.id)||iOverlaylist.add(this)},setview:function(e){this.iview=new interaction_view.view.CycleImage({model:this})},setsyncmodel:function(){}}),interaction_view.view.CycleImage=interaction_view.view.Base.extend({events:{},render:function(e){var t=this,n=this.getdetail();this.currentSlideIndex=null,this.model.on("slideTo",function(e){if(t.currentSlideIndex!=null&&t.currentSlideIndex==e)return!1;t.preloaded&&(interaction_view.events.onChangeTo(t.model.get("pageid"),t.model.id,e),t.currentSlideIndex=e)})},preload:function(){var e=this;this.preloaded=!1;var t,n=this.getdetail();this.img_src=[],this.img_loaded=[],this.Imglist=_.pluck(n.iImg,_g.getUrlParameterByName("-playmode")=="1"?"thumbnail":"picture"),this.checkImglist=this.Imglist.length>10?_.first(this.Imglist,10):this.Imglist,this.remainImglist=this.Imglist.length>10?_.last(this.Imglist,this.Imglist.length-10):[],this.remainImglist.length&&!interaction_view.isPack?this.remainLoaded=!1:this.remainLoaded=!0;var r=[];n.iImg&&n.iImg.length&&(_.each(n.iImg,function(n,i){_g.getUrlParameterByName("-playmode")=="1"?t=n.thumbnail:t=n.picture;if(!interaction_view.isPack&&i<=10){var s=e.sendToPreload({file:t});r.push(s.id)}e.img_src.push(t),e.img_loaded.push(!1)}),e.useIndex=!0),this.model.set("preload_id",r),this.preload_id=r},checkImgload:function(e){return this.checkImglist=_.reject(this.checkImglist,function(t){return t==e}),this.checkImglist.length==0?!0:!1},afterpreload:function(e){if(e&&this.preloaded)return;e&&(this.preloaded=this.checkImgload(e));if(interaction_view.isPack||this.preloaded)this.slideel=this.$el.children(".Element").find(".slidecontent").first(),this.setZindex(),this.setElementDisplay(),this.renderCanvas(),this.playAnimation(),this.copyelstyle=this.$el.attr("style"),this.copyelementstyle=this.$el.children(".iElement").attr("style"),this.preloaded=!0,this.remainLoaded||(this.remainLoaded=!0,this.loadRemainImg())},loadRemainImg:function(){_.each(this.remainImglist,function(e){interaction_view.preloadImg(e)})},playAnimation:function(){var e=this,t=0,n=this.getdetail(),r=n.iSlidetype;r==null&&(r=0),this.delay=Number(n.iInterval)||.01,this.autoplay=n.iAutoplay;var i=n.iRepeat?-1:0;this.slidelength=n.iImg.length,this.repeat=i,this.iRewind=n.iRewind,this.slipable=n.iSlipable,this.timeline=new TimelineMax({paused:!0,repeat:i,onComplete:this.setRewind}),this.setTimeline(),this.autoplay?(!this.$el.children(".Element").is(":hidden")||interaction_view.ismobile||this.model.isMasterOverlay)&&this.timeline.play(0):this.useIndex||this.setSlideDisplay(0),this.onChangeSlideTo(0),this.slipable&&(this.control(),this.autoplay||this.$el.attr("data-iSlipable",!0))},setTimeline:function(){this.iFade="LoopSwitch",this.setLoopSwitch(),this.setSlideElementsDisplay()},setSlideElementsDisplay:function(){this.useIndex?(this.slideel.children("canvas").css({display:"block",opacity:1}),this.slideel.children("img").css({display:"none"}),this.drawCanvas(this.img_src[0],0)):this.slideel.children().first().css({opacity:1,left:0,top:0}).nextAll().css("opacity",0)},testControl:function(){return!0},resetOtherStatus:function(){if(!this.slideel)return;this.setSlideElementsDisplay();var e=this.getdetail();this.autoplay=e.iAutoplay,this.currentIndex=0,this.useIndex&&(this.indexTime=0),this.timeline&&(this.timeline.pause(1e-5),this.autoplay&&(!this.$el.children(".Element").is(":hidden")||interaction_view.ismobile||this.model.isMasterOverlay)?this.timeline.play(0):this.useIndex?this.drawCanvas(this.img_src[0],0):this.setSlideDisplay(0))},renderCanvas:function(){var e=this.getcommon();this.canvasId="canvas_"+_g.uuid(),this.slideel.append('<canvas id="'+this.canvasId+'" width="'+e.iWidth+'" height="'+e.iHeight+'" style="pointer-events:none"></canvas>'),this.canvas=document.getElementById(this.canvasId),this.canvas_width=e.iWidth,this.canvas_height=e.iHeight,this.canvas&&(this.ctx=this.canvas.getContext("2d")),this.useIndex&&this.slideel.children("img").hide()},drawCanvas:function(e,t){if(interaction_view.currentPage!=this.model.iPageId&&!this.model.isMasterOverlay)return;if(!e||e=="")return;var n=this;if(n.isdrawing)return!1;if(e==this.src)return;this.ctx||(this.ctx=this.canvas.getContext("2d"));if(!this.ctx)return!1;n.isdrawing=!0,ctx=this.ctx,interaction_view.drawImg(n,e,t,ctx)},otherOnShow:function(){this.img_src.length&&this.drawCanvas(this.img_src[this.currentIndex],this.currentIndex)}})}),define("text!interaction_view/template/imageitem.js",[],function(){return'<%if(iDetail.iImg&&iDetail.iImg[0]){%>\n    <%if(typeof isSubOverlay!="undefined"&&isSubOverlay&&(typeof isLayerOverlay=="undefined"||!isLayerOverlay)){%>\n        <% if(iDetail.iMask){%>\n            <img draggable="false" class="Context" src="<%=iDetail.iImg[0].thumbnail%>" style="width:<%=iDetail.iMask_data.width%>px;height:<%=iDetail.iMask_data.height%>px;position:absolute;max-width:none;">\n        <%}else{%>\n            <img draggable="false" class="Context" src="<%=iDetail.iImg[0].thumbnail%>" style="width:100%;height:100%;position:absolute;">\n        <% } %>\n    <%}else{ %>\n        <% if(iDetail.iMask){%>\n            <img draggable="false" class="Context" src="<%=iDetail.iImg[0].picture%>" style="width:<%=iDetail.iMask_data.width%>px;height:<%=iDetail.iMask_data.height%>px;position:absolute;max-width:none;">\n        <%}else{%>\n            <img draggable="false" class="Context" src="<%=iDetail.iImg[0].picture%>" style="width:100%;height:100%;position:absolute;">\n        <% } %>\n    <%}%>\n<%}%>'}),define("interaction_view/model/image",["interaction_view/model/base","text!interaction_view/template/imageitem.js"],function(){var e=require("text!interaction_view/template/imageitem.js");interaction_view.model.Image=interaction_view.model.Base.extend({defaults:{iType:"Image",iLock:!0,iVisibility:!0,iCommon:{portait:{iStartx:400,iStarty:200,iWidth:200,iHeight:200},landscape:{iStartx:400,iStarty:200,iWidth:200,iHeight:200}},iDetail:{iAdapt:!1,iFullview:!1,iImg:null,iAnimation:[]},iParent:"",iChild:"",iOptions:{createfocus:!0},iParentModel:null,iDraggable:!0,iResizable:!0,iTemplate:null,iParentdiv:".interaction-view",iAutoindex:!1,iSync:!1,iZindex:"-1",iUrl:null,iAutofocus:!1,iKeyscontrol:!0,callback:null},setcollection:function(){iOverlaylist.get(this.id)||iOverlaylist.add(this)},setview:function(e){this.iview=new interaction_view.view.Image({model:this})},setsyncmodel:function(){}}),interaction_view.view.Image=interaction_view.view.Base.extend({events:{},render:function(e){this.renderMask(),this.renderDraggable()},renderMask:function(){var e=this.getdetail();e.iMask&&(this.$el.children(".Element").children().css({translate:[e.iMask_data.x,e.iMask_data.y]}),this.iScrollview&&this.iScrollview.scrollTo(e.iMask_data.x,e.iMask_data.y))},preload:function(){var e=this.getdetail(),t;if(e.iImg&&e.iImg[0]){this.model.get("isSubOverlay")&&!this.model.get("isLayerOverlay")?t=_.isArray(e.iImg)?e.iImg[0].thumbnail:e.iImg:t=e.iImg[0].picture,this.sendToPreload({file:t,path:this.model.get("path"),isSubOverlay:this.model.get("isSubOverlay")});var n=this.preloadmodel.id;this.model.set("preload_id",n)}},getLayerContentSize:function(){var e=this.getdetail(),t={};return e.iImg&&e.iImg.length>0?(t.width=e.iMask_data.width,t.height=e.iMask_data.height,t):null},setOtherDisplay:function(){var e=this.getdetail();e.iImg&&e.iImg.length>0&&e.iMask&&e.iMask_data.iSlipable&&(this.renderMask(),this.setMaskSlipable({items:this.$el.children(".Element").children("img"),containment:this.$el.children(".Element"),contentel:this.$el.children(".Element").children(),content_x:e.iMask_data.x,content_y:e.iMask_data.y})),e.iDisplay&&e.iImg&&e.iImg.length>0&&_g.ui.fitImage({fit:Number(e.iDisplay),width:e.iImg[0].width,height:e.iImg[0].height,items:this.$el.children(".Element").children("img")}),e.iFullview&&this.fullview(),e.iEraser&&this.setEraser()},resetOtherStatus:function(){this.$el.removeClass("invisible noevents"),this.resetEraser(),this.resetDragDrop()},fullview:function(){var e=this.getdetail(),t=this;e.iImg&&e.iImg.length>0&&(this.$el.addClass("hasaction"),this.$el.children(".Element").on("click",function(n){opts={picture:e.iImg[0].picture,width:e.iImg[0].width,height:e.iImg[0].height,model:t.getGalleryModel(),index:t.model.get("GalleryIndex")},t.setFullView(opts)}))},setEraser:function(){var e=this.getcommon();this.$el.children(".Element").css("cursor","pointer"),this.$el.children(".Element").addClass("disableDragX disableDragY"),this.$el.find("img").first().is(":hidden")||interaction_view.eraser.set(this.$el.find("img").first(),e.iWidth,e.iHeight,this)},resetEraser:function(){this.onShow()},isFullSwitch:function(){if(this.model.get("GalleryIndex")!=null)return!0},getGalleryModel:function(){var e=[];for(i=0;i<this.path.length;i++){if(this.path[i].type=="Gallery"){e.push(this.path[i]);break}e.push(this.path[i])}var t=interaction_view.getContainerModelByPath(e);return t},repaint:function(){var t=_.template(e,this.model.toJSON());this.$el.children(".Element").html(t)},onShow:function(){var e=this.getdetail();e.iEraser&&(this.repaint(),this.setEraser())},getDragCopy:function(){return $("<div></div>").html($("<img/>").attr({src:this.$el.find("img").attr("src"),style:this.$el.children(".Element").attr("style")}).css({"max-width":"none","max-height":"none"})).addClass("DragCopy").attr({id:this.model.id+"_drag_copy"}).css({position:"absolute",opacity:this.$el.css("opacity")})},getClientXY:function(e){return"ontouchend"in document?{x:e.clientX,y:e.clientY}:{x:e.gesture.center.pageX,y:e.gesture.center.pageY}},resetDragDrop:function(){if(!this.getdetail().draggable)return;var e=this;typeof e.DragDrops=="undefined"&&(e.DragDrops=e.model.page.iOverlaylist.where({iType:"DragDrop"}),!e.DragDrops.length&&(e.DragDrops=!1)),e.DragDrops&&(typeof e.MaxZindex=="undefined"&&(e.MaxZindex=parseInt(e.model.page.iOverlaylist.models[e.model.page.iOverlaylist.models.length-1].iview.$el.css("z-index"))),e.Status=0,this.getdetail().dragend==1&&(e.Status=2)),e.Pos={left:e.x,top:e.y},e.Drag_opacity=.4999,e.$el.siblings(".DragCopy").remove()},setDraggable:function(e,t,n,r){function a(){u&&(o=e.css("z-index"),u=!1),e.css({"z-index":i.MaxZindex+100,opacity:e.css("opacity")>=1?i.Drag_opacity:e.css("opacity")}),s=e.position(),n(e),e.stop(!0,!0),i.resetDragDropStatus()}function f(t,n,r){if(!s||!s.left)return;var o=$.zoom?$.zoom:1,u=s.left+t/o,a=s.top+n/o;TweenMax.to(e,0,{x:u,y:a}),i.activeDragDrop(e,r)}function l(){e.css({"z-index":o,opacity:e.css("opacity")-i.Drag_opacity<1e-5?1:e.css("opacity")}),r(e)}var i,s,o,u;i=this,u=!0,o=e.css("z-index"),e.data({Drop:t}).addClass("disableDragX disableDragY");if("ontouchend"in document){var c=!1,h=0,p=0;e.on("touchstart",function(e){e=e.originalEvent.touches[0],c=!0,h=e.clientX,p=e.clientY,a()}).on("touchmove",function(e){return e=e.originalEvent.touches[0],f(e.clientX-h,e.clientY-p,e),!1}).on("touchend touchcancel",function(e){e=e.originalEvent.touches[0],c&&l(),c=!1})}else e.hammer().on("dragstart",a).on("drag",function(e){f(e.gesture.deltaX,e.gesture.deltaY,e)}).on("dragend",l)},activeDragDrop:function(e,t){if(!this.DragDrops)return;var n=this,r=$.zoom?$.zoom:1,i=this.getClientXY(t);$.each(n.DragDrops,function(e,t){var s=t.iview.$el.children(".Element"),o={x:s.offset().left*r,y:s.offset().top*r},u={x:o.x+s.width()*r,y:o.y+s.height()*r};i.x>=o.x&&i.x<=u.x&&i.y>=o.y&&i.y<=u.y?(n.$el.parent().children("#"+n.model.id+t.id).length==0&&!t.iview.active&&n.trigger_dragin_event(t),t.iview.changeStatus(!1)):t.iview.changeStatus(!0)})},getDropXY:function(e){var t=e.iview.getcommon(),n=e.iview.$el.children(".Element").offset(),r=e.iview.$el.parents(".interaction-area:first").offset();return{x:n.left-r.left+t.iWidth/2,y:n.top-r.top+t.iHeight/2}},resetDragDropStatus:function(){var e=this;$.each(e.DragDrops,function(t,n){n.iview.Status=0;var r=e.$el.parent().children("[data-drop="+n.id+"]");if(r.length){n.iview.Status=2;var i=r.attr("data-drag");_.include(n.iview.getdetail().element_ids,i)&&(n.iview.Status=1)}})},renderDraggable:function(){function n(n){if(t.dragstart==1){var r=e.getDragCopy();n.before(r),TweenMax.to(r,0,{x:n.position().left,y:n.position().top})}e.Status==0&&(e.Pos=n.position())}function r(n){var r=0;$.each(e.DragDrops,function(i,s){if(s.iview.active){s.iview.changeStatus();var o=s.iview.getdetail(),u=e.$el.parent().children("#"+e.model.id+s.id);if(o.onlyright&&!_.include(o.element_ids,e.model.id)||u.length!=0)return r=1,u.length!=0&&t.dragin==0&&(r=3,n.css({"z-index":parseInt(s.iview.$el.css("z-index"))+1}),TweenMax.to(n,.4,e.getDropXY(s))),!1;r=2,s.iview.Status!=0&&e.old_transit_back(s),e.drag_dragin(s)}}),r<2&&e.drag_dragend(r==1?1:null)}var e=this,t=this.getdetail();if(!t.draggable)return;e.setDraggable(e.$el,null,n,r)},drag_dragend:function(e){var t=this.$el,n=t.position(),r=t.parent().children("#"+this.model.id+"_drag_copy");this.Status==1&&(this.Status=0),this.lastCopy&&this.lastCopy.remove()&&(this.lastCopy=null),(e||parseInt(this.getdetail().dragend))==1?(n=this.Pos,TweenMax.to(t,.4,{x:n.left,y:n.top})):this.Status==0&&(this.Pos=t.position()),TweenMax.to(r,.4,{x:n.left,y:n.top,opacity:0,onComplete:function(){r.remove()}})},drag_dragin:function(e){var t=this,n=this.getdetail(),r=t.$el.parent().children("#"+t.model.id+"_drag_copy");switch(parseInt(n.dragin)){case 0:t.Status==0&&(t.Status=1);if(t.$el.parent().children("#"+t.model.id+e.id).length==0){t.lastCopy&&t.lastCopy.remove()&&t.resetDragDropStatus();var i=t.getDragCopy().attr({id:t.model.id+e.id,"data-drop":e.id,"data-drag":t.model.id}).hide();t.$el.before(i),t.lastCopy=i}t.$el.css("z-index",parseInt(e.iview.$el.css("z-index"))+1),TweenMax.to(t.$el,.4,_.extend(t.getDropXY(e),{onComplete:function(){t.trigger_drop_event(e)}})),n.dragstart==1&&TweenMax.to(r,.4,_.extend(t.getDropXY(e),{opacity:0,onComplete:function(){r.remove()}}));break;case 1:n.dragstart!=1&&(r=t.getDragCopy(),t.$el.before(r)),r.attr({id:t.model.id+e.id,"data-drop":e.id,"data-drag":t.model.id}).css({"z-index":parseInt(e.iview.$el.css("z-index"))+1,opacity:r.css("opacity")-t.Drag_opacity<1e-5?1:r.css("opacity")}),TweenMax.to(r,0,{x:t.$el.position().left,y:t.$el.position().top}),TweenMax.to(t.$el,.4,{x:t.Pos.left,y:t.Pos.top}),TweenMax.to(r,.4,_.extend(t.getDropXY(e),{onComplete:function(){t.trigger_drop_event(e),t.renderCopyDraggable(e,r)}}));break;case 2:r.remove(),r=t.getDragCopy().attr({id:t.model.id+e.id,"data-drop":e.id,"data-drag":t.model.id}).hide(),t.$el.before(r),TweenMax.to(t.$el,.4,{x:t.Pos.left,y:t.Pos.top,onComplete:function(){t.trigger_drop_event(e)}})}},renderCopyDraggable:function(e,t){function r(){n.getdetail().dragstart==0&&n.$el.hide()}var n=this;this.setDraggable(t,e,r,n.copy_dragend)},copy_dragend:function(e){var t=this,n=this.getdetail(),r=e.data("Drop"),i=0;$.each(t.DragDrops,function(n,s){if(s.id==r.id)s.iview.active&&(TweenMax.to(e,.4,t.getDropXY(r)),s.iview.changeStatus(),i=1);else if(s.iview.active){r.iview.Status=0,s.iview.changeStatus();var o=s.iview.getdetail();if(o.onlyright&&!_.include(o.element_ids,t.model.id))return i=1,t.old_transit_back(r,t.model.id),!1;s.iview.Status!=0&&t.old_transit_back(s),TweenMax.to(e,.4,t.getDropXY(s)),t.$el.siblings("#"+t.model.id+s.id).remove(),e.attr({id:t.model.id+s.id,"data-drop":s.id,"data-drag":t.model.id}).css("z-index",parseInt(s.iview.$el.css("z-index"))+1),e.data("Drop",s),i=1,t.trigger_drop_event(s)}}),n.dragstart==0&&t.$el.show();if(i==0){var s=e.position();n.dragend==0&&n.dragstart==1?(TweenMax.to(e,.4,{opacity:0,onComplete:function(){e.remove()}}),TweenMax.to(t.$el,.4,{x:s.left,y:s.top})):(TweenMax.to(t.$el,0,{x:e.position().left,y:e.position().top}),n.dragend==1&&n.dragstart==1?TweenMax.to(e,0,{x:t.Pos.left,y:t.Pos.top,onComplete:function(){TweenMax.to(e,.4,{opacity:0,onComplete:function(){e.remove()}})}}):e.remove()),t.drag_dragend()}},old_transit_back:function(e,t){var n=e.iview.$el.parent().children("[data-drop="+e.id+"]"),t=t||n.attr("data-drag");n.attr("id",t+"_drag_copy"),this.model.page.iOverlaylist.where({id:t})[0].iview.drag_dragend(1)},trigger_dragin_event:function(e){interaction_view.events.onDragDrop(e,this.model,0)},trigger_drop_event:function(e){interaction_view.events.onDragDrop(e,this.model),interaction_view.events.onDragDropGroup(e)}})}),define("interaction_view/model/page",["_g/mvc","interaction_view/view/page"],function(){var e={defaults:{iType:"Page",position:0,description:"",title:"untitled",picture:null,preview:'<img src="/staticfs/admin-epub360/img/thumb.png">',thumbnail:null,width:null,height:null,bg_color:"#FFFFFF",bg_opacity:1,show_master:!0},autoIndex:!0,callback:function(){this.get("type")!="page_group"&&(this.iOverlaylist=new interaction_view.collection.list,this.iAnimationlist=new interaction_view.collection.Animation,this.iActionlist=new interaction_view.collection.Action,this.ipreloadlist=new interaction_view.collection.Preload,this.ipreloadlist.pageid=this.iOverlaylist.pageid=this.iAnimationlist.pageid=this.iActionlist.pageid=this.id)},overlays:[],actions:[],animations:[]};return _g.mvc.createModel(e)}),define("interaction_view/collection/page",["_g/mvc","interaction_view/model/page"],function(){var e={enableSync:!1,model:require("interaction_view/model/page"),getPages:function(){var e=_g.mvc.getTreeModels(interaction_view.ipagelist);return e=_.reject(e,function(e){return e.toJSON().type=="page_group"}),e},getPagesJSON:function(){var e=_g.mvc.getTreeModels(interaction_view.ipagelist);return e=_.reject(e,function(e){return e.toJSON().type=="page_group"}),e=_.map(e,function(e){return e.toJSON()}),e},getPage:function(e){return _g.mvc.getTreeModel(interaction_view.ipagelist,e)},getIndexPages:function(){var e=this.getPages();return _.filter(e,function(e){return e.get("is_index")})},getElement:function(e,t,n){if(interaction_view.ipagelist.getPage(t)||interaction_view.imasterlist.get(t)){var r=interaction_view.ipagelist.getPage(t)||interaction_view.imasterlist.get(t);return r.iOverlaylist.get(n)}return e.iOverlaylist.get(n)}};return _g.mvc.createCollection(e)}),define("interaction_view/model/layer",["interaction_view/model/page"],function(){var e=require("interaction_view/model/page"),t=e.extend({defaults:{iType:"Layer",position:0,description:"",title:"untitled",picture:null,preview:'<img src="/staticfs/admin-epub360/img/thumb.png">',thumbnail:null,width:null,height:null,layer_width:1024,layer_height:768,bg_color:"#FFFFFF",bg_opacity:1},callback:function(){this.actions=this.get("actions"),this.animations=this.get("animations"),this.overlays=this.get("overlays")}});return t}),define("interaction_view/collection/layer",["interaction_view/collection/page","interaction_view/model/layer"],function(){var e=require("interaction_view/collection/page"),t=e.extend({model:require("interaction_view/model/layer")});return t}),define("interaction_view/model/master",["interaction_view/model/page"],function(){var e=require("interaction_view/model/page"),t=e.extend({defaults:{iType:"Master",position:0,description:"",title:"untitled",picture:null,preview:'<img src="/staticfs/admin-epub360/img/thumb.png">',thumbnail:null,width:null,height:null,bg_color:"#FFFFFF",bg_opacity:1,pageno_horizontal:{show:!1,x:500,y:20},pageno_vertical:{show:!1,x:20,y:300}},callback:function(){this.iOverlaylist=new interaction_view.collection.list,this.iAnimationlist=new interaction_view.collection.Animation,this.iActionlist=new interaction_view.collection.Action,this.ipreloadlist=new interaction_view.collection.Preload,this.ipreloadlist.pageid=this.iOverlaylist.pageid=this.iAnimationlist.pageid=this.iActionlist.pageid=this.id}});return t}),define("interaction_view/view/master",["interaction_view/view/page"],function(){var e=require("interaction_view/view/page"),t=$.extend({},e,{template:null,className:null,containment:null,wrap:null,wrapClassName:null,autoRender:!1,position:1,parseData:null,afterload:function(){var e=this,t=this.model;if(!t)return;e.animations=_.map(e.animations,function(t){return t.pageid=e.model.id,t.pagetype="master",t}),e.model.iAnimationlist.reset(e.animations),overlays=_.filter(e.overlays,function(t){return t.pageid=e.model.id,t.pagetype="master",interaction_view.model[t.iType]}),overlays=_.map(overlays,function(e){return new interaction_view.model[e.iType](e)}),e.model.iOverlaylist.reset(overlays),e.model.iOverlaylist.each(function(e){e.iview.setZindex()}),e.actions=_.map(e.actions,function(t){return t.pageid=e.model.id,t.pagetype="master",t}),e.model.iActionlist.reset(e.actions),e.startLoad()},prepareLoad:function(){var e=this,t=this.model;if(!t)return;e.animations=_.map(e.animations,function(t){return t.pageid=e.model.id,t.pagetype="master",t}),e.model.iAnimationlist.reset(e.animations),overlays=_.filter(e.overlays,function(t){return t.pageid=e.model.id,t.pagetype="master",interaction_view.model[t.iType]}),overlays=_.map(overlays,function(e){return new interaction_view.model[e.iType](e)}),e.model.iOverlaylist.reset(overlays),e.model.iOverlaylist.each(function(e){e.iview.setZindex()}),e.actions=_.map(e.actions,function(t){return t.pageid=e.model.id,t.pagetype="master",t}),e.model.iActionlist.reset(e.actions)}});return t}),define("interaction_view/collection/master",["interaction_view/collection/page","interaction_view/model/master","interaction_view/view/master"],function(){var e=require("interaction_view/collection/page"),t=e.extend({model:require("interaction_view/model/master")});return t}),define("interaction_view/model/doc",["_g/mvc","interaction_view/collection/page","interaction_view/view/page","interaction_view/collection/layer","interaction_view/collection/master"],function(){var e={defaults:{id:"doc",play_mode:0},autoUpdate:!1,fetchUrl:context_url+"index.json",staticFetchUrl:"/staticfs/common/js/interaction_view/data/index.json",parse:function(e){var t=this;console.log("fetch data:"+e);if(e.code==200)return e.data?(interaction_view.size={x:e.data.width||1024,y:e.data.height||768},interaction_view.screen_mode=e.data.screen_mode,this.initMasters(e),this.initLayers(e),this.initPages(e),!interaction_view.ismobile&&!interaction_view.forpreview&&(e.data.bg_color=e.data.desktop_bg_color!=undefined?e.data.desktop_bg_color:e.data.bg_color,e.data.bg_opacity=e.data.desktop_bg_opacity!=undefined?e.data.desktop_bg_opacity:e.data.bg_opacity,e.data.screen_mode=e.data.desktop_screen_mode!=undefined?e.data.desktop_screen_mode:e.data.screen_mode,e.data.show_excontent=e.data.desktop_show_excontent!=undefined?e.data.desktop_show_excontent:e.data.show_excontent,e.data.adapt=e.data.desktop_adapt!=undefined?e.data.desktop_adapt:e.data.adapt),_.omit(e.data,"layers","masters","chapter","organization")):{}},parseOrgnization:function(e,t){var n=this,r=[];return _.each(e,function(e){if(e.type=="page_group"){var i=n.parseOrgnization(e.children,e.id);_.each(i,function(e){r.push(e)})}else e.children||(e.children=[]),e.children.unshift($.extend(!0,{},e)),e.children&&_.each(e.children,function(n){n.id==e.id&&(n.children=[]),n.group=t}),e.type="page_group",delete e.id,delete e.animations,delete e.overlays,delete e.actions,r.push(e)}),r},initMasters:function(e){var t=require("interaction_view/collection/master");e.data.masters||(e.data.masters=[]),interaction_view.imasterlist=_g.mvc.createTreeByData({collection:t,data:e.data.masters})},initLayers:function(e){var t=require("interaction_view/collection/layer");e.data.layers||(e.data.layers=[]),interaction_view.ilayerlist=_g.mvc.createTreeByData({collection:t,data:e.data.layers})},initPages:function(e){var t=this,n,r=require("interaction_view/collection/page");e.data.play_mode==0?n=e.data.chapter:(n=_g.array.maptree({treesource:e.data.organization.children,mapdata:e.data.chapter}),n=_.reject(n,function(e){return!e.children||e.children.length==0}),n=t.parseOrgnization(n)),interaction_view.ipagelist=_g.mvc.createTreeByData({collection:r,data:n}),_g.mvc.createTreeView({collection:interaction_view.ipagelist,view:require("interaction_view/view/page"),containment:"div.slides",wrap:null})},callback:function(){}};return _g.mvc.createModel(e)}),define("text!interaction_view/template/preload.js",[],function(){return'<img src="<%=file%>" width="1" height="1" id="<%=id%>"/>'}),define("interaction_view/model/preload",["interaction_view/model/base","text!interaction_view/template/preload.js"],function(){var e=require("text!interaction_view/template/preload.js");interaction_view.model.Preload=interaction_view.model.Base.extend({defaults:{iType:"Preload",iLock:!0,iVisibility:!0,iCommon:null,iDetail:null,iParent:"",iChild:"",iOptions:{createfocus:!0},iParentModel:null,iDraggable:!0,iResizable:!0,iTemplate:null,iParentdiv:".interaction-view",iAutoindex:!0,iSync:!1,iZindex:"-1",iUrl:null,iAutofocus:!1,iKeyscontrol:!0,callback:null,loaded:!1},setcollection:function(){this.pageid=this.get("pageid");if(this.get("pagetype")=="LayerRef"){var e=this.get("parentpageid"),t=this.get("layerid"),n=interaction_view.ipagelist.getPage(e)||interaction_view.imasterlist.get(e);this.page=n.iOverlaylist.get(this.pageid).layer[t]}else this.get("isSubOverlay")?(this.path=this.get("path"),this.page=interaction_view.getContainerModelByPath(this.path)):this.page=interaction_view.ipagelist.getPage(this.pageid)||interaction_view.imasterlist.get(this.pageid);this.page.ipreloadlist.get(this.id)||this.page.ipreloadlist.add(this)},setview:function(e){this.pageid=this.get("pageid");if(this.get("pagetype")=="LayerRef"){var t=this.get("parentpageid"),n=this.get("layerid"),r=interaction_view.ipagelist.getPage(t)||interaction_view.imasterlist.get(t);this.page=r.iOverlaylist.get(this.pageid).layer[n]}else this.get("isSubOverlay")?(this.path=this.get("path"),this.page=interaction_view.getContainerModelByPath(this.path)):this.page=interaction_view.ipagelist.getPage(this.pageid)||interaction_view.imasterlist.get(this.pageid);this.iview=new interaction_view.view.Preload({model:this})},setsyncmodel:function(){}}),interaction_view.collection.Preload=interaction_view.collection.Base.extend({preloadcheck:function(e,t,n){var r=this.where({loaded:!0});t==0&&(console.log("file:"+e+" load failed!"),interaction_view.ismobile||interaction_view.message("alert","图像或媒体资源加载失败，可能会影响动画效果")),n.iview.afterpreload(e);if(this.where({loaded:false}).length==0)if(this.pagetype=="LayerRef"){var i=this.parentpageid,s=this.layerid,o=interaction_view.ipagelist.getPage(i)||interaction_view.imasterlist.get(i);refmodel=o.iOverlaylist.get(this.pageid),refmodel.iview.afterlayerload(s)}else if(this.subcontainer){var u=interaction_view.getContainerModelByPath(this.path);u.iview.afterSubOverlayPreload()}else interaction_view.finishPagePreload(this.pageid);interaction_view.setPreloadStatus&&interaction_view.setPreloadStatus()},preload:function(){this.each(function(e){e.get("loaded")||e.iview.render()})}}),interaction_view.view.Preload=interaction_view.view.Base.extend({events:{},initstart:function(){},renderDynamicElement:function(){},render:function(){var e=this,t=this.elementmodel=e.model.page.iOverlaylist.get(this.model.get("overlay_id"));this.model.get("elementtype")=="Audio"?(console.info("Audio"),this.audioPreload()):this.model.get("elementtype")=="Video"?this.videoPreload():this.model.get("elementtype")=="LayerRef"||this.model.get("elementtype")=="LayerSlide"?this.layerPreload(this.model):this.model.get("subcontainer")?this.subcontainerPreload(this.model):$('img[id="'+this.model.id+'"]').load(function(){e.model.set("loaded",!0),e.model.page.ipreloadlist.preloadcheck(e.model.toJSON().file,!0,t)}).error(function(){e.model.set("loaded",!0),e.model.page.ipreloadlist.preloadcheck(e.model.toJSON().file,!1,t)}).attr("src",e.model.toJSON().file)},audioPreload:function(){interaction_view.media.audio.init(this.model,this.elementmodel)},videoPreload:function(){var e=this;interaction_view.media.video.init(this.model,this.elementmodel,this.model.toJSON().file)},layerPreload:function(){this.elementmodel.iview.loadLayer(this.model)},subcontainerPreload:function(){this.elementmodel.iview.loadSubOverlay(this.model)}}),interaction_view.ipreloadlist=new interaction_view.collection.Preload}),define("interaction_view/model/richtext",["interaction_view/model/base"],function(){interaction_view.model.RichText=interaction_view.model.Base.extend({defaults:{iType:"RichText",iLock:!0,iVisibility:!0,iCommon:{portait:{iStartx:400,iStarty:200,iWidth:200,iHeight:200},landscape:{iStartx:400,iStarty:200,iWidth:200,iHeight:200}},iDetail:{iAdapt:!1,iFullview:!1,iImg:null,iAnimation:[]},iParent:"",iChild:"",iOptions:{createfocus:!0},iParentModel:null,iDraggable:!0,iResizable:!0,iTemplate:null,iParentdiv:".interaction-view",iAutoindex:!1,iSync:!1,iZindex:"-1",iUrl:null,iAutofocus:!1,iKeyscontrol:!0,callback:null},setcollection:function(){iOverlaylist.get(this.id)||iOverlaylist.add(this)},setview:function(e){this.iview=new interaction_view.view.RichText({model:this})},setsyncmodel:function(){}}),interaction_view.view.RichText=interaction_view.view.Base.extend({events:{},render:function(e){interaction_view.ismobile,this.scrollEl=this.$el.children(".Element")},resetOtherStatus:function(){var e=this;if(_g.ui.isOverflowed(this.$el.children(".Element")).y){if(!this.$el.children(".Element").hasClass("disableDragY")){var t=this.$el.children(".Element").height();this.$el.children(".Element").wrapInner('<div class="iContent"></div>');var n=_g.ui.isOverflowed(this.$el.children(".Element")).y-t;this.scrollView=new IScroll(this.$el.children(".Element")[0],{mouseWheel:!0,click:!0,probeType:3}),this.scrollView.on("scroll",function(){console.log(this.y),n&&n>0&&(this.y>0?this.y>30&&e.scrollEl.addClass("is_exceededY"):Math.abs(this.y)-n>30&&e.scrollEl.addClass("is_exceededY"))}),this.scrollEl=this.$el.children(".Element"),this.$el.children(".Element").addClass("disableDragY iMouseWheel disableMouseWheelY")}this.$el.children(".Element").removeClass("is_exceededX"),this.$el.children(".Element").removeClass("is_exceededY")}},otherOnShow:function(){this.resetOtherStatus()}})}),define("interaction_view/model/slide",["interaction_view/model/base"],function(){interaction_view.model.Slide=interaction_view.model.Base.extend({defaults:{iType:"Slide",iLock:!0,iVisibility:!0,iCommon:{portait:{iStartx:400,iStarty:200,iWidth:200,iHeight:200},landscape:{iStartx:400,iStarty:200,iWidth:200,iHeight:200}},iDetail:{},iParent:"",iChild:"",iOptions:{createfocus:!0},iParentModel:null,iDraggable:!0,iResizable:!0,iTemplate:null,iParentdiv:".interaction-view",iAutoindex:!1,iSlideNumber:!0,isSlide:!0,iSync:!1,iZindex:"-1",iUrl:null,iAutofocus:!1,iKeyscontrol:!0,callback:null,iBackground:"rgba(62,189,255,0.5)",iResourcesProperties:[{id:"iImg",type:"single"}],iAnimationProperties:[{id:"iAnimation",type:"object"}]},setcollection:function(){iOverlaylist.get(this.id)||iOverlaylist.add(this)},setview:function(e){var t=this.get("iDetail");t.show_title&&this.setSubOverlays(),this.iview=new interaction_view.view.Slide({model:this})},setsyncmodel:function(){}}),interaction_view.view.Slide=interaction_view.view.Base.extend({events:{},render:function(e){var t=this,n=this.getdetail();this.renderBackGroud(),this.currentSlideIndex=null,this.model.on("slideTo",function(e){if(t.currentSlideIndex!=null&&t.currentSlideIndex==e)return!1;t.preloaded&&(interaction_view.events.onChangeTo(t.model.get("pageid"),t.model.id,e),t.currentSlideIndex=e,t.setTitle(e))})},getSlideLength:function(){var e=this.getdetail();return e.iImg?e.iImg.length:0},preload:function(){var e=this,t=this.getdetail(),n;this.checkImglist=_.pluck(t.iImg,_g.getUrlParameterByName("-playmode")=="1"?"thumbnail":"picture"),this.preloaded=!1;var r=[];t.iImg&&t.iImg.length&&(_.each(t.iImg,function(t){_g.getUrlParameterByName("-playmode")=="1"?n=t.thumbnail:n=t.picture;var i=e.sendToPreload({file:n});r.push(i.id)}),t.show_title&&this.sendToPreload({file:null,subcontainer:!0,path:this.model.get("path"),isSubOverlay:this.model.get("isSubOverlay")})),this.model.set("preload_id",r)},checkImgload:function(e){return this.checkImglist=_.reject(this.checkImglist,function(t){return t==e}),this.checkImglist.length==0?!0:!1},afterpreload:function(e){if(e&&this.preloaded)return;e&&(this.preloaded=this.checkImgload(e)),this.preloaded&&(this.setZindex(),this.setElementDisplay(),this.setSlideImageDisplay(),this.slideel=this.$el.children(".Element").find(".slidecontent").first(),this.slidelength=this.getdetail().iImg.length,this.fullview(),this.playAnimation(),this.copyelstyle=this.$el.attr("style"),this.copyelementstyle=this.$el.children(".iElement").attr("style"))},afterSubOverlayPreload:function(){this.preloadmodel&&(this.model.iOverlaylist.each(function(e){e.iview.preloaded||e.iview.afterpreload()}),this.model.iActionlist.each(function(e){e.iview.render()}),this.setTitle(0),this.preloadmodel.set("loaded",!0),this.preloadmodel.page.ipreloadlist.preloadcheck(null,!0,this.model))},playAnimation:function(){this.timeline&&this.timeline.clear();var e=this,t=0,n=this.getdetail(),r=n.iSlidetype,i=!1;this.$el.children(".Element").is(":hidden")&&(i=!0),this.delay=Number(n.iInterval)||2,this.autoplay=n.iAutoplay;var s=n.iRepeat?-1:0;this.iFade=n.iFade||0,this.timeline=new TimelineMax({paused:!0,repeat:s,onComplete:this.setRewind}),this.repeat=s,this.iRewind=n.iRewind,this.slipable=n.iSlipable,this.iDisplay=n.iDisplay,this.setTimeline();if(n.iFade=="Flow")return;this.autoplay?(!i||interaction_view.ismobile)&&this.timeline.play(0):this.setSlideDisplay(0),this.onChangeSlideTo(0),this.slipable&&(this.control(),this.autoplay||this.$el.attr("data-iSlipable",!0))},setTimeline:function(){if(this.iFade=="Fade"||0)this.setFade();else if(this.iFade=="Slip")this.slideel.css("overflow","hidden"),this.setSlip();else if(this.iFade=="None")this.setNone();else{if(this.iFade!="Flip"){if(this.iFade=="Flow"){this.setFlowAll();return}return}this.iDisplay==2&&(this.slideel.wrapInner('<div class="slidewrap" style="width:100%;height:100%;position:absolute;"></div>'),this.slideel=this.slideel.children(".slidewrap")),this.setFlip()}this.slideel.children().first().css({opacity:1,left:0,top:0}).nextAll().css("opacity",0)},setFlowAll:function(){function r(){n++;if(e.slidelength<=n){e.slideel.children().animate({opacity:1}),e.CoverFlow=e.slideel.children().coverflow({active:Math.floor((e.slidelength-1)/2),overlap:.3,perspectiveY:22,duration:300,beforeselect:function(t,n){e.model.trigger("slideTo",n.index)},select:function(t,n){e.currentIndex=n.index}}).width("+=5").height("100%"),e.setFlow();if(e.slipable){var t=["mousedown","mousemove","mouseup"];"ontouchend"in document&&(t=["touchstart","touchmove","touchend touchcancel"]);var r=e.CoverFlow.parent().width();e.CoverFlow.on(t[0],function(n){function u(t){"ontouchend"in document&&(t=t.originalEvent.touches[0]);var n=(t.clientX-i)/r;return"ontouchend"in document&&(n*=2),n=Math.round(n*e.slidelength),n=o-n,n<0&&(n=0),n>=e.slidelength&&(n=e.slidelength-1),e.CoverFlow.coverflow("select",n),s=!0,!1}"ontouchend"in document&&(n=n.originalEvent.touches[0]);var i=n.clientX,s=!1,o=e.CoverFlow.children(".ui-state-active").index();$(document).on(t[1],u),$(document).one(t[2],function(){function n(){e.CoverFlow.data("CoverFlowDisableClick",!1)}return $(document).off(t[1],u),s&&e.CoverFlow.data("CoverFlowDisableClick",!0)&&setTimeout(n,10),!1}),"ontouchend"in document&&!s&&e.CoverFlow.coverflow("select",$(n.target).parent().index())});var i=e.getdetail().iSlidetype?e.getdetail().iSlidetype:0;i=="横向"||Number(i)==0?e.$el.children(".Element").addClass("enableMouseWheelX disableDragX"):e.$el.children(".Element").addClass("enableMouseWheelY disableDragY")}}}var e=this,t=this.getcommon().iHeight;e.slideel.children().removeAttr("style").css({height:t*.7}).wrap("<div></div>"),e.slideel.wrapInner("<div></div>"),e.slideel.children().css({opacity:0});var n=0;e.slideel.children().find("img").each(function(e,n){var i=$(n).width(),s=new Image,o=$("<canvas></canvas>").attr({width:i,height:t*.7}).css({"float":"left"});$(n).after(o),TweenMax.to(o,0,{transform:"matrix(1, 0, 0, -1, 0, 0)"});var u=o[0].getContext("2d");s.src=n.src,s.onload=function(){u.drawImage(s,0,0,i,t*.7);var e=u.createLinearGradient(0,0,0,t*.7);u.globalCompositeOperation="destination-in",e.addColorStop(1,"rgba(0,0,0,0.4)"),e.addColorStop(.6,"rgba(0,0,0,0)"),e.addColorStop(0,"rgba(0,0,0,0)"),u.fillStyle=e,u.fillRect(0,0,i,t*.7),r()}})},testControl:function(){return!0},resetOtherStatus:function(){if(!this.slideel)return;var e=this.getdetail();e.iFade!="Flow"&&this.slideel.children().first().css({opacity:1,left:0,top:0}),this.autoplay=e.iAutoplay,this.currentIndex=0,this.currentSlideIndex=null,this.changeSlideNumber(),this.$el.children(".Element").removeClass("is_exceededX"),this.$el.children(".Element").removeClass("is_exceededY");if(this.timeline){var t=Math.floor((this.slidelength-1)/2);this.timeline.pause(1e-5);if(e.iFade=="Flow"&&this.CoverFlow){this.currentIndex=t;try{this.CoverFlow.coverflow("select",t)}catch(n){}}if(this.autoplay&&(!this.$el.children(".Element").is(":hidden")||interaction_view.ismobile)){if(e.iFade=="Flow"){this.timeline.play((t-1)*.3+t*this.delay);return}this.timeline.play(0)}else this.setSlideDisplay(0)}},fullview:function(){var e=this,t=this.getdetail();if(t.iFullview&&t.iImg&&t.iImg.length){this.$el.addClass("hasaction");if(t.iFade=="Flow"){e.slideel.on("click",".ui-state-active",function(){e.fullviewIndex($(this).index())});return}this.$el.children(".Element").on("click",function(t){return e.stopFullviewByFlow?(e.stopFullviewByFlow=!1,!1):e.slipable&&!$(t.target).is(t.currentTarget)?!1:(e.currentIndex!=null&&e.currentIndex!="undefined"&&e.fullviewIndex(e.currentIndex),!1)})}},fullviewIndex:function(e){var t=this.getdetail(),n=this,r={picture:t.iImg[e].picture,width:t.iImg[e].width,height:t.iImg[e].height,model:n.model,index:e};n.setFullView(r)},isFullSwitch:function(){var e=this.getdetail();return e.iSlipable},preview_left:function(e){e>0&&this.fullviewIndex(e-1)},preview_right:function(e){var t=this.getdetail();e<t.iImg.length-1&&this.fullviewIndex(e+1)},setTitle:function(e){var t=this.getdetail();if(!t.show_title)return;if(t.iImg&&t.iImg.length&&t.iImg[e]){var n=this.model.get("suboverlays"),r=interaction_view.formatLabel({text:t.iImg[e].title,font_size:n[0].iDetail.font_size,text_color:n[0].iDetail.text_color,iPosition:n[0].iDetail.iPosition});this.$el.find(".iTextLabel.Element").html(r)}}})}),define("interaction_view/model/video",["interaction_view/model/base"],function(){interaction_view.model.Video=interaction_view.model.Base.extend({defaults:{iType:"Video",iLock:!0,iVisibility:!0,iCommon:{portait:{iStartx:400,iStarty:200,iWidth:200,iHeight:200},landscape:{iStartx:400,iStarty:200,iWidth:200,iHeight:200}},iDetail:{iAdapt:!1,iFullview:!1,iImg:null,iAnimation:[]},iParent:"",iChild:"",iOptions:{createfocus:!0},iParentModel:null,iDraggable:!0,iResizable:!0,iTemplate:null,iParentdiv:".interaction-view",iAutoindex:!1,iSync:!1,iZindex:"-1",iUrl:null,iAutofocus:!1,iKeyscontrol:!0,callback:null,iBackground:"rgba(62,189,255,0.5)",iResourcesProperties:[{id:"iImg",type:"single"}],iAnimationProperties:[{id:"iAnimation",type:"object"}]},setcollection:function(){iOverlaylist.get(this.id)||iOverlaylist.add(this)},setview:function(e){this.iview=new interaction_view.view.Video({model:this})},setsyncmodel:function(){},getFile:function(){var e=this.get("iDetail");return e.iFile&&e.iFile[0]?e.iFile[0].file:null}}),interaction_view.view.Video=interaction_view.view.Base.extend({events:{},render:function(e){this.file},setOtherDisplay:function(){this.model.media&&interaction_view.media.pause(this.model)},preload:function(){var e,t=this.getdetail();t.iFile&&t.iFile[0]&&(typeof epub360!="undefined"&&epub360.settings&&epub360.settings.disable_stream_media?e=t.iFile[0].file:typeof cbt_data=="undefined"||interaction_view.forpreview?_g.getUrlParameterByName("-playmode")=="1"?e=(t.iFile[0].file||t.iFile[0].content)+"_video.m3u8":_g.getUrlParameterByName("-playmode")=="2"?e=(t.iFile[0].file||t.iFile[0].content)+"_origin.mp4":interaction_view.ismobile?e=(t.iFile[0].file||t.iFile[0].content)+"_origin.mp4":e=(t.iFile[0].file||t.iFile[0].content)+"_videohd.m3u8":e=t.iFile[0].file||t.iFile[0].content,this.file=e),this.file&&(this.preloadmodel=this.sendToPreload({file:this.file}))},resetOtherStatus:function(){if(!this.model.hided&&this.model.media){this.model.hls?interaction_view.media.video.resetH(this.model,this):interaction_view.media.video.reset(this.model);var e=this.model.get("iDetail").iAutohide;e==null&&(e=!0),e?this.$el.addClass("hide"):this.model.get("iDetail").iControl&&this.$el.find(".jwdisplayIcon").css({opacity:1})}}})}),define("interaction_view/model/button",["interaction_view/model/base"],function(){interaction_view.model.Button=interaction_view.model.Base.extend({defaults:{iType:"Button",iVisibility:!0,iCommon:null,iDetail:null,iOptions:{createfocus:!0},iParentModel:null,iDraggable:!0,iResizable:!0,iTemplate:null,iParentdiv:".interaction-view",iAutoindex:!1,iSync:!1,iZindex:"-1",iUrl:null,iAutofocus:!1,iKeyscontrol:!0},setcollection:function(){iOverlaylist.get(this.id)||iOverlaylist.add(this)},setview:function(e){var t=this.get("iDetail");t.isSwitch&&(this.isSwitch=!0),this.iview=new interaction_view.view.Button({model:this})},setsyncmodel:function(){}}),interaction_view.view.Button=interaction_view.view.Base.extend({events:{},render:function(e){},preload:function(){this.preloaded=!1,this.checkImglist=[];var e=this.getdetail(),t=[null,null];if(e.iconNormal&&e.iconNormal[0]){this.checkImglist.push(e.iconNormal[0].picture);var n=this.sendToPreload({file:e.iconNormal[0].picture,path:this.model.get("path"),isSubOverlay:this.model.get("isSubOverlay")});t[0]=n.id}if(e.iconActive&&e.iconActive[0]){this.checkImglist.push(e.iconActive[0].picture);var n=this.sendToPreload({file:e.iconActive[0].picture,path:this.model.get("path"),isSubOverlay:this.model.get("isSubOverlay")});t[1]=n.id}this.model.set("preload_id",t)},checkImgload:function(e){return this.checkImglist=_.reject(this.checkImglist,function(t){return t==e}),this.checkImglist.length==0?!0:!1},afterpreload:function(e){if(e&&this.preloaded)return;e&&!this.preloaded&&(this.preloaded=this.checkImgload(e)),this.preloaded&&(this.setZindex(),this.setElementDisplay(),this.setOtherDisplay(),this.copyelstyle=this.$el.attr("style"),this.copyelementstyle=this.$el.children(".iElement").attr("style"))},setOtherDisplay:function(){this.active=!1,this.buttonon=!1;var e=this;this.$el.css("cursor","pointer");var t=this.getdetail();if(t.isSwitch)this.$el.on("click",function(t){e.changeStatus()});else{if(interaction_view.ismobile)var n="touchstart",r="touchend";else var n="mousedown",r="mouseup";this.$el.on(n,function(t){e.buttonon=!0,e.changeStatus()}),this.$el.on(r,function(t){e.buttonon&&(e.buttonon=!1,e.changeStatus())})}},changeStatus:function(){var e=this.getdetail(),t=this;if(!t.active)t.$el.find("img.iconActive").show(),t.$el.find("img.iconNormal").hide(),t.active=!0;else{if(t.groupcontrol&&e.isSwitch)return;if(t.model.get("isTabBarButton"))return;t.$el.find("img.iconActive").hide(),t.$el.find("img.iconNormal").show(),t.active=!1}},resetOtherStatus:function(){this.resetButtonStatus()},resetButtonStatus:function(){this.$el.find("img.iconActive").hide(),this.$el.find("img.iconNormal").show(),this.active=!1}})}),define("interaction_view/model/map",["interaction_view/model/base"],function(){interaction_view.model.Map=interaction_view.model.Base.extend({defaults:{iType:"Map",iLock:!0,iVisibility:!0,iCommon:{portait:{iStartx:400,iStarty:200,iWidth:200,iHeight:200},landscape:{iStartx:400,iStarty:200,iWidth:200,iHeight:200}},iDetail:{iAdapt:!1,iFullview:!1,iImg:null,iAnimation:[]},iParent:"",iChild:"",iOptions:{createfocus:!0},iParentModel:null,iDraggable:!0,iResizable:!0,iTemplate:null,iParentdiv:".interaction-view",iAutoindex:!1,iSync:!1,iZindex:"-1",iUrl:null,iAutofocus:!1,iKeyscontrol:!0,callback:null},setcollection:function(){iOverlaylist.get(this.id)||iOverlaylist.add(this)},setview:function(e){this.iview=new interaction_view.view.Map({model:this})},setsyncmodel:function(){}}),interaction_view.view.Map=interaction_view.view.Base.extend({events:{},render:function(e){}})}),define("interaction_view/model/pay",["interaction_view/model/base"],function(){interaction_view.model.Pay=interaction_view.model.Base.extend({defaults:{iType:"Pay",iLock:!0,iVisibility:!0,iCommon:{portait:{iStartx:400,iStarty:200,iWidth:200,iHeight:200},landscape:{iStartx:400,iStarty:200,iWidth:200,iHeight:200}},iDetail:{iAdapt:!1,iFullview:!1,iImg:null,iAnimation:[]},iParent:"",iChild:"",iOptions:{createfocus:!0},iParentModel:null,iDraggable:!0,iResizable:!0,iTemplate:null,iParentdiv:".interaction-view",iAutoindex:!1,iSync:!1,iZindex:"-1",iUrl:null,iAutofocus:!1,iKeyscontrol:!0,callback:null},setcollection:function(){iOverlaylist.get(this.id)||iOverlaylist.add(this)},setview:function(e){this.iview=new interaction_view.view.Pay({model:this})},setsyncmodel:function(){}}),interaction_view.view.Pay=interaction_view.view.Base.extend({events:{},render:function(e){}})}),define("interaction_view/model/link",["interaction_view/model/base"],function(){interaction_view.model.Link=interaction_view.model.Base.extend({defaults:{iType:"Link",iLock:!0,iVisibility:!0,iCommon:{portait:{iStartx:400,iStarty:200,iWidth:200,iHeight:200},landscape:{iStartx:400,iStarty:200,iWidth:200,iHeight:200}},iDetail:{},iParent:"",iChild:"",iOptions:{createfocus:!0},iParentModel:null,iDraggable:!0,iResizable:!0,iTemplate:null,iParentdiv:".interaction-view",iAutoindex:!1,iSync:!1,iZindex:"-1",iUrl:null,iAutofocus:!1,iKeyscontrol:!0,callback:null},setcollection:function(){iOverlaylist.get(this.id)||iOverlaylist.add(this)},setview:function(e){this.iview=new interaction_view.view.Link({model:this})},setsyncmodel:function(){}}),interaction_view.view.Link=interaction_view.view.Base.extend({events:{},render:function(e){}})}),define("interaction_view/view/layer",["interaction_view/view/page"],function(){var e=require("interaction_view/view/page"),t=$.extend({},e,{template:null,className:null,containment:null,wrap:null,wrapClassName:null,autoRender:!1,position:1,parseData:null,afterload:function(){var e=this,t=this.model.get("iDetail").layer_ids;if(!t||t.length==0)return;_.each(t,function(t){var n=interaction_view.ilayerlist.get(t);if(!n)return;e.animations=_.map(n.animations,function(n){return n.pageid=e.model.id,n.parentpageid=e.model.get("pageid"),n.pagetype="LayerRef",n.layerid=t,n}),e.model.layer[t].iAnimationlist.reset(e.animations),overlays=_.filter(n.overlays,function(n){return n.pageid=e.model.id,n.parentpageid=e.model.get("pageid"),n.pagetype="LayerRef",n.layerid=t,n.path=e.model.layer[t].iOverlaylist.path,n.isSubOverlay=!0,n.isLayerOverlay=!0,interaction_view.model[n.iType]}),overlays=_.map(overlays,function(e){return new interaction_view.model[e.iType](e)}),e.model.layer[t].iOverlaylist.reset(overlays),e.model.layer[t].iOverlaylist.each(function(e){e.iview.setZindex()}),e.actions=_.map(n.actions,function(n){return n.pageid=e.model.id,n.parentpageid=e.model.get("pageid"),n.pagetype="LayerRef",n.layerid=t,n}),e.model.layer[t].iActionlist.reset(n.actions)}),e.startLayerLoad()},startLayerLoad:function(){var e=this;_.each(this.model.layer,function(t,n){t.ipreloadlist.length==0?e.model.iview.afterlayerload(n):t.ipreloadlist.preload()})}});return t}),define("interaction_view/model/layerref",["interaction_view/model/base","interaction_view/view/layer"],function(){interaction_view.model.LayerRef=interaction_view.model.Base.extend({defaults:{iType:"LayerRef",iLock:!0,iVisibility:!0,iCommon:null,iDetail:null,iParent:"",iChild:"",iOptions:{createfocus:!0},iParentModel:null,iDraggable:!0,iResizable:!0,iTemplate:null,iParentdiv:".interaction-view",iAutoindex:!1,iSync:!1,iZindex:"-1",iUrl:null,iAutofocus:!1,iKeyscontrol:!0,callback:null},setcollection:function(){iOverlaylist.get(this.id)||iOverlaylist.add(this)},setview:function(e){var t=this.get("iDetail"),n=this;n.layer={},this.filterlayers(),t.layer_ids&&t.layer_ids.length>0&&_.each(t.layer_ids,function(e){n.layer[e]={},n.layer[e].iOverlaylist=new interaction_view.collection.list,n.layer[e].iAnimationlist=new interaction_view.collection.Animation,n.layer[e].iActionlist=new interaction_view.collection.Action,n.layer[e].ipreloadlist=new interaction_view.collection.Preload,n.layer[e].subcontainer=n.layer[e].ipreloadlist.subcontainer=n.layer[e].iOverlaylist.subcontainer=n.layer[e].iAnimationlist.subcontainer=n.layer[e].iActionlist.subcontainer=n.id,n.layer[e].ipreloadlist.path=n.layer[e].iOverlaylist.path=n.layer[e].iAnimationlist.path=n.layer[e].iActionlist.path=n.createPath(e),n.layer[e].ipreloadlist.pageid=n.layer[e].iOverlaylist.pageid=n.layer[e].iAnimationlist.pageid=n.layer[e].iActionlist.pageid=n.id,n.layer[e].ipreloadlist.pagetype=n.layer[e].iOverlaylist.pagetype=n.layer[e].iAnimationlist.pagetype=n.layer[e].iActionlist.pagetype="LayerRef",n.layer[e].ipreloadlist.parentpageid=n.layer[e].iOverlaylist.parentpageid=n.layer[e].iAnimationlist.parentpageid=n.layer[e].iActionlist.parentpageid=n.get("pageid"),n.layer[e].ipreloadlist.layerid=n.layer[e].iOverlaylist.layerid=n.layer[e].iAnimationlist.layerid=n.layer[e].iActionlist.layerid=e}),this.setiview()},createPath:function(e){var t=interaction_view.createPath({path:this.get("path"),isSubOverlay:this.get("isSubOverlay"),page_id:this.get("pageid"),model:this,layer_id:e});return t},setiview:function(){this.iview=new interaction_view.view.LayerRef({model:this})},setsyncmodel:function(){},filterlayers:function(){var e=this.get("iDetail"),t=e.layer_ids;e.layer_ids&&e.layer_ids.length>0&&(t=_.filter(t,function(e){return interaction_view.ilayerlist.get(e)})),e.layer_ids=t,this.set("iDetail",e)}}),interaction_view.view.LayerRef=interaction_view.view.Base.extend({events:{},render:function(e){this.renderMask()},renderMask:function(){var e=this.getdetail();e.layer_ids&&e.layer_ids.length>0&&(this.$el.children(".Element").children().children().css({translate:[e.x,e.y]}),this.scrollview&&(this.$el.children(".Element").children().removeClass("is_exceededX"),this.$el.children(".Element").children().removeClass("is_exceededY"),this.scrollview.iScroll.scrollTo(e.x,e.y)))},preload:function(){var e=this.model.get("iDetail");e.layer_ids&&e.layer_ids.length>0&&this.sendToPreload({file:null})},loadLayer:function(e){var t=this.getdetail();this.layerCheckList=_.clone(t.layer_ids),this.firstlayer=t.layer_ids?t.layer_ids[0]:null,this.preloadmodel=e;var n=require("interaction_view/view/layer");n=_g.mvc.createView(n),this.layerview=new n({model:this.model}),this.layerview.afterload()},afterlayerload:function(e){console.log(e);if(this.preloadmodel){this.layerCheckList=_.reject(this.layerCheckList,function(t){return t==e}),this.model.layer[e].iOverlaylist.each(function(e){e.iview.preloaded||e.iview.afterpreload()}),this.model.layer[e].iActionlist.each(function(e){e.iview.render()});var t=this.model.toJSON().iDetail.iHidden||!1;this.layerCheckList.length==0&&(this.$el.addClass("hide").css("opacity",""),this.slideel=this.$el.find(".layer-content").first(),this.slideel.children(".layer-item").first().show(),this.slidestyle=this.slideel.attr("style"),this.playAnimation(),this.firstlayer&&this.model.get("iType")=="LayerRef"&&(this.model.layer[this.firstlayer].isLayer=!0),this.preloadmodel.set("loaded",!0),this.preloadmodel.page.ipreloadlist.preloadcheck(null,!0,this.model))}},playLayer:function(){this.firstlayer&&interaction_view.play(this.model.layer[this.firstlayer])},playAnimation:function(){var e=this,t=this.getdetail();this.$el.find(".layer-content").children().css("opacity",1);var n=this.getLayerContentSize(),r=this.getcommon();if(n.width==r.iWidth&&n.height==r.iHeight)return!1;this.setMaskSlipable({items:this.$el.find(".layer-content"),containment:this.$el.children(".Element").children(),contentel:this.$el.children(".Element").children().children(),content_x:t.x,content_y:t.y})},onExecuteBindingForLayerRef:function(e){var t=this,n=this.getMoveRange();if(e.type==1)return;e.cdirection||n.x>0&&this.scrollview&&this.scrollview.iScroll.scrollTo(-e.deltarate*n.x,this.getCurrentPosition().top),e.cdirection&&n.y>0&&this.scrollview&&this.scrollview.iScroll.scrollTo(this.getCurrentPosition().left,-e.deltarate*n.y)},getCurrentPosition:function(){if(this.$el.find(".layer-content").length>0){var e={left:0,top:0};return this.scrollview&&(e={left:this.scrollview.iScroll.x,top:this.scrollview.iScroll.y}),e}return{left:0,top:0}},getCurrentPositionRate:function(){var e=0,t=0,n=this.getMoveRange(),r=this.getCurrentPosition();return n.x&&(e=-r.left/n.x),n.y&&(t=-r.top/n.y),{left:e,top:t}},getLayerContentSize:function(){var e=this.getdetail(),t={};if(!e.layer_ids||e.layer_ids.length>0){var n=_.map(e.layer_ids,function(e){return interaction_view.ilayerlist.get(e).toJSON()});return t.width=_.max(_.pluck(n,"layer_width")),t.height=_.max(_.pluck(n,"layer_height")),t}return null},stoplayer:function(){var e=this,t=this.getdetail();t.layer_ids&&t.layer_ids.length>0&&_.each(t.layer_ids,function(t){e.model.layer[t].iAnimationlist.timeline&&e.model.layer[t].iAnimationlist.timeline.pause(0),e.model.layer[t].iOverlaylist.resetViewStatus(),interaction_view.bezierPatch&&interaction_view.bezierPatch(e.model.layer[t])})},resetlayer:function(){var e=this,t=this.getdetail();t.layer_ids&&t.layer_ids.length>0&&(_.each(t.layer_ids,function(t){e.model.layer[t].iAnimationlist.resetAnimationStatus(),e.model.layer[t].iOverlaylist.resetViewStatus()}),!this.model.bindingfixed&&this.slideel&&this.slideel.attr("style",this.slidestyle),e.currentIndex=0)},resetOtherStatus:function(){this.resetlayer(),this.model.get("iType")=="LayerRef"&&this.renderMask()},onShow:function(e){var t=this.getdetail(),n=this;t.layer_ids&&t.layer_ids.length>0&&_.each(t.layer_ids,function(r){e&&t.layer_ids.indexOf(r)==e?n.model.layer[r].iOverlaylist.each(function(e){e.iview.onShow()}):n.model.layer[r].iOverlaylist.each(function(e){e.iview.onShow()})})},onBeforeHide:function(e){var t=this.getdetail(),n=this;t.layer_ids&&t.layer_ids.length>0&&_.each(t.layer_ids,function(r){(!e||t.layer_ids.indexOf(r)!=e)&&n.model.layer[r].iOverlaylist.each(function(e){e.iview.onBeforeHide(),_.include(["RichText","Region"],e.get("iType"))&&e.iview.resetOtherStatus()})})},onHide:function(e){var t=this.getdetail(),n=this;t.layer_ids&&t.layer_ids.length>0&&_.each(t.layer_ids,function(r){(!e||t.layer_ids.indexOf(r)!=e)&&n.model.layer[r].iOverlaylist.each(function(e){e.iview.onHide()})})},onSizeAdaptChange:function(){this.$el.children(".Element").children(".layer-mask").css({width:this.originWidth,height:this.originHeight})}})}),define("interaction_view/model/layerslide",["interaction_view/model/layerref"],function(){interaction_view.model.LayerSlide=interaction_view.model.LayerRef.extend({defaults:{iType:"LayerSlide",iLock:!0,iVisibility:!0,iCommon:null,iDetail:null,iParent:"",iChild:"",iOptions:{createfocus:!0},iParentModel:null,iDraggable:!0,iResizable:!0,iTemplate:null,iParentdiv:".interaction-view",iAutoindex:!1,iSlideNumber:!0,isSlide:!0,iSync:!1,iZindex:"-1",iUrl:null,iAutofocus:!1,iKeyscontrol:!0,callback:null},setiview:function(){this.iview=new interaction_view.view.LayerSlide({model:this})}}),interaction_view.view.LayerSlide=interaction_view.view.LayerRef.extend({render:function(e){var t=this,n=this.getdetail();this.currentSlideIndex=null,this.model.on("slideTo",function(e){console.log(e);if(t.currentSlideIndex!=null&&t.currentSlideIndex==e)return!1;if(t.currentSlideIndex!=null&&t.currentSlideIndex!=e){var r=n.layer_ids[t.currentSlideIndex];interaction_view.stopPlay(t.model.layer[r])}if(t.preloaded){var i=n.layer_ids[e];if(!t.model.layer[i])return;t.model.layer[i].isLayer=!0,interaction_view.play(t.model.layer[i]),t.currentSlideIndex=e,t.model.layer[i].playFinished=!0}})},playAnimation:function(){var e=this,t=0,n=this.getdetail(),r=n.iSlidetype;this.delay=Number(n.iInterval)||2,this.autoplay=n.iAutoplay;var i=n.iRepeat?-1:0;this.iFade=n.iFade||0,this.iRewind=n.iRewind,this.timeline=new TimelineMax({paused:!0,repeat:i,onComplete:this.setRewind}),this.slideel=e.$el.children(".Element").find(".layer-content").first(),this.slidelength=n.layer_ids.length;if(this.slidelength<2)return!1;this.repeat=i,this.slipable=n.iSlipable,this.setTimeline(),this.autoplay?this.timeline&&(!this.$el.children(".Element").is(":hidden")||interaction_view.ismobile)&&this.timeline.play(0):this.setSlideDisplay(0),this.slipable?(this.control(),this.$el.addClass("hascontrols")):this.slideel&&this.slideel.on("click",function(){e.$el.children(".Element").trigger("click")})},playLayer:function(){this.autoplay&&this.timeline&&!this.$el.children(".Element").is(":hidden")&&this.timeline.play(0),this.slidelength>0&&this.model.trigger("slideTo",0)},setTimeline:function(){if(this.iFade=="Fade"||0)this.setFade();else if(this.iFade=="Slip")this.setSlip();else{if(this.iFade!="None")return;this.setNone()}this.slideel.children().first().css({opacity:1,left:0,top:0}).nextAll().css("opacity",0)},getSlipeInterval:function(e){},getLayerContentSize:function(){var e=this.getdetail(),t={};if(!e.layer_ids||e.layer_ids.length>0){var n=_.map(e.layer_ids,function(e){return interaction_view.ilayerlist.get(e).toJSON()});return t.width=_.max(_.pluck(n,"layer_width")),t.height=_.max(_.pluck(n,"layer_height")),t}return null},getStartPoint:function(e){return this.delay+(this.delay+.500002)*this.delay},getEndPoint:function(e){return(this.delay+.500002)*e+1e-5},getCurrentIndex:function(e){var t=this.timeline.duration(),n=t/this.slidelength;return parseInt(e/n,10)},testControl:function(e){var t=this,n=$(e).closest(".iView");if(n.hasClass("hasaction"))return!1;if(n){var r=n.attr("data-type");if(r=="Slide"||r=="CycleImage")if(n.attr("data-iSlipable"))return!1;return!0}return!0},resetOtherStatus:function(){this.resetlayer();var e=this,t=this.getdetail();if(!t.layer_ids||t.layer_ids.length==0)return;this.slideel.children().first().css({opacity:1,left:0,top:0}),this.autoplay=t.iAutoplay,e.currentIndex=0,e.currentSlideIndex=null,this.changeSlideNumber(),this.$el.children(".Element").removeClass("is_exceededX"),this.$el.children(".Element").removeClass("is_exceededY"),this.timeline&&(this.timeline.pause(1e-5),this.autoplay&&(!this.$el.children(".Element").is(":hidden")||interaction_view.ismobile)?this.timeline.play(0):this.setSlideDisplay(0))},getSlideLength:function(){var e=this.getdetail();return e.layer_ids?e.layer_ids.length:0}})}),define("interaction_view/model/Region",["interaction_view/model/base"],function(){interaction_view.model.Region=interaction_view.model.Base.extend({defaults:{iType:"Region",iLock:!0,iVisibility:!0,iCommon:{portait:{iStartx:400,iStarty:200,iWidth:200,iHeight:200},landscape:{iStartx:400,iStarty:200,iWidth:200,iHeight:200}},iDetail:{iAdapt:!1,iFullview:!1,iImg:null,iAnimation:[]},iParent:"",iChild:"",iOptions:{createfocus:!0},iParentModel:null,iDraggable:!0,iResizable:!0,iTemplate:null,iParentdiv:".interaction-view",iAutoindex:!1,iSync:!1,iZindex:"-1",iUrl:null,iAutofocus:!1,iKeyscontrol:!0,callback:null},setcollection:function(){iOverlaylist.get(this.id)||iOverlaylist.add(this)},setview:function(e){this.iview=new interaction_view.view.Region({model:this})},setsyncmodel:function(){}}),interaction_view.view.Region=interaction_view.view.Base.extend({events:{},render:function(e){interaction_view.setscrollnano(this.$el)}})}),define("interaction_view/model/binding",["interaction_view/model/base"],function(){interaction_view.model.Binding=interaction_view.model.Base.extend({defaults:{iType:"Binding",iLock:!0,iVisibility:!0,iCommon:{portait:{iStartx:400,iStarty:200,iWidth:200,iHeight:200},landscape:{iStartx:400,iStarty:200,iWidth:200,iHeight:200}},iDetail:{iAdapt:!1,iFullview:!1,iImg:null,iAnimation:[]},iParent:"",iChild:"",iOptions:{createfocus:!0},iParentModel:null,iDraggable:!0,iResizable:!0,iTemplate:null,iParentdiv:".interaction-view",iAutoindex:!1,iSync:!1,iZindex:"-1",iUrl:null,iAutofocus:!1,iKeyscontrol:!0,callback:null,iBackground:"rgba(62,189,255,0.5)",iResourcesProperties:[{id:"iImg",type:"single"}],iAnimationProperties:[{id:"iAnimation",type:"object"}]},setcollection:function(){iOverlaylist.get(this.id)||iOverlaylist.add(this)},setview:function(e){this.iview=new interaction_view.view.Binding({model:this})},setsyncmodel:function(){}}),interaction_view.view.Binding=interaction_view.view.Base.extend({events:{},renderDynamicElement:function(){},render:function(e){},preload:function(){},afterpreload:function(){this.model.pageid=this.model.get("pageid"),this.model.parentpageid=this.model.get("parentpageid");if(this.model.get("pagetype")=="LayerRef"){var e=this.model.get("parentpageid"),t=this.model.get("layerid"),n=interaction_view.ipagelist.getPage(e)||interaction_view.imasterlist.get(e);this.model.parentpage=n,this.model.page=n.iOverlaylist.get(this.model.pageid).layer[t]}else this.model.page=interaction_view.ipagelist.getPage(this.model.pageid)||interaction_view.imasterlist.get(this.model.pageid);var r=this,i=this.getdetail();this.bindings=i.iBindings;if(this.bindings.length>1){var s=this.getControlBinding();_.each(this.bindings,function(e){interaction_view.events.bindingEvents.push({id:e.id,page_id:e.page_id,direction:e.direction,func:function(e){r.executeBinding(r,e)}})})}this.preloaded=!0},getControlBinding:function(){return _.find(this.bindings,function(e){return e.isControl})?_.find(this.bindings,function(e){return e.isControl}):(this.bindings[0].isControl=!0,this.bindings[0])},getOperateBindings:function(){return _.reject(this.bindings,function(e){return e.isControl})},getBindingElement:function(e,t){var n;return interaction_view.ipagelist.getPage(e)||interaction_view.imasterlist.get(e)?n=interaction_view.ipagelist.getPage(e)||interaction_view.imasterlist.get(e):n=this.model.page,n.iOverlaylist.get(t)},getDirection:function(e,t){var n=this.getControlBinding();return t.id==n.id?e.direction?1:-1:e.id==n.id?t.direction?1:-1:t.direction==e.direction?1:-1},resetBindingStatus:function(){var e=this,t;_.each(this.bindings,function(n){var r=interaction_view.ipagelist.getElement(e.model.page,n.page_id,n.id);if(r)if(n.isControl)if(n.property=="offset"){var i=r.iview.getCurrentPositionRate();interaction_view.events.onBingChangeTo({type:0,page_id:r.get("pageid"),id:r.id,delta:-1,deltarate:i.left,cdirection:0}),interaction_view.events.onBingChangeTo({type:0,page_id:r.get("pageid"),id:r.id,delta:-1,deltarate:i.top,cdirection:1})}else r.iview.singletime?t=r.iview.singletime:t=1e-5,interaction_view.events.onBingChangeTo({type:1,page_id:r.get("pageid"),id:r.id,delta:t/r.iview.timeline.duration(),reset:!0});else n.property=="offset"&&(r.bindingfixed=!0)})},executeBinding:function(e,t){_.each(this.bindings,function(n){if(n.id==t.id)return;var r=e.getDirection(n,t),i=e.getBindingElement(n.page_id,n.id);if(i){var s=$.extend(!0,{},t);s.direction=r,s.delta=r*s.delta,s.deltarate=r==1?s.deltarate:e.getRevertRate(i,s.deltarate),s.revert=r==1?!1:!0,i.iview.onExecuteBinding(s)}})},getRevertRate:function(e,t){if(e.get("iType")=="LayerRef")return 1-t;var n=e.iview.slidelength,r=1-t;return r},resetStatus:function(){}})}),define("interaction_view/model/SubContainer",["interaction_view/model/base","interaction_view/view/subcontainer"],function(){interaction_view.model.SubContainer=interaction_view.model.Base.extend({defaults:{iType:"SubContainer",iLock:!0,iVisibility:!0,iCommon:{portait:{iStartx:400,iStarty:200,iWidth:200,iHeight:200},landscape:{iStartx:400,iStarty:200,iWidth:200,iHeight:200}},iDetail:{iAdapt:!1,iFullview:!1,iImg:null,iAnimation:[]},iParent:"",iChild:"",iOptions:{createfocus:!0},iParentModel:null,iDraggable:!0,iResizable:!0,iTemplate:null,iParentdiv:".interaction-view",iAutoindex:!1,iSync:!1,iZindex:"-1",iUrl:null,iAutofocus:!1,iKeyscontrol:!0,callback:null},setcollection:function(){iOverlaylist.get(this.id)||iOverlaylist.add(this)},setview:function(e){this.setSubOverlays(),this.patchGridSize(),this.setiview()},createPath:function(){var e=interaction_view.createPath({path:this.get("path"),isSubOverlay:this.get("isSubOverlay"),page_id:this.get("pageid"),model:this});return e},setiview:function(){this.iview=new interaction_view.view.SubContainer({model:this})},setsyncmodel:function(){},GridPatch:!0,patchGridSize:function(){if(!this.GridPatch)return;var e=this.get("iCommon"),t=this.get("iDetail"),n=this.get("suboverlays");e[iPageDirection].iWidth=(t.iCols+1)*t.iColspace+n[0].iCommon[iPageDirection].iWidth*t.iCols,e[iPageDirection].iHeight=(t.iRows+1)*t.iRowspace+n[0].iCommon[iPageDirection].iHeight*t.iRows,this.set("iCommon",e)},getSubOverlays:function(){var e=this.get("iCommon"),t=this.get("iDetail"),n=[],r=this.get("suboverlays"),s=r[0],o=t.iRows,u=t.iCols;for(i=0;i<o;i++)for(j=0;j<u;j++)overlay=$.extend(!0,{},s),overlay.id=overlay.id+i+j,overlay.iCommon[iPageDirection].iStartx=t.iColspace*(j+1)+j*overlay.iCommon[iPageDirection].iWidth,overlay.iCommon[iPageDirection].iStarty=t.iRowspace*(i+1)+i*overlay.iCommon[iPageDirection].iHeight,n.push(overlay);return n},createImageSubOverlay:function(e){var t=e.iFullview,n={iType:"Image",iDetail:{iMask:!1,iFullview:e.iFullview,title:e.iImg[0].title,ratiofixxed:!1,iHidden:!1,iImg:e.iImg,iAdapt:!1,iDisplay:e.iDisplay||0},iCommon:{portait:{iWidth:e.iWidth,iHeight:e.iHeight,iStartx:e.iStartx,iStarty:e.iStarty},landscape:{iWidth:e.iWidth,iHeight:e.iHeight,iStartx:e.iStartx,iStarty:e.iStarty}},id:"Img"+_g.uuid(),iHidden:e.iHidden||!1,GalleryIndex:e.index};return n},GridReverse:function(){var e=this.get("iDetail");return e.iSlidetype?!1:!0},getOverlayPositionX:function(e,t,n,r){return this.GridReverse()?t*(n+1)+n*e.iCommon[iPageDirection].iWidth:t*(r+1)+r*e.iCommon[iPageDirection].iWidth},getOverlayPositionY:function(e,t,n,r){return this.GridReverse()?t*(r+1)+r*e.iCommon[iPageDirection].iHeight:t*(n+1)+n*e.iCommon[iPageDirection].iHeight}}),interaction_view.view.SubContainer=interaction_view.view.Base.extend({events:{},render:function(){this.renderBackGroud()},subPreLoadCheck:function(e){},preload:function(){var e=this.model.get("iDetail");this.sendToPreload({file:null,subcontainer:!0,path:this.model.get("path"),isSubOverlay:this.model.get("isSubOverlay")})},afterSubOverlayPreload:function(){console.log("preloadok"),this.preloadmodel&&(this.model.iOverlaylist.each(function(e){e.iview.preloaded||e.iview.afterpreload()}),this.model.iActionlist.each(function(e){e.iview.render()}),this.preloadmodel.set("loaded",!0),this.preloadmodel.page.ipreloadlist.preloadcheck(null,!0,this.model)),interaction_view.ismobile&&_g.ui.isOverflowed(this.$el.children(".Element")).y&&this.$el.children(".Element").addClass("iMouseWheel disableMouseWheelY disableDragY"),this.otherAfterSubOverlayPreload&&this.otherAfterSubOverlayPreload()},allowScroll:!0,resetOtherStatus:function(){if(!this.allowScroll)return!1}})}),define("interaction_view/model/gallery",["interaction_view/model/SubContainer"],function(){interaction_view.model.Gallery=interaction_view.model.SubContainer.extend({defaults:{iType:"Gallery",iLock:!0,iVisibility:!0,iCommon:{portait:{iStartx:400,iStarty:200,iWidth:200,iHeight:200},landscape:{iStartx:400,iStarty:200,iWidth:200,iHeight:200}},iDetail:{iAdapt:!1,iFullview:!1,iImg:null,iAnimation:[]},iParent:"",iChild:"",iOptions:{createfocus:!0},iParentModel:null,iDraggable:!0,iResizable:!0,iTemplate:null,iParentdiv:".interaction-view",iAutoindex:!1,iSlideNumber:!0,iSync:!1,iZindex:"-1",iUrl:null,iAutofocus:!1,iKeyscontrol:!0,callback:null},setiview:function(){this.iview=new interaction_view.view.Gallery({model:this})},getSubOverlays:function(){var e=this.get("iDetail"),t=this.get("iCommon"),n=[],r=this.get("suboverlays"),s=r[0],o=e.iRows,u=e.iCols;e.iMode||(e.iSlidetype?o=100:u=100);if(this.GridReverse()){var a=o;o=u,u=a}var f=0,l=0;if(e.iImg&&e.iImg.length){for(i=0;;i++){if(f>=e.iImg.length)break;i==o&&(i=0,l+=1);for(j=0;j<u;j++){if(f>=e.iImg.length)break;overlay=$.extend(!0,{},s),overlay.id=overlay.id+i+j+f,overlay.parent_index=l,overlay.suboverlays[0].iDetail.iText=interaction_view.formatLabel({text:_g.string.getUrlNameWithOutExt(e.iImg[f].title),font_size:overlay.suboverlays[0].iDetail.font_size,text_color:overlay.suboverlays[0].iDetail.text_color,iPosition:overlay.suboverlays[0].iDetail.iPosition}),e.show_title!=undefined&&!e.show_title&&overlay.suboverlays.shift();var c=this.createImageSubOverlay({iImg:[e.iImg[f]],iFullview:e.iFullscreen,iWidth:s.iCommon[iPageDirection].iWidth,iHeight:s.iCommon[iPageDirection].iHeight,iStartx:0,iStarty:0,iDisplay:Number(e.iDisplay),index:e.iSlipable?f:null});overlay.suboverlays.unshift(c),overlay.iCommon[iPageDirection].iStartx=this.getOverlayPositionX(overlay,e.iColspace,i,j),overlay.iCommon[iPageDirection].iStarty=this.getOverlayPositionY(overlay,e.iRowspace,i,j),overlay.iCommon[iPageDirection].iStartx>t[iPageDirection].iWidth&&(e.overflow_x=!0),overlay.iCommon[iPageDirection].iStarty>t[iPageDirection].iHeight&&(e.overflow_y=!0),n.push(overlay),f+=1}e.overflow_length=i+1}e.overflow_x&&(e.overflow_x=s.iCommon[iPageDirection].iWidth*e.overflow_length+e.iColspace*(e.overflow_length+1)),e.overflow_y&&(e.overflow_y=s.iCommon[iPageDirection].iHeight*e.overflow_length+e.iRowspace*(e.overflow_length+1)),l+=1}return e.slidelength=l,this.set("iDetail",e),n},patchGridSize:function(){if(!this.GridPatch)return;var e=this.get("iCommon"),t=this.get("iDetail"),n=this.get("suboverlays");if(t.iMode||!t.iMode&&t.iSlidetype)e[iPageDirection].iWidth=(t.iCols+1)*t.iColspace+n[0].iCommon[iPageDirection].iWidth*t.iCols;if(t.iMode||!t.iMode&&!t.iSlidetype)e[iPageDirection].iHeight=(t.iRows+1)*t.iRowspace+n[0].iCommon[iPageDirection].iHeight*t.iRows;this.set("iCommon",e)}}),interaction_view.view.Gallery=interaction_view.view.SubContainer.extend({otherAfterSubOverlayPreload:function(){var e=this.getSlideLength(),t=this.getdetail(),n=t.iCols*t.iRows;t.iMode||(n=t.iImg?t.iImg.length:0);if(e){var r=this.$el.children(".Element").children().detach(),s=0;for(i=0;i<e;i++){this.$el.children(".Element").append('<div class="gallery-content" data-index="'+i+'"></div>');for(j=0;j<n;j++){var o=this.$el.children(".Element").children().eq(i);o.append(r[s]),s+=1}}this.setSlidePosition()}},getSlideLength:function(){var e=this.getdetail();return e.slidelength||0},setSlidePosition:function(){var e=this.getdetail(),t=this.getcommon();e.iMode?(this.$el.children(".Element").addClass("hasSlide"),this.$el.children(".Element").css({overflow:"hidden"}),this.$el.children(".Element").children().each(function(){var e=$(this).index();$(this).css({position:"absolute",width:"100%",height:"100%"})}),this.playAnimation()):e.iSlidetype?(this.$el.children(".Element").css({overflow:"hidden"}),this.$el.children(".Element").children().each(function(){var e=$(this).index();$(this).css({position:"absolute",left:0,top:e*t.iHeight,width:"100%",height:"100%"})}),this.galleryFlow().y&&(this.$el.children(".Element").addClass("iMouseWheel disableMouseWheelY disableDragY"),this.scrollview=new IScroll(this.$el.children(".Element")[0],{mouseWheel:!0,probeType:3,scrollX:!1,scrollY:!0,click:!0,wrapperWidth:t.iWidth,wrapperHeight:t.iHeight,scrollerWidth:t.iWidth,scrollerHeight:e.overflow_y}))):(this.$el.children(".Element").css({overflow:"hidden"}),this.$el.children(".Element").children().each(function(){var e=$(this).index();$(this).css({position:"absolute",left:e*t.iWidth,top:0,width:"100%",height:"100%"})}),this.galleryFlow().x&&(this.$el.children(".Element").addClass("iMouseWheel disableMouseWheelX disableDragX"),this.scrollview=new IScroll(this.$el.children(".Element")[0],{mouseWheel:!0,probeType:3,scrollX:!0,scrollY:!1,click:!0,wrapperWidth:t.iWidth,wrapperHeight:t.iHeight,scrollerWidth:e.overflow_x,scrollerHeight:t.iHeight})))},playAnimation:function(){var e=this,t=0,n=this.getdetail(),r=n.iSlidetype;this.delay=Number(n.iInterval)||2,this.autoplay=n.iAutoplay,this.iFade="Slip";var i=0;this.timeline=new TimelineMax({paused:!0,repeat:i,onComplete:this.setRewind}),this.slideel=e.$el.children(".Element").first(),this.slidelength=this.getSlideLength(),this.repeat=i,this.iRewind=n.iRewind,this.slipable=!0,this.setTimeline(),this.autoplay?this.$el.children(".Element").is(":hidden")||this.timeline.play(0):this.setSlideDisplay(0),this.onChangeSlideTo(0),this.slipable&&(this.control(),this.autoplay||this.$el.attr("data-iSlipable",!0))},setTimeline:function(){if(this.iFade=="Fade"||0)this.setFade();else if(this.iFade=="Slip")this.setSlip();else{if(this.iFade!="None")return;this.setNone()}this.slideel.children().first().css({opacity:1,left:0,top:0}).nextAll().css("opacity",0)},testControl:function(){return!0},preview_left:function(e){e>0&&this.model.iOverlaylist.at(e-1).iOverlaylist.at(0).iview.$el.children(".Element").trigger("click")},preview_right:function(e){e<this.model.iOverlaylist.length-1&&this.model.iOverlaylist.at(e+1).iOverlaylist.at(0).iview.$el.children(".Element").trigger("click")},galleryFlow:function(){var e={x:!1,y:!1},t=this.getcommon(),n=this.getdetail();return n.overflow_x&&(e.x=!0),n.overflow_y&&(e.y=!0),e},resetOtherStatus:function(){if(!this.allowScroll)return!1;this.$el.children(".Element").removeClass("is_exceededX"),this.$el.children(".Element").removeClass("is_exceededY")}})}),define("interaction_view/model/Grid",["interaction_view/model/gallery"],function(){interaction_view.model.Grid=interaction_view.model.Gallery.extend({defaults:{iType:"Grid",iLock:!0,iVisibility:!0,iCommon:{portait:{iStartx:400,iStarty:200,iWidth:200,iHeight:200},landscape:{iStartx:400,iStarty:200,iWidth:200,iHeight:200}},iDetail:{iAdapt:!1,iFullview:!1,iImg:null,iAnimation:[]},iParent:"",iChild:"",iOptions:{createfocus:!0},iParentModel:null,iDraggable:!0,iResizable:!0,iTemplate:null,iParentdiv:".interaction-view",iAutoindex:!1,iSync:!1,iZindex:"-1",iUrl:null,iAutofocus:!1,iKeyscontrol:!0,callback:null},getSubOverlays:function(){var e=this.get("iDetail"),t=this.get("iCommon"),n=[],r=this.get("suboverlays"),s=r[0],o=e.iRows,u=e.iCols,a=0,f=0;for(i=0;i<o;i++)for(j=0;j<u;j++)overlay=$.extend(!0,{},s),overlay.id=overlay.id+i+j+a,overlay.parent_index=f,overlay.suboverlays=_.map(overlay.suboverlays,function(t){if(t.iType=="TextLabel"||t.iType=="BookButton")t.iDetail.iText=interaction_view.formatLabel({text:t.iDetail.iText,font_size:t.iDetail.font_size,text_color:t.iDetail.text_color,iPosition:t.iDetail.iPosition,radius:t.iDetail.corner_radius,border_color:t.iDetail.border_color,bg_color:t.iDetail.bg_color,border_size:t.iDetail.border_size});return t.iType=="Image"&&(t.iDetail.iDisplay=e.iDisplay),t}),overlay.suboverlays=_.reject(overlay.suboverlays,function(t){if(!e.show_title&&t.iDetail.iValue=="title")return!0;if(!e.show_description&&t.iDetail.iValue=="description")return!0}),overlay.iCommon[iPageDirection].iStartx=this.getOverlayPositionX(overlay,e.iColspace,i,j),overlay.iCommon[iPageDirection].iStarty=this.getOverlayPositionY(overlay,e.iRowspace,i,j),overlay.iCommon[iPageDirection].iStartx>t[iPageDirection].iWidth&&(e.overflow_x=!0),overlay.iCommon[iPageDirection].iStarty>t[iPageDirection].iHeight&&(e.overflow_y=!0),n.push(overlay),a+=1;return e.slidelength=f,this.set("iDetail",e),n},setiview:function(){this.iview=new interaction_view.view.Grid({model:this})}}),interaction_view.view.Grid=interaction_view.view.Gallery.extend({allowScroll:!1})}),define("interaction_view/model/Cell",["interaction_view/model/SubContainer"],function(){interaction_view.model.Cell=interaction_view.model.SubContainer.extend({defaults:{iType:"Cell",iLock:!0,iVisibility:!0,iCommon:{portait:{iStartx:400,iStarty:200,iWidth:200,iHeight:200},landscape:{iStartx:400,iStarty:200,iWidth:200,iHeight:200}},iDetail:{},iParent:"",iChild:"",iOptions:{createfocus:!0},iParentModel:null,iDraggable:!0,iResizable:!0,iTemplate:null,iParentdiv:".interaction-view",iAutoindex:!1,iSync:!1,iZindex:"-1",iUrl:null,iAutofocus:!1,iKeyscontrol:!0,callback:null,isStatic:!0},setiview:function(){this.iview=new interaction_view.view.Cell({model:this})},GridPatch:!1,getSubOverlays:function(){var e=this.get("iDetail"),t=[],n=this.get("suboverlays");return n}}),interaction_view.view.Cell=interaction_view.view.SubContainer.extend({allowScroll:!1})}),define("interaction_view/model/TextLabel",["interaction_view/model/base"],function(){interaction_view.model.TextLabel=interaction_view.model.Base.extend({defaults:{iType:"TextLabel",iLock:!0,iVisibility:!0,iCommon:{portait:{iStartx:400,iStarty:200,iWidth:200,iHeight:200},landscape:{iStartx:400,iStarty:200,iWidth:200,iHeight:200}},iDetail:{iAdapt:!1,iFullview:!1,iImg:null,iAnimation:[]},iParent:"",iChild:"",iOptions:{createfocus:!0},iParentModel:null,iDraggable:!0,iResizable:!0,iTemplate:null,iParentdiv:".interaction-view",iAutoindex:!1,iSync:!1,iZindex:"-1",iUrl:null,iAutofocus:!1,iKeyscontrol:!0,callback:null},setcollection:function(){iOverlaylist.get(this.id)||iOverlaylist.add(this)},setview:function(e){this.iview=new interaction_view.view.TextLabel({model:this})},setsyncmodel:function(){}}),interaction_view.view.TextLabel=interaction_view.view.Base.extend({events:{},render:function(e){var t=this.model.get("iDetail")}})}),define("interaction_view/model/TabBar",["interaction_view/model/SubContainer"],function(){interaction_view.model.TabBar=interaction_view.model.SubContainer.extend({defaults:{iType:"TabBar",iLock:!0,iVisibility:!0,iCommon:{portait:{iStartx:400,iStarty:200,iWidth:200,iHeight:200},landscape:{iStartx:400,iStarty:200,iWidth:200,iHeight:200}},iDetail:{},iParent:"",iChild:"",iOptions:{createfocus:!0},iParentModel:null,iDraggable:!0,iResizable:!0,iTemplate:null,iParentdiv:".interaction-view",iAutoindex:!1,iSync:!1,iZindex:"-1",iUrl:null,iAutofocus:!1,iKeyscontrol:!0,callback:null},setiview:function(){this.iview=new interaction_view.view.TabBar({model:this})},GridPatch:!1,getSubOverlays:function(){var e=this.get("iDetail"),t=[],n=this.get("suboverlays");return n=_.map(n,function(e){return e.isTabBarButton=!0,e}),n}}),interaction_view.view.TabBar=interaction_view.view.SubContainer.extend({allowScroll:!1})}),define("interaction_view/model/SearchInput",["interaction_view/model/base"],function(){interaction_view.model.SearchInput=interaction_view.model.Base.extend({defaults:{iType:"SearchInput",iLock:!0,iVisibility:!0,iCommon:{portait:{iStartx:400,iStarty:200,iWidth:200,iHeight:200},landscape:{iStartx:400,iStarty:200,iWidth:200,iHeight:200}},iDetail:{},iParent:"",iChild:"",iOptions:{createfocus:!0},iParentModel:null,iDraggable:!0,iResizable:!0,iTemplate:null,iParentdiv:".interaction-view",iAutoindex:!1,iSync:!1,iZindex:"-1",iUrl:null,iAutofocus:!1,iKeyscontrol:!0,callback:null},setcollection:function(){iOverlaylist.get(this.id)||iOverlaylist.add(this)},setview:function(e){this.iview=new interaction_view.view.SearchInput({model:this})},setsyncmodel:function(){}}),interaction_view.view.SearchInput=interaction_view.view.Base.extend({events:{},render:function(e){}})}),define("text!interaction_view/template/Tree_content.js",[],function(){return'<div class="treeview category-bookshelf inited">\n                <ul>\n                  <li>\n                    <div class="wraparea" style="border-bottom: 1px solid <%=iDetail.line_color%>;"><h4><a href="#" style="color:<%=iDetail.text_color%>;">所有</a></h4></div>\n                  </li>\n                  <li>\n                    <div class="wraparea" style="border-bottom: 1px solid <%=iDetail.line_color%>;"><h4><a href="#" style="color:<%=iDetail.text_color%>;">未分类</a></h4></div>\n                  </li>\n                  <li class="hasmenu unfold">\n                    <div class="wraparea" style="border-bottom: 1px solid <%=iDetail.line_color%>;"><h4><a href="#" style="color:<%=iDetail.text_color%>;">分类 1</a></h4><div class="hitarea"></div></div>\n                    <ul>\n                      <li class="active">\n                        <div class="wraparea" style="border-bottom: 1px solid <%=iDetail.line_color%>;background:<%=iDetail.selected_color%>;"><h4><a href="#" style="color:<%=iDetail.text_color%>;">分类 1.1</a></h4></div>\n                      </li>\n                      <li>\n                        <div class="wraparea" style="border-bottom: 1px solid <%=iDetail.line_color%>;"><h4><a href="#" style="">分类 1.2</a></h4></div>\n                      </li>\n                      <li>\n                        <div class="wraparea" style="border-bottom: 1px solid <%=iDetail.line_color%>;"><h4><a href="#" style="color:<%=iDetail.text_color%>;">分类 1.3</a></h4></div>\n                      </li>\n                    </ul>\n                  </li>\n                  <li class="hasmenu unfold">\n                    <div class="wraparea" style="border-bottom: 1px solid <%=iDetail.line_color%>;"><h4><a href="#" style="color:<%=iDetail.text_color%>;">分类 2</a></h4><div class="hitarea"></div></div>\n                    <ul>\n                      <li>\n                        <div class="wraparea" style="border-bottom: 1px solid <%=iDetail.line_color%>;"><h4><a href="#" style="color:<%=iDetail.text_color%>;">分类 2.1</a></h4></div>\n                      </li>\n                      <li>\n                        <div class="wraparea" style="border-bottom: 1px solid <%=iDetail.line_color%>;"><h4><a href="#" style="color:<%=iDetail.text_color%>;">分类 2.2</a></h4></div>\n                      </li>\n                    </ul>\n                  </li>\n                </ul>\n              </div>'}),define("interaction_view/model/Tree",["interaction_view/model/base","text!interaction_view/template/Tree_content.js"],function(){var e=require("text!interaction_view/template/Tree_content.js");interaction_view.model.Tree=interaction_view.model.Base.extend({defaults:{iType:"Tree",iLock:!0,iVisibility:!0,iCommon:{portait:{iStartx:400,iStarty:200,iWidth:200,iHeight:200},landscape:{iStartx:400,iStarty:200,iWidth:200,iHeight:200}},iDetail:{},iParent:"",iChild:"",iOptions:{createfocus:!0},iParentModel:null,iDraggable:!0,iResizable:!0,iTemplate:null,iParentdiv:".interaction-view",iAutoindex:!1,iSync:!1,iZindex:"-1",iUrl:null,iAutofocus:!1,iKeyscontrol:!0,callback:null},setcollection:function(){iOverlaylist.get(this.id)||iOverlaylist.add(this)},setview:function(e){this.iview=new interaction_view.view.Tree({model:this})},setsyncmodel:function(){}}),interaction_view.view.Tree=interaction_view.view.Base.extend({events:{},render:function(t){var n=this.getdetail();if(!n.is_expandable)this.$el.children(".Element").html(_.template(e,this.model.toJSON()));else{var r='<img src="'+n.iImg+'" width="41px" height="38px"><img>';this.$el.children(".Element").html(r)}}})}),define("interaction_view/model/PageIndex",["interaction_view/model/SubContainer"],function(){interaction_view.model.PageIndex=interaction_view.model.SubContainer.extend({defaults:{iType:"PageIndex",iLock:!0,iVisibility:!0,iCommon:{portait:{iStartx:400,iStarty:200,iWidth:200,iHeight:200},landscape:{iStartx:400,iStarty:200,iWidth:200,iHeight:200}},iDetail:{iAdapt:!1,iFullview:!1,iImg:null,iAnimation:[]},iParent:"",iChild:"",iOptions:{createfocus:!0},iParentModel:null,iDraggable:!0,iResizable:!0,iTemplate:null,iParentdiv:".interaction-view",iAutoindex:!1,iSync:!1,iZindex:"-1",iUrl:null,iAutofocus:!1,iKeyscontrol:!0,callback:null},setiview:function(){this.iview=new interaction_view.view.PageIndex({model:this})},getSubOverlays:function(){var e=this.get("iDetail"),t=this.get("iCommon"),n=[],r=this.get("suboverlays"),s=r[0],o=e.iRows,u=e.iCols,a=0;this.indexpages=interaction_view.foredit?iPagelist.getIndexPages():interaction_view.ipagelist.getIndexPages();if(this.indexpages.length){for(i=0;;i++){if(a>=this.indexpages.length)break;for(j=0;j<u;j++){if(a>=this.indexpages.length)break;overlay=$.extend(!0,{},s),overlay.id=overlay.id+i+j,overlay.suboverlays[1].iDetail.iText=interaction_view.formatLabel({text:this.indexpages[a].get("title"),font_size:overlay.suboverlays[1].iDetail.font_size,text_color:overlay.suboverlays[1].iDetail.text_color,iPosition:overlay.suboverlays[0].iDetail.iPosition});var f=this.indexpages[a].get("nav");overlay.suboverlays[0].iDetail.iImg=f&&f.thumbnail?[f]:[],overlay.suboverlays[0].iDetail.iDisplay=1,this.get("iDetail").show_thumb||overlay.suboverlays.shift(),this.get("iDetail").show_title||overlay.suboverlays.shift(),overlay.iCommon[iPageDirection].iStartx=e.iColspace*(j+1)+j*overlay.iCommon[iPageDirection].iWidth,overlay.iCommon[iPageDirection].iStarty=e.iRowspace*(i+1)+i*overlay.iCommon[iPageDirection].iHeight,n.push(overlay),a+=1}}e.overflow_y=(this.indexpages.length+1)*e.iRowspace+overlay.iCommon[iPageDirection].iHeight*this.indexpages.length,e.overflow_y=e.overflow_y>t[iPageDirection].iHeight?e.overflow_y:null,this.set("iDetail",e,{silent:!0})}return n},patchGridSize:function(){if(!this.GridPatch)return;var e=this.get("iCommon"),t=this.get("iDetail");t.iRows=this.indexpages.length;var n=this.get("suboverlays");e[iPageDirection].iWidth=(t.iCols+1)*t.iColspace+n[0].iCommon[iPageDirection].iWidth*t.iCols;var r=(t.iRows+1)*t.iRowspace+n[0].iCommon[iPageDirection].iHeight*t.iRows;this.set("iCommon",e),this.set("iDetail",t)}}),interaction_view.view.PageIndex=interaction_view.view.SubContainer.extend({otherAfterSubOverlayPreload:function(){var e=this,t=this.model.indexpages;this.$el.children(".Element").find("[data-type=Cell]").each(function(){var e=t[$(this).index()].id;$(this).children(".Element").css({cursor:"pointer"});if(interaction_view.foredit)return;$(this).children(".Element").on("click",function(){presentation.gotopage(e)})});var n=this.getdetail(),r=this.getcommon();n.overflow_y&&(this.$el.children(".Element").addClass("iMouseWheel disableMouseWheelY disableDragY"),this.$el.children(".Element").wrapInner('<div class="iContent"></div>'),this.scrollview=new IScroll(this.$el.children(".Element")[0],{mouseWheel:!0,probeType:3,scrollX:!1,scrollY:!0,click:!0,wrapperWidth:r.iWidth,wrapperHeight:r.iHeight,scrollerWidth:r.iWidth,scrollerHeight:n.overflow_y}))}})}),define("text!interaction_view/template/offline_info.js",[],function(){return'<div class="offline-shadow" style="background: rgba(218,218,218,0.7);left:0;top:0;width:100%;height:100%;position:absolute;display: block;">\n <div class="offline-text" style="line-height:<%=iCommon[iPageDirection].iHeight%>px;text-align: center;">\n   <i class="icon-warning-sign icon-4x" style="display: inline-block;">\n    <br>\n    <span style="background: #444444;color: #FFFFFF;padding: 8px;font-size: 14px;">请在联网的状态下使用</span>\n   </i>\n </div>\n</div>\n '}),define("interaction_view/model/webcontent",["interaction_view/model/base","text!interaction_view/template/offline_info.js"],function(){var e=require("text!interaction_view/template/offline_info.js");interaction_view.model.WebContent=interaction_view.model.Base.extend({defaults:{iType:"WebContent",iLock:!0,iVisibility:!0,iCommon:{portait:{iStartx:400,iStarty:200,iWidth:200,iHeight:200},landscape:{iStartx:400,iStarty:200,iWidth:200,iHeight:200}},iDetail:{},iParent:"",iChild:"",iOptions:{createfocus:!0},iParentModel:null,iDraggable:!0,iResizable:!0,iTemplate:null,iParentdiv:".interaction-view",iAutoindex:!1,iSync:!1,iZindex:"-1",iUrl:null,iAutofocus:!1,iKeyscontrol:!0,callback:null},setcollection:function(){iOverlaylist.get(this.id)||iOverlaylist.add(this)},setview:function(e){this.iview=new interaction_view.view.WebContent({model:this})},setsyncmodel:function(){}}),interaction_view.view.WebContent=interaction_view.view.Base.extend({events:{},render:function(e){var t=this,n=interaction_view.getWebContentSrc(this.getdetail());n&&n.content&&this.$el.children(".Element").children("iframe")[0].contentWindow.document.write(n.content);var r=this.getdetail();r.iOnline&&(interaction_view.isOnline||(interaction_view.isOnline==null?_g.device.online("http://www.epub360.com/staticfs/diazo/img/favicon.png",function(){interaction_view.isOnline=!0},function(){interaction_view.isOnline=!1,t.renderOfflineInfo()}):t.renderOfflineInfo()))},renderOfflineInfo:function(){this.$el.children(".Element").append(_.template(e,this.model.toJSON()))}})}),define("interaction_view/model/formview",["interaction_view/model/webcontent"],function(){interaction_view.model.FormView=interaction_view.model.WebContent.extend({defaults:{iType:"FormView",iLock:!0,iVisibility:!0,iCommon:{portait:{iStartx:400,iStarty:200,iWidth:200,iHeight:200},landscape:{iStartx:400,iStarty:200,iWidth:200,iHeight:200}},iDetail:{},iParent:"",iChild:"",iOptions:{createfocus:!0},iParentModel:null,iDraggable:!0,iResizable:!0,iTemplate:null,iParentdiv:".interaction-view",iAutoindex:!1,iSync:!1,iZindex:"-1",iUrl:null,iAutofocus:!1,iKeyscontrol:!0,callback:null},setcollection:function(){iOverlaylist.get(this.id)||iOverlaylist.add(this)},setview:function(e){this.iview=new interaction_view.view.FormView({model:this})},setsyncmodel:function(){}}),interaction_view.view.FormView=interaction_view.view.Base.extend({resetOtherStatus:function(){},onSizeAdaptChange:function(){this.$el.children(".Element").children("iframe").css({width:this.originWidth,height:this.originHeight})},otherOnShow:function(){}})}),define("interaction_view/model/AC",["interaction_view/model/audio","text!interaction_view/template/audiocontrol.js","_g/slider"],function(){var e=require("text!interaction_view/template/audiocontrol.js");interaction_view.model.AnimationControl=interaction_view.model.Audio.extend({defaults:{iType:"AnimationControl",iLock:!0,iVisibility:!0,iCommon:{portait:{iStartx:400,iStarty:200,iWidth:200,iHeight:200},landscape:{iStartx:400,iStarty:200,iWidth:200,iHeight:200}},iDetail:{iAdapt:!1,iFullview:!1,iImg:null,iAnimation:[]},iParent:"",iChild:"",iOptions:{createfocus:!0},iParentModel:null,iDraggable:!0,iResizable:!0,iTemplate:null,iParentdiv:".interaction-view",iAutoindex:!1,iSync:!1,iZindex:"-1",iUrl:null,iAutofocus:!1,iKeyscontrol:!0,callback:null,iBackground:"rgba(62,189,255,0.5)",iResourcesProperties:[{id:"iImg",type:"single"}],iAnimationProperties:[{id:"iAnimation",type:"object"}]},setcollection:function(){iOverlaylist.get(this.id)||iOverlaylist.add(this)},setview:function(e){this.iview=new interaction_view.view.AnimationControl({model:this})},setsyncmodel:function(){}}),interaction_view.view.AnimationControl=interaction_view.view.Audio.extend({bindSliderControl:function(){var e=this;this.$el.find(".audio-control").css("cursor","pointer"),this.$el.find(".audio-control").on("click",function(){return $(this).hasClass("status-play")||$(this).hasClass("status-pause")&&e.sliderstop(),!1})},render:function(t){var n=this,r=this.getdetail();r.iControlType==2&&r.animations.length&&(this.$el.children(".Element").append(_.template(e,this.model.toJSON())),this.$el.removeClass("hide")),r.animations.length&&interaction_view.events.push({page_id:this.iPageId,func:function(){n.renderAnimationControl()}})},renderAnimationControl:function(){var e=this.getdetail(),t=e.animations;t&&(view.timeline=interaction_view.generateTimeline({onStart:null,animations:t,iPage_id:this.model.iPage_id,page:this.model.page})),e.iAutoplay&&view.timeline.play(0)},setOtherDisplay:function(){var e=this.getdetail(),t=this;e.iControlType==2&&e.animations.length&&(this.slider=new _g.slider({containment:this.$el,onChange:function(e){console.log("change")}}),this.bindSliderControl())},preload:function(){},resetOtherStatus:function(){this.timeline&&this.timeline.pause(0),this.slider&&(this.sliderstop(),this.onSliderChange(0))}})}),define("interaction_view/model/shape",["interaction_view/model/base"],function(){interaction_view.model.Shape=interaction_view.model.Base.extend({defaults:{iType:"Shape",iLock:!0,iVisibility:!0,iCommon:{portait:{iStartx:400,iStarty:200,iWidth:100,iHeight:100},landscape:{iStartx:400,iStarty:200,iWidth:100,iHeight:100}},iDetail:{title:"",type:"circle",bg_opacity:0,bg_color:"#FFFFFF",rotate:90,iSvg:'<svg width="100%" height="100%" stroke="black" stroke-width="1" stroke-opacity="1" fill="red" fill-opacity="0.1" version="1.1" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="50" r="50"/></svg>',iImg:[{origin:"http://qn.media.epub360.com/materials/origin/f62b8741244895a7ec91abe865b041e7_origin.png",picture:"http://qn.media.epub360.com/materials/origin/f62b8741244895a7ec91abe865b041e7_origin.png",thumb_height:40,preview:'<img src="http://qn.media.epub360.com/materials/origin/f62b8741244895a7ec91abe865b041e7_origin.png"/>',uid:131779,thumb_width:320,title:"RichText_20140709160314864337",thumb_preview:'<img src="http://qn.media.epub360.com/materials/origin/f62b8741244895a7ec91abe865b041e7_origin.png"/>',type:"Image",created:"2014-07-09 16:03:14",thumbnail:"http://qn.media.epub360.com/materials/origin/f62b8741244895a7ec91abe865b041e7_origin.png",height:40,width:40,id:"Resources_4561404892960557",origin_height:40,origin_width:40,size:"2.0 KB",resourceattr:"iImg",dimension:0,elementid:"140489293611260",description:""}],iStaticImage:!1},iParent:"",iChild:"",iOptions:{createfocus:!0},iParentModel:null,iDraggable:!0,iResizable:!0,iTemplate:null,iParentdiv:".interaction-view",iAutoindex:!1,iSync:!1,iZindex:"-1",iUrl:null,iAutofocus:!1,iKeyscontrol:!0,callback:null},setcollection:function(){iOverlaylist.get(this.id)||iOverlaylist.add(this)},setview:function(e){this.iview=new interaction_view.view.Shape({model:this})},setsyncmodel:function(){}}),interaction_view.view.Shape=interaction_view.view.Base.extend({events:{},render:function(e){var t=this;this.rotateShape(),this.isRotated=!0,t.getdetail().type=="line"&&this.isRotated&&$.zoom&&$(window).resize(function(){if(interaction_view.currentPage!=t.model.page.id)return;t.$el.find("svg").height(t.$el.find("svg").attr("height"));var e=t.$el.find("svg").height();$.zoom<.65&&$.zoom>=.44&&e<30?t.$el.find("svg").height(30):$.zoom<.44&&$.zoom>=.33&&e<40?t.$el.find("svg").height(40):$.zoom<.33&&$.zoom>=.26&&e<50?t.$el.find("svg").height(50):$.zoom<.26&&$.zoom>=.22&&e<60?t.$el.find("svg").height(60):$.zoom<.22&&$.zoom>=.19&&e<70?t.$el.find("svg").height(70):$.zoom<.19&&$.zoom>=.17&&e<80?t.$el.find("svg").height(80):$.zoom<.17&&e<100&&t.$el.find("svg").height(100)})},resetOtherStatus:function(){this.isRotated||this.rotateShape(),this.isRotated=!1},otherOnShow:function(){this.resetOtherStatus()},rotateShape:function(){TweenMax.to(this.$el.find(".iShape.Element"),0,{rotation:parseInt(this.getdetail().rotate)})}})}),define("interaction_view/model/BookButton",["interaction_view/model/TextLabel"],function(){interaction_view.model.BookButton=interaction_view.model.TextLabel.extend({defaults:{iType:"BookButton",iVisibility:!0,iCommon:null,iDetail:null,iOptions:{createfocus:!0},iParentModel:null,iDraggable:!0,iResizable:!0,iTemplate:null,iParentdiv:".interaction-view",iAutoindex:!1,iSync:!1,iZindex:"-1",iUrl:null,iAutofocus:!1,iKeyscontrol:!0},setiview:function(){this.iview=new interaction_view.view.BookButton({model:this})}}),interaction_view.view.BookButton=interaction_view.view.TextLabel.extend({allowScroll:!1})}),define("interaction_view/model/dragdrop",["interaction_view/model/base"],function(){interaction_view.model.DragDrop=interaction_view.model.Base.extend({defaults:{iType:"DragDrop",iVisibility:!0,iCommon:null,iDetail:null,iOptions:{createfocus:!0},iParentModel:null,iDraggable:!0,iResizable:!0,iTemplate:null,iParentdiv:".interaction-view",iAutoindex:!1,iSync:!1,iZindex:"-1",iUrl:null,iAutofocus:!1,iKeyscontrol:!0},setcollection:function(){iOverlaylist.get(this.id)||iOverlaylist.add(this)},setview:function(e){this.iview=new interaction_view.view.DragDrop({model:this})},setsyncmodel:function(){}}),interaction_view.view.DragDrop=interaction_view.view.Base.extend({events:{},render:function(e){},preload:function(){this.preloaded=!1,this.checkImglist=[];var e=this.getdetail(),t=[null,null];if(e.iconNormal&&e.iconNormal[0]){this.checkImglist.push(e.iconNormal[0].picture);var n=this.sendToPreload({file:e.iconNormal[0].picture,path:this.model.get("path"),isSubOverlay:this.model.get("isSubOverlay")});t[0]=n.id}if(e.iconActive&&e.iconActive[0]){this.checkImglist.push(e.iconActive[0].picture);var n=this.sendToPreload({file:e.iconActive[0].picture,path:this.model.get("path"),isSubOverlay:this.model.get("isSubOverlay")});t[1]=n.id}this.model.set("preload_id",t)},checkImgload:function(e){return this.checkImglist=_.reject(this.checkImglist,function(t){return t==e}),this.checkImglist.length==0?!0:!1},afterpreload:function(e){if(e&&this.preloaded)return;e&&!this.preloaded&&(this.preloaded=this.checkImgload(e)),this.preloaded&&(this.setZindex(),this.setElementDisplay(),this.setOtherDisplay(),this.copyelstyle=this.$el.attr("style"),this.copyelementstyle=this.$el.children(".iElement").attr("style"))},setOtherDisplay:function(){this.active=!1,this.Status=0},changeStatus:function(e){var t=this.getdetail(),n=this;typeof e!="undefined"&&(n.active=e),n.active?(n.$el.find("img.iconActive").hide(),n.$el.find("img.iconNormal").show(),n.active=!1):(n.$el.find("img.iconActive").show(),n.$el.find("img.iconNormal").hide(),n.active=!0)},resetOtherStatus:function(){var e=this;e.resetButtonStatus(),e.DragDropGroups=[],$.each(e.model.page.iOverlaylist.where({iType:"DragDropGroup"}),function(t,n){_.include(n.iview.getdetail().element_ids,e.model.id)&&e.DragDropGroups.push(n)})},resetButtonStatus:function(){this.$el.find("img.iconActive").hide(),this.$el.find("img.iconNormal").show(),this.active=!1}})}),define("interaction_view/model/dragdropgroup",["interaction_view/model/base"],function(){interaction_view.model.DragDropGroup=interaction_view.model.Base.extend({defaults:{iType:"DragDropGroup",iVisibility:!0,iCommon:null,iDetail:{iAdapt:!1,iFullview:!1,iImg:null,iAnimation:[]},iOptions:{createfocus:!0},iParentModel:null,iDraggable:!1,iResizable:!1,iTemplate:null,iParentdiv:".interaction-view",iAutoindex:!1,iSync:!1,iZindex:"-1",iUrl:null,iAutofocus:!1,iKeyscontrol:!0},setcollection:function(){iOverlaylist.get(this.id)||iOverlaylist.add(this)},setview:function(e){this.iview=new interaction_view.view.DragDropGroup({model:this})},setsyncmodel:function(){}}),interaction_view.view.DragDropGroup=interaction_view.view.Base.extend({events:{},renderDynamicElement:function(){},render:function(e){},preload:function(){},afterpreload:function(){this.model.pageid=this.model.get("pageid"),this.model.parentpageid=this.model.get("parentpageid");if(this.model.get("pagetype")=="LayerRef"){var e=this.model.get("parentpageid"),t=this.model.get("layerid"),n=interaction_view.ipagelist.getPage(e)||interaction_view.imasterlist.get(e);this.model.parentpage=n,this.model.page=n.iOverlaylist.get(this.model.pageid).layer[t]}else this.model.page=interaction_view.ipagelist.getPage(this.model.pageid)||interaction_view.imasterlist.get(this.model.pageid);this.preloaded=!0}})}),define("interaction_view/model/variable",["interaction_view/model/base"],function(){interaction_view.model.Variable=interaction_view.model.Base.extend({defaults:{},setcollection:function(){iOverlaylist.get(this.id)||iOverlaylist.add(this)},setview:function(e){this.iview=new interaction_view.view.Variable({model:this})},setsyncmodel:function(){}}),interaction_view.view.Variable=interaction_view.view.Base.extend({events:{},resetOtherStatus:function(){this.showRandom(),this.updateText(this.origin)},updateText:function(e){var t=this.getdetail();e&&(t.initial=e),this.isKindNum()&&(t.initial=(Number(t.initial)||0).toFixed(Number(t.precision)||0)),this.$el.find(".Element").html(t.initial)},render:function(e){var t=this.getdetail();this.iHorizontal=["left","center","right"],this.updateText(),this.$el.find(".Element").css("font-size",t.font_size).css("color",t.font_color).css("text-align",this.iHorizontal[t.iPosition]),this.origin=t.initial},setVariable:function(e,t){if(!(!this.isKindText()||e!=1&&e!=2&&e!=3))return;if(this.isKindRandom()&&e!=3||!this.isKindRandom()&&e==3)return;if(this.isKindNum()&&Number(t).toString()=="NaN")return;var n=this,r=this.getdetail(),i=interaction_view.getVarsOp(interaction_view.currentPage);e=Number(e),r.initial=Number(r.initial);if(e==1||e==2)t=Number(t);switch(e){case 0:r.initial=this.isKindText()?i.var2val(t,!0):t;break;case 1:r.initial+=t;break;case 2:r.initial-=t;break;case 3:r.initial=_.random(r.range[0],r.range[1])}n.updateText(),r.immediate==1&&interaction_view.events.onVariableChanged(n)},isKindNum:function(){var e=this.getdetail();return e.iKind==0},isKindText:function(){var e=this.getdetail();return e.iKind==1},isKindRandom:function(){var e=this.getdetail();return e.iKind==2},showRandom:function(){this.isKindRandom()&&(this.origin=this.setRandom())},setRandom:function(){var e=this.getdetail();return e.initial=_.random(e.range[0],e.range[1]),e.initial}})}),define("interaction_view/model/timer",["interaction_view/model/base"],function(){interaction_view.model.Timer=interaction_view.model.Base.extend({defaults:{},setcollection:function(){iOverlaylist.get(this.id)||iOverlaylist.add(this)},setview:function(e){this.iview=new interaction_view.view.Timer({model:this})},setsyncmodel:function(){}}),interaction_view.view.Timer=interaction_view.view.Base.extend({events:{},render:function(e){var t=this.getdetail();this.iHorizontal=["left","center","right"],this.$el.find(".Element").html(t.formatTime).css("font-size",t.font_size).css("color",t.font_color).css("text-align",this.iHorizontal[t.iPosition])},resetOtherStatus:function(){this.clearTimer(),this.Interval=null,this.Status=-1,this.Suspend=!1},startTimer:function(){function n(){e.updateTimer(),e.Actions_16.length&&interaction_view.events.onTimerCountTo(e),e.currentTime!=t.initial&&e.Actions_18.length&&interaction_view.events.onTimerInterval(e)}function r(){if(e.currentTime<=0){e.stopTimer();return}n(),e.currentTime-=.01}function i(){n(),e.currentTime+=.01}if(this.Status==1||this.Status==3)return;if(this.Status==-1){this.Suspend=!0;return}var e=this,t=this.getdetail();t.iKind==1?this.Interval=setInterval(r,10):this.Interval=setInterval(i,10),interaction_view.events.onTimerStart(this),this.Status=1},stopTimerSimple:function(){return this.Status==2||this.Status==3||this.Status==-1?!1:(this.clearTimer(),this.Status=2,!0)},stopTimer:function(){this.stopTimerSimple()&&(interaction_view.events.onTimerStop(this),this.Status=3)},resetTimer:function(){var e=this,t=this.getdetail();this.clearTimer(),this.currentTime=t.initial=Number(Number(t.initial).toFixed(2)),this.Status=0,this.updateTimer();if(!this.gotTimerActions){function n(t,n){return t.overlay_id!=e.model.id||t.type!=n?!1:e.model.page.isLayer?t.layer_id==e.model.page.iOverlaylist.layerid:t.page_id==e.model.page.id}this.Actions_16=_.filter(interaction_view.events.timerEvents,function(e){return n(e,16)}),this.Actions_18=_.filter(interaction_view.events.timerEvents,function(e){return n(e,18)}),this.Actions_17=_.filter(interaction_view.events.timerEvents,function(e){return n(e,17)}),this.Actions_19=_.filter(interaction_view.events.timerEvents,function(e){return n(e,19)}),this.gotTimerActions=!0}this.Suspend&&(this.startTimer(),this.Suspend=!1)},updateTimer:function(){var e=this.getdetail();e.formatTime=this.getFormatTime(this.currentTime,e.format),this.$el.find(".Element").html(e.formatTime)},clearTimer:function(){this.Interval&&clearInterval(this.Interval)},getFormatTime:function(e,t){var n,r,i,s;e=Number(Number(e).toFixed(2)),e<=0?n=r=i=s=0:(n=Math.floor(e/3600),r=Math.floor((e-n*3600)/60),i=Math.floor(e-n*3600-r*60),s=Math.round((e-Math.floor(e))*100));switch(Number(t)){case 0:return(r<10?"0"+r:r)+":"+(i<10?"0"+i:i);case 1:return(r<10?"0"+r:r)+":"+(i<10?"0"+i:i)+":"+(s<10?"0"+s:s);case 2:return(n<10?"0"+n:n)+":"+(r<10?"0"+r:r)+":"+(i<10?"0"+i:i);case 3:return(n<10?"0"+n:n)+":"+(r<10?"0"+r:r)+":"+(i<10?"0"+i:i)+":"+(s<10?"0"+s:s)}}})}),define("interaction_view/model/main",["interaction_view/model/action","interaction_view/model/animation_view","interaction_view/model/audio","interaction_view/model/chapter","interaction_view/model/cycleimage","interaction_view/model/image","interaction_view/model/page","interaction_view/model/doc","interaction_view/model/preload","interaction_view/model/richtext","interaction_view/model/slide","interaction_view/model/video","interaction_view/model/button","interaction_view/model/map","interaction_view/model/pay","interaction_view/model/link","interaction_view/model/layerref","interaction_view/model/layerslide","interaction_view/model/Region","interaction_view/model/binding","interaction_view/model/Grid","interaction_view/model/Cell","interaction_view/model/TextLabel","interaction_view/model/TabBar","interaction_view/model/SearchInput","interaction_view/model/Tree","interaction_view/model/gallery","interaction_view/model/PageIndex","interaction_view/model/webcontent","interaction_view/model/formview","interaction_view/model/AC","interaction_view/model/shape","interaction_view/model/BookButton","interaction_view/model/dragdrop","interaction_view/model/dragdropgroup","interaction_view/model/variable","interaction_view/model/timer"],function(){}),function(e,t,n){var r,i,s,o,u;o={paneClass:"pane",sliderClass:"slider",contentClass:"content",iOSNativeScrolling:!1,preventPageScrolling:!1,disableResize:!1,alwaysVisible:!1,flashDelay:1500,sliderMinHeight:20,sliderMaxHeight:null},r="Microsoft Internet Explorer"===t.navigator.appName&&/msie 7./i.test(t.navigator.appVersion)&&t.ActiveXObject,i=null,u=function(){var e,t;return e=n.createElement("div"),t=e.style,t.position="absolute",t.width="100px",t.height="100px",t.overflow="scroll",t.top="-9999px",n.body.appendChild(e),t=e.offsetWidth-e.clientWidth,n.body.removeChild(e),t},s=function(){function s(r,s){this.el=r,this.options=s,i||(i=u()),this.$el=e(this.el),this.doc=e(n),this.win=e(t),this.generate(),this.createEvents(),this.addEvents(),this.reset()}return s.prototype.preventScrolling=function(e,t){this.isActive&&("DOMMouseScroll"===e.type?("down"===t&&0<e.originalEvent.detail||"up"===t&&0>e.originalEvent.detail)&&e.preventDefault():"mousewheel"===e.type&&e.originalEvent&&e.originalEvent.wheelDelta&&("down"===t&&0>e.originalEvent.wheelDelta||"up"===t&&0<e.originalEvent.wheelDelta)&&e.preventDefault())},s.prototype.updateScrollValues=function(){var e;e=this.content[0],this.maxScrollTop=e.scrollHeight-e.clientHeight,this.contentScrollTop=e.scrollTop,this.maxSliderTop=this.paneHeight-this.sliderHeight,this.sliderTop=this.contentScrollTop*this.maxSliderTop/this.maxScrollTop},s.prototype.createEvents=function(){var e=this;this.events={down:function(t){return e.isBeingDragged=!0,e.offsetY=t.pageY-e.slider.offset().top,e.pane.addClass("active"),e.doc.bind("mousemove",e.events.drag).bind("mouseup",e.events.up),!1},drag:function(t){return e.sliderY=t.pageY-e.$el.offset().top-e.offsetY,e.scroll(),e.updateScrollValues(),e.contentScrollTop>=e.maxScrollTop?e.$el.trigger("scrollend"):0===e.contentScrollTop&&e.$el.trigger("scrolltop"),!1},up:function(){return e.isBeingDragged=!1,e.pane.removeClass("active"),e.doc.unbind("mousemove",e.events.drag).unbind("mouseup",e.events.up),!1},resize:function(){e.reset()},panedown:function(t){return e.sliderY=(t.offsetY||t.originalEvent.layerY)-.5*e.sliderHeight,e.scroll(),e.events.down(t),!1},scroll:function(t){e.isBeingDragged||(e.updateScrollValues(),e.sliderY=e.sliderTop,e.slider.css({top:e.sliderTop}),null!=t&&(e.contentScrollTop>=e.maxScrollTop?(e.options.preventPageScrolling&&e.preventScrolling(t,"down"),e.$el.trigger("scrollend")):0===e.contentScrollTop&&(e.options.preventPageScrolling&&e.preventScrolling(t,"up"),e.$el.trigger("scrolltop"))))},wheel:function(t){if(null!=t)return e.sliderY+=-t.wheelDeltaY||-t.delta,e.scroll(),!1}}},s.prototype.addEvents=function(){var e;this.removeEvents(),e=this.events,this.options.disableResize||this.win.bind("resize",e.resize),this.slider.bind("mousedown",e.down),this.pane.bind("mousedown",e.panedown).bind("mousewheel DOMMouseScroll",e.wheel),this.content.bind("scroll mousewheel DOMMouseScroll touchmove",e.scroll)},s.prototype.removeEvents=function(){var e;e=this.events,this.win.unbind("resize",e.resize),this.slider.unbind(),this.pane.unbind(),this.content.unbind("scroll mousewheel DOMMouseScroll touchmove",e.scroll).unbind("keydown",e.keydown).unbind("keyup",e.keyup)},s.prototype.generate=function(){var e,t,n,r,s;return n=this.options,r=n.paneClass,s=n.sliderClass,e=n.contentClass,!this.$el.find(""+r).length&&!this.$el.find(""+s).length&&this.$el.append('<div class="'+r+'"><div class="'+s+'" /></div>'),this.content=this.$el.children("."+e),this.content.attr("tabindex",0),this.slider=this.$el.find("."+s),this.pane=this.$el.find("."+r),i&&(t={right:-i},this.$el.addClass("has-scrollbar")),n.iOSNativeScrolling&&(null==t&&(t={}),t.WebkitOverflowScrolling="touch"),null!=t&&this.content.css(t),n.alwaysVisible&&this.pane.css({opacity:1,visibility:"visible"}),this},s.prototype.restore=function(){return this.stopped=!1,this.pane.show(),this.addEvents()},s.prototype.reset=function(){var e,t,n,s,o,u,a;return this.$el.find("."+this.options.paneClass).length||this.generate().stop(),this.stopped&&this.restore(),e=this.content[0],n=e.style,s=n.overflowY,r&&this.content.css({height:this.content.height()}),t=e.scrollHeight+i,u=this.pane.outerHeight(),a=parseInt(this.pane.css("top"),10),o=parseInt(this.pane.css("bottom"),10),o=u+a+o,a=Math.round(o/t*o),a<this.options.sliderMinHeight?a=this.options.sliderMinHeight:null!=this.options.sliderMaxHeight&&a>this.options.sliderMaxHeight&&(a=this.options.sliderMaxHeight),"scroll"===s&&"scroll"!==n.overflowX&&(a+=i),this.maxSliderTop=o-a,this.contentHeight=t,this.paneHeight=u,this.paneOuterHeight=o,this.sliderHeight=a,this.slider.height(a),this.events.scroll(),this.pane.show(),this.isActive=!0,this.pane.outerHeight(!0)>=e.scrollHeight&&"scroll"!==s?(this.pane.hide(),this.isActive=!1):this.el.clientHeight===e.scrollHeight&&"scroll"===s?this.slider.hide():this.slider.show(),this},s.prototype.scroll=function(){return this.sliderY=Math.max(0,this.sliderY),this.sliderY=Math.min(this.maxSliderTop,this.sliderY),this.content.scrollTop(-1*((this.paneHeight-this.contentHeight+i)*this.sliderY/this.maxSliderTop)),this.slider.css({top:this.sliderY}),this},s.prototype.scrollBottom=function(e){return this.reset(),this.content.scrollTop(this.contentHeight-this.content.height()-e).trigger("mousewheel"),this},s.prototype.scrollTop=function(e){return this.reset(),this.content.scrollTop(+e).trigger("mousewheel"),this},s.prototype.scrollTo=function(t){return this.reset(),t=e(t).offset().top,t>this.maxSliderTop&&(t/=this.contentHeight,this.sliderY=t*=this.maxSliderTop,this.scroll()),this},s.prototype.stop=function(){return this.stopped=!0,this.removeEvents(),this.pane.hide(),this},s.prototype.flash=function(){var e=this;return this.pane.addClass("flashed"),setTimeout(function(){e.pane.removeClass("flashed")},this.options.flashDelay),this},s}(),e.fn.nanoScroller=function(t){return this.each(function(){var n;(n=this.nanoscroller)||(n=e.extend({},o),t&&"object"==typeof t&&(n=e.extend(n,t)),this.nanoscroller=n=new s(this,n));if(t&&"object"==typeof t){e.extend(n.options,t);if(t.scrollBottom)return n.scrollBottom(t.scrollBottom);if(t.scrollTop)return n.scrollTop(t.scrollTop);if(t.scrollTo)return n.scrollTo(t.scrollTo);if("bottom"===t.scroll)return n.scrollBottom(0);if("top"===t.scroll)return n.scrollTop(0);if(t.scroll&&t.scroll instanceof e)return n.scrollTo(t.scroll);if(t.stop)return n.stop();if(t.flash)return n.flash()}return n.reset()})}}(jQuery,window,document),define("jquery.nanoscroller",["jquery"],function(){}),define("interaction_view/ui/main",["jquery","backbone","jquery.nanoscroller","text!interaction_view/template/message.js"],function(){var e=require("text!interaction_view/template/message.js");return{message:function(t,n,r){$("body").find(".msg").length==0&&$("body").append('<div class="msg"></div>'),r||(r=3e3),$(".msg").html(_.template(e,{type:t,msg:n})),$(".msg").fadeIn(),setTimeout(function(){$(".msg").fadeOut("slow"),$(".msg").remove()},r)},getRequest:function(e){var t=location.search,n={};if(t.indexOf("?")!=-1){var r=t.substr(1);strs=r.split("&");for(var i=0;i<strs.length;i++)n[strs[i].split("=")[0]]=unescape(strs[i].split("=")[1])}return e?n[e]:n},setscrollnano:function(e){$(e).hasClass("nanoscrollbar")?$selector=$(e):$selector=$(e).find(".nanoscrollbar"),$selector.children(".nano").length==0&&$selector.wrapInner('<div class="nano"><div class="content"></div></div>'),$selector.children(".nano").nanoScroller(),$selector.children(".nano").children(".pane").css({visibility:"hidden"}),$selector.children(".nano").hover(function(){$(this).children(".pane").css({visibility:"visible"})},function(){$(this).children(".pane").css({visibility:"hidden"})})},deviceType:function(){return navigator.userAgent.match(/iPad/i)=="iPad"?"iPad":navigator.userAgent.match(/iPhone/i)=="iPhone"?"iPhone":navigator.userAgent.match(/Android/i)=="Android"?"Android":navigator.userAgent.match(/BlackBerry/i)=="BlackBerry"?"BlackBerry":"null"},getModelById:function(e,t){var n=null;return e.icollection.each(function(e){e.id==t&&(n=e);var r=interaction_view.getModelById(e,t);r&&(n=r)}),n},model2collection:function(e,t){e.has(t)&&e.icollection.add(e.get(t))},model2tree:function(e,t,n){e.has(t)&&(e.icollection.add(e.get(t)),e.icollection.each(function(e){e.has(n)&&interaction_view.model2tree(e,n,n)}))},getPageIds:function(){var e=[];return $(".reveal").find("section").each(function(){e.push($(this).attr("id"))}),e},createPath:function(e){var t=[];return e.isSubOverlay?t=$.extend(!0,[],e.path):t.push({type:"page",id:e.page_id}),t.push({type:e.model.get("iType"),id:e.model.id}),e.layer_id&&t.push({type:"layer",id:e.layer_id}),t},getContainerDivByPath:function(e){var t=$(".interaction-view");if(!e)return $(".interaction-view");for(i=0;i<e.length;i++)e[i].type=="page"?interaction_view.ipagelist.getPage(e[i].id)?t=$('.Presentation[id="'+e[i].id+'"]').find(".interaction-view").first():interaction_view.imasterlist.get(e[i].id)&&(t=$('.Presentation[id="'+interaction_view.currentPage+'"]').find(".interaction-view").first()):e[i].type=="layer"?t=t.find('div.layer-item[data-id="'+e[i].id+'"]').first():t=t.find('div.iView[id="'+e[i].id+'"]').first().children(".Element");return t},getContainerModelByPath:function(e){var t=null;for(i=0;i<e.length;i++){e[i].type=="page"?t=interaction_view.ipagelist.getPage(e[i].id)||interaction_view.imasterlist.get(e[i].id):e[i].type=="layer"?t=t.layer[e[i].id]:t=t.iOverlaylist.get(e[i].id);if(!t)return null}return t},formatLabel:function(e){var t,n="",r="",i="";e.iPosition||(t="left"),e.iPosition==1&&(t="center"),e.iPosition==2&&(t="right"),e.radius!=undefined&&(n="border-top-left-radius:"+e.radius+"px; border-top-right-radius:"+e.radius+"px; border-bottom-right-radius:"+e.radius+"px; border-bottom-left-radius:"+e.radius+"px;"),e.border_color!=undefined&&e.border_size&&(r="border:"+e.border_size+"px solid "+e.border_color+";"),e.bg_color!=undefined&&(i="background-color:"+e.bg_color+";");if(!e.el)return'<p style="text-align:'+t+";font-size:"+e.font_size+"px;color:"+e.text_color+";"+n+r+i+'">'+e.text+"</p>";$(e.el).css({"font-size":e.font_size,color:e.text_color,"text-align":t}),n&&$(e.el).css("border-radius",e.radius+"px")},getWebContentSrc:function(e){var t=null;switch(e.contentType){case 0:if(e.iUrl){var n=e.iUrl.indexOf("http://")!=-1?e.iUrl:e.iUrl.indexOf("/")==0?e.iUrl:"http://"+e.iUrl;return{src:n,content:null}}return null;case 1:if(e.iFile&&e.iFile[0]&&e.iFile[0].file){if(typeof cbt_data=="undefined"||interaction_view.forpreview)var n=e.iFile[0].file.replace(".zip","/");else var n=e.iFile[0].file.replace(".zip","/index.html");return{src:n,content:null}}return null;case 2:return e.iSource?{src:null,content:e.iSource}:null}},getAnimationPage:function(e,t){return interaction_view.ipagelist.getPage(e)||interaction_view.imasterlist.get(e)?interaction_view.ipagelist.getPage(e)||interaction_view.imasterlist.get(e):t},filterAnimations:function(e,t,n,r){var i=_.filter(e,function(e){var t=e.toJSON();return t.iTiming&&t.iTiming.waitaction&&!interaction_view.SinglePreview&&!r?!1:t.iKind==0&&t.iGroup_id&&!n?!1:!0});return i},generateTimeline:function(e){var t=interaction_view.getVarsOp(e.iPage_id,[0,2]),n={paused:e.paused,onStart:e.onStart,onComplete:e.onComplete,onStartParams:e.onStartParams,onCompleteParams:e.onComplateParams};e.repeat&&(n.repeat=e.repeat);var r=new TimelineMax(n);r.addLabel("Start");var i=0;e.ids&&(e.ids=_.filter(e.ids,function(t){page=interaction_view.getAnimationPage(t.page_id,e.page);var n=page.iAnimationlist.get(t.id);if(!n)return!1;var t=n.toJSON();return t.iKind==0&&!page.iOverlaylist.get(t.overlay_id)?!1:!0}),e.animations=_.map(e.ids,function(t){return page=interaction_view.getAnimationPage(t.page_id,e.page),page.iAnimationlist.get(t.id)}));if(e.animations.length==0)return!1;var s=interaction_view.filterAnimations(e.animations,e.page,e.group,e.foraction);return s=_.filter(s,function(e){return e._animation}),_.each(s,function(n,o){if(!n)return;n._animation.refresh();var u=n.toJSON(),a=$.extend(!0,{},n._animation.param);if(u.iTiming){var f=t.var2val(u.iTiming.delay),l=t.var2val(u.iTiming.repeat),c=t.var2val(u.iTiming.duration);i+=f,c=c;var h=o;if(u.iTiming.start==0)r.addLabel(n+"_start",i),r.call(e.page.iAnimationlist.AddClickTween,[r,e.iPage_id],this,i-f);else if(u.iTiming.start==2)if(h!=0){var p=r.getLabelTime(s[h-1].id+"_start");r.addLabel(n.id+"_start",p+f),i=r.getLabelTime(n.id+"_start")}else r.addLabel(n.id+"_start",i);else r.addLabel(n.id+"_start",i)}if(u.iKind==1&&u.children){var d=[];_.each(u.children,function(t){d.push({id:t,page_id:e.page.id})});var v=interaction_view.generateTimeline({page:e.page,ids:d,iPage_id:e.iPage_id,group:!0,paused:!1,repeat:a.repeat,onStart:a.onStart,onComplete:a.onComplete,onStartParams:a.onStartParams,onCompleteParams:a.onCompleteParams,foraction:!0});if(v){r.add(v,i);var m=v;c=v.duration()}else c=0}else{if(!_g.browserSupport({msie:9})&&!_.include([101,201,100,103,200,203,402,500,501,502,503],n.get("iType"))){var g=$(n._animation.obj),y;if(n._animation.toparam)y=n._animation.toparam.css;else if(n._animation.param)if(n._animation.param.css)y=n._animation.param.css;else if(n._animation.param.bezier){var b=n._animation.param.bezier.values;y=b[b.length-1]}return y&&y.x&&g.css("margin-left",y.x+"px"),y&&y.y&&g.css("margin-top",y.y+"px"),g.removeClass("hide").show(),g.parents(".iView:first").removeClass("hide").show(),!0}var w=n._animation.obj,E;if(_.include([301,302],n.get("iType"))&&!a)return!1;if(_.include([501,502,503],n.get("iType"))){interaction_view.ismobile&&n._animation.isAudio&&(!_g.device.ios()||!_g.device.isWeixin())&&n.get("iType")==501&&(n._animation.overlaymodel.hasPlayed||n._animation.overlaymodel.media&&(n._animation.overlaymodel.media.play(),n._animation.overlaymodel.hasPlayed=!0));var S=e.page.iAnimationlist.getMediaTime(n);n.get("iType")==502||n.get("iType")==503?c=0:c=S,r.call(e.page.iAnimationlist.AddMediaTween,[n],this,i)}else _.include([102,103],n.get("iType"))?r.add(TweenMax.fromTo(w,c,n._animation.fromparam,n._animation.toparam),i):n.get("iType")==101?_g.browserSupport({msie:9})?r.add(TweenMax.fromTo(w,c,n._animation.fromparam,n._animation.toparam),i):r.add(TweenMax.fromTo(w,c,{"margin-left":n._animation.fromparam.css.x,"margin-top":n._animation.fromparam.css.y},{"margin-left":n._animation.toparam.css.x,"margin-top":n._animation.toparam.css.y}),i):n.get("iType")==201&&!_g.browserSupport({msie:9})?r.add(TweenMax.to(w,c,{"margin-left":n._animation.param.css.x,"margin-top":n._animation.param.css.y}),i):r.add(TweenMax.to(w,c,n._animation.param),i);var m=r.getChildren()[r.getChildren().length-1]}u.iTiming.repeat&&u.iTiming.repeat>0?c*=u.iTiming.repeat:(u.iTiming.repeat==-1,u.iTiming.repeat==-2&&r.call(e.page.iAnimationlist.AddRepeatClickTween,[r,e.iPage_id,m,n],this,i)),i+=c,r.addLabel(n.id+"_end",i)}),r},preloadImg:function(e){var t=new Image;t.onload=function(){},t.src=e},drawImg:function(e,t,n,r){e.newimg=new Image,e.img_loaded[n]=!0,e.newimg.onload=function(){r.clearRect(0,0,e.canvas_width,e.canvas_height),r.drawImage(this,0,0,e.canvas_width,e.canvas_height),this.onload=null,e.img=null,e.img=this,e.isdrawing=!1},e.newimg.src=e.src=t},getOverlays:function(e,t){var n=interaction_view.imasterlist.at(0).iOverlaylist.models;return interaction_view.currentPage==t&&(n=_.union(n,interaction_view.getAnimationPage(interaction_view.currentPage).iOverlaylist.models)),_.filter(n,function(t){return t.attributes.iType==e})},getVarsOp:function(e,t){if(typeof t=="undefined"||!t||!t.length)t=[0,1,2];var n=interaction_view.getOverlays("Variable",e),r="@",i=/@/g,s=/\@[^\@]+\@/g,o=function(e){if(!a(e))return e;var t;return e=e.replace(i,""),t=_.filter(n,function(t){return t.id==e}),t.length?String(t[0].attributes.iDetail.initial):"0"},u=function(e){var t=String(e),n=t.match(s);return _.each(n,function(e){t=t.replace(e,o(e))}),t},a=function(e){return e&&e[0]==r};return{vars:n,var2val:function(e,t){return!n||!n.length?e:t?u(e):Number(o(e))||0},beginWithAT:a}}}}),!function(e){var t=function(t,n){this.$element=e(t),this.options=n,this.init()};t.prototype={init:function(){_.bindAll(this)},_animate_loading:function(){if(!this.loading.is(":visible")){clearInterval(this.loadingTimer);return}e("div",this.loading).css("top",this.loadingFrame*-40+"px"),this.loadingFrame=(this.loadingFrame+1)%12},load:function(t){this.$element.children("#jswait-loading").remove(),this.$element.children("#jswait-overlay").remove(),this.loadingTimer=this.loadingFrame=1,this.options=t,this.$element.append(this.loading=e('<div id="jswait-loading"><div></div></div>'),this.overlay=e('<div id="jswait-overlay" class="mask hide"></div>')),this.options.modal&&this.overlay.removeClass("hide"),this.options.simple?(this.loading.css({background:"#000000","line-height":40,"text-align":"center"}),this.loading.html('<img src="/staticfs/common/js/jswait/jswait.gif">'),this.loading.show()):(clearInterval(this.loadingTimer),this.loading.show(),this.loadingTimer=setInterval(this._animate_loading,66)),this.waited=!0},close:function(){this.waited&&(this.loading.remove(),this.overlay.remove(),this.$element.children("#jswait-loading").remove(),this.$element.children("#jswait-overlay").remove(),this.loadingFrame=1,clearInterval(this.loadingTimer),this.waited=!1)}},e.fn.jswait=function(n){return this.each(function(){var r=e(this),i=r.data("jswait"),s=e.extend({},e.fn.jswait.defaults,typeof n=="object"&&n),o=typeof n=="string"?n:null;i||r.data("jswait",i=new t(this,s)),o?i[o]():i.load(s)})},e.fn.jswait.defaults={modal:!1},e.fn.jswait.Constructor=t}(window.jQuery),define("jswait",["jquery"],function(){}),function(e,t){var n="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,r=function(){for(var e,n,r=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"]],i=0,s=r.length,o={};s>i;i++)if(e=r[i],e&&e[1]in t){for(i=0,n=e.length;n>i;i++)o[r[0][i]]=e[i];return o}return!1}(),i={request:function(e){var i=r.requestFullscreen;e=e||t.documentElement,/5\.1[\.\d]* Safari/.test(navigator.userAgent)?e[i]():e[i](n&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){t[r.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},onchange:function(){},onerror:function(){},raw:r};return r?(Object.defineProperties(i,{isFullscreen:{get:function(){return!!t[r.fullscreenElement]}},element:{enumerable:!0,get:function(){return t[r.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return!!t[r.fullscreenEnabled]}}}),t.addEventListener(r.fullscreenchange,function(e){i.onchange.call(i,e)}),t.addEventListener(r.fullscreenerror,function(e){i.onerror.call(i,e)}),e.screenfull=i,void 0):e.screenfull=!1}(window,document),define("screenfull",function(){}),define("text!interaction_view/template/pagenumber.js",[],function(){return'<%if(presentation.getPageNumber().horizontal_count>1){ %>\n<nav class="iView master nav-horizen pagenumber" style="position:absolute;left:<%=pageno_horizontal.x%>px;top:<%=pageno_horizontal.y%>px;<%=pageno_horizontal.show?"":"display:none;"%>">\n    <%for(i=0;i<presentation.getPageNumber().horizontal_count;i++){%><li class="<%=Reveal.getIndices().h==i?"active":""%>"><a href="#" data-index="<%=i%>"></a></li><% } %>\n</nav>\n<% } %>\n<%if(presentation.getPageNumber().vertical_count>1){ %>\n<nav class="iView master nav-vertical pagenumber" style="position:absolute;left:<%=pageno_vertical.x%>px;top:<%=pageno_vertical.y%>px;<%=pageno_vertical.show?"":"display:none;"%>">\n    <%for(i=0;i<presentation.getPageNumber().vertical_count;i++){%><li class="<%=Reveal.getIndices().v==i?"active":""%>"><a href="#" data-index="<%=i%>"></a></li><% } %>\n</nav>\n<% } %>'}),define("interaction_view/ui/presentation",["jswait","screenfull","_g/ui","text!interaction_view/template/pagenumber.js"],function(){var e=require("text!interaction_view/template/pagenumber.js"),t={init:function(){},masterPageReset:function(){interaction_view.imasterlist.length&&interaction_view.imasterlist.at(0).iOverlaylist.each(function(e){_.include(["Grid","PageIndex","Gallery"],e.get("iType"))&&e.iview.resetOtherStatus()})},preloadpageAudio:function(e){interaction_view.ismobile&&(interaction_view.imasterlist.at(0).iOverlaylist.each(function(e){e.get("iType")=="Audio"&&e.media&&(e.hasPlayed||e.autoplay&&(e.media.play(),e.hasPlayed=!0))}),e&&(currentPage=interaction_view.ipagelist.getPage(e),currentPage&&currentPage.iOverlaylist.each(function(e){e.get("iType")=="Audio"&&e.media&&(e.hasPlayed||e.autoplay&&(e.media.play(),e.hasPlayed=!0))})))},play:function(e){var n=null;typeof e=="string"?n=interaction_view.ipagelist.getPage(e)||interaction_view.imasterlist.get(e):n=e,n.iOverlaylist.resetViewStatus(),n.iOverlaylist.resetBindings(),n.playFinished==1&&(n.iAnimationlist.resetAnimationStatus(),n.playFinished=!1),n.iOverlaylist.each(function(e){e.media&&(e.autoplay?interaction_view.media.play(e):e.get("iType")=="Video"&&(e.get("iDetail").iHidden||(e.notallowed=!0,e.iview.$el.removeClass("hide"),e.iview.$el.css("opacity",1),e.hided=!1)))}),n.played=!1,n.iAnimationlist.setParams(),n.iAnimationlist.setPlay(),interaction_view.events.clearWaitClick(),n.playFinished=!0,interaction_view.mode=="Page"&&!interaction_view.masterplayed&&!n.isLayer&&(interaction_view.masterplayed=!0,interaction_view.imasterlist.length&&interaction_view.play(interaction_view.imasterlist.at(0))),n.isLayer?interaction_view.events.onPageStart(n.iOverlaylist.pageid,n.iOverlaylist.layerid):interaction_view.events.onPageStart(n.id),interaction_view.events.onControllerEvent(n.id),interaction_view.mode=="Page"&&!n.isLayer&&interaction_view.ipagelist.getPage(n.id)&&t.setMasterDisplay(n),n.iAnimationlist.timeline&&n.iAnimationlist.timeline.play(0,!1),n.iOverlaylist.each(function(e){e.get("iType")=="LayerRef"||e.get("iType")=="LayerSlide"?e.iview.playLayer():e.get("iType")=="Timer"&&e.iview.resetTimer()})},stop:function(e){var t;typeof e=="string"?t=interaction_view.ipagelist.getPage(e):t=e,t.playFinished&&(t.iAnimationlist.timeline&&(t.iAnimationlist.timeline.pause(0),t.iOverlaylist.resetViewStatus(),typeof e=="string"&&$(".interaction-view").css("cursor","auto"),interaction_view.bezierPatch(e)),t.iActionlist.each(function(e){e.iview.timeline&&e.iview.timeline.pause(1e-5)}),t.iOverlaylist.each(function(e){e.media&&(e.iview.resetOtherStatus(),e.get("iType")=="Video"&&e.iview.$el.addClass("hide")),(e.get("iType")=="LayerRef"||e.get("iType")=="LayerSlide")&&e.iview.stoplayer(),(e.get("iType")=="LayerRef"||e.get("iType")=="Image")&&e.iview.renderMask(),(e.get("iType")=="Slide"||e.get("iType")=="LayerSlide"||e.get("iType")=="CycleImage")&&e.iview.timeline&&e.iview.timeline.pause(1e-5),e.get("iType")=="Timer"&&e.iview.stopTimerSimple()}))},getPageNumber:function(){var e=Reveal.getVerticalLength(),t=Reveal.getHorizontalLength();return{vertical_count:e,horizontal_count:t}},setMasterDisplay:function(e){t.setPageNumber(e),interaction_view.show_master=e.get("show_master")?!0:!1;var n=$('.Presentation[id="'+e.id+'"]').find(".interaction-view");interaction_view.touchview&&(n=$(".reveal")),interaction_view.show_master||interaction_view.mode=="Master"?n.children(".iView.master").removeClass("masterhide"):n.children(".iView.master").addClass("masterhide"),t.masterPageReset(e)},setPageNumber:function(n){var r=$('.Presentation[id="'+n.id+'"]').find(".interaction-view");interaction_view.touchview&&(r=$(".reveal")),(interaction_view.mode=="Master"||interaction_view.mode=="Page")&&interaction_view.imasterlist.length&&(r.children(".iView.master.pagenumber").remove(),r.append(_.template(e,interaction_view.imasterlist.at(0).toJSON())),t.setPageNumberPosition())},setPageNumberPosition:function(){$("nav.pagenumber").each(function(){$(this).css({left:$(this).position().left-$(this).outerWidth(!1)/2,top:$(this).position().top-$(this).outerHeight(!1)/2})})},bezierPatch:function(e){var t;typeof e=="string"?t=interaction_view.ipagelist.getPage(e):t=e,t.iAnimationlist.each(function(e){_.include([301,302],e.get("iType"))&&e.toJSON().iDetail.autoRotate&&TweenMax.to(e._animation.obj,0,{rotation:"0_cw"})})},startLoad:function(){t.pagesForLoad=[],interaction_view.imasterlist&&interaction_view.imasterlist.length&&t.pagesForLoad.push(interaction_view.imasterlist.at(0).id),_.each(interaction_view.ipagelist.getPages(),function(e){t.pagesForLoad.push(e.id)}),t.pagelength=t.pagesForLoad.length;var e;interaction_view.imasterlist&&interaction_view.imasterlist.length?e=interaction_view.imasterlist.at(0):e=interaction_view.ipagelist.at(0),e.iview.prepareLoad(),e.iview.startLoad(),e.isStartLoad=!0},pagesForLoad:[],pageLoadEvent:function(e){},pageLoad:function(e){var n=interaction_view.ipagelist.getPage(e);!n.isStartLoad&&!n.get("loaded")?(n.iview.prepareLoad(),n.iview.startLoad(),n.isStartLoad=!0):interaction_view.ismobile&&t.pagePreloadCenter(e)},bookStatus:0,foredit:function(){},forpreview:function(){interaction_view.mode="Page",interaction_view.events.clearAll(),$("body").children("preloader").remove(),$("body").append('<div id="preloader"></div>'),interaction_view.forpreview||$("body").prepend('<div class="loading progress progress-striped active"><div class="bar" style="width: 0%;"></div></div>'),interaction_view.containment.children("#jswait-loading").length||interaction_view.containment.jswait(),interaction_view.finishPagePreload=function(e){t.pagesForLoad=_.reject(t.pagesForLoad,function(t){return t==e});var n=interaction_view.ipagelist.getPage(e)||interaction_view.imasterlist.get(e);interaction_view.donext(n),n.set("loaded",!0,{silent:!0});if(t.pagesForLoad.length==0||t.pagelength-t.pagesForLoad.length>=1)if(interaction_view.imasterlist.length==0||interaction_view.imasterlist.at(0).get("loaded"))interaction_view.preloadended||(interaction_view.preloadended=!0);if(interaction_view.playstatus=="wait"&&interaction_view.preloadended){var r=interaction_view.ipagelist.getPage(interaction_view.currentPage);r.get("loaded")&&(interaction_view.playstatus="play",interaction_view.containment.jswait("close"),interaction_view.containment.children(".prejsloading").length?loading_progress_percent<60?(loading_progress_percent=71,window.loading_progress_timer1=setInterval(function(){compute_loadding_progress(),set_loading_progress()},100)):(loading_progress_percent=100,set_loading_progress(),interaction_view.containment.children(".prejsloading").fadeOut(1500,function(){interaction_view.containment.children(".prejsloading").remove(),interaction_view.play(interaction_view.currentPage),window.loadAnalytics&&loadAnalytics()})):(interaction_view.containment.children("#jswait-loading").remove(),interaction_view.play(interaction_view.currentPage)))}else if(interaction_view.preloadended&&interaction_view.transitionPagePreLoad&&e==interaction_view.transitionPagePreLoad.page_id){var i=interaction_view.transitionPagePreLoad.transition;interaction_view.transitionPagePreLoad=null,t.gotopage(e,i)}t.pagesForLoad.length==0?$(".loading").remove():interaction_view.ismobile||interaction_view.ipagelist.getPage(t.pagesForLoad[0])&&t.pageLoad(t.pagesForLoad[0]);if(interaction_view.ismobile)if(t.isFirstPageLoading){e==t.isFirstPageLoading&&(t.firstpageloaded=!0);if(t.firstpageloaded&&interaction_view.imasterlist.at(0).get("loaded")){var s=t.isFirstPageLoading;t.isFirstPageLoading=null,t.preloadFourDirections(),t.pagePreloadCenter(s)}}else t.pagePreloadCenter(e)},interaction_view.setPreloadStatus=function(){var e=0,t=0;_.each(interaction_view.ipagelist.getPages(),function(n){t+=n.ipreloadlist.length,n.ipreloadlist.length>0&&(e+=n.ipreloadlist.where({loaded:!0}).length)}),interaction_view.imasterlist.length&&(t+=interaction_view.imasterlist.at(0).ipreloadlist.length,interaction_view.imasterlist.at(0).ipreloadlist.length>0&&(e+=interaction_view.imasterlist.at(0).ipreloadlist.where({loaded:!0}).length)),$(".loading").children("div").css("width",String(e/t*100)+"%")},interaction_view.donext=function(e){e.iview.afterpreload()},interaction_view.play=t.play,interaction_view.stopPlay=t.stop,interaction_view.moveMaster=function(e,t){if(!interaction_view.touchview){var n=$('.Presentation[id="'+e+'"]').find(".interaction-view").children(".iView.master").detach();$('.Presentation[id="'+t+'"]').find(".interaction-view").append(n)}},interaction_view.bezierPatch=t.bezierPatch,interaction_view.slideChange=function(e){if(!Reveal)return;typeof e=="number"&&Reveal.slide(e);if(typeof e=="string"){var t=interaction_view.getModelById(interaction_view.iChapter,e);Reveal.slide(t.get("index"))}},interaction_view.firstPlay=!0},screencontrol:function(){window.isFullscreen=!1,window.screenLock=!1,window.screenAutoAdapt=function(){if(window.screenLock)return;if(screenfull.isFullscreen){isFullscreen=!0;var e=window.screen.width/window.screen.height>=interaction_view.size.x/interaction_view.size.y?window.screen.height/interaction_view.size.y:window.screen.width/interaction_view.size.x;_g.ui.scale(".reveal",e)}else isFullscreen=!1,_g.ui.scale(".reveal",1)},!interaction_view.ismobile&&(screenfull.onchange=screenAutoAdapt)},gotopage:function(e,n){interaction_view.transitionPagePreLoad=null;var r=null,i,s,o,u;if(e==interaction_view.currentPage)return;switch(n){case 0:o=0,s="y",i="up",u=1;break;case 1:o=0,s="x",i="right",u=-1;break;case 2:o=0,s="y",i="down",u=-1;break;case 3:o=0,s="x",i="left",u=1;break;case 4:o=1,s="y",i="up",u=1;break;case 5:o=1,s="x",i="right",u=-1;break;case 6:o=1,s="y",i="down",u=-1;break;case 7:o=1,s="x",i="left",u=1;break;case 8:o=2,s="x",i="left",u=1}if(interaction_view.ipagelist.getPage(e)){var a=interaction_view.ipagelist.getPage(e);interaction_view.doc.toJSON().play_mode==0?indexh=interaction_view.ipagelist.indexOf(a):(a.icollection.length&&(a=a.icollection.at(0)),indexh=a.collection.parent.collection.indexOf(a.collection.parent),r=a.collection.indexOf(a));if(n==9){Reveal.slide(indexh,r);return}if(!a.get("loaded")){interaction_view.transitionPagePreLoad={page_id:e,transition:n},t.pageLoad(e);return}Reveal.setSingleSlideItem(indexh,r,i),Reveal.originh=Reveal.indexh,Reveal.originv=Reveal.indexv,Reveal.indexh=indexh,r!=null&&(Reveal.indexv=r),Reveal.transition.autostart(o,s,u)}},preloadFourDirections:function(){t.touchPreloadPageList=[];var e=Reveal.getSlideDirections();e.left?t.touchPreloadPageList.push(Reveal.getLeft()):interaction_view.control.getGroupLeft(Reveal.getCurrentSlideId())&&t.touchPreloadPageList.push(interaction_view.control.getGroupLeftId(Reveal.getCurrentSlideId())),e.right?t.touchPreloadPageList.push(Reveal.getRight()):interaction_view.control.getGroupRight(Reveal.getCurrentSlideId())&&t.touchPreloadPageList.push(interaction_view.control.getGroupRightId(Reveal.getCurrentSlideId())),Reveal.slideType==3&&(e.up&&t.touchPreloadPageList.push(Reveal.getUp()),e.down&&t.touchPreloadPageList.push(Reveal.getDown())),t.touchPreloadPageList.length&&t.pagePreloadCenter()},clearPreloadPages:function(){t.touchClearPageList=[];var e=Reveal.getAllSlideIds();_.each(e,function(e){e!=Reveal.getLeft()&&e!=Reveal.getRight()&&e!=Reveal.getUp()&&e!=Reveal.getDown()&&e!=Reveal.getCurrentSlideId()&&e!=interaction_view.control.getGroupRightId(Reveal.getCurrentSlideId())&&e!=interaction_view.control.getGroupLeftId(Reveal.getCurrentSlideId())&&t.touchClearPageList.push(e)}),t.touchClearPageList.length&&t.pageClearCenter()},pagePreloadCenter:function(e){e&&(t.touchPreloadPageList=_.reject(t.touchPreloadPageList,function(t){return t==e}));if(t.touchPreloadPageList.length){var n=t.touchPreloadPageList[0];t.pageLoad(n)}},pageClearCenter:function(e){e&&(t.touchClearPageList=_.reject(t.touchClearPageList,function(t){return t==e}));if(t.touchClearPageList.length){var n=interaction_view.ipagelist.getPage(t.touchClearPageList[0]);n.iview.clearPageLoad()}},touchPreloadPageList:[],touchClearPageList:[]};window.presentation=t}),define("interaction_view/ui/control",[],function(){var e={bindArrowControls:function(){Reveal.setNavigateFuncs({navigateLeft:e.slideLeft,navigateRight:e.slideRight})},slideUp:function(){Reveal.up()},slideDown:function(){Reveal.down()},slideLeft:function(){var t=Reveal.getCurrentSlide().id,n=e.getLeft(t);n&&e.slideTo(n.id)},slideRight:function(){var t=Reveal.getCurrentSlide().id,n=e.getRight(t);n&&e.slideTo(n.id)},getGroupLeft:function(e){if(Reveal.slideType!=3)return null;var t=interaction_view.ipagelist.getPage(e);if(!t)return null;var n=t.get("group"),r=t.collection.parent,i=interaction_view.ipagelist.at(interaction_view.ipagelist.indexOf(r)-1);if(i){var s=i.icollection.at(0);return s}return null},getGroupRight:function(e){if(Reveal.slideType!=3)return null;var t=interaction_view.ipagelist.getPage(e);if(!t)return null;var n=t.get("group"),r=t.collection.parent,i=interaction_view.ipagelist.at(interaction_view.ipagelist.indexOf(r)+1);if(i){var s=i.icollection.at(0);return s}return null},getGroupLeftId:function(e){var t=interaction_view.control.getGroupLeft(e);return t?t.id:null},getGroupRightId:function(e){var t=interaction_view.control.getGroupRight(e);return t?t.id:null},getRight:function(e){var t=interaction_view.ipagelist.getPage(e),n=t.get("group"),r=t.collection.parent,i=interaction_view.ipagelist.at(interaction_view.ipagelist.indexOf(r)+1);if(i){var s=i.icollection.at(0),o=s.get("group");return n!=o?!1:s}return!1},getLeft:function(e){var t=interaction_view.ipagelist.getPage(e),n=t.get("group"),r=t.collection.parent,i=interaction_view.ipagelist.at(interaction_view.ipagelist.indexOf(r)-1);if(i){var s=i.icollection.at(0),o=s.get("group");return n!=o?!1:s}return!1},getCurrent:function(){},slideTo:function(e){var t=interaction_view.ipagelist.getPage(e);indexh=t.collection.parent.collection.indexOf(t.collection.parent),indexv=t.collection.indexOf(t),Reveal.slide(indexh,indexv)}};return e}),function(){var e={support:function(){},init:function(){_g.mousewheel.wheelstart=!1,_g.mousewheel.wheeltimer=null,_g.mousewheel.checkflag=!1,_g.mousewheel.preventDefault=!0,_g.mousewheel.direction=null,_g.mousewheel.direction_lock=!0,_g.mousewheel.currentTarget=null,_g.mousewheel.mouseWheelSpeed=20;var e=function(e){if(_g.mousewheel.disabled)return;_g.mousewheel.e=e;var t=_g.mousewheel.getMouseWheel(e),n=t.x,r=t.y;if(n==undefined&&r==undefined)return;_g.mousewheel.direction_lock?_g.mousewheel.direction==null&&(r!=0&&(_g.mousewheel.direction=1),n!=0&&(_g.mousewheel.direction=0)):(r!=0&&(_g.mousewheel.direction=1),n!=0&&(_g.mousewheel.direction=0)),_g.mousewheel.wheelstart?(_g.mousewheel.checkflag=!1,_g.mousewheel.onWheel(e),_g.mousewheel.direction?r<0?_g.mousewheel.onWheelUp(e):_g.mousewheel.onWheelDown(e):n<0?_g.mousewheel.onWheelLeft(e):_g.mousewheel.onWheelRight(e)):(_g.mousewheel.wheelstart=!0,_g.mousewheel.onStart(e),_g.mousewheel.checkflag=!0,_g.mousewheel.wheeltimer=window.setInterval(function(){_g.mousewheel.checkflag?(_g.mousewheel.checkflag=!1,_g.mousewheel.wheelstart=!1,window.clearInterval(_g.mousewheel.wheeltimer),_g.mousewheel.onEnd(_g.mousewheel.e),_g.mousewheel.direction=null):_g.mousewheel.checkflag=!0},250));if(_g.mousewheel.preventDefault)return _g.mousewheel.preventDefault=!1,e.preventDefault(),!1};_g.event.addEvent(window,"wheel",e),_g.event.addEvent(window,"mousewheel",e),_g.event.addEvent(window,"DOMMouseScroll",e)},getMouseWheel:function(e){_g.mousewheel.mouseWheelSpeed=20;var t,n;return"deltaX"in e?(t=-e.deltaX,n=-e.deltaY):"wheelDeltaX"in e?(t=e.wheelDeltaX/120*_g.mousewheel.mouseWheelSpeed,n=e.wheelDeltaY/120*_g.mousewheel.mouseWheelSpeed):"wheelDelta"in e?t=n=e.wheelDelta/120*_g.mousewheel.mouseWheelSpeed:"detail"in e?t=n=-e.detail/3*_g.mousewheel.mouseWheelSpeed:t=n=undefined,{x:t,y:n}},getElement:function(e,t,n){var r,i=t?".iMouseWheel.enableMouseWheelX,.iMouseWheel.enableMouseWheel":n?".iMouseWheel.enableMouseWheelY,iMouseWheel.enableMouseWheel":".iMouseWheel";return _g.mousewheel.currentTarget?r=_g.mousewheel.currentTarget:!t&&!n?$(e.target).is(".iMouseWheel")?r=$(e.target):r=$(e.target).closest(".iMouseWheel"):t?$(e.target).is(i)?r=$(e.target):r=$(e.target).closest(".iMouseWheel.enableMouseWheelX").length?$(e.target).closest(".iMouseWheel.enableMouseWheelX"):$(e.target).closest(".iMouseWheel.enableMouseWheel"):n&&($(e.target).is(i)?r=$(e.target):r=$(e.target).closest(".iMouseWheel.enableMouseWheelY").length?$(e.target).closest(".iMouseWheel.enableMouseWheelY"):$(e.target).closest(".iMouseWheel.enableMouseWheel")),r},available:function(e){var t=_g.mousewheel.getElement(e);return t.length?t.hasClass("disableMouseWheel")?!1:t.hasClass("disableMouseWheelX")&&_g.mousewheel.direction==0?!1:t.hasClass("disableMouseWheelY")&&_g.mousewheel.direction==1?!1:t.hasClass("enableMouseWheel")?(e.preventDefault(),t):t.hasClass("enableMouseWheelX")&&_g.mousewheel.direction==0?(e.preventDefault(),t):t.hasClass("enableMouseWheelY")&&_g.mousewheel.direction==1?(e.preventDefault(),t):(t=_g.mousewheel.getElement(e,!_g.mousewheel.direction,_g.mousewheel.direction),t.length?(e.preventDefault(),t):null):(_g.mousewheel.preventDefault&&e.preventDefault(),null)},onStart:function(e){var t=_g.mousewheel.available(e);t&&t.trigger("wheelstart",e)},onWheel:function(e){var t=_g.mousewheel.available(e);t&&t.trigger("wheelmove",e)},onEnd:function(e){var t=_g.mousewheel.available(e);t&&t.trigger("wheelend",e),_g.mousewheel.currentTarget=null},onWheelLeft:function(e){var t=_g.mousewheel.available(e);t&&t.trigger("wheelleft",e)},onWheelRight:function(e){var t=_g.mousewheel.available(e);t&&t.trigger("wheelright",e)},onWheelUp:function(e){var t=_g.mousewheel.available(e);t&&t.trigger("wheelup",e)},onWheelDown:function(e){var t=_g.mousewheel.available(e);t&&t.trigger("wheeldown",e)}};typeof require=="undefined"?(window._g||(window._g={}),window._g.mousewheel=e):define("_g/mousewheel",["_g/base","_g/event"],function(){return window._g.mousewheel=e,window._g.mousewheel})}(window),function(){var e=1,t={init:function(){_g.orientation.orientationSupport&&window.addEventListener("deviceorientation",_g.orientation.onDeviceOrientation),_g.orientation.deltaX=0,_g.orientation.deltaY=0},orientationSupport:function(){return!!window.DeviceOrientationEvent},onDeviceOrientation:function(){var t,n,r,i;if(event.beta!==null&&event.gamma!==null){this.orientationStatus=1;var s=(event.beta-30||0)/e,o=(event.gamma-30||0)/e,u=window.innerHeight>window.innerWidth;u?(t=o+30,n=s,r=180,i=90):(t=-(s+30),n=o,r=90,i=180),_.each(_g.orientation.orientationEvents,function(e){var s=t,o=n;e.scrollX||(s=0),e.scrollY||(o=0),e.func&&e.func(-s*e.speed,-o*e.speed,r,i)})}},orientationEvents:[]};typeof require=="undefined"?(window._g||(window._g={}),window._g.orientation=t):define("_g/orientation",["_g/base"],function(){return window._g.orientation=t,window._g.orientation})}(window),define("interaction_view/ui/event",["_g/ui","_g/event","_g/mousewheel","_g/orientation"],function(){var events={pageStartEvents:[],pageClickEvents:[],pageDblClickEvents:[],pageWXShareSuccessEvents:[],elementChangeToEvents:[],slideClickEvents:[],slideDblClickEvents:[],animationStartEvents:[],animationEndEvents:[],bindingEvents:[],mediaEvents:[],controllerEvents:[],dragDropEvents:[],dragDropGroupEvents:[],timerEvents:[],variableEvents:[],init:function(){target=$(".slides"),target.on("click",function(e){events.testControl(e)&&events.onClickEvent()}),target.on("dblclick",function(e){events.testDblControl(e)&&(events.onDblClickEvent(),e.preventDefault()),_g.ui.clearSelection()}),interaction_view.touchview&&target.hammer().on("doubletap",function(e){events.testDblControl(e)&&(events.onDblClickEvent(),e.preventDefault()),_g.ui.clearSelection()}),events.initWheelEvent(),interaction_view.ismobile&&_g.orientation.init(),_g.getUrlParameterByName("-build")!="1"&&_g.event.document.disable_contextmenu(),events.initWXEvent()},initWXEvent:function(){function e(e){WeixinJSBridge.invoke("sendAppMessage",{appid:appid,img_url:imgUrl,img_width:"640",img_height:"640",link:message_link,desc:descContent,title:shareTitle},function(t){e&&e(t)})}function t(e){WeixinJSBridge.invoke("shareTimeline",{img_url:imgUrl,img_width:"640",img_height:"640",link:message_link,desc:descContent,title:shareTitle},function(t){e&&e(t)})}function n(e){WeixinJSBridge.invoke("shareWeibo",{content:descContent,url:message_link},function(t){e&&e(t)})}function r(){function r(){var e=_.filter(interaction_view.events.pageWXShareSuccessEvents,function(e){return e.page_id==interaction_view.currentPage});_.each(e,function(e){e.func()})}WeixinJSBridge.on("menu:share:appmessage",function(t){e(function(e){switch(e.err_msg){case"send_app_msg:cancel":break;case"send_app_msg:fail":break;case"send_app_msg:confirm":case"send_app_msg:ok":r()}})}),WeixinJSBridge.on("menu:share:timeline",function(e){t(function(e){switch(e.err_msg){case"share_timeline:cancel":break;case"share_timeline:fail":break;case"share_timeline:confirm":case"share_timeline:ok":r()}})}),WeixinJSBridge.on("menu:share:weibo",function(e){n(function(e){switch(e.err_msg){case"share_weibo:cancel":break;case"share_weibo:fail":break;case"share_weibo:confirm":case"share_weibo:ok":r()}})})}typeof WeixinJSBridge=="undefined"?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",r,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",r),document.attachEvent("onWeixinJSBridgeReady",r)):r()},wheelEvents:[],initWheelEvent:function(){_g.mousewheel.init()},testControl:function(e){var t=$(e.target).closest(".iView");if($(e.target).closest(".iView").hasClass("hasaction"))return!1;if(t){var n=t.attr("data-type");if(n=="Slide"||n=="CycleImage")if(t.attr("data-iSlipable"))return!1}return $(e.target).closest(".iLayerRef").length>0&&$(e.target).closest(".iLayerRef").parent(".iView").hasClass("hascontrols")?!1:!0},testDblControl:function(e){var t=$(e.target).closest(".iView");return $(e.target).closest(".iView").hasClass("hasDblClick")?!1:!0},onPageStart:function(e,t){interaction_view.ipagelist.getPage(e)&&epub360.settings.pems.has_analytics_src&&interaction_view.analytics.set(e);var n=_.filter(interaction_view.events.pageStartEvents,function(n){return n.page_id==e&&(t?n.layer_id==t:!0)});n.length>0&&_.each(n,function(e){e.func()})},onChangeTo:function(e,t,n){var r=_.filter(interaction_view.events.elementChangeToEvents,function(r){return r.page_id==e&&r.overlay_id==t&&r.index==n});r.length>0&&_.each(r,function(e){e.func()})},onClickEvent:function(){if(interaction_view.events.pageClickEvents.length>0){var e=_.filter(interaction_view.events.pageClickEvents,function(e){return e.type=="waitaction"});if(e.length>0)_.each(e,function(e){e.func()});else{var t=_.filter(interaction_view.events.pageClickEvents,function(e){return e.page_id==interaction_view.currentPage&&e.type=="page"});if(t.length>0)_.each(t,function(e){e.func()});else{var n=_.filter(interaction_view.events.pageClickEvents,function(e){return e.type=="master"});interaction_view.show_master&&_.each(n,function(e){e.func()})}}events.clearWaitClick()}},onDblClickEvent:function(){if(interaction_view.events.pageDblClickEvents.length>0){var e=_.filter(interaction_view.events.pageDblClickEvents,function(e){return e.page_id==interaction_view.currentPage&&e.type=="page"});if(e.length>0)_.each(e,function(e){e.func()});else{var t=_.filter(interaction_view.events.pageDblClickEvents,function(e){return e.type=="master"});interaction_view.show_master&&_.each(t,function(e){e.func()})}}},onSlideClickEvent:function(e,t,n,r,i){},onSlideDblClickEvent:function(e,t,n,r,i){},onControllerEvent:function(e){},onBingChangeTo:function(e){var t=_.filter(interaction_view.events.bindingEvents,function(t){return t.id==e.id&&t.page_id==e.page_id});_.each(t,function(t){e.direction=t.direction,t.func(e)})},onAnimationStart:function(e){var t=_.filter(interaction_view.events.animationStartEvents,function(t){return e.layer_id?e.overlay_id?t.overlay_id==e.overlay_id&&t.animation_id==e.animation_id&&t.layer_id==e.layer_id:t.animation_id==e.animation_id&&t.layer_id==e.layer_id:e.overlay_id?t.overlay_id==e.overlay_id&&t.animation_id==e.animation_id&&t.page_id==e.page_id:t.animation_id==e.animation_id&&t.page_id==e.page_id});_.each(t,function(e){e.func()})},onAnimationEnd:function(e){var t=_.filter(interaction_view.events.animationEndEvents,function(t){return e.layer_id?e.overlay_id?t.overlay_id==e.overlay_id&&t.animation_id==e.animation_id&&t.layer_id==e.layer_id:t.animation_id==e.animation_id&&t.layer_id==e.layer_id:e.overlay_id?t.overlay_id==e.overlay_id&&t.animation_id==e.animation_id&&t.page_id==e.page_id:t.animation_id==e.animation_id&&t.page_id==e.page_id});_.each(t,function(e){e.func()})},onDragDrop:function(e,t,n){function i(t,n){return t.overlay_id!=e.id||t.drop_type!=n?!1:e.page.isLayer?t.layer_id==e.page.iOverlaylist.layerid:t.page_id==e.page.id}var r;if(n==0){r=_.filter(interaction_view.events.dragDropEvents,function(e){return i(e,8)}),_.each(r,function(e){e.func()});return}e.iview.Status=2,_.include(e.iview.getdetail().element_ids,t.id)?(e.iview.Status=1,r=_.filter(interaction_view.events.dragDropEvents,function(e){return i(e,9)})):r=_.filter(interaction_view.events.dragDropEvents,function(e){return i(e,10)}),_.each(r,function(e){e.func()})},onDragDropGroup:function(e){function t(e,t,n){return e.overlay_id!=n.id||e.drop_type!=t?!1:n.page.isLayer?e.layer_id==n.page.iOverlaylist.layerid:e.page_id==n.page.id}$.each(e.iview.DragDropGroups,function(e,n){var r=n.iview.getdetail().element_ids,i=0,s=!0;$.each(r,function(e,t){var r=n.page.iOverlaylist.where({id:t})[0];if(r&&r.iview){r=r.iview;if(r.Status==0)return s=!1,!1;r.Status==1&&i++}});if(!s)return;var o;i==r.length?o=_.filter(interaction_view.events.dragDropGroupEvents,function(e){return t(e,11,n)}):o=_.filter(interaction_view.events.dragDropGroupEvents,function(e){return t(e,12,n)}),_.each(o,function(e){e.func()})})},onTimerStart:function(e){_.each(e.Actions_19,function(e){e.func()})},onTimerStop:function(e){_.each(e.Actions_17,function(e){e.func()})},onTimerInterval:function(e){_.each(e.Actions_18,function(t){var n=Number(t.condition);n>0&&Number(e.currentTime.toFixed(2))*100%(Number(n.toFixed(2))*100)==0&&t.func()})},onTimerCountTo:function(e){_.each(e.Actions_16,function(t){Math.abs(Number(e.currentTime.toFixed(2))*100==Number(Number(t.condition).toFixed(2))*100)<5&&t.func()})},onVariableChanged:function(view){function _filte(e,t){return e.overlay_id!=view.model.id||e.type!=t?!1:view.model.page.isLayer?e.layer_id==view.model.page.iOverlaylist.layerid:e.page_id==view.model.page.id}var detail=view.getdetail(),initial=detail.iKind=="0"&&Number(detail.initial)||detail.initial,actions=_.filter(interaction_view.events.variableEvents,function(e){return _filte(e,22)});_.each(actions,function(v){eval(v.condition.replace(/%@/g,"initial"))&&v.func()})},clearWaitClick:function(){interaction_view.events.pageClickEvents=_.reject(interaction_view.events.pageClickEvents,function(e){return e.type=="waitaction"})},clearAll:function(){interaction_view.events.pageClickEvents=[],interaction_view.events.pageDblClickEvents=[],interaction_view.events.pageStartEvents=[],interaction_view.events.pageWXShareSuccessEvents=[],interaction_view.events.bindingEvents=[],interaction_view.events.elementChangeToEvents=[],interaction_view.events.animationStartEvents=[],interaction_view.events.animationEndEvents=[],interaction_view.events.slideClickEvents=[],interaction_view.events.slideDblClickEvents=[],interaction_view.events.controllerEvents=[],interaction_view.events.dragDropEvents=[],interaction_view.events.dragDropGroupEvents=[],interaction_view.events.timerEvents=[],interaction_view.events.variableEvents=[]}};return events});var mejs=mejs||{};mejs.version="2.13.1",mejs.meIndex=0,mejs.plugins={silverlight:[{version:[3,0],types:["video/mp4","video/m4v","video/mov","video/wmv","audio/wma","audio/m4a","audio/mp3","audio/wav","audio/mpeg"]}],flash:[{version:[9,0,124],types:["video/mp4","video/m4v","video/mov","video/flv","video/rtmp","video/x-flv","audio/flv","audio/x-flv","audio/mp3","audio/m4a","audio/mpeg","video/youtube","video/x-youtube"]}],youtube:[{version:null,types:["video/youtube","video/x-youtube","audio/youtube","audio/x-youtube"]}],vimeo:[{version:null,types:["video/vimeo","video/x-vimeo"]}]},mejs.Utility={encodeUrl:function(e){return encodeURIComponent(e)},escapeHTML:function(e){return e.toString().split("&").join("&amp;").split("<").join("&lt;").split('"').join("&quot;")},absolutizeUrl:function(e){var t=document.createElement("div");return t.innerHTML='<a href="'+this.escapeHTML(e)+'">x</a>',t.firstChild.href},getScriptPath:function(e){for(var t=0,n,r="",i="",s,o,u=document.getElementsByTagName("script"),a=u.length,f=e.length;t<a;t++){s=u[t].src,n=s.lastIndexOf("/"),n>-1?(o=s.substring(n+1),s=s.substring(0,n+1)):(o=s,s="");for(n=0;n<f;n++){i=e[n],i=o.indexOf(i);if(i>-1){r=s;break}}if(r!=="")break}return r},secondsToTimeCode:function(e,t,n,r){typeof n=="undefined"?n=!1:typeof r=="undefined"&&(r=25);var i=Math.floor(e/3600)%24,s=Math.floor(e/60)%60,o=Math.floor(e%60);return e=Math.floor((e%1*r).toFixed(3)),(t||i>0?(i<10?"0"+i:i)+":":"")+(s<10?"0"+s:s)+":"+(o<10?"0"+o:o)+(n?":"+(e<10?"0"+e:e):"")},timeCodeToSeconds:function(e,t,n,r){typeof n=="undefined"?n=!1:typeof r=="undefined"&&(r=25),e=e.split(":"),t=parseInt(e[0],10);var i=parseInt(e[1],10),s=parseInt(e[2],10),o=0,u=0;return n&&(o=parseInt(e[3])/r),u=t*3600+i*60+s+o},convertSMPTEtoSeconds:function(e){if(typeof e!="string")return!1;e=e.replace(",",".");var t=0,n=e.indexOf(".")!=-1?e.split(".")[1].length:0,r=1;e=e.split(":").reverse();for(var i=0;i<e.length;i++)r=1,i>0&&(r=Math.pow(60,i)),t+=Number(e[i])*r;return Number(t.toFixed(n))},removeSwf:function(e){var t=document.getElementById(e);t&&/object|embed/i.test(t.nodeName)&&(mejs.MediaFeatures.isIE?(t.style.display="none",function(){t.readyState==4?mejs.Utility.removeObjectInIE(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))},removeObjectInIE:function(e){if(e=document.getElementById(e)){for(var t in e)typeof e[t]=="function"&&(e[t]=null);e.parentNode.removeChild(e)}}},mejs.PluginDetector={hasPluginVersion:function(e,t){var n=this.plugins[e];return t[1]=t[1]||0,t[2]=t[2]||0,n[0]>t[0]||n[0]==t[0]&&n[1]>t[1]||n[0]==t[0]&&n[1]==t[1]&&n[2]>=t[2]?!0:!1},nav:window.navigator,ua:window.navigator.userAgent.toLowerCase(),plugins:[],addPlugin:function(e,t,n,r,i){this.plugins[e]=this.detectPlugin(t,n,r,i)},detectPlugin:function(e,t,n,r){var i=[0,0,0],s;if(typeof this.nav.plugins!="undefined"&&typeof this.nav.plugins[e]=="object"){if((n=this.nav.plugins[e].description)&&(typeof this.nav.mimeTypes=="undefined"||!this.nav.mimeTypes[t]||!!this.nav.mimeTypes[t].enabledPlugin)){i=n.replace(e,"").replace(/^\s+/,"").replace(/\sr/gi,".").split(".");for(e=0;e<i.length;e++)i[e]=parseInt(i[e].match(/\d+/),10)}}else if(typeof window.ActiveXObject!="undefined")try{if(s=new ActiveXObject(n))i=r(s)}catch(o){}return i}},mejs.PluginDetector.addPlugin("flash","Shockwave Flash","application/x-shockwave-flash","ShockwaveFlash.ShockwaveFlash",function(e){var t=[];if(e=e.GetVariable("$version"))e=e.split(" ")[1].split(","),t=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)];return t}),mejs.PluginDetector.addPlugin("silverlight","Silverlight Plug-In","application/x-silverlight-2","AgControl.AgControl",function(e){var t=[0,0,0,0],n=function(e,t,n,r){for(;e.isVersionSupported(t[0]+"."+t[1]+"."+t[2]+"."+t[3]);)t[n]+=r;t[n]-=r};return n(e,t,0,1),n(e,t,1,1),n(e,t,2,1e4),n(e,t,2,1e3),n(e,t,2,100),n(e,t,2,10),n(e,t,2,1),n(e,t,3,1),t}),mejs.MediaFeatures={init:function(){var e=this,t=document,n=mejs.PluginDetector.nav,r=mejs.PluginDetector.ua.toLowerCase(),i,s=["source","track","audio","video"];e.isiPad=r.match(/ipad/i)!==null,e.isiPhone=r.match(/iphone/i)!==null,e.isiOS=e.isiPhone||e.isiPad,e.isAndroid=r.match(/android/i)!==null,e.isBustedAndroid=r.match(/android 2\.[12]/)!==null,e.isBustedNativeHTTPS=location.protocol==="https:"&&(r.match(/android [12]\./)!==null||r.match(/macintosh.* version.* safari/)!==null),e.isIE=n.appName.toLowerCase().match(/trident/gi)!==null,e.isChrome=r.match(/chrome/gi)!==null,e.isFirefox=r.match(/firefox/gi)!==null,e.isWebkit=r.match(/webkit/gi)!==null,e.isGecko=r.match(/gecko/gi)!==null&&!e.isWebkit&&!e.isIE,e.isOpera=r.match(/opera/gi)!==null,e.hasTouch="ontouchstart"in window&&window.ontouchstart!=null,e.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect;for(n=0;n<s.length;n++)i=document.createElement(s[n]);e.supportsMediaTag=typeof i.canPlayType!="undefined"||e.isBustedAndroid;try{i.canPlayType("video/mp4")}catch(o){e.supportsMediaTag=!1}e.hasSemiNativeFullScreen=typeof i.webkitEnterFullscreen!="undefined",e.hasNativeFullscreen=typeof i.requestFullscreen!="undefined",e.hasWebkitNativeFullScreen=typeof i.webkitRequestFullScreen!="undefined",e.hasMozNativeFullScreen=typeof i.mozRequestFullScreen!="undefined",e.hasMsNativeFullScreen=typeof i.msRequestFullscreen!="undefined",e.hasTrueNativeFullScreen=e.hasWebkitNativeFullScreen||e.hasMozNativeFullScreen||e.hasMsNativeFullScreen,e.nativeFullScreenEnabled=e.hasTrueNativeFullScreen,e.hasMozNativeFullScreen?e.nativeFullScreenEnabled=document.mozFullScreenEnabled:e.hasMsNativeFullScreen&&(e.nativeFullScreenEnabled=document.msFullscreenEnabled),e.isChrome&&(e.hasSemiNativeFullScreen=!1),e.hasTrueNativeFullScreen&&(e.fullScreenEventName="",e.hasWebkitNativeFullScreen?e.fullScreenEventName="webkitfullscreenchange":e.hasMozNativeFullScreen?e.fullScreenEventName="mozfullscreenchange":e.hasMsNativeFullScreen&&(e.fullScreenEventName="MSFullscreenChange"),e.isFullScreen=function(){if(i.mozRequestFullScreen)return t.mozFullScreen;if(i.webkitRequestFullScreen)return t.webkitIsFullScreen;if(i.hasMsNativeFullScreen)return t.msFullscreenElement!==null},e.requestFullScreen=function(t){e.hasWebkitNativeFullScreen?t.webkitRequestFullScreen():e.hasMozNativeFullScreen?t.mozRequestFullScreen():e.hasMsNativeFullScreen&&t.msRequestFullscreen()},e.cancelFullScreen=function(){e.hasWebkitNativeFullScreen?document.webkitCancelFullScreen():e.hasMozNativeFullScreen?document.mozCancelFullScreen():e.hasMsNativeFullScreen&&document.msExitFullscreen()}),e.hasSemiNativeFullScreen&&r.match(/mac os x 10_5/i)&&(e.hasNativeFullScreen=!1,e.hasSemiNativeFullScreen=!1)}},mejs.MediaFeatures.init(),mejs.HtmlMediaElement={pluginType:"native",isFullScreen:!1,setCurrentTime:function(e){this.currentTime=e},setMuted:function(e){this.muted=e},setVolume:function(e){this.volume=e},stop:function(){this.pause()},setSrc:function(e){for(var t=this.getElementsByTagName("source");t.length>0;)this.removeChild(t[0]);if(typeof e=="string")this.src=e;else{var n;for(t=0;t<e.length;t++){n=e[t];if(this.canPlayType(n.type)){this.src=n.src;break}}}},setVideoSize:function(e,t){this.width=e,this.height=t}},mejs.PluginMediaElement=function(e,t,n){this.id=e,this.pluginType=t,this.src=n,this.events={},this.attributes={}},mejs.PluginMediaElement.prototype={pluginElement:null,pluginType:"",isFullScreen:!1,playbackRate:-1,defaultPlaybackRate:-1,seekable:[],played:[],paused:!0,ended:!1,seeking:!1,duration:0,error:null,tagName:"",muted:!1,volume:1,currentTime:0,play:function(){this.pluginApi!=null&&(this.pluginType=="youtube"?this.pluginApi.playVideo():this.pluginApi.playMedia(),this.paused=!1)},load:function(){this.pluginApi!=null&&(this.pluginType!="youtube"&&this.pluginApi.loadMedia(),this.paused=!1)},pause:function(){this.pluginApi!=null&&(this.pluginType=="youtube"?this.pluginApi.pauseVideo():this.pluginApi.pauseMedia(),this.paused=!0)},stop:function(){this.pluginApi!=null&&(this.pluginType=="youtube"?this.pluginApi.stopVideo():this.pluginApi.stopMedia(),this.paused=!0)},canPlayType:function(e){var t,n,r,i=mejs.plugins[this.pluginType];for(t=0;t<i.length;t++){r=i[t];if(mejs.PluginDetector.hasPluginVersion(this.pluginType,r.version))for(n=0;n<r.types.length;n++)if(e==r.types[n])return"probably"}return""},positionFullscreenButton:function(e,t,n){this.pluginApi!=null&&this.pluginApi.positionFullscreenButton&&this.pluginApi.positionFullscreenButton(Math.floor(e),Math.floor(t),n)},hideFullscreenButton:function(){this.pluginApi!=null&&this.pluginApi.hideFullscreenButton&&this.pluginApi.hideFullscreenButton()},setSrc:function(e){if(typeof e=="string")this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(e)),this.src=mejs.Utility.absolutizeUrl(e);else{var t,n;for(t=0;t<e.length;t++){n=e[t];if(this.canPlayType(n.type)){this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(n.src)),this.src=mejs.Utility.absolutizeUrl(e);break}}}},setCurrentTime:function(e){this.pluginApi!=null&&(this.pluginType=="youtube"?this.pluginApi.seekTo(e):this.pluginApi.setCurrentTime(e),this.currentTime=e)},setVolume:function(e){this.pluginApi!=null&&(this.pluginType=="youtube"?this.pluginApi.setVolume(e*100):this.pluginApi.setVolume(e),this.volume=e)},setMuted:function(e){this.pluginApi!=null&&(this.pluginType=="youtube"?(e?this.pluginApi.mute():this.pluginApi.unMute(),this.muted=e,this.dispatchEvent("volumechange")):this.pluginApi.setMuted(e),this.muted=e)},setVideoSize:function(e,t){this.pluginElement.style&&(this.pluginElement.style.width=e+"px",this.pluginElement.style.height=t+"px"),this.pluginApi!=null&&this.pluginApi.setVideoSize&&this.pluginApi.setVideoSize(e,t)},setFullscreen:function(e){this.pluginApi!=null&&this.pluginApi.setFullscreen&&this.pluginApi.setFullscreen(e)},enterFullScreen:function(){this.pluginApi!=null&&this.pluginApi.setFullscreen&&this.setFullscreen(!0)},exitFullScreen:function(){this.pluginApi!=null&&this.pluginApi.setFullscreen&&this.setFullscreen(!1)},addEventListener:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},removeEventListener:function(e,t){if(!e)return this.events={},!0;var n=this.events[e];if(!n)return!0;if(!t)return this.events[e]=[],!0;for(i=0;i<n.length;i++)if(n[i]===t)return this.events[e].splice(i,1),!0;return!1},dispatchEvent:function(e){var t,n,r=this.events[e];if(r){n=Array.prototype.slice.call(arguments,1);for(t=0;t<r.length;t++)r[t].apply(null,n)}},hasAttribute:function(e){return e in this.attributes},removeAttribute:function(e){delete this.attributes[e]},getAttribute:function(e){return this.hasAttribute(e)?this.attributes[e]:""},setAttribute:function(e,t){this.attributes[e]=t},remove:function(){mejs.Utility.removeSwf(this.pluginElement.id),mejs.MediaPluginBridge.unregisterPluginElement(this.pluginElement.id)}},mejs.MediaPluginBridge={pluginMediaElements:{},htmlMediaElements:{},registerPluginElement:function(e,t,n){this.pluginMediaElements[e]=t,this.htmlMediaElements[e]=n},unregisterPluginElement:function(e){delete this.pluginMediaElements[e],delete this.htmlMediaElements[e]},initPlugin:function(e){var t=this.pluginMediaElements[e],n=this.htmlMediaElements[e];if(t){switch(t.pluginType){case"flash":t.pluginElement=t.pluginApi=document.getElementById(e);break;case"silverlight":t.pluginElement=document.getElementById(t.id),t.pluginApi=t.pluginElement.Content.MediaElementJS}t.pluginApi!=null&&t.success&&t.success(t,n)}},fireEvent:function(e,t,n){var r,i;if(e=this.pluginMediaElements[e]){t={type:t,target:e};for(r in n)e[r]=n[r],t[r]=n[r];i=n.bufferedTime||0,t.target.buffered=t.buffered={start:function(){return 0},end:function(){return i},length:1},e.dispatchEvent(t.type,t)}}},mejs.MediaElementDefaults={mode:"auto",plugins:["flash","silverlight","youtube","vimeo"],enablePluginDebug:!1,httpsBasicAuthSite:!1,type:"",pluginPath:mejs.Utility.getScriptPath(["mediaelement.js","mediaelement.min.js","mediaelement-and-player.js","mediaelement-and-player.min.js"]),flashName:"flashmediaelement.swf",flashStreamer:"",enablePluginSmoothing:!1,enablePseudoStreaming:!1,pseudoStreamingStartQueryParam:"start",silverlightName:"silverlightmediaelement.xap",defaultVideoWidth:480,defaultVideoHeight:270,pluginWidth:-1,pluginHeight:-1,pluginVars:[],timerRate:250,startVolume:.8,success:function(){},error:function(){}},mejs.MediaElement=function(e,t){return mejs.HtmlMediaElementShim.create(e,t)},mejs.HtmlMediaElementShim={create:function(e,t){var n=mejs.MediaElementDefaults,r=typeof e=="string"?document.getElementById(e):e,i=r.tagName.toLowerCase(),s=i==="audio"||i==="video",o=s?r.getAttribute("src"):r.getAttribute("href");i=r.getAttribute("poster");var u=r.getAttribute("autoplay"),a=r.getAttribute("preload"),f=r.getAttribute("controls"),l;for(l in t)n[l]=t[l];return o=typeof o=="undefined"||o===null||o==""?null:o,i=typeof i=="undefined"||i===null?"":i,a=typeof a=="undefined"||a===null||a==="false"?"none":a,u=typeof u!="undefined"&&u!==null&&u!=="false",f=typeof f!="undefined"&&f!==null&&f!=="false",l=this.determinePlayback(r,n,mejs.MediaFeatures.supportsMediaTag,s,o),l.url=l.url!==null?mejs.Utility.absolutizeUrl(l.url):"",l.method=="native"?(mejs.MediaFeatures.isBustedAndroid&&(r.src=l.url,r.addEventListener("click",function(){r.play()},!1)),this.updateNative(l,n,u,a)):l.method!==""?this.createPlugin(l,n,i,u,a,f):(this.createErrorMessage(l,n,i),this)},determinePlayback:function(e,t,n,r,i){var s=[],o,u,a,f={method:"",url:"",htmlMediaElement:e,isVideo:e.tagName.toLowerCase()!="audio"},l;if(typeof t.type!="undefined"&&t.type!=="")if(typeof t.type=="string")s.push({type:t.type,url:i});else for(o=0;o<t.type.length;o++)s.push({type:t.type[o],url:i});else if(i!==null)a=this.formatType(i,e.getAttribute("type")),s.push({type:a,url:i});else for(o=0;o<e.childNodes.length;o++)u=e.childNodes[o],u.nodeType==1&&u.tagName.toLowerCase()=="source"&&(i=u.getAttribute("src"),a=this.formatType(i,u.getAttribute("type")),u=u.getAttribute("media"),(!u||!window.matchMedia||window.matchMedia&&window.matchMedia(u).matches)&&s.push({type:a,url:i}));!r&&s.length>0&&s[0].url!==null&&this.getTypeFromFile(s[0].url).indexOf("audio")>-1&&(f.isVideo=!1),mejs.MediaFeatures.isBustedAndroid&&(e.canPlayType=function(e){return e.match(/video\/(mp4|m4v)/gi)!==null?"maybe":""});if(n&&(t.mode==="auto"||t.mode==="auto_plugin"||t.mode==="native")&&(!mejs.MediaFeatures.isBustedNativeHTTPS||t.httpsBasicAuthSite!==!0)){r||(o=document.createElement(f.isVideo?"video":"audio"),e.parentNode.insertBefore(o,e),e.style.display="none",f.htmlMediaElement=e=o);for(o=0;o<s.length;o++)if(e.canPlayType(s[o].type).replace(/no/,"")!==""||e.canPlayType(s[o].type.replace(/mp3/,"mpeg")).replace(/no/,"")!==""){f.method="native",f.url=s[o].url;break}if(f.method==="native"){f.url!==null&&(e.src=f.url);if(t.mode!=="auto_plugin")return f}}if(t.mode==="auto"||t.mode==="auto_plugin"||t.mode==="shim")for(o=0;o<s.length;o++){a=s[o].type;for(e=0;e<t.plugins.length;e++){i=t.plugins[e],u=mejs.plugins[i];for(n=0;n<u.length;n++){l=u[n];if(l.version==null||mejs.PluginDetector.hasPluginVersion(i,l.version))for(r=0;r<l.types.length;r++)if(a==l.types[r])return f.method=i,f.url=s[o].url,f}}}return t.mode==="auto_plugin"&&f.method==="native"?f:(f.method===""&&s.length>0&&(f.url=s[0].url),f)},formatType:function(e,t){return e&&!t?this.getTypeFromFile(e):t&&~t.indexOf(";")?t.substr(0,t.indexOf(";")):t},getTypeFromFile:function(e){return e=e.split("?")[0],e=e.substring(e.lastIndexOf(".")+1).toLowerCase(),(/(mp4|m4v|ogg|ogv|webm|webmv|flv|wmv|mpeg|mov)/gi.test(e)?"video":"audio")+"/"+this.getTypeFromExtension(e)},getTypeFromExtension:function(e){switch(e){case"mp4":case"m4v":return"mp4";case"webm":case"webma":case"webmv":return"webm";case"ogg":case"oga":case"ogv":return"ogg";default:return e}},createErrorMessage:function(e,t,n){var r=e.htmlMediaElement,i=document.createElement("div");i.className="me-cannotplay";try{i.style.width=r.width+"px",i.style.height=r.height+"px"}catch(s){}i.innerHTML=t.customError?t.customError:n!==""?'<a href="'+e.url+'"><img src="'+n+'" width="100%" height="100%" /></a>':'<a href="'+e.url+'"><span>'+mejs.i18n.t("Download File")+"</span></a>",r.parentNode.insertBefore(i,r),r.style.display="none",t.error(r)},createPlugin:function(e,t,n,r,i,s){n=e.htmlMediaElement;var o=1,u=1,a="me_"+e.method+"_"+mejs.meIndex++,f=new mejs.PluginMediaElement(a,e.method,e.url),l=document.createElement("div"),c;f.tagName=n.tagName;for(c=0;c<n.attributes.length;c++){var h=n.attributes[c];h.specified==1&&f.setAttribute(h.name,h.value)}for(c=n.parentNode;c!==null&&c.tagName.toLowerCase()!="body";){if(c.parentNode.tagName.toLowerCase()=="p"){c.parentNode.parentNode.insertBefore(c,c.parentNode);break}c=c.parentNode}e.isVideo?(o=t.pluginWidth>0?t.pluginWidth:t.videoWidth>0?t.videoWidth:n.getAttribute("width")!==null?n.getAttribute("width"):t.defaultVideoWidth,u=t.pluginHeight>0?t.pluginHeight:t.videoHeight>0?t.videoHeight:n.getAttribute("height")!==null?n.getAttribute("height"):t.defaultVideoHeight,o=mejs.Utility.encodeUrl(o),u=mejs.Utility.encodeUrl(u)):t.enablePluginDebug&&(o=320,u=240),f.success=t.success,mejs.MediaPluginBridge.registerPluginElement(a,f,n),l.className="me-plugin",l.id=a+"_container",e.isVideo?n.parentNode.insertBefore(l,n):document.body.insertBefore(l,document.body.childNodes[0]),r=["id="+a,"isvideo="+(e.isVideo?"true":"false"),"autoplay="+(r?"true":"false"),"preload="+i,"width="+o,"startvolume="+t.startVolume,"timerrate="+t.timerRate,"flashstreamer="+t.flashStreamer,"height="+u,"pseudostreamstart="+t.pseudoStreamingStartQueryParam],e.url!==null&&(e.method=="flash"?r.push("file="+mejs.Utility.encodeUrl(e.url)):r.push("file="+e.url)),t.enablePluginDebug&&r.push("debug=true"),t.enablePluginSmoothing&&r.push("smoothing=true"),t.enablePseudoStreaming&&r.push("pseudostreaming=true"),s&&r.push("controls=true"),t.pluginVars&&(r=r.concat(t.pluginVars));switch(e.method){case"silverlight":l.innerHTML='<object data="data:application/x-silverlight-2," type="application/x-silverlight-2" id="'+a+'" name="'+a+'" width="'+o+'" height="'+u+'" class="mejs-shim"><param name="initParams" value="'+r.join(",")+'" /><param name="windowless" value="true" /><param name="background" value="black" /><param name="minRuntimeVersion" value="3.0.0.0" /><param name="autoUpgrade" value="true" /><param name="source" value="'+t.pluginPath+t.silverlightName+'" /></object>';break;case"flash":mejs.MediaFeatures.isIE?(e=document.createElement("div"),l.appendChild(e),e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="'+a+'" width="'+o+'" height="'+u+'" class="mejs-shim"><param name="movie" value="'+t.pluginPath+t.flashName+"?x="+new Date+'" /><param name="flashvars" value="'+r.join("&amp;")+'" /><param name="quality" value="high" /><param name="bgcolor" value="#000000" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="true" /></object>'):l.innerHTML='<embed id="'+a+'" name="'+a+'" play="true" loop="false" quality="high" bgcolor="#000000" wmode="transparent" allowScriptAccess="always" allowFullScreen="true" type="application/x-shockwave-flash" pluginspage="//www.macromedia.com/go/getflashplayer" src="'+t.pluginPath+t.flashName+'" flashvars="'+r.join("&")+'" width="'+o+'" height="'+u+'" class="mejs-shim"></embed>';break;case"youtube":t=e.url.substr(e.url.lastIndexOf("=")+1),youtubeSettings={container:l,containerId:l.id,pluginMediaElement:f,pluginId:a,videoId:t,height:u,width:o},mejs.PluginDetector.hasPluginVersion("flash",[10,0,0])?mejs.YouTubeApi.createFlash(youtubeSettings):mejs.YouTubeApi.enqueueIframe(youtubeSettings);break;case"vimeo":f.vimeoid=e.url.substr(e.url.lastIndexOf("/")+1),l.innerHTML='<iframe src="http://player.vimeo.com/video/'+f.vimeoid+'?portrait=0&byline=0&title=0" width="'+o+'" height="'+u+'" frameborder="0" class="mejs-shim"></iframe>'}return n.style.display="none",n.removeAttribute("autoplay"),f},updateNative:function(e,t){var n=e.htmlMediaElement,r;for(r in mejs.HtmlMediaElement)n[r]=mejs.HtmlMediaElement[r];return t.success(n,n),n}},mejs.YouTubeApi={isIframeStarted:!1,isIframeLoaded:!1,loadIframeApi:function(){if(!this.isIframeStarted){var e=document.createElement("script");e.src="//www.youtube.com/player_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),this.isIframeStarted=!0}},iframeQueue:[],enqueueIframe:function(e){this.isLoaded?this.createIframe(e):(this.loadIframeApi(),this.iframeQueue.push(e))},createIframe:function(e){var t=e.pluginMediaElement,n=new YT.Player(e.containerId,{height:e.height,width:e.width,videoId:e.videoId,playerVars:{controls:0},events:{onReady:function(){e.pluginMediaElement.pluginApi=n,mejs.MediaPluginBridge.initPlugin(e.pluginId),setInterval(function(){mejs.YouTubeApi.createEvent(n,t,"timeupdate")},250)},onStateChange:function(e){mejs.YouTubeApi.handleStateChange(e.data,n,t)}}})},createEvent:function(e,t,n){n={type:n,target:t};if(e&&e.getDuration){t.currentTime=n.currentTime=e.getCurrentTime(),t.duration=n.duration=e.getDuration(),n.paused=t.paused,n.ended=t.ended,n.muted=e.isMuted(),n.volume=e.getVolume()/100,n.bytesTotal=e.getVideoBytesTotal(),n.bufferedBytes=e.getVideoBytesLoaded();var r=n.bufferedBytes/n.bytesTotal*n.duration;n.target.buffered=n.buffered={start:function(){return 0},end:function(){return r},length:1}}t.dispatchEvent(n.type,n)},iFrameReady:function(){for(this.isIframeLoaded=this.isLoaded=!0;this.iframeQueue.length>0;)this.createIframe(this.iframeQueue.pop())},flashPlayers:{},createFlash:function(e){this.flashPlayers[e.pluginId]=e;var t,n="//www.youtube.com/apiplayer?enablejsapi=1&amp;playerapiid="+e.pluginId+"&amp;version=3&amp;autoplay=0&amp;controls=0&amp;modestbranding=1&loop=0";mejs.MediaFeatures.isIE?(t=document.createElement("div"),e.container.appendChild(t),t.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="'+e.pluginId+'" width="'+e.width+'" height="'+e.height+'" class="mejs-shim"><param name="movie" value="'+n+'" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="true" /></object>'):e.container.innerHTML='<object type="application/x-shockwave-flash" id="'+e.pluginId+'" data="'+n+'" width="'+e.width+'" height="'+e.height+'" style="visibility: visible; " class="mejs-shim"><param name="allowScriptAccess" value="always"><param name="wmode" value="transparent"></object>'},flashReady:function(e){var t=this.flashPlayers[e],n=document.getElementById(e),r=t.pluginMediaElement;r.pluginApi=r.pluginElement=n,mejs.MediaPluginBridge.initPlugin(e),n.cueVideoById(t.videoId),e=t.containerId+"_callback",window[e]=function(e){mejs.YouTubeApi.handleStateChange(e,n,r)},n.addEventListener("onStateChange",e),setInterval(function(){mejs.YouTubeApi.createEvent(n,r,"timeupdate")},250)},handleStateChange:function(e,t,n){switch(e){case-1:n.paused=!0,n.ended=!0,mejs.YouTubeApi.createEvent(t,n,"loadedmetadata");break;case 0:n.paused=!1,n.ended=!0,mejs.YouTubeApi.createEvent(t,n,"ended");break;case 1:n.paused=!1,n.ended=!1,mejs.YouTubeApi.createEvent(t,n,"play"),mejs.YouTubeApi.createEvent(t,n,"playing");break;case 2:n.paused=!0,n.ended=!1,mejs.YouTubeApi.createEvent(t,n,"pause");break;case 3:mejs.YouTubeApi.createEvent(t,n,"progress")}}},window.mejs=mejs,window.MediaElement=mejs.MediaElement,function(e,t){var n={locale:{language:"",strings:{}},methods:{}};n.locale.getLanguage=function(){return n.locale.language||navigator.language},typeof mejsL10n!="undefined"&&(n.locale.language=mejsL10n.language),n.locale.INIT_LANGUAGE=n.locale.getLanguage(),n.methods.checkPlain=function(e){var t,n,r={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;"};e=String(e);for(t in r)r.hasOwnProperty(t)&&(n=RegExp(t,"g"),e=e.replace(n,r[t]));return e},n.methods.formatString=function(e,t){for(var r in t){switch(r.charAt(0)){case"@":t[r]=n.methods.checkPlain(t[r]);break;case"!":break;default:t[r]='<em class="placeholder">'+n.methods.checkPlain(t[r])+"</em>"}e=e.replace(r,t[r])}return e},n.methods.t=function(e,t,r){return n.locale.strings&&n.locale.strings[r.context]&&n.locale.strings[r.context][e]&&(e=n.locale.strings[r.context][e]),t&&(e=n.methods.formatString(e,t)),e},n.t=function(e,t,r){if(typeof e=="string"&&e.length>0){var i=n.locale.getLanguage();return r=r||{context:i},n.methods.t(e,t,r)}throw{name:"InvalidArgumentException",message:"First argument is either not a string or empty."}},t.i18n=n}(document,mejs),function(e){typeof mejsL10n!="undefined"&&(e[mejsL10n.language]=mejsL10n.strings)}(mejs.i18n.locale.strings),function(e){e.de={Fullscreen:"Vollbild","Go Fullscreen":"Vollbild an","Turn off Fullscreen":"Vollbild aus",Close:"Schließen"}}(mejs.i18n.locale.strings),function(e){e.zh={Fullscreen:"全螢幕","Go Fullscreen":"全屏模式","Turn off Fullscreen":"退出全屏模式",Close:"關閉"}}(mejs.i18n.locale.strings),typeof jQuery!="undefined"?mejs.$=jQuery:typeof ender!="undefined"&&(mejs.$=ender),function(e){mejs.MepDefaults={poster:"",showPosterWhenEnded:!1,defaultVideoWidth:480,defaultVideoHeight:270,videoWidth:-1,videoHeight:-1,defaultAudioWidth:400,defaultAudioHeight:30,defaultSeekBackwardInterval:function(e){return e.duration*.05},defaultSeekForwardInterval:function(e){return e.duration*.05},audioWidth:-1,audioHeight:-1,startVolume:.8,loop:!1,autoRewind:!0,enableAutosize:!0,alwaysShowHours:!1,showTimecodeFrameCount:!1,framesPerSecond:25,autosizeProgress:!0,alwaysShowControls:!1,hideVideoControlsOnLoad:!1,clickToPlayPause:!0,iPadUseNativeControls:!1,iPhoneUseNativeControls:!1,AndroidUseNativeControls:!1,features:["playpause","current","progress","duration","tracks","volume","fullscreen"],isVideo:!0,enableKeyboard:!0,pauseOtherPlayers:!0,keyActions:[{keys:[32,179],action:function(e,t){t.paused||t.ended?t.play():t.pause()}},{keys:[38],action:function(e,t){t.setVolume(Math.min(t.volume+.1,1))}},{keys:[40],action:function(e,t){t.setVolume(Math.max(t.volume-.1,0))}},{keys:[37,227],action:function(e,t){if(!isNaN(t.duration)&&t.duration>0){e.isVideo&&(e.showControls(),e.startControlsTimer());var n=Math.max(t.currentTime-e.options.defaultSeekBackwardInterval(t),0);t.setCurrentTime(n)}}},{keys:[39,228],action:function(e,t){if(!isNaN(t.duration)&&t.duration>0){e.isVideo&&(e.showControls(),e.startControlsTimer());var n=Math.min(t.currentTime+e.options.defaultSeekForwardInterval(t),t.duration);t.setCurrentTime(n)}}},{keys:[70],action:function(e){typeof e.enterFullScreen!="undefined"&&(e.isFullScreen?e.exitFullScreen():e.enterFullScreen())}}]},mejs.mepIndex=0,mejs.players={},mejs.MediaElementPlayer=function(t,n){if(this instanceof mejs.MediaElementPlayer)return this.$media=this.$node=e(t),this.node=this.media=this.$media[0],typeof this.node.player!="undefined"?this.node.player:(this.node.player=this,typeof n=="undefined"&&(n=this.$node.data("mejsoptions")),this.options=e.extend({},mejs.MepDefaults,n),this.id="mep_"+mejs.mepIndex++,mejs.players[this.id]=this,this.init(),this);return new mejs.MediaElementPlayer(t,n)},mejs.MediaElementPlayer.prototype={hasFocus:!1,controlsAreVisible:!0,init:function(){var t=this,n=mejs.MediaFeatures,r=e.extend(!0,{},t.options,{success:function(e,n){t.meReady(e,n)},error:function(e){t.handleError(e)}}),i=t.media.tagName.toLowerCase();t.isDynamic=i!=="audio"&&i!=="video",t.isVideo=t.isDynamic?t.options.isVideo:i!=="audio"&&t.options.isVideo;if(n.isiPad&&t.options.iPadUseNativeControls||n.isiPhone&&t.options.iPhoneUseNativeControls)t.$media.attr("controls","controls"),n.isiPad&&t.media.getAttribute("autoplay")!==null&&(t.media.load(),t.media.play());else if(!n.isAndroid||!t.options.AndroidUseNativeControls)t.$media.removeAttr("controls"),t.container=e('<div id="'+t.id+'" class="mejs-container '+(mejs.MediaFeatures.svg?"svg":"no-svg")+'"><div class="mejs-inner"><div class="mejs-mediaelement"></div><div class="mejs-layers"></div><div class="mejs-controls"></div><div class="mejs-clear"></div></div></div>').addClass(t.$media[0].className).insertBefore(t.$media),t.container.addClass((n.isAndroid?"mejs-android ":"")+(n.isiOS?"mejs-ios ":"")+(n.isiPad?"mejs-ipad ":"")+(n.isiPhone?"mejs-iphone ":"")+(t.isVideo?"mejs-video ":"mejs-audio ")),n.isiOS?(n=t.$media.clone(),t.container.find(".mejs-mediaelement").append(n),t.$media.remove(),t.$node=t.$media=n,t.node=t.media=n[0]):t.container.find(".mejs-mediaelement").append(t.$media),t.controls=t.container.find(".mejs-controls"),t.layers=t.container.find(".mejs-layers"),n=t.isVideo?"video":"audio",i=n.substring(0,1).toUpperCase()+n.substring(1),t.width=t.options[n+"Width"]>0||t.options[n+"Width"].toString().indexOf("%")>-1?t.options[n+"Width"]:t.media.style.width!==""&&t.media.style.width!==null?t.media.style.width:t.media.getAttribute("width")!==null?t.$media.attr("width"):t.options["default"+i+"Width"],t.height=t.options[n+"Height"]>0||t.options[n+"Height"].toString().indexOf("%")>-1?t.options[n+"Height"]:t.media.style.height!==""&&t.media.style.height!==null?t.media.style.height:t.$media[0].getAttribute("height")!==null?t.$media.attr("height"):t.options["default"+i+"Height"],t.setPlayerSize(t.width,t.height),r.pluginWidth=t.width,r.pluginHeight=t.height;mejs.MediaElement(t.$media[0],r),typeof t.container!="undefined"&&t.controlsAreVisible&&t.container.trigger("controlsshown")},showControls:function(e){var t=this;e=typeof e=="undefined"||e,t.controlsAreVisible||(e?(t.controls.css("visibility","visible").stop(!0,!0).fadeIn(200,function(){t.controlsAreVisible=!0,t.container.trigger("controlsshown")}),t.container.find(".mejs-control").css("visibility","visible").stop(!0,!0).fadeIn(200,function(){t.controlsAreVisible=!0})):(t.controls.css("visibility","visible").css("display","block"),t.container.find(".mejs-control").css("visibility","visible").css("display","block"),t.controlsAreVisible=!0,t.container.trigger("controlsshown")),t.setControlsSize())},hideControls:function(t){var n=this;t=typeof t=="undefined"||t,!!n.controlsAreVisible&&!n.options.alwaysShowControls&&(t?(n.controls.stop(!0,!0).fadeOut(200,function(){e(this).css("visibility","hidden").css("display","block"),n.controlsAreVisible=!1,n.container.trigger("controlshidden")}),n.container.find(".mejs-control").stop(!0,!0).fadeOut(200,function(){e(this).css("visibility","hidden").css("display","block")})):(n.controls.css("visibility","hidden").css("display","block"),n.container.find(".mejs-control").css("visibility","hidden").css("display","block"),n.controlsAreVisible=!1,n.container.trigger("controlshidden")))},controlsTimer:null,startControlsTimer:function(e){var t=this;e=typeof e!="undefined"?e:1500,t.killControlsTimer("start"),t.controlsTimer=setTimeout(function(){t.hideControls(),t.killControlsTimer("hide")},e)},killControlsTimer:function(){this.controlsTimer!==null&&(clearTimeout(this.controlsTimer),delete this.controlsTimer,this.controlsTimer=null)},controlsEnabled:!0,disableControls:function(){this.killControlsTimer(),this.hideControls(!1),this.controlsEnabled=!1},enableControls:function(){this.showControls(!1),this.controlsEnabled=!0},meReady:function(e,t){var n=this,r=mejs.MediaFeatures,i=t.getAttribute("autoplay");i=typeof i!="undefined"&&i!==null&&i!=="false";var s;if(!n.created){n.created=!0,n.media=e,n.domNode=t;if((!r.isAndroid||!n.options.AndroidUseNativeControls)&&(!r.isiPad||!n.options.iPadUseNativeControls)&&(!r.isiPhone||!n.options.iPhoneUseNativeControls)){n.buildposter(n,n.controls,n.layers,n.media),n.buildkeyboard(n,n.controls,n.layers,n.media),n.buildoverlays(n,n.controls,n.layers,n.media),n.findTracks();for(s in n.options.features){r=n.options.features[s];if(n["build"+r])try{n["build"+r](n,n.controls,n.layers,n.media)}catch(o){}}n.container.trigger("controlsready"),n.setPlayerSize(n.width,n.height),n.setControlsSize(),n.isVideo&&(mejs.MediaFeatures.hasTouch?n.$media.bind("touchstart",function(){n.controlsAreVisible?n.hideControls(!1):n.controlsEnabled&&n.showControls(!1)}):(mejs.MediaElementPlayer.prototype.clickToPlayPauseCallback=function(){n.options.clickToPlayPause&&(n.media.paused?n.media.play():n.media.pause())},n.media.addEventListener("click",n.clickToPlayPauseCallback,!1),n.container.bind("mouseenter mouseover",function(){n.controlsEnabled&&(n.options.alwaysShowControls||(n.killControlsTimer("enter"),n.showControls(),n.startControlsTimer(2500)))}).bind("mousemove",function(){n.controlsEnabled&&(n.controlsAreVisible||n.showControls(),n.options.alwaysShowControls||n.startControlsTimer(2500))}).bind("mouseleave",function(){n.controlsEnabled&&!n.media.paused&&!n.options.alwaysShowControls&&n.startControlsTimer(1e3)})),n.options.hideVideoControlsOnLoad&&n.hideControls(!1),i&&!n.options.alwaysShowControls&&n.hideControls(),n.options.enableAutosize&&n.media.addEventListener("loadedmetadata",function(e){n.options.videoHeight<=0&&n.domNode.getAttribute("height")===null&&!isNaN(e.target.videoHeight)&&(n.setPlayerSize(e.target.videoWidth,e.target.videoHeight),n.setControlsSize(),n.media.setVideoSize(e.target.videoWidth,e.target.videoHeight))},!1)),e.addEventListener("play",function(){for(var e in mejs.players){var t=mejs.players[e];t.id!=n.id&&n.options.pauseOtherPlayers&&!t.paused&&!t.ended&&t.pause(),t.hasFocus=!1}n.hasFocus=!0},!1),n.media.addEventListener("ended",function(){if(n.options.autoRewind)try{n.media.setCurrentTime(0)}catch(e){}n.media.pause(),n.setProgressRail&&n.setProgressRail(),n.setCurrentRail&&n.setCurrentRail(),n.options.loop?n.media.play():!n.options.alwaysShowControls&&n.controlsEnabled&&n.showControls()},!1),n.media.addEventListener("loadedmetadata",function(){n.updateDuration&&n.updateDuration(),n.updateCurrent&&n.updateCurrent(),n.isFullScreen||(n.setPlayerSize(n.width,n.height),n.setControlsSize())},!1),setTimeout(function(){n.setPlayerSize(n.width,n.height),n.setControlsSize()},50),n.globalBind("resize",function(){n.isFullScreen||mejs.MediaFeatures.hasTrueNativeFullScreen&&document.webkitIsFullScreen||n.setPlayerSize(n.width,n.height),n.setControlsSize()}),n.media.pluginType=="youtube"&&n.container.find(".mejs-overlay-play").hide()}i&&e.pluginType=="native"&&(e.load(),e.play()),n.options.success&&(typeof n.options.success=="string"?window[n.options.success](n.media,n.domNode,n):n.options.success(n.media,n.domNode,n))}},handleError:function(e){this.controls.hide(),this.options.error&&this.options.error(e)},setPlayerSize:function(t,n){typeof t!="undefined"&&(this.width=t),typeof n!="undefined"&&(this.height=n);if(this.height.toString().indexOf("%")>0||this.$node.css("max-width")==="100%"||parseInt(this.$node.css("max-width").replace(/px/,""),10)/this.$node.offsetParent().width()===1||this.$node[0].currentStyle&&this.$node[0].currentStyle.maxWidth==="100%"){var r=this.isVideo?this.media.videoWidth&&this.media.videoWidth>0?this.media.videoWidth:this.options.defaultVideoWidth:this.options.defaultAudioWidth,i=this.isVideo?this.media.videoHeight&&this.media.videoHeight>0?this.media.videoHeight:this.options.defaultVideoHeight:this.options.defaultAudioHeight,s=this.container.parent().closest(":visible").width();r=this.isVideo||!this.options.autosizeProgress?parseInt(s*i/r,10):i,this.container.parent()[0].tagName.toLowerCase()==="body"&&(s=e(window).width(),r=e(window).height()),r!=0&&s!=0&&(this.container.width(s).height(r),this.$media.add(this.container.find(".mejs-shim")).width("100%").height("100%"),this.isVideo&&this.media.setVideoSize&&this.media.setVideoSize(s,r),this.layers.children(".mejs-layer").width("100%").height("100%"))}else this.container.width(this.width).height(this.height),this.layers.children(".mejs-layer").width(this.width).height(this.height);s=this.layers.find(".mejs-overlay-play"),r=s.find(".mejs-overlay-button"),s.height(this.container.height()-this.controls.height()),r.css("margin-top","-"+(r.height()/2-this.controls.height()/2).toString()+"px")},setControlsSize:function(){var t=0,n=0,r=this.controls.find(".mejs-time-rail"),i=this.controls.find(".mejs-time-total");this.controls.find(".mejs-time-current"),this.controls.find(".mejs-time-loaded");var s=r.siblings();this.options&&!this.options.autosizeProgress&&(n=parseInt(r.css("width")));if(n===0||!n)s.each(function(){var n=e(this);n.css("position")!="absolute"&&n.is(":visible")&&(t+=e(this).outerWidth(!0))}),n=this.controls.width()-t-(r.outerWidth(!0)-r.width());r.width(n),i.width(n-(i.outerWidth(!0)-i.width())),this.setProgressRail&&this.setProgressRail(),this.setCurrentRail&&this.setCurrentRail()},buildposter:function(t,n,r,i){var s=e('<div class="mejs-poster mejs-layer"></div>').appendTo(r);n=t.$media.attr("poster"),t.options.poster!==""&&(n=t.options.poster),n!==""&&n!=null?this.setPoster(n):s.hide(),i.addEventListener("play",function(){s.hide()},!1),t.options.showPosterWhenEnded&&t.options.autoRewind&&i.addEventListener("ended",function(){s.show()},!1)},setPoster:function(t){var n=this.container.find(".mejs-poster"),r=n.find("img");r.length==0&&(r=e('<img width="100%" height="100%" />').appendTo(n)),r.attr("src",t),n.css({"background-image":"url("+t+")"})},buildoverlays:function(t,n,r,i){var s=this;if(t.isVideo){var o=e('<div class="mejs-overlay mejs-layer"><div class="mejs-overlay-loading"><span></span></div></div>').hide().appendTo(r),u=e('<div class="mejs-overlay mejs-layer"><div class="mejs-overlay-error"></div></div>').hide().appendTo(r),a=e('<div class="mejs-overlay mejs-layer mejs-overlay-play"><div class="mejs-overlay-button"></div></div>').appendTo(r).click(function(){s.options.clickToPlayPause&&(i.paused?i.play():i.pause())});i.addEventListener("play",function(){a.hide(),o.hide(),n.find(".mejs-time-buffering").hide(),u.hide()},!1),i.addEventListener("playing",function(){a.hide(),o.hide(),n.find(".mejs-time-buffering").hide(),u.hide()},!1),i.addEventListener("seeking",function(){o.show(),n.find(".mejs-time-buffering").show()},!1),i.addEventListener("seeked",function(){o.hide(),n.find(".mejs-time-buffering").hide()},!1),i.addEventListener("pause",function(){mejs.MediaFeatures.isiPhone||a.show()},!1),i.addEventListener("waiting",function(){o.show(),n.find(".mejs-time-buffering").show()},!1),i.addEventListener("loadeddata",function(){o.show(),n.find(".mejs-time-buffering").show()},!1),i.addEventListener("canplay",function(){o.hide(),n.find(".mejs-time-buffering").hide()},!1),i.addEventListener("error",function(){o.hide(),n.find(".mejs-time-buffering").hide(),u.show(),u.find("mejs-overlay-error").html("Error loading this resource")},!1)}},buildkeyboard:function(t,n,r,i){this.globalBind("keydown",function(e){if(t.hasFocus&&t.options.enableKeyboard)for(var n=0,r=t.options.keyActions.length;n<r;n++)for(var s=t.options.keyActions[n],o=0,u=s.keys.length;o<u;o++)if(e.keyCode==s.keys[o])return e.preventDefault(),s.action(t,i,e.keyCode),!1;return!0}),this.globalBind("click",function(n){e(n.target).closest(".mejs-container").length==0&&(t.hasFocus=!1)})},findTracks:function(){var t=this,n=t.$media.find("track");t.tracks=[],n.each(function(n,r){r=e(r),t.tracks.push({srclang:r.attr("srclang")?r.attr("srclang").toLowerCase():"",src:r.attr("src"),kind:r.attr("kind"),label:r.attr("label")||"",entries:[],isLoaded:!1})})},changeSkin:function(e){this.container[0].className="mejs-container "+e,this.setPlayerSize(this.width,this.height),this.setControlsSize()},play:function(){this.media.play()},pause:function(){try{this.media.pause()}catch(e){}},load:function(){this.media.load()},setMuted:function(e){this.media.setMuted(e)},setCurrentTime:function(e){this.media.setCurrentTime(e)},getCurrentTime:function(){return this.media.currentTime},setVolume:function(e){this.media.setVolume(e)},getVolume:function(){return this.media.volume},setSrc:function(e){this.media.setSrc(e)},remove:function(){var e,t;for(e in this.options.features){t=this.options.features[e];if(this["clean"+t])try{this["clean"+t](this)}catch(n){}}this.isDynamic?this.$node.insertBefore(this.container):(this.$media.prop("controls",!0),this.$node.clone().show().insertBefore(this.container),this.$node.remove()),this.media.pluginType!=="native"&&this.media.remove(),delete mejs.players[this.id],this.container.remove(),this.globalUnbind(),delete this.node.player}},function(){function t(t,r){var i={d:[],w:[]};return e.each((t||"").split(" "),function(e,t){var s=t+"."+r;s.indexOf(".")===0?(i.d.push(s),i.w.push(s)):i[n.test(t)?"w":"d"].push(s)}),i.d=i.d.join(" "),i.w=i.w.join(" "),i}var n=/^((after|before)print|(before)?unload|hashchange|message|o(ff|n)line|page(hide|show)|popstate|resize|storage)\b/;mejs.MediaElementPlayer.prototype.globalBind=function(n,r,i){n=t(n,this.id),n.d&&e(document).bind(n.d,r,i),n.w&&e(window).bind(n.w,r,i)},mejs.MediaElementPlayer.prototype.globalUnbind=function(n,r){n=t(n,this.id),n.d&&e(document).unbind(n.d,r),n.w&&e(window).unbind(n.w,r)}}(),typeof jQuery!="undefined"&&(jQuery.fn.mediaelementplayer=function(e){return e===!1?this.each(function(){var e=jQuery(this).data("mediaelementplayer");e&&e.remove(),jQuery(this).removeData("mediaelementplayer")}):this.each(function(){jQuery(this).data("mediaelementplayer",new mejs.MediaElementPlayer(this,e))}),this}),e(document).ready(function(){e(".mejs-player").mediaelementplayer()}),window.MediaElementPlayer=mejs.MediaElementPlayer}(mejs.$),function(e){e.extend(mejs.MepDefaults,{playpauseText:mejs.i18n.t("Play/Pause")}),e.extend(MediaElementPlayer.prototype,{buildplaypause:function(t,n,r,i){var s=e('<div class="mejs-button mejs-playpause-button mejs-play" ><button type="button" aria-controls="'+this.id+'" title="'+this.options.playpauseText+'" aria-label="'+this.options.playpauseText+'"></button></div>').appendTo(n).click(function(e){return e.preventDefault(),i.paused?i.play():i.pause(),!1});i.addEventListener("play",function(){s.removeClass("mejs-play").addClass("mejs-pause")},!1),i.addEventListener("playing",function(){s.removeClass("mejs-play").addClass("mejs-pause")},!1),i.addEventListener("pause",function(){s.removeClass("mejs-pause").addClass("mejs-play")},!1),i.addEventListener("paused",function(){s.removeClass("mejs-pause").addClass("mejs-play")},!1)}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{stopText:"Stop"}),e.extend(MediaElementPlayer.prototype,{buildstop:function(t,n,r,i){e('<div class="mejs-button mejs-stop-button mejs-stop"><button type="button" aria-controls="'+this.id+'" title="'+this.options.stopText+'" aria-label="'+this.options.stopText+'"></button></div>').appendTo(n).click(function(){i.paused||i.pause(),i.currentTime>0&&(i.setCurrentTime(0),i.pause(),n.find(".mejs-time-current").width("0px"),n.find(".mejs-time-handle").css("left","0px"),n.find(".mejs-time-float-current").html(mejs.Utility.secondsToTimeCode(0)),n.find(".mejs-currenttime").html(mejs.Utility.secondsToTimeCode(0)),r.find(".mejs-poster").show())})}})}(mejs.$),function(e){e.extend(MediaElementPlayer.prototype,{buildprogress:function(t,n,r,i){e('<div class="mejs-time-rail"><span class="mejs-time-total"><span class="mejs-time-buffering"></span><span class="mejs-time-loaded"></span><span class="mejs-time-current"></span><span class="mejs-time-handle"></span><span class="mejs-time-float"><span class="mejs-time-float-current">00:00</span><span class="mejs-time-float-corner"></span></span></span></div>').appendTo(n),n.find(".mejs-time-buffering").hide();var s=this,o=n.find(".mejs-time-total");r=n.find(".mejs-time-loaded");var u=n.find(".mejs-time-current"),a=n.find(".mejs-time-handle"),l=n.find(".mejs-time-float"),c=n.find(".mejs-time-float-current"),h=function(e){e=e.pageX;var t=o.offset(),n=o.outerWidth(!0),r=0,s=r=0;i.duration&&(e<t.left?e=t.left:e>n+t.left&&(e=n+t.left),s=e-t.left,r=s/n,r=r<=.02?0:r*i.duration,p&&r!==i.currentTime&&i.setCurrentTime(r),mejs.MediaFeatures.hasTouch||(l.css("left",s),c.html(mejs.Utility.secondsToTimeCode(r)),l.show()))},p=!1;o.bind("mousedown",function(e){if(e.which===1)return p=!0,h(e),s.globalBind("mousemove.dur",function(e){h(e)}),s.globalBind("mouseup.dur",function(){p=!1,l.hide(),s.globalUnbind(".dur")}),!1}).bind("mouseenter",function(){s.globalBind("mousemove.dur",function(e){h(e)}),mejs.MediaFeatures.hasTouch||l.show()}).bind("mouseleave",function(){p||(s.globalUnbind(".dur"),l.hide())}),i.addEventListener("progress",function(e){t.setProgressRail(e),t.setCurrentRail(e)},!1),i.addEventListener("timeupdate",function(e){t.setProgressRail(e),t.setCurrentRail(e)},!1),s.loaded=r,s.total=o,s.current=u,s.handle=a},setProgressRail:function(e){var t=e!=undefined?e.target:this.media,n=null;t&&t.buffered&&t.buffered.length>0&&t.buffered.end&&t.duration?n=t.buffered.end(0)/t.duration:t&&t.bytesTotal!=undefined&&t.bytesTotal>0&&t.bufferedBytes!=undefined?n=t.bufferedBytes/t.bytesTotal:e&&e.lengthComputable&&e.total!=0&&(n=e.loaded/e.total),n!==null&&(n=Math.min(1,Math.max(0,n)),this.loaded&&this.total&&this.loaded.width(this.total.width()*n))},setCurrentRail:function(){if(this.media.currentTime!=undefined&&this.media.duration&&this.total&&this.handle){var e=Math.round(this.total.width()*this.media.currentTime/this.media.duration),t=e-Math.round(this.handle.outerWidth(!0)/2);this.current.width(e),this.handle.css("left",t)}}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{duration:-1,timeAndDurationSeparator:"<span> | </span>"}),e.extend(MediaElementPlayer.prototype,{buildcurrent:function(t,n,r,i){e('<div class="mejs-time"><span class="mejs-currenttime">'+(t.options.alwaysShowHours?"00:":"")+(t.options.showTimecodeFrameCount?"00:00:00":"00:00")+"</span></div>").appendTo(n),this.currenttime=this.controls.find(".mejs-currenttime"),i.addEventListener("timeupdate",function(){t.updateCurrent()},!1)},buildduration:function(t,n,r,i){n.children().last().find(".mejs-currenttime").length>0?e(this.options.timeAndDurationSeparator+'<span class="mejs-duration">'+(this.options.duration>0?mejs.Utility.secondsToTimeCode(this.options.duration,this.options.alwaysShowHours||this.media.duration>3600,this.options.showTimecodeFrameCount,this.options.framesPerSecond||25):(t.options.alwaysShowHours?"00:":"")+(t.options.showTimecodeFrameCount?"00:00:00":"00:00"))+"</span>").appendTo(n.find(".mejs-time")):(n.find(".mejs-currenttime").parent().addClass("mejs-currenttime-container"),e('<div class="mejs-time mejs-duration-container"><span class="mejs-duration">'+(this.options.duration>0?mejs.Utility.secondsToTimeCode(this.options.duration,this.options.alwaysShowHours||this.media.duration>3600,this.options.showTimecodeFrameCount,this.options.framesPerSecond||25):(t.options.alwaysShowHours?"00:":"")+(t.options.showTimecodeFrameCount?"00:00:00":"00:00"))+"</span></div>").appendTo(n)),this.durationD=this.controls.find(".mejs-duration"),i.addEventListener("timeupdate",function(){t.updateDuration()},!1)},updateCurrent:function(){this.currenttime&&this.currenttime.html(mejs.Utility.secondsToTimeCode(this.media.currentTime,this.options.alwaysShowHours||this.media.duration>3600,this.options.showTimecodeFrameCount,this.options.framesPerSecond||25))},updateDuration:function(){this.container.toggleClass("mejs-long-video",this.media.duration>3600),this.durationD&&(this.options.duration>0||this.media.duration)&&this.durationD.html(mejs.Utility.secondsToTimeCode(this.options.duration>0?this.options.duration:this.media.duration,this.options.alwaysShowHours,this.options.showTimecodeFrameCount,this.options.framesPerSecond||25))}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{muteText:mejs.i18n.t("Mute Toggle"),hideVolumeOnTouchDevices:!0,audioVolume:"horizontal",videoVolume:"vertical"}),e.extend(MediaElementPlayer.prototype,{buildvolume:function(t,n,r,i){if(!mejs.MediaFeatures.hasTouch||!this.options.hideVolumeOnTouchDevices){var s=this,o=s.isVideo?s.options.videoVolume:s.options.audioVolume,u=o=="horizontal"?e('<div class="mejs-button mejs-volume-button mejs-mute"><button type="button" aria-controls="'+s.id+'" title="'+s.options.muteText+'" aria-label="'+s.options.muteText+'"></button></div><div class="mejs-horizontal-volume-slider"><div class="mejs-horizontal-volume-total"></div><div class="mejs-horizontal-volume-current"></div><div class="mejs-horizontal-volume-handle"></div></div>').appendTo(n):e('<div class="mejs-button mejs-volume-button mejs-mute"><button type="button" aria-controls="'+s.id+'" title="'+s.options.muteText+'" aria-label="'+s.options.muteText+'"></button><div class="mejs-volume-slider"><div class="mejs-volume-total"></div><div class="mejs-volume-current"></div><div class="mejs-volume-handle"></div></div></div>').appendTo(n),a=s.container.find(".mejs-volume-slider, .mejs-horizontal-volume-slider"),l=s.container.find(".mejs-volume-total, .mejs-horizontal-volume-total"),c=s.container.find(".mejs-volume-current, .mejs-horizontal-volume-current"),h=s.container.find(".mejs-volume-handle, .mejs-horizontal-volume-handle"),p=function(e,t){if(!a.is(":visible")&&typeof t=="undefined")a.show(),p(e,!0),a.hide();else{e=Math.max(0,e),e=Math.min(e,1),e==0?u.removeClass("mejs-mute").addClass("mejs-unmute"):u.removeClass("mejs-unmute").addClass("mejs-mute");if(o=="vertical"){var n=l.height(),r=l.position(),i=n-n*e;h.css("top",Math.round(r.top+i-h.height()/2)),c.height(n-i),c.css("top",r.top+i)}else n=l.width(),r=l.position(),n*=e,h.css("left",Math.round(r.left+n-h.width()/2)),c.width(Math.round(n))}},d=function(e){var t=null,n=l.offset();if(o=="vertical"){t=l.height(),parseInt(l.css("top").replace(/px/,""),10),t=(t-(e.pageY-n.top))/t;if(n.top==0||n.left==0)return}else t=l.width(),t=(e.pageX-n.left)/t;t=Math.max(0,t),t=Math.min(t,1),p(t),t==0?i.setMuted(!0):i.setMuted(!1),i.setVolume(t)},v=!1,m=!1;u.hover(function(){a.show(),m=!0},function(){m=!1,!v&&o=="vertical"&&a.hide()}),a.bind("mouseover",function(){m=!0}).bind("mousedown",function(e){return d(e),s.globalBind("mousemove.vol",function(e){d(e)}),s.globalBind("mouseup.vol",function(){v=!1,s.globalUnbind(".vol"),!m&&o=="vertical"&&a.hide()}),v=!0,!1}),u.find("button").click(function(){i.setMuted(!i.muted)}),i.addEventListener("volumechange",function(){v||(i.muted?(p(0),u.removeClass("mejs-mute").addClass("mejs-unmute")):(p(i.volume),u.removeClass("mejs-unmute").addClass("mejs-mute")))},!1),s.container.is(":visible")&&(p(t.options.startVolume),t.options.startVolume===0&&i.setMuted(!0),i.pluginType==="native"&&i.setVolume(t.options.startVolume))}}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{usePluginFullScreen:!0,newWindowCallback:function(){return""},fullscreenText:mejs.i18n.t("Fullscreen")}),e.extend(MediaElementPlayer.prototype,{isFullScreen:!1,isNativeFullScreen:!1,isInIframe:!1,buildfullscreen:function(t,n,r,i){if(t.isVideo){t.isInIframe=window.location!=window.parent.location,mejs.MediaFeatures.hasTrueNativeFullScreen&&(r=function(){t.isFullScreen&&(mejs.MediaFeatures.isFullScreen()?(t.isNativeFullScreen=!0,t.setControlsSize()):(t.isNativeFullScreen=!1,t.exitFullScreen()))},mejs.MediaFeatures.hasMozNativeFullScreen?t.globalBind(mejs.MediaFeatures.fullScreenEventName,r):t.container.bind(mejs.MediaFeatures.fullScreenEventName,r));var s=this,o=e('<div class="mejs-button mejs-fullscreen-button"><button type="button" aria-controls="'+s.id+'" title="'+s.options.fullscreenText+'" aria-label="'+s.options.fullscreenText+'"></button></div>').appendTo(n);if(s.media.pluginType==="native"||!s.options.usePluginFullScreen&&!mejs.MediaFeatures.isFirefox)o.click(function(){mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen()||t.isFullScreen?t.exitFullScreen():t.enterFullScreen()});else{var u=null;if(function(){var e=document.createElement("x"),t=document.documentElement,n=window.getComputedStyle;return"pointerEvents"in e.style?(e.style.pointerEvents="auto",e.style.pointerEvents="x",t.appendChild(e),n=n&&n(e,"").pointerEvents==="auto",t.removeChild(e),!!n):!1}()&&!mejs.MediaFeatures.isOpera){var a=!1,l=function(){if(a){for(var e in c)c[e].hide();o.css("pointer-events",""),s.controls.css("pointer-events",""),s.media.removeEventListener("click",s.clickToPlayPauseCallback),a=!1}},c={};n=["top","left","right","bottom"];var h,p=function(){var e=o.offset().left-s.container.offset().left,t=o.offset().top-s.container.offset().top,n=o.outerWidth(!0),r=o.outerHeight(!0),i=s.container.width(),u=s.container.height();for(h in c)c[h].css({position:"absolute",top:0,left:0});c.top.width(i).height(t),c.left.width(e).height(r).css({top:t}),c.right.width(i-e-n).height(r).css({top:t,left:e+n}),c.bottom.width(i).height(u-r-t).css({top:t+r})};s.globalBind("resize",function(){p()}),h=0;for(r=n.length;h<r;h++)c[n[h]]=e('<div class="mejs-fullscreen-hover" />').appendTo(s.container).mouseover(l).hide();o.on("mouseover",function(){if(!s.isFullScreen){var e=o.offset(),n=t.container.offset();i.positionFullscreenButton(e.left-n.left,e.top-n.top,!1),o.css("pointer-events","none"),s.controls.css("pointer-events","none"),s.media.addEventListener("click",s.clickToPlayPauseCallback);for(h in c)c[h].show();p(),a=!0}}),i.addEventListener("fullscreenchange",function(){s.isFullScreen=!s.isFullScreen,s.isFullScreen?s.media.removeEventListener("click",s.clickToPlayPauseCallback):s.media.addEventListener("click",s.clickToPlayPauseCallback),l()}),s.globalBind("mousemove",function(e){if(a){var t=o.offset();if(e.pageY<t.top||e.pageY>t.top+o.outerHeight(!0)||e.pageX<t.left||e.pageX>t.left+o.outerWidth(!0))o.css("pointer-events",""),s.controls.css("pointer-events",""),a=!1}})}else o.on("mouseover",function(){u!==null&&(clearTimeout(u),delete u);var e=o.offset(),n=t.container.offset();i.positionFullscreenButton(e.left-n.left,e.top-n.top,!0)}).on("mouseout",function(){u!==null&&(clearTimeout(u),delete u),u=setTimeout(function(){i.hideFullscreenButton()},1500)})}t.fullscreenBtn=o,s.globalBind("keydown",function(e){(mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen()||s.isFullScreen)&&e.keyCode==27&&t.exitFullScreen()})}},cleanfullscreen:function(e){e.exitFullScreen()},containerSizeTimeout:null,enterFullScreen:function(){var t=this;if(t.media.pluginType==="native"||!mejs.MediaFeatures.isFirefox&&!t.options.usePluginFullScreen){e(document.documentElement).addClass("mejs-fullscreen"),normalHeight=t.container.height(),normalWidth=t.container.width();if(t.media.pluginType==="native")if(mejs.MediaFeatures.hasTrueNativeFullScreen)mejs.MediaFeatures.requestFullScreen(t.container[0]),t.isInIframe&&setTimeout(function r(){t.isNativeFullScreen&&(e(window).width()!==screen.width?t.exitFullScreen():setTimeout(r,500))},500);else if(mejs.MediaFeatures.hasSemiNativeFullScreen){t.media.webkitEnterFullscreen();return}if(t.isInIframe){var n=t.options.newWindowCallback(this);if(n!==""){if(!mejs.MediaFeatures.hasTrueNativeFullScreen){t.pause(),window.open(n,t.id,"top=0,left=0,width="+screen.availWidth+",height="+screen.availHeight+",resizable=yes,scrollbars=no,status=no,toolbar=no");return}setTimeout(function(){t.isNativeFullScreen||(t.pause(),window.open(n,t.id,"top=0,left=0,width="+screen.availWidth+",height="+screen.availHeight+",resizable=yes,scrollbars=no,status=no,toolbar=no"))},250)}}t.container.addClass("mejs-container-fullscreen").width("100%").height("100%"),t.containerSizeTimeout=setTimeout(function(){t.container.css({width:"100%",height:"100%"}),t.setControlsSize()},500),t.media.pluginType==="native"?t.$media.width("100%").height("100%"):(t.container.find(".mejs-shim").width("100%").height("100%"),t.media.setVideoSize(e(window).width(),e(window).height())),t.layers.children("div").width("100%").height("100%"),t.fullscreenBtn&&t.fullscreenBtn.removeClass("mejs-fullscreen").addClass("mejs-unfullscreen"),t.setControlsSize(),t.isFullScreen=!0}},exitFullScreen:function(){clearTimeout(this.containerSizeTimeout),this.media.pluginType!=="native"&&mejs.MediaFeatures.isFirefox?this.media.setFullscreen(!1):(mejs.MediaFeatures.hasTrueNativeFullScreen&&(mejs.MediaFeatures.isFullScreen()||this.isFullScreen)&&mejs.MediaFeatures.cancelFullScreen(),e(document.documentElement).removeClass("mejs-fullscreen"),this.container.removeClass("mejs-container-fullscreen").width(normalWidth).height(normalHeight),this.media.pluginType==="native"?this.$media.width(normalWidth).height(normalHeight):(this.container.find(".mejs-shim").width(normalWidth).height(normalHeight),this.media.setVideoSize(normalWidth,normalHeight)),this.layers.children("div").width(normalWidth).height(normalHeight),this.fullscreenBtn.removeClass("mejs-unfullscreen").addClass("mejs-fullscreen"),this.setControlsSize(),this.isFullScreen=!1)}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{startLanguage:"",tracksText:mejs.i18n.t("Captions/Subtitles"),hideCaptionsButtonWhenEmpty:!0,toggleCaptionsButtonWhenOnlyOne:!1,slidesSelector:""}),e.extend(MediaElementPlayer.prototype,{hasChapters:!1,buildtracks:function(t,n,r,i){if(t.tracks.length!=0){var s;if(this.domNode.textTracks)for(s=this.domNode.textTracks.length-1;s>=0;s--)this.domNode.textTracks[s].mode="hidden";t.chapters=e('<div class="mejs-chapters mejs-layer"></div>').prependTo(r).hide(),t.captions=e('<div class="mejs-captions-layer mejs-layer"><div class="mejs-captions-position mejs-captions-position-hover"><span class="mejs-captions-text"></span></div></div>').prependTo(r).hide(),t.captionsText=t.captions.find(".mejs-captions-text"),t.captionsButton=e('<div class="mejs-button mejs-captions-button"><button type="button" aria-controls="'+this.id+'" title="'+this.options.tracksText+'" aria-label="'+this.options.tracksText+'"></button><div class="mejs-captions-selector"><ul><li><input type="radio" name="'+t.id+'_captions" id="'+t.id+'_captions_none" value="none" checked="checked" /><label for="'+t.id+'_captions_none">'+mejs.i18n.t("None")+"</label></li></ul></div></div>").appendTo(n);for(s=n=0;s<t.tracks.length;s++)t.tracks[s].kind=="subtitles"&&n++;this.options.toggleCaptionsButtonWhenOnlyOne&&n==1?t.captionsButton.on("click",function(){t.setTrack(t.selectedTrack==null?t.tracks[0].srclang:"none")}):t.captionsButton.hover(function(){e(this).find(".mejs-captions-selector").css("visibility","visible")},function(){e(this).find(".mejs-captions-selector").css("visibility","hidden")}).on("click","input[type=radio]",function(){lang=this.value,t.setTrack(lang)}),t.options.alwaysShowControls?t.container.find(".mejs-captions-position").addClass("mejs-captions-position-hover"):t.container.bind("controlsshown",function(){t.container.find(".mejs-captions-position").addClass("mejs-captions-position-hover")}).bind("controlshidden",function(){i.paused||t.container.find(".mejs-captions-position").removeClass("mejs-captions-position-hover")}),t.trackToLoad=-1,t.selectedTrack=null,t.isLoadingTrack=!1;for(s=0;s<t.tracks.length;s++)t.tracks[s].kind=="subtitles"&&t.addTrackButton(t.tracks[s].srclang,t.tracks[s].label);t.loadNextTrack(),i.addEventListener("timeupdate",function(){t.displayCaptions()},!1),t.options.slidesSelector!=""&&(t.slidesContainer=e(t.options.slidesSelector),i.addEventListener("timeupdate",function(){t.displaySlides()},!1)),i.addEventListener("loadedmetadata",function(){t.displayChapters()},!1),t.container.hover(function(){t.hasChapters&&(t.chapters.css("visibility","visible"),t.chapters.fadeIn(200).height(t.chapters.find(".mejs-chapter").outerHeight()))},function(){t.hasChapters&&!i.paused&&t.chapters.fadeOut(200,function(){e(this).css("visibility","hidden"),e(this).css("display","block")})}),t.node.getAttribute("autoplay")!==null&&t.chapters.css("visibility","hidden")}},setTrack:function(e){var t;if(e=="none")this.selectedTrack=null,this.captionsButton.removeClass("mejs-captions-enabled");else for(t=0;t<this.tracks.length;t++)if(this.tracks[t].srclang==e){this.selectedTrack==null&&this.captionsButton.addClass("mejs-captions-enabled"),this.selectedTrack=this.tracks[t],this.captions.attr("lang",this.selectedTrack.srclang),this.displayCaptions();break}},loadNextTrack:function(){this.trackToLoad++,this.trackToLoad<this.tracks.length?(this.isLoadingTrack=!0,this.loadTrack(this.trackToLoad)):(this.isLoadingTrack=!1,this.checkForTracks())},loadTrack:function(t){var n=this,r=n.tracks[t];e.ajax({url:r.src,dataType:"text",success:function(e){r.entries=typeof e=="string"&&/<tt\s+xml/ig.exec(e)?mejs.TrackFormatParser.dfxp.parse(e):mejs.TrackFormatParser.webvvt.parse(e),r.isLoaded=!0,n.enableTrackButton(r.srclang,r.label),n.loadNextTrack(),r.kind=="chapters"&&n.media.addEventListener("play",function(){n.media.duration>0&&n.displayChapters(r)},!1),r.kind=="slides"&&n.setupSlides(r)},error:function(){n.loadNextTrack()}})},enableTrackButton:function(t,n){n===""&&(n=mejs.language.codes[t]||t),this.captionsButton.find("input[value="+t+"]").prop("disabled",!1).siblings("label").html(n),this.options.startLanguage==t&&e("#"+this.id+"_captions_"+t).click(),this.adjustLanguageBox()},addTrackButton:function(t,n){n===""&&(n=mejs.language.codes[t]||t),this.captionsButton.find("ul").append(e('<li><input type="radio" name="'+this.id+'_captions" id="'+this.id+"_captions_"+t+'" value="'+t+'" disabled="disabled" /><label for="'+this.id+"_captions_"+t+'">'+n+" (loading)</label></li>")),this.adjustLanguageBox(),this.container.find(".mejs-captions-translations option[value="+t+"]").remove()},adjustLanguageBox:function(){this.captionsButton.find(".mejs-captions-selector").height(this.captionsButton.find(".mejs-captions-selector ul").outerHeight(!0)+this.captionsButton.find(".mejs-captions-translations").outerHeight(!0))},checkForTracks:function(){var e=!1;if(this.options.hideCaptionsButtonWhenEmpty){for(i=0;i<this.tracks.length;i++)if(this.tracks[i].kind=="subtitles"){e=!0;break}e||(this.captionsButton.hide(),this.setControlsSize())}},displayCaptions:function(){if(typeof this.tracks!="undefined"){var e,t=this.selectedTrack;if(t!=null&&t.isLoaded)for(e=0;e<t.entries.times.length;e++)if(this.media.currentTime>=t.entries.times[e].start&&this.media.currentTime<=t.entries.times[e].stop){this.captionsText.html(t.entries.text[e]),this.captions.show().height(0);return}this.captions.hide()}},setupSlides:function(e){this.slides=e,this.slides.entries.imgs=[this.slides.entries.text.length],this.showSlide(0)},showSlide:function(t){if(typeof this.tracks!="undefined"&&typeof this.slidesContainer!="undefined"){var n=this,r=n.slides.entries.text[t],i=n.slides.entries.imgs[t];typeof i=="undefined"||typeof i.fadeIn=="undefined"?n.slides.entries.imgs[t]=i=e('<img src="'+r+'">').on("load",function(){i.appendTo(n.slidesContainer).hide().fadeIn().siblings(":visible").fadeOut()}):!i.is(":visible")&&!i.is(":animated")&&i.fadeIn().siblings(":visible").fadeOut()}},displaySlides:function(){if(typeof this.slides!="undefined"){var e=this.slides,t;for(t=0;t<e.entries.times.length;t++)if(this.media.currentTime>=e.entries.times[t].start&&this.media.currentTime<=e.entries.times[t].stop){this.showSlide(t);break}}},displayChapters:function(){var e;for(e=0;e<this.tracks.length;e++)if(this.tracks[e].kind=="chapters"&&this.tracks[e].isLoaded){this.drawChapters(this.tracks[e]),this.hasChapters=!0;break}},drawChapters:function(t){var n=this,r,i,s=i=0;n.chapters.empty();for(r=0;r<t.entries.times.length;r++){i=t.entries.times[r].stop-t.entries.times[r].start,i=Math.floor(i/n.media.duration*100);if(i+s>100||r==t.entries.times.length-1&&i+s<100)i=100-s;n.chapters.append(e('<div class="mejs-chapter" rel="'+t.entries.times[r].start+'" style="left: '+s.toString()+"%;width: "+i.toString()+'%;"><div class="mejs-chapter-block'+(r==t.entries.times.length-1?" mejs-chapter-block-last":"")+'"><span class="ch-title">'+t.entries.text[r]+'</span><span class="ch-time">'+mejs.Utility.secondsToTimeCode(t.entries.times[r].start)+"&ndash;"+mejs.Utility.secondsToTimeCode(t.entries.times[r].stop)+"</span></div></div>")),s+=i}n.chapters.find("div.mejs-chapter").click(function(){n.media.setCurrentTime(parseFloat(e(this).attr("rel"))),n.media.paused&&n.media.play()}),n.chapters.show()}}),mejs.language={codes:{af:"Afrikaans",sq:"Albanian",ar:"Arabic",be:"Belarusian",bg:"Bulgarian",ca:"Catalan",zh:"Chinese","zh-cn":"Chinese Simplified","zh-tw":"Chinese Traditional",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch",en:"English",et:"Estonian",tl:"Filipino",fi:"Finnish",fr:"French",gl:"Galician",de:"German",el:"Greek",ht:"Haitian Creole",iw:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",ga:"Irish",it:"Italian",ja:"Japanese",ko:"Korean",lv:"Latvian",lt:"Lithuanian",mk:"Macedonian",ms:"Malay",mt:"Maltese",no:"Norwegian",fa:"Persian",pl:"Polish",pt:"Portuguese",ro:"Romanian",ru:"Russian",sr:"Serbian",sk:"Slovak",sl:"Slovenian",es:"Spanish",sw:"Swahili",sv:"Swedish",tl:"Tagalog",th:"Thai",tr:"Turkish",uk:"Ukrainian",vi:"Vietnamese",cy:"Welsh",yi:"Yiddish"}},mejs.TrackFormatParser={webvvt:{pattern_identifier:/^([a-zA-z]+-)?[0-9]+$/,pattern_timecode:/^([0-9]{2}:[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\> ([0-9]{2}:[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*)$/,parse:function(t){var n=0;t=mejs.TrackFormatParser.split2(t,/\r?\n/);for(var r={text:[],times:[]},i,s;n<t.length;n++)if(this.pattern_identifier.exec(t[n])){n++;if((i=this.pattern_timecode.exec(t[n]))&&n<t.length){n++,s=t[n];for(n++;t[n]!==""&&n<t.length;)s=s+"\n"+t[n],n++;s=e.trim(s).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,"<a href='$1' target='_blank'>$1</a>"),r.text.push(s),r.times.push({start:mejs.Utility.convertSMPTEtoSeconds(i[1])==0?.2:mejs.Utility.convertSMPTEtoSeconds(i[1]),stop:mejs.Utility.convertSMPTEtoSeconds(i[3]),settings:i[5]})}}return r}},dfxp:{parse:function(t){t=e(t).filter("tt");var n=0;n=t.children("div").eq(0);var r=n.find("p");n=t.find("#"+n.attr("style"));var i,s;t={text:[],times:[]};if(n.length){s=n.removeAttr("id").get(0).attributes;if(s.length){i={};for(n=0;n<s.length;n++)i[s[n].name.split(":")[1]]=s[n].value}}for(n=0;n<r.length;n++){var o;s={start:null,stop:null,style:null},r.eq(n).attr("begin")&&(s.start=mejs.Utility.convertSMPTEtoSeconds(r.eq(n).attr("begin"))),!s.start&&r.eq(n-1).attr("end")&&(s.start=mejs.Utility.convertSMPTEtoSeconds(r.eq(n-1).attr("end"))),r.eq(n).attr("end")&&(s.stop=mejs.Utility.convertSMPTEtoSeconds(r.eq(n).attr("end"))),!s.stop&&r.eq(n+1).attr("begin")&&(s.stop=mejs.Utility.convertSMPTEtoSeconds(r.eq(n+1).attr("begin")));if(i){o="";for(var u in i)o+=u+":"+i[u]+";"}o&&(s.style=o),s.start==0&&(s.start=.2),t.times.push(s),s=e.trim(r.eq(n).html()).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,"<a href='$1' target='_blank'>$1</a>"),t.text.push(s),t.times.start==0&&(t.times.start=2)}return t}},split2:function(e,t){return e.split(t)}},"x\n\ny".split(/\n/gi).length!=3&&(mejs.TrackFormatParser.split2=function(e,t){var n=[],r="",i;for(i=0;i<e.length;i++)r+=e.substring(i,i+1),t.test(r)&&(n.push(r.replace(t,"")),r="");return n.push(r),n})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{contextMenuItems:[{render:function(e){return typeof e.enterFullScreen=="undefined"?null:e.isFullScreen?mejs.i18n.t("Turn off Fullscreen"):mejs.i18n.t("Go Fullscreen")},click:function(e){e.isFullScreen?e.exitFullScreen():e.enterFullScreen()}},{render:function(e){return e.media.muted?mejs.i18n.t("Unmute"):mejs.i18n.t("Mute")},click:function(e){e.media.muted?e.setMuted(!1):e.setMuted(!0)}},{isSeparator:!0},{render:function(){return mejs.i18n.t("Download Video")},click:function(e){window.location.href=e.media.currentSrc}}]}),e.extend(MediaElementPlayer.prototype,{buildcontextmenu:function(t){t.contextMenu=e('<div class="mejs-contextmenu"></div>').appendTo(e("body")).hide(),t.container.bind("contextmenu",function(e){if(t.isContextMenuEnabled)return e.preventDefault(),t.renderContextMenu(e.clientX-1,e.clientY-1),!1}),t.container.bind("click",function(){t.contextMenu.hide()}),t.contextMenu.bind("mouseleave",function(){t.startContextMenuTimer()})},cleancontextmenu:function(e){e.contextMenu.remove()},isContextMenuEnabled:!0,enableContextMenu:function(){this.isContextMenuEnabled=!0},disableContextMenu:function(){this.isContextMenuEnabled=!1},contextMenuTimeout:null,startContextMenuTimer:function(){var e=this;e.killContextMenuTimer(),e.contextMenuTimer=setTimeout(function(){e.hideContextMenu(),e.killContextMenuTimer()},750)},killContextMenuTimer:function(){var e=this.contextMenuTimer;e!=null&&(clearTimeout(e),delete e)},hideContextMenu:function(){this.contextMenu.hide()},renderContextMenu:function(t,n){for(var r=this,i="",s=r.options.contextMenuItems,o=0,u=s.length;o<u;o++)if(s[o].isSeparator)i+='<div class="mejs-contextmenu-separator"></div>';else{var a=s[o].render(r);a!=null&&(i+='<div class="mejs-contextmenu-item" data-itemindex="'+o+'" id="element-'+Math.random()*1e6+'">'+a+"</div>")}r.contextMenu.empty().append(e(i)).css({top:n,left:t}).show(),r.contextMenu.find(".mejs-contextmenu-item").each(function(){var t=e(this),n=parseInt(t.data("itemindex"),10),i=r.options.contextMenuItems[n];typeof i.show!="undefined"&&i.show(t,r),t.click(function(){typeof i.click!="undefined"&&i.click(r),r.contextMenu.hide()})}),setTimeout(function(){r.killControlsTimer("rev3")},100)}})}(mejs.$),function(e){e.extend(mejs.MepDefaults,{postrollCloseText:mejs.i18n.t("Close")}),e.extend(MediaElementPlayer.prototype,{buildpostroll:function(t,n,r){var i=this.container.find('link[rel="postroll"]').attr("href");typeof i!="undefined"&&(t.postroll=e('<div class="mejs-postroll-layer mejs-layer"><a class="mejs-postroll-close" onclick="$(this).parent().hide();return false;">'+this.options.postrollCloseText+'</a><div class="mejs-postroll-layer-content"></div></div>').prependTo(r).hide(),this.media.addEventListener("ended",function(){e.ajax({dataType:"html",url:i,success:function(e){r.find(".mejs-postroll-layer-content").html(e)}}),t.postroll.show()},!1))}})}(mejs.$),define("mediaelementjs",["jquery"],function(){}),"undefined"==typeof jwplayer&&(jwplayer=function(e){if(jwplayer.api)return jwplayer.api.selectPlayer(e)},jwplayer.version="6.8.4616",jwplayer.vid=document.createElement("video"),jwplayer.audio=document.createElement("audio"),jwplayer.source=document.createElement("source"),function(e){function t(e){return function(){return a(e)}}function n(e,t,n,r,i){return function(){var s,u;if(i)n(e);else{try{if(s=e.responseXML)if(u=s.firstChild,s.lastChild&&"parsererror"===s.lastChild.nodeName){r&&r("Invalid XML");return}}catch(a){}if(s&&u)return n(e);(s=o.parseXML(e.responseText))&&s.firstChild?(e=o.extend({},e,{responseXML:s}),n(e)):r&&r(e.responseText?"Invalid XML":t)}}}var r=document,i=window,s=navigator,o=e.utils=function(){};o.exists=function(e){switch(typeof e){case"string":return 0<e.length;case"object":return null!==e;case"undefined":return!1}return!0},o.styleDimension=function(e){return e+(0<e.toString().indexOf("%")?"":"px")},o.getAbsolutePath=function(e,t){o.exists(t)||(t=r.location.href);if(o.exists(e)){var n;if(o.exists(e)){n=e.indexOf("://");var i=e.indexOf("?");n=0<n&&(0>i||i>n)}else n=void 0;if(n)return e;n=t.substring(0,t.indexOf("://")+3);var i=t.substring(n.length,t.indexOf("/",n.length+1)),s;0===e.indexOf("/")?s=e.split("/"):(s=t.split("?")[0],s=s.substring(n.length+i.length+1,s.lastIndexOf("/")),s=s.split("/").concat(e.split("/")));for(var u=[],a=0;a<s.length;a++)s[a]&&o.exists(s[a])&&"."!=s[a]&&(".."==s[a]?u.pop():u.push(s[a]));return n+i+"/"+u.join("/")}},o.extend=function(){var e=o.extend.arguments;if(1<e.length){for(var t=1;t<e.length;t++)o.foreach(e[t],function(t,n){try{o.exists(n)&&(e[0][t]=n)}catch(r){}});return e[0]}return null};var u=window.console=window.console||{log:function(){}};o.log=function(){var e=Array.prototype.slice.call(arguments,0);"object"==typeof u.log?u.log(e):u.log.apply(u,e)};var a=o.userAgentMatch=function(e){return null!==s.userAgent.toLowerCase().match(e)};o.isIE=o.isMSIE=t(/msie/i),o.isFF=t(/firefox/i),o.isChrome=t(/chrome/i),o.isIPod=t(/iP(hone|od)/i),o.isIPad=t(/iPad/i),o.isSafari602=t(/Macintosh.*Mac OS X 10_8.*6\.0\.\d* Safari/i),o.isIETrident=function(e){return e?(e=parseFloat(e).toFixed(1),a(RegExp("msie\\s*"+e+"|trident/.+rv:\\s*"+e,"i"))):a(/msie|trident/i)},o.isSafari=function(){return a(/safari/i)&&!a(/chrome/i)&&!a(/chromium/i)&&!a(/android/i)},o.isIOS=function(e){return e?a(RegExp("iP(hone|ad|od).+\\sOS\\s"+e,"i")):a(/iP(hone|ad|od)/i)},o.isAndroid=function(e,t){var n=t?!a(/chrome\/[23456789]/i):!0;return e?n&&a(RegExp("android.*"+e,"i")):n&&a(/android/i)},o.isMobile=function(){return o.isIOS()||o.isAndroid()},o.saveCookie=function(e,t){r.cookie="jwplayer."+e+"="+t+"; path=/"},o.getCookies=function(){for(var e={},t=r.cookie.split("; "),n=0;n<t.length;n++){var i=t[n].split("=");0===i[0].indexOf("jwplayer.")&&(e[i[0].substring(9,i[0].length)]=i[1])}return e},o.typeOf=function(e){var t=typeof e;return"object"===t?e?e instanceof Array?"array":t:"null":t},o.translateEventResponse=function(t,n){var r=o.extend({},n);if(t==e.events.JWPLAYER_FULLSCREEN&&!r.fullscreen)r.fullscreen="true"==r.message?!0:!1,delete r.message;else if("object"==typeof r.data){var i=r.data;delete r.data,r=o.extend(r,i)}else"object"==typeof r.metadata&&o.deepReplaceKeyName(r.metadata,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"]);return o.foreach(["position","duration","offset"],function(e,t){r[t]&&(r[t]=Math.round(1e3*r[t])/1e3)}),r},o.flashVersion=function(){if(o.isAndroid())return 0;var e=s.plugins,t;try{if("undefined"!==e&&(t=e["Shockwave Flash"]))return parseInt(t.description.replace(/\D+(\d+)\..*/,"$1"),10)}catch(n){}if("undefined"!=typeof i.ActiveXObject)try{if(t=new i.ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return parseInt(t.GetVariable("$version").split(" ")[1].split(",")[0],10)}catch(r){}return 0},o.getScriptPath=function(e){for(var t=r.getElementsByTagName("script"),n=0;n<t.length;n++){var i=t[n].src;if(i&&0<=i.indexOf(e))return i.substr(0,i.indexOf(e))}return""},o.deepReplaceKeyName=function(t,n,r){switch(e.utils.typeOf(t)){case"array":for(var i=0;i<t.length;i++)t[i]=e.utils.deepReplaceKeyName(t[i],n,r);break;case"object":o.foreach(t,function(i,s){var o;if(n instanceof Array&&r instanceof Array){if(n.length!=r.length)return;o=n}else o=[n];for(var u=i,a=0;a<o.length;a++)u=u.replace(RegExp(n[a],"g"),r[a]);t[u]=e.utils.deepReplaceKeyName(s,n,r),i!=u&&delete t[i]})}return t};var f=o.pluginPathType={ABSOLUTE:0,RELATIVE:1,CDN:2};o.getPluginPathType=function(e){if("string"==typeof e){e=e.split("?")[0];var t=e.indexOf("://");if(0<t)return f.ABSOLUTE;var n=e.indexOf("/");return e=o.extension(e),0>t&&0>n&&(!e||!isNaN(e))?f.CDN:f.RELATIVE}},o.getPluginName=function(e){return e.replace(/^(.*\/)?([^-]*)-?.*\.(swf|js)$/,"$2")},o.getPluginVersion=function(e){return e.replace(/[^-]*-?([^\.]*).*$/,"$1")},o.isYouTube=function(e){return/^(http|\/\/).*(youtube\.com|youtu\.be)\/.+/.test(e)},o.youTubeID=function(e){try{return/v[=\/]([^?&]*)|youtu\.be\/([^?]*)|^([\w-]*)$/i.exec(e).slice(1).join("").replace("?","")}catch(t){return""}},o.isRtmp=function(e,t){return 0===e.indexOf("rtmp")||"rtmp"==t},o.foreach=function(e,t){var n,r;for(n in e)"function"==o.typeOf(e.hasOwnProperty)?e.hasOwnProperty(n)&&(r=e[n],t(n,r)):(r=e[n],t(n,r))},o.isHTTPS=function(){return 0===i.location.href.indexOf("https")},o.repo=function(){var t="http://p.jwpcdn.com/"+e.version.split(/\W/).splice(0,2).join("/")+"/";try{o.isHTTPS()&&(t=t.replace("http://","https://ssl."))}catch(n){}return t},o.ajax=function(e,t,r,s){var u;0<e.indexOf("#")&&(e=e.replace(/#.*$/,""));if(e&&0<=e.indexOf("://")&&e.split("/")[2]!=i.location.href.split("/")[2]&&o.exists(i.XDomainRequest))u=new i.XDomainRequest,u.onload=n(u,e,t,r,s),u.ontimeout=u.onprogress=function(){},u.timeout=5e3;else{if(!o.exists(i.XMLHttpRequest))return r&&r(),u;var a=u=new i.XMLHttpRequest,f=e;u.onreadystatechange=function(){if(4===a.readyState)switch(a.status){case 200:n(a,f,t,r,s)();break;case 404:r("File not found")}}}return u.overrideMimeType&&u.overrideMimeType("text/xml"),u.onerror=function(){r("Error loading file")},setTimeout(function(){try{u.open("GET",e,!0),u.send()}catch(t){r&&r(e)}},0),u},o.parseXML=function(e){var t;try{if(i.DOMParser){if(t=(new i.DOMParser).parseFromString(e,"text/xml"),t.childNodes&&t.childNodes.length&&"parsererror"==t.childNodes[0].firstChild.nodeName)return}else t=new i.ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)}catch(n){return}return t},o.filterPlaylist=function(e,t){var n=[],r,i,s,u;for(r=0;r<e.length;r++)if(i=o.extend({},e[r]),i.sources=o.filterSources(i.sources),0<i.sources.length){for(s=0;s<i.sources.length;s++)u=i.sources[s],u.label||(u.label=s.toString());n.push(i)}if(t&&0===n.length)for(r=0;r<e.length;r++)if(i=o.extend({},e[r]),i.sources=o.filterSources(i.sources,!0),0<i.sources.length){for(s=0;s<i.sources.length;s++)u=i.sources[s],u.label||(u.label=s.toString());n.push(i)}return n},o.filterSources=function(t,n){var r,i,s=o.extensionmap;if(t){i=[];for(var u=0;u<t.length;u++){var a=t[u].type,f=t[u].file;f&&(f=o.trim(f)),a||(a=s.extType(o.extension(f)),t[u].type=a),n?e.embed.flashCanPlay(f,a)&&(r||(r=a),a==r&&i.push(o.extend({},t[u]))):o.canPlayHTML5(a)&&(r||(r=a),a==r&&i.push(o.extend({},t[u])))}}return i},o.canPlayHTML5=function(t){return!o.isAndroid()||"hls"!=t&&"m3u"!=t&&"m3u8"!=t?(t=o.extensionmap.types[t],!!t&&!!e.vid.canPlayType&&e.vid.canPlayType(t)):!1},o.seconds=function(e){e=e.replace(",",".");var t=e.split(":"),n=0;return"s"==e.slice(-1)?n=parseFloat(e):"m"==e.slice(-1)?n=60*parseFloat(e):"h"==e.slice(-1)?n=3600*parseFloat(e):1<t.length?(n=parseFloat(t[t.length-1]),n+=60*parseFloat(t[t.length-2]),3==t.length&&(n+=3600*parseFloat(t[t.length-3]))):n=parseFloat(e),n},o.serialize=function(e){return null==e?null:"true"==e.toString().toLowerCase()?!0:"false"==e.toString().toLowerCase()?!1:isNaN(Number(e))||5<e.length||0===e.length?e:Number(e)}}(jwplayer),function(e){var t="video/",n=e.foreach,r={mp4:t+"mp4",vorbis:"audio/ogg",ogg:t+"ogg",webm:t+"webm",aac:"audio/mp4",mp3:"audio/mpeg",hls:"application/vnd.apple.mpegurl"},i={mp4:r.mp4,f4v:r.mp4,m4v:r.mp4,mov:r.mp4,m4a:r.aac,f4a:r.aac,aac:r.aac,mp3:r.mp3,ogv:r.ogg,ogg:r.vorbis,oga:r.vorbis,webm:r.webm,m3u8:r.hls,hls:r.hls},t="video",t={flv:t,f4v:t,mov:t,m4a:t,m4v:t,mp4:t,aac:t,f4a:t,mp3:"sound",smil:"rtmp",m3u8:"hls",hls:"hls"},s=e.extensionmap={};n(i,function(e,t){s[e]={html5:t}}),n(t,function(e,t){s[e]||(s[e]={}),s[e].flash=t}),s.types=r,s.mimeType=function(e){var t;return n(r,function(n,r){!t&&r==e&&(t=n)}),t},s.extType=function(e){return s.mimeType(i[e])}}(jwplayer.utils),function(e){var t=e.loaderstatus={NEW:0,LOADING:1,ERROR:2,COMPLETE:3},n=document;e.scriptloader=function(r){function i(){o=t.ERROR,f.sendEvent(u.ERROR)}function s(){o=t.COMPLETE,f.sendEvent(u.COMPLETE)}var o=t.NEW,u=jwplayer.events,f=new u.eventdispatcher;e.extend(this,f),this.load=function(){var f=e.scriptloader.loaders[r];if(!f||f.getStatus()!=t.NEW&&f.getStatus()!=t.LOADING){if(e.scriptloader.loaders[r]=this,o==t.NEW){o=t.LOADING;var h=n.createElement("script");h.addEventListener?(h.onload=s,h.onerror=i):h.readyState&&(h.onreadystatechange=function(){("loaded"==h.readyState||"complete"==h.readyState)&&s()}),n.getElementsByTagName("head")[0].appendChild(h),h.src=r}}else f.addEventListener(u.ERROR,i),f.addEventListener(u.COMPLETE,s)},this.getStatus=function(){return o}},e.scriptloader.loaders={}}(jwplayer.utils),function(e){e.trim=function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},e.pad=function(e,t,n){for(n||(n="0");e.length<t;)e=n+e;return e},e.xmlAttribute=function(e,t){for(var n=0;n<e.attributes.length;n++)if(e.attributes[n].name&&e.attributes[n].name.toLowerCase()==t.toLowerCase())return e.attributes[n].value.toString();return""},e.extension=function(e){if(!e||"rtmp"==e.substr(0,4))return"";e=e.substring(e.lastIndexOf("/")+1,e.length).split("?")[0].split("#")[0];if(-1<e.lastIndexOf("."))return e.substr(e.lastIndexOf(".")+1,e.length).toLowerCase()},e.stringToColor=function(e){return e=e.replace(/(#|0x)?([0-9A-F]{3,6})$/gi,"$2"),3==e.length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)),parseInt(e,16)}}(jwplayer.utils),function(e){var t="touchmove",n="touchstart";e.touch=function(r){function i(e){e.type==n?(f=!0,h=o(d.DRAG_START,e)):e.type==t?f&&(p||(s(d.DRAG_START,e,h),p=!0),s(d.DRAG,e)):(f&&(p?s(d.DRAG_END,e):(e.cancelBubble=!0,s(d.TAP,e))),f=p=!1,h=null)}function s(e,t,n){c[e]&&(t.preventManipulation&&t.preventManipulation(),t.preventDefault&&t.preventDefault(),t=n?n:o(e,t))&&c[e](t)}function o(e,t){var n=null;t.touches&&t.touches.length?n=t.touches[0]:t.changedTouches&&t.changedTouches.length&&(n=t.changedTouches[0]);if(!n)return null;var r=u.getBoundingClientRect(),n={type:e,target:u,x:n.pageX-window.pageXOffset-r.left,y:n.pageY,deltaX:0,deltaY:0};return e!=d.TAP&&h&&(n.deltaX=n.x-h.x,n.deltaY=n.y-h.y),n}var u=r,f=!1,c={},h=null,p=!1,d=e.touchEvents;return document.addEventListener(t,i),document.addEventListener("touchend",function(e){f&&p&&s(d.DRAG_END,e),f=p=!1,h=null}),document.addEventListener("touchcancel",i),r.addEventListener(n,i),r.addEventListener("touchend",i),this.addEventListener=function(e,t){c[e]=t},this.removeEventListener=function(e){delete c[e]},this}}(jwplayer.utils),function(e){e.touchEvents={DRAG:"jwplayerDrag",DRAG_START:"jwplayerDragStart",DRAG_END:"jwplayerDragEnd",TAP:"jwplayerTap"}}(jwplayer.utils),function(e){e.key=function(t){var n,r,i;this.edition=function(){return i&&i.getTime()<(new Date).getTime()?"invalid":n},this.token=function(){return r},e.exists(t)||(t="");try{t=e.tea.decrypt(t,"36QXq4W@GSBV^teR");var s=t.split("/");(n=s[0])?/^(free|pro|premium|ads)$/i.test(n)?(r=s[1],s[2]&&0<parseInt(s[2])&&(i=new Date,i.setTime(String(s[2])))):n="invalid":n="free"}catch(o){n="invalid"}}}(jwplayer.utils),function(e){var t=e.tea={};t.encrypt=function(e,i){if(0==e.length)return"";var s=t.strToLongs(r.encode(e));1>=s.length&&(s[1]=0);for(var o=t.strToLongs(r.encode(i).slice(0,16)),u=s.length,f=s[u-1],c=s[0],h,p=Math.floor(6+52/u),d=0;0<p--;){d+=2654435769,h=d>>>2&3;for(var v=0;v<u;v++)c=s[(v+1)%u],f=(f>>>5^c<<2)+(c>>>3^f<<4)^(d^c)+(o[v&3^h]^f),f=s[v]+=f}return s=t.longsToStr(s),n.encode(s)},t.decrypt=function(e,i){if(0==e.length)return"";for(var s=t.strToLongs(n.decode(e)),o=t.strToLongs(r.encode(i).slice(0,16)),u=s.length,f=s[u-1],c=s[0],h,p=2654435769*Math.floor(6+52/u);0!=p;){h=p>>>2&3;for(var d=u-1;0<=d;d--)f=s[0<d?d-1:u-1],f=(f>>>5^c<<2)+(c>>>3^f<<4)^(p^c)+(o[d&3^h]^f),c=s[d]-=f;p-=2654435769}return s=t.longsToStr(s),s=s.replace(/\0+$/,""),r.decode(s)},t.strToLongs=function(e){for(var t=Array(Math.ceil(e.length/4)),n=0;n<t.length;n++)t[n]=e.charCodeAt(4*n)+(e.charCodeAt(4*n+1)<<8)+(e.charCodeAt(4*n+2)<<16)+(e.charCodeAt(4*n+3)<<24);return t},t.longsToStr=function(e){for(var t=Array(e.length),n=0;n<e.length;n++)t[n]=String.fromCharCode(e[n]&255,e[n]>>>8&255,e[n]>>>16&255,e[n]>>>24&255);return t.join("")};var n={code:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e,t){var i,s,o,u,a=[],f="",c,h,p=n.code;h=("undefined"==typeof t?0:t)?r.encode(e):e,c=h.length%3;if(0<c)for(;3>c++;)f+="=",h+="\0";for(c=0;c<h.length;c+=3)i=h.charCodeAt(c),s=h.charCodeAt(c+1),o=h.charCodeAt(c+2),u=i<<16|s<<8|o,i=u>>18&63,s=u>>12&63,o=u>>6&63,u&=63,a[c/3]=p.charAt(i)+p.charAt(s)+p.charAt(o)+p.charAt(u);return a=a.join(""),a=a.slice(0,a.length-f.length)+f},decode:function(e,t){t="undefined"==typeof t?!1:t;var i,s,o,u,a,f=[],c,h=n.code;c=t?r.decode(e):e;for(var p=0;p<c.length;p+=4)i=h.indexOf(c.charAt(p)),s=h.indexOf(c.charAt(p+1)),u=h.indexOf(c.charAt(p+2)),a=h.indexOf(c.charAt(p+3)),o=i<<18|s<<12|u<<6|a,i=o>>>16&255,s=o>>>8&255,o&=255,f[p/4]=String.fromCharCode(i,s,o),64==a&&(f[p/4]=String.fromCharCode(i,s)),64==u&&(f[p/4]=String.fromCharCode(i));return u=f.join(""),t?r.decode(u):u}},r={encode:function(e){return e=e.replace(/[\u0080-\u07ff]/g,function(e){return e=e.charCodeAt(0),String.fromCharCode(192|e>>6,128|e&63)}),e=e.replace(/[\u0800-\uffff]/g,function(e){return e=e.charCodeAt(0),String.fromCharCode(224|e>>12,128|e>>6&63,128|e&63)})},decode:function(e){return e=e.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(e){return e=(e.charCodeAt(0)&15)<<12|(e.charCodeAt(1)&63)<<6|e.charCodeAt(2)&63,String.fromCharCode(e)}),e=e.replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(e){return e=(e.charCodeAt(0)&31)<<6|e.charCodeAt(1)&63,String.fromCharCode(e)})}}}(jwplayer.utils),function(e){e.events={COMPLETE:"COMPLETE",ERROR:"ERROR",API_READY:"jwplayerAPIReady",JWPLAYER_READY:"jwplayerReady",JWPLAYER_FULLSCREEN:"jwplayerFullscreen",JWPLAYER_RESIZE:"jwplayerResize",JWPLAYER_ERROR:"jwplayerError",JWPLAYER_SETUP_ERROR:"jwplayerSetupError",JWPLAYER_MEDIA_BEFOREPLAY:"jwplayerMediaBeforePlay",JWPLAYER_MEDIA_BEFORECOMPLETE:"jwplayerMediaBeforeComplete",JWPLAYER_COMPONENT_SHOW:"jwplayerComponentShow",JWPLAYER_COMPONENT_HIDE:"jwplayerComponentHide",JWPLAYER_MEDIA_BUFFER:"jwplayerMediaBuffer",JWPLAYER_MEDIA_BUFFER_FULL:"jwplayerMediaBufferFull",JWPLAYER_MEDIA_ERROR:"jwplayerMediaError",JWPLAYER_MEDIA_LOADED:"jwplayerMediaLoaded",JWPLAYER_MEDIA_COMPLETE:"jwplayerMediaComplete",JWPLAYER_MEDIA_SEEK:"jwplayerMediaSeek",JWPLAYER_MEDIA_TIME:"jwplayerMediaTime",JWPLAYER_MEDIA_VOLUME:"jwplayerMediaVolume",JWPLAYER_MEDIA_META:"jwplayerMediaMeta",JWPLAYER_MEDIA_MUTE:"jwplayerMediaMute",JWPLAYER_MEDIA_LEVELS:"jwplayerMediaLevels",JWPLAYER_MEDIA_LEVEL_CHANGED:"jwplayerMediaLevelChanged",JWPLAYER_CAPTIONS_CHANGED:"jwplayerCaptionsChanged",JWPLAYER_CAPTIONS_LIST:"jwplayerCaptionsList",JWPLAYER_CAPTIONS_LOADED:"jwplayerCaptionsLoaded",JWPLAYER_PLAYER_STATE:"jwplayerPlayerState",state:{BUFFERING:"BUFFERING",IDLE:"IDLE",PAUSED:"PAUSED",PLAYING:"PLAYING"},JWPLAYER_PLAYLIST_LOADED:"jwplayerPlaylistLoaded",JWPLAYER_PLAYLIST_ITEM:"jwplayerPlaylistItem",JWPLAYER_PLAYLIST_COMPLETE:"jwplayerPlaylistComplete",JWPLAYER_DISPLAY_CLICK:"jwplayerViewClick",JWPLAYER_CONTROLS:"jwplayerViewControls",JWPLAYER_USER_ACTION:"jwplayerUserAction",JWPLAYER_INSTREAM_CLICK:"jwplayerInstreamClicked",JWPLAYER_INSTREAM_DESTROYED:"jwplayerInstreamDestroyed",JWPLAYER_AD_TIME:"jwplayerAdTime",JWPLAYER_AD_ERROR:"jwplayerAdError",JWPLAYER_AD_CLICK:"jwplayerAdClicked",JWPLAYER_AD_COMPLETE:"jwplayerAdComplete",JWPLAYER_AD_IMPRESSION:"jwplayerAdImpression",JWPLAYER_AD_COMPANIONS:"jwplayerAdCompanions",JWPLAYER_AD_SKIPPED:"jwplayerAdSkipped"}}(jwplayer),function(e){var t=e.utils;e.events.eventdispatcher=function(n,r){function i(e,n,r){if(e)for(var i=0;i<e.length;i++){var s=e[i];if(s){null!==s.count&&0===--s.count&&delete e[i];try{s.listener(n)}catch(o){t.log('Error handling "'+r+'" event listener ['+i+"]: "+o.toString(),s.listener,n)}}}}var s,o;this.resetEventListeners=function(){s={},o=[]},this.resetEventListeners(),this.addEventListener=function(e,n,r){try{t.exists(s[e])||(s[e]=[]),"string"==t.typeOf(n)&&(n=(new Function("return "+n))()),s[e].push({listener:n,count:r||null})}catch(i){t.log("error",i)}return!1},this.removeEventListener=function(e,n){if(s[e]){try{for(var r=0;r<s[e].length;r++)if(s[e][r].listener.toString()==n.toString()){s[e].splice(r,1);break}}catch(i){t.log("error",i)}return!1}},this.addGlobalListener=function(e,n){try{"string"==t.typeOf(e)&&(e=(new Function("return "+e))()),o.push({listener:e,count:n||null})}catch(r){t.log("error",r)}return!1},this.removeGlobalListener=function(e){if(e){try{for(var n=o.length;n--;)o[n].listener.toString()==e.toString()&&o.splice(n,1)}catch(r){t.log("error",r)}return!1}},this.sendEvent=function(u,h){t.exists(h)||(h={}),t.extend(h,{id:n,version:e.version,type:u}),r&&t.log(u,h),i(s[u],h,u),i(o,h,u)}}}(window.jwplayer),function(e){var t={},n={};e.plugins=function(){},e.plugins.loadPlugins=function(r,i){return n[r]=new e.plugins.pluginloader(new e.plugins.model(t),i),n[r]},e.plugins.registerPlugin=function(n,r,i,s){var o=e.utils.getPluginName(n);t[o]||(t[o]=new e.plugins.plugin(n)),t[o].registerPlugin(n,r,i,s)}}(jwplayer),function(e){e.plugins.model=function(t){this.addPlugin=function(n){var r=e.utils.getPluginName(n);return t[r]||(t[r]=new e.plugins.plugin(n)),t[r]},this.getPlugins=function(){return t}}}(jwplayer),function(e){var t=jwplayer.utils,n=jwplayer.events;e.pluginmodes={FLASH:0,JAVASCRIPT:1,HYBRID:2},e.plugin=function(r){function i(){switch(t.getPluginPathType(r)){case t.pluginPathType.ABSOLUTE:return r;case t.pluginPathType.RELATIVE:return t.getAbsolutePath(r,window.location.href)}}function s(){p=setTimeout(function(){u=t.loaderstatus.COMPLETE,d.sendEvent(n.COMPLETE)},1e3)}function o(){u=t.loaderstatus.ERROR,d.sendEvent(n.ERROR)}var u=t.loaderstatus.NEW,f,c,h,p,d=new n.eventdispatcher;t.extend(this,d),this.load=function(){if(u==t.loaderstatus.NEW)if(0<r.lastIndexOf(".swf"))f=r,u=t.loaderstatus.COMPLETE,d.sendEvent(n.COMPLETE);else if(t.getPluginPathType(r)==t.pluginPathType.CDN)u=t.loaderstatus.COMPLETE,d.sendEvent(n.COMPLETE);else{u=t.loaderstatus.LOADING;var e=new t.scriptloader(i());e.addEventListener(n.COMPLETE,s),e.addEventListener(n.ERROR,o),e.load()}},this.registerPlugin=function(e,r,i,s){p&&(clearTimeout(p),p=void 0),h=r,i&&s?(f=s,c=i):"string"==typeof i?f=i:"function"==typeof i?c=i:!i&&!s&&(f=e),u=t.loaderstatus.COMPLETE,d.sendEvent(n.COMPLETE)},this.getStatus=function(){return u},this.getPluginName=function(){return t.getPluginName(r)},this.getFlashPath=function(){if(f)switch(t.getPluginPathType(f)){case t.pluginPathType.ABSOLUTE:return f;case t.pluginPathType.RELATIVE:return 0<r.lastIndexOf(".swf")?t.getAbsolutePath(f,window.location.href):t.getAbsolutePath(f,i())}return null},this.getJS=function(){return c},this.getTarget=function(){return h},this.getPluginmode=function(){if("undefined"!=typeof f&&"undefined"!=typeof c)return e.pluginmodes.HYBRID;if("undefined"!=typeof f)return e.pluginmodes.FLASH;if("undefined"!=typeof c)return e.pluginmodes.JAVASCRIPT},this.getNewInstance=function(e,t,n){return new c(e,t,n)},this.getURL=function(){return r}}}(jwplayer.plugins),function(e){var t=e.utils,n=e.events,r=t.foreach;e.plugins.pluginloader=function(i,s){function o(){h?v.sendEvent(n.ERROR,{message:p}):c||(c=!0,f=t.loaderstatus.COMPLETE,v.sendEvent(n.COMPLETE))}function u(){d||o();if(!c&&!h){var n=0,r=i.getPlugins();t.foreach(d,function(i){i=t.getPluginName(i);var s=r[i];i=s.getJS();var u=s.getTarget(),s=s.getStatus();s==t.loaderstatus.LOADING||s==t.loaderstatus.NEW?n++:i&&(!u||parseFloat(u)>parseFloat(e.version))&&(h=!0,p="Incompatible player version",o())}),0==n&&o()}}var f=t.loaderstatus.NEW,c=!1,h=!1,p,d=s,v=new n.eventdispatcher;t.extend(this,v),this.setupPlugins=function(e,n,s){var o={length:0,plugins:{}},u=0,f={},l=i.getPlugins();return r(n.plugins,function(r,i){var c=t.getPluginName(r),h=l[c],p=h.getFlashPath(),d=h.getJS(),v=h.getURL();p&&(o.plugins[p]=t.extend({},i),o.plugins[p].pluginmode=h.getPluginmode(),o.length++);try{if(d&&n.plugins&&n.plugins[v]){var m=document.createElement("div");m.id=e.id+"_"+c,m.style.position="absolute",m.style.top=0,m.style.zIndex=u+10,f[c]=h.getNewInstance(e,t.extend({},n.plugins[v]),m),u++,e.onReady(s(f[c],m,!0)),e.onResize(s(f[c],m))}}catch(g){t.log("ERROR: Failed to load "+c+".")}}),e.plugins=f,o},this.load=function(){if(!t.exists(s)||"object"==t.typeOf(s)){f=t.loaderstatus.LOADING,r(s,function(e){t.exists(e)&&(e=i.addPlugin(e),e.addEventListener(n.COMPLETE,u),e.addEventListener(n.ERROR,m))});var e=i.getPlugins();r(e,function(e,t){t.load()})}u()};var m=this.pluginFailed=function(){h||(h=!0,p="File not found",o())};this.getStatus=function(){return f}}}(jwplayer),function(){jwplayer.parsers={localName:function(e){return e?e.localName?e.localName:e.baseName?e.baseName:"":""},textContent:function(e){return e?e.textContent?jwplayer.utils.trim(e.textContent):e.text?jwplayer.utils.trim(e.text):"":""},getChildNode:function(e,t){return e.childNodes[t]},numChildren:function(e){return e.childNodes?e.childNodes.length:0}}}(jwplayer),function(e){var t=e.parsers;(t.jwparser=function(){}).parseEntry=function(n,r){for(var i=[],s=[],o=e.utils.xmlAttribute,u=0;u<n.childNodes.length;u++){var f=n.childNodes[u];if("jwplayer"==f.prefix){var l=t.localName(f);"source"==l?(delete r.sources,i.push({file:o(f,"file"),"default":o(f,"default"),label:o(f,"label"),type:o(f,"type")})):"track"==l?(delete r.tracks,s.push({file:o(f,"file"),"default":o(f,"default"),kind:o(f,"kind"),label:o(f,"label")})):(r[l]=e.utils.serialize(t.textContent(f)),"file"==l&&r.sources&&delete r.sources)}r.file||(r.file=r.link)}if(i.length){r.sources=[];for(u=0;u<i.length;u++)0<i[u].file.length&&(i[u]["default"]="true"==i[u]["default"]?!0:!1,i[u].label.length||delete i[u].label,r.sources.push(i[u]))}if(s.length){r.tracks=[];for(u=0;u<s.length;u++)0<s[u].file.length&&(s[u]["default"]="true"==s[u]["default"]?!0:!1,s[u].kind=s[u].kind.length?s[u].kind:"captions",s[u].label.length||delete s[u].label,r.tracks.push(s[u]))}return r}}(jwplayer),function(e){var t=jwplayer.utils,n=t.xmlAttribute,r=e.localName,i=e.textContent,s=e.numChildren,o=e.mediaparser=function(){};o.parseGroup=function(e,u){var h,p,v=[];for(p=0;p<s(e);p++)if(h=e.childNodes[p],"media"==h.prefix&&r(h))switch(r(h).toLowerCase()){case"content":n(h,"duration")&&(u.duration=t.seconds(n(h,"duration"))),0<s(h)&&(u=o.parseGroup(h,u)),n(h,"url")&&(u.sources||(u.sources=[]),u.sources.push({file:n(h,"url"),type:n(h,"type"),width:n(h,"width"),label:n(h,"label")}));break;case"title":u.title=i(h);break;case"description":u.description=i(h);break;case"guid":u.mediaid=i(h);break;case"thumbnail":u.image||(u.image=n(h,"url"));break;case"group":o.parseGroup(h,u);break;case"subtitle":var m={};m.file=n(h,"url"),m.kind="captions";if(0<n(h,"lang").length){var y=m;h=n(h,"lang");var b={zh:"Chinese",nl:"Dutch",en:"English",fr:"French",de:"German",it:"Italian",ja:"Japanese",pt:"Portuguese",ru:"Russian",es:"Spanish"};h=b[h]?b[h]:h,y.label=h}v.push(m)}u.hasOwnProperty("tracks")||(u.tracks=[]);for(p=0;p<v.length;p++)u.tracks.push(v[p]);return u}}(jwplayer.parsers),function(e){function t(t){for(var i={},s=0;s<t.childNodes.length;s++){var u=t.childNodes[s],a=o(u);if(a)switch(a.toLowerCase()){case"enclosure":i.file=n.xmlAttribute(u,"url");break;case"title":i.title=r(u);break;case"guid":i.mediaid=r(u);break;case"pubdate":i.date=r(u);break;case"description":i.description=r(u);break;case"link":i.link=r(u);break;case"category":i.tags=i.tags?i.tags+r(u):r(u)}}return i=e.mediaparser.parseGroup(t,i),i=e.jwparser.parseEntry(t,i),new jwplayer.playlist.item(i)}var n=jwplayer.utils,r=e.textContent,i=e.getChildNode,s=e.numChildren,o=e.localName;e.rssparser={},e.rssparser.parse=function(e){for(var n=[],r=0;r<s(e);r++){var u=i(e,r);if("channel"==o(u).toLowerCase())for(var l=0;l<s(u);l++){var h=i(u,l);"item"==o(h).toLowerCase()&&n.push(t(h))}}return n}}(jwplayer.parsers),function(e){e.playlist=function(t){var n=[];if("array"==e.utils.typeOf(t))for(var r=0;r<t.length;r++)n.push(new e.playlist.item(t[r]));else n.push(new e.playlist.item(t));return n}}(jwplayer),function(e){var t=e.item=function(n){var r=jwplayer.utils,i=r.extend({},t.defaults,n);i.tracks=n&&r.exists(n.tracks)?n.tracks:[],0==i.sources.length&&(i.sources=[new e.source(i)]);for(var s=0;s<i.sources.length;s++){var o=i.sources[s]["default"];i.sources[s]["default"]=o?"true"==o.toString():!1,i.sources[s]=new e.source(i.sources[s])}if(i.captions&&!r.exists(n.tracks)){for(n=0;n<i.captions.length;n++)i.tracks.push(i.captions[n]);delete i.captions}for(s=0;s<i.tracks.length;s++)i.tracks[s]=new e.track(i.tracks[s]);return i};t.defaults={description:"",image:"",mediaid:"",title:"",sources:[],tracks:[]}}(jwplayer.playlist),function(e){var t=jwplayer,n=t.utils,r=t.events,i=t.parsers;e.loader=function(){function t(t){try{var n=t.responseXML.childNodes;t="";for(var s=0;s<n.length&&(t=n[s],8==t.nodeType);s++);"xml"==i.localName(t)&&(t=t.nextSibling);if("rss"!=i.localName(t))o("Not a valid RSS feed");else{var a=new e(i.rssparser.parse(t));u.sendEvent(r.JWPLAYER_PLAYLIST_LOADED,{playlist:a})}}catch(l){o()}}function s(e){o(e.match(/invalid/i)?"Not a valid RSS feed":"")}function o(e){u.sendEvent(r.JWPLAYER_ERROR,{message:e?e:"Error loading file"})}var u=new r.eventdispatcher;n.extend(this,u),this.load=function(e){n.ajax(e,t,s)}}}(jwplayer.playlist),function(e){var t=jwplayer.utils,n={file:void 0,label:void 0,type:void 0,"default":void 0};e.source=function(e){var r=t.extend({},n);return t.foreach(n,function(n){t.exists(e[n])&&(r[n]=e[n],delete e[n])}),r.type&&0<r.type.indexOf("/")&&(r.type=t.extensionmap.mimeType(r.type)),"m3u8"==r.type&&(r.type="hls"),"smil"==r.type&&(r.type="rtmp"),r}}(jwplayer.playlist),function(e){var t=jwplayer.utils,n={file:void 0,label:void 0,kind:"captions","default":!1};e.track=function(e){var r=t.extend({},n);return e||(e={}),t.foreach(n,function(n){t.exists(e[n])&&(r[n]=e[n],delete e[n])}),r}}(jwplayer.playlist),function(e){function t(e,t,r){var i=e.style;i.backgroundColor="#000",i.color="#FFF",i.width=n.styleDimension(r.width),i.height=n.styleDimension(r.height),i.display="table",i.opacity=1,r=document.createElement("p"),i=r.style,i.verticalAlign="middle",i.textAlign="center",i.display="table-cell",i.font="15px/20px Arial, Helvetica, sans-serif",r.innerHTML=t.replace(":",":<br>"),e.innerHTML="",e.appendChild(r)}var n=e.utils,r=e.events,i=!0,s=!1,o=document,u=e.embed=function(h){function p(e,t){n.foreach(t,function(t,n){"function"==typeof e[t]&&e[t].call(e,n)})}function v(){if(!_)if("array"==n.typeOf(x.playlist)&&2>x.playlist.length&&(0==x.playlist.length||!x.playlist[0].sources||0==x.playlist[0].sources.length))w();else if(!M)if("string"==n.typeOf(x.playlist)){var t=new e.playlist.loader;t.addEventListener(r.JWPLAYER_PLAYLIST_LOADED,function(e){x.playlist=e.playlist,M=s,v()}),t.addEventListener(r.JWPLAYER_ERROR,function(e){M=s,w(e)}),M=i,t.load(x.playlist)}else if(O.getStatus()==n.loaderstatus.COMPLETE){for(t=0;t<x.modes.length;t++)if(x.modes[t].type&&u[x.modes[t].type]){var o=n.extend({},x),a=new u[x.modes[t].type](T,x.modes[t],o,O,h);if(a.supportsConfig())return a.addEventListener(r.ERROR,y),a.embed(),p(h,o.events),h}var c;x.fallback?(c="No suitable players found and fallback enabled",D=setTimeout(function(){E(c,i)},10),n.log(c),new u.download(T,x,w)):(c="No suitable players found and fallback disabled",E(c,s),n.log(c),T.parentNode.replaceChild(C,T))}}function y(e){S(A+e.message)}function b(e){S("Could not load plugins: "+e.message)}function w(e){e&&e.message?S("Error loading playlist: "+e.message):S(A+"No playable sources found")}function E(e,t){D&&(clearTimeout(D),D=null),D=setTimeout(function(){D=null,h.dispatchEvent(r.JWPLAYER_SETUP_ERROR,{message:e,fallback:t})},0)}function S(e){_||(x.fallback?(_=i,t(T,e,x),E(e,i)):E(e,s))}var x=new u.config(h.config),T,N,C,k=x.width,L=x.height,A="Error loading player: ",O=e.plugins.loadPlugins(h.id,x.plugins),M=s,_=s,D=null;return x.fallbackDiv&&(C=x.fallbackDiv,delete x.fallbackDiv),x.id=h.id,N=o.getElementById(h.id),x.aspectratio?h.config.aspectratio=x.aspectratio:delete h.config.aspectratio,T=o.createElement("div"),T.id=N.id,T.style.width=0<k.toString().indexOf("%")?k:k+"px",T.style.height=0<L.toString().indexOf("%")?L:L+"px",N.parentNode.replaceChild(T,N),this.embed=function(){_||(O.addEventListener(r.COMPLETE,v),O.addEventListener(r.ERROR,b),O.load())},this.errorScreen=S,this};e.embed.errorScreen=t}(jwplayer),function(e){function t(e){if(e.playlist)for(var t=0;t<e.playlist.length;t++)e.playlist[t]=new i(e.playlist[t]);else{var s={};r.foreach(i.defaults,function(t){n(e,s,t)}),s.sources||(e.levels?(s.sources=e.levels,delete e.levels):(t={},n(e,t,"file"),n(e,t,"type"),s.sources=t.file?[t]:[])),e.playlist=[new i(s)]}}function n(e,t,n){r.exists(e[n])&&(t[n]=e[n],delete e[n])}var r=e.utils,i=e.playlist.item;(e.embed.config=function(n){var i={fallback:!0,height:270,primary:"html5",width:480,base:n.base?n.base:r.getScriptPath("jwplayer.js"),aspectratio:""};n=r.extend(i,e.defaults,n);var i={type:"html5",src:n.base+"jwplayer.html5.js"},s={type:"flash",src:n.base+"jwplayer.flash.swf"};n.modes="flash"==n.primary?[s,i]:[i,s],n.listbar&&(n.playlistsize=n.listbar.size,n.playlistposition=n.listbar.position,n.playlistlayout=n.listbar.layout),n.flashplayer&&(s.src=n.flashplayer),n.html5player&&(i.src=n.html5player),t(n),s=n.aspectratio;if("string"!=typeof s||!r.exists(s))i=0;else{var o=s.indexOf(":");-1==o?i=0:(i=parseFloat(s.substr(0,o)),s=parseFloat(s.substr(o+1)),i=0>=i||0>=s?0:100*(s/i)+"%")}return-1==n.width.toString().indexOf("%")?delete n.aspectratio:i?n.aspectratio=i:delete n.aspectratio,n}).addConfig=function(e,n){return t(n),r.extend(e,n)}}(jwplayer),function(e){var t=e.utils,n=document;e.embed.download=function(e,r,i){function s(e,r){for(var i=n.querySelectorAll(e),s=0;s<i.length;s++)t.foreach(r,function(e,t){i[s].style[e]=t})}function o(e,t,r){return e=n.createElement(e),t&&(e.className="jwdownload"+t),r&&r.appendChild(e),e}var u=t.extend({},r),f=u.width?u.width:480,c=u.height?u.height:320,h;r=r.logo?r.logo:{prefix:t.repo(),file:"logo.png",margin:10};var p,d,v,u=u.playlist,m,g=["mp4","aac","mp3"];if(u&&u.length){m=u[0],h=m.sources;for(u=0;u<h.length;u++){var y=h[u],b=y.type?y.type:t.extensionmap.extType(t.extension(y.file));y.file&&t.foreach(g,function(e){b==g[e]?(p=y.file,d=m.image):t.isYouTube(y.file)&&(v=y.file)})}p?(h=p,i=d,e&&(u=o("a","display",e),o("div","icon",u),o("div","logo",u),h&&u.setAttribute("href",t.getAbsolutePath(h))),u="#"+e.id+" .jwdownload",e.style.width="",e.style.height="",s(u+"display",{width:t.styleDimension(Math.max(320,f)),height:t.styleDimension(Math.max(180,c)),background:"black center no-repeat "+(i?"url("+i+")":""),backgroundSize:"contain",position:"relative",border:"none",display:"block"}),s(u+"display div",{position:"absolute",width:"100%",height:"100%"}),s(u+"logo",{top:r.margin+"px",right:r.margin+"px",background:"top right no-repeat url("+r.prefix+r.file+")"}),s(u+"icon",{background:"center no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAgNJREFUeNrs28lqwkAYB/CZqNVDDj2r6FN41QeIy8Fe+gj6BL275Q08u9FbT8ZdwVfotSBYEPUkxFOoks4EKiJdaDuTjMn3wWBO0V/+sySR8SNSqVRKIR8qaXHkzlqS9jCfzzWcTCYp9hF5o+59sVjsiRzcegSckFzcjT+ruN80TeSlAjCAAXzdJSGPFXRpAAMYwACGZQkSdhG4WCzehMNhqV6vG6vVSrirKVEw66YoSqDb7cqlUilE8JjHd/y1MQefVzqdDmiaJpfLZWHgXMHn8F6vJ1cqlVAkEsGuAn83J4gAd2RZymQygX6/L1erVQt+9ZPWb+CDwcCC2zXGJaewl/DhcHhK3DVj+KfKZrMWvFarcYNLomAv4aPRSFZVlTlcSPA5fDweW/BoNIqFnKV53JvncjkLns/n/cLdS+92O7RYLLgsKfv9/t8XlDn4eDyiw+HA9Jyz2eyt0+kY2+3WFC5hluej0Ha7zQQq9PPwdDq1Et1sNsx/nFBgCqWJ8oAK1aUptNVqcYWewE4nahfU0YQnk4ntUEfGMIU2m01HoLaCKbTRaDgKtaVLk9tBYaBcE/6Artdr4RZ5TB6/dC+9iIe/WgAMYADDpAUJAxjAAAYwgGFZgoS/AtNNTF7Z2bL0BYPBV3Jw5xFwwWcYxgtBP5OkE8i9G7aWGOOCruvauwADALMLMEbKf4SdAAAAAElFTkSuQmCC)"})):v?(r=v,e=o("iframe","",e),e.src="http://www.youtube.com/embed/"+t.youTubeID(r),e.width=f,e.height=c,e.style.border="none"):i()}}}(jwplayer),function(e){var t=e.utils,n=e.events,r={};(e.embed.flash=function(s,o,u,c,h){function p(e,t,n){var r=document.createElement("param");r.setAttribute("name",t),r.setAttribute("value",n),e.appendChild(r)}function d(e,t,n){return function(){try{n&&document.getElementById(h.id+"_wrapper").appendChild(t);var r=document.getElementById(h.id).getPluginConfig("display");"function"==typeof e.resize&&e.resize(r.width,r.height),t.style.left=r.x,t.style.top=r.h}catch(i){}}}function v(e){if(!e)return{};var n={},r=[];return t.foreach(e,function(e,i){var s=t.getPluginName(e);r.push(e),t.foreach(i,function(e,t){n[s+"."+e]=t})}),n.plugins=r.join(","),n}var m=new e.events.eventdispatcher,y=t.flashVersion();t.extend(this,m),this.embed=function(){u.id=h.id;if(10>y)return m.sendEvent(n.ERROR,{message:"Flash version must be 10.0 or greater"}),!1;var e,i,f=h.config.listbar,w=t.extend({},u);if(s.id+"_wrapper"==s.parentNode.id)e=document.getElementById(s.id+"_wrapper");else{e=document.createElement("div"),i=document.createElement("div"),i.style.display="none",i.id=s.id+"_aspect",e.id=s.id+"_wrapper",e.style.position="relative",e.style.display="block",e.style.width=t.styleDimension(w.width),e.style.height=t.styleDimension(w.height);if(h.config.aspectratio){var E=parseFloat(h.config.aspectratio);i.style.display="block",i.style.marginTop=h.config.aspectratio,e.style.height="auto",e.style.display="inline-block",f&&("bottom"==f.position?i.style.paddingBottom=f.size+"px":"right"==f.position&&(i.style.marginBottom=-1*f.size*(E/100)+"px"))}s.parentNode.replaceChild(e,s),e.appendChild(s),e.appendChild(i)}e=c.setupPlugins(h,w,d),0<e.length?t.extend(w,v(e.plugins)):delete w.plugins,"undefined"!=typeof w["dock.position"]&&"false"==w["dock.position"].toString().toLowerCase()&&(w.dock=w["dock.position"],delete w["dock.position"]),e=w.wmode?w.wmode:w.height&&40>=w.height?"transparent":"opaque",i="height width modes events primary base fallback volume".split(" ");for(f=0;f<i.length;f++)delete w[i[f]];i=t.getCookies(),t.foreach(i,function(e,t){"undefined"==typeof w[e]&&(w[e]=t)}),i=window.location.href.split("/"),i.splice(i.length-1,1),i=i.join("/"),w.base=i+"/",r[s.id]=w,t.isIE()?(i='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" " width="100%" height="100%"id="'+s.id+'" name="'+s.id+'" tabindex=0"">',i+='<param name="movie" value="'+o.src+'">',i+='<param name="allowfullscreen" value="true"><param name="allowscriptaccess" value="always">',i+='<param name="seamlesstabbing" value="true">',i+='<param name="wmode" value="'+e+'">',i+='<param name="bgcolor" value="#000000">',i+="</object>",s.outerHTML=i,e=document.getElementById(s.id)):(i=document.createElement("object"),i.setAttribute("type","application/x-shockwave-flash"),i.setAttribute("data",o.src),i.setAttribute("width","100%"),i.setAttribute("height","100%"),i.setAttribute("bgcolor","#000000"),i.setAttribute("id",s.id),i.setAttribute("name",s.id),i.setAttribute("tabindex",0),p(i,"allowfullscreen","true"),p(i,"allowscriptaccess","always"),p(i,"seamlesstabbing","true"),p(i,"wmode",e),s.parentNode.replaceChild(i,s),e=i),h.config.aspectratio&&(e.style.position="absolute"),h.container=e,h.setPlayer(e,"flash")},this.supportsConfig=function(){if(y){if(!u)return!0;if("string"==t.typeOf(u.playlist))return!0;try{var e=u.playlist[0].sources;if("undefined"==typeof e)return!0;for(var n=0;n<e.length;n++)if(e[n].file&&i(e[n].file,e[n].type))return!0}catch(r){}}return!1}}).getVars=function(e){return r[e]};var i=e.embed.flashCanPlay=function(e,n){if(t.isYouTube(e)||t.isRtmp(e,n)||"hls"==n)return!0;var r=t.extensionmap[n?n:t.extension(e)];return r?!!r.flash:!1}}(jwplayer),function(e){var t=e.utils,n=t.extensionmap,r=e.events;e.embed.html5=function(i,s,o,u,f){function c(e,t,n){return function(){try{var r=document.querySelector("#"+i.id+" .jwmain");n&&r.appendChild(t),"function"==typeof e.resize&&(e.resize(r.clientWidth,r.clientHeight),setTimeout(function(){e.resize(r.clientWidth,r.clientHeight)},400)),t.left=r.style.left,t.top=r.style.top}catch(s){}}}function h(e){p.sendEvent(e.type,{message:"HTML5 player not found"})}var p=this,d=new r.eventdispatcher;t.extend(p,d),p.embed=function(){if(e.html5){u.setupPlugins(f,o,c),i.innerHTML="";var n=e.utils.extend({},o);delete n.volume,n=new e.html5.player(n),f.container=document.getElementById(f.id),f.setPlayer(n,"html5")}else n=new t.scriptloader(s.src),n.addEventListener(r.ERROR,h),n.addEventListener(r.COMPLETE,p.embed),n.load()},p.supportsConfig=function(){if(e.vid.canPlayType)try{if("string"==t.typeOf(o.playlist))return!0;for(var r=o.playlist[0].sources,i=0;i<r.length;i++){var s,u=r[i].file,f=r[i].type;if(null!==navigator.userAgent.match(/BlackBerry/i)||t.isAndroid()&&("m3u"==t.extension(u)||"m3u8"==t.extension(u))||t.isRtmp(u,f))s=!1;else{var c=n[f?f:t.extension(u)],h;if(!c||c.flash&&!c.html5)h=!1;else{var p=c.html5,d=e.vid;if(p)try{h=d.canPlayType(p)?!0:!1}catch(v){h=!1}else h=!0}s=h}if(s)return!0}}catch(m){}return!1}}}(jwplayer),function(e){var t=e.embed,n=e.utils,r=/\.(js|swf)$/;e.embed=n.extend(function(i){function s(){w="Adobe SiteCatalyst Error: Could not find Media Module"}var o=n.repo(),u=n.extend({},e.defaults),f=n.extend({},u,i.config),c=i.config,h=f.plugins,p=f.analytics,d=o+"jwpsrv.js",v=o+"sharing.js",m=o+"related.js",y=o+"gapro.js",u=e.key?e.key:u.key,b=(new e.utils.key(u)).edition(),w,h=h?h:{};"ads"==b&&f.advertising&&(r.test(f.advertising.client)?h[f.advertising.client]=f.advertising:h[o+f.advertising.client+".js"]=f.advertising),delete c.advertising,c.key=u,f.analytics&&r.test(f.analytics.client)&&(d=f.analytics.client),delete c.analytics,p&&"ads"!==b&&delete p.enabled;if("free"==b||!p||!1!==p.enabled)h[d]=p?p:{};delete h.sharing,delete h.related;switch(b){case"ads":if(c.sitecatalyst)try{window.s&&window.s.hasOwnProperty("Media")?new e.embed.sitecatalyst(i):s()}catch(E){s()};case"premium":f.related&&(r.test(f.related.client)&&(m=f.related.client),h[m]=f.related),f.ga&&(r.test(f.ga.client)&&(y=f.ga.client),h[y]=f.ga);case"pro":f.sharing&&(r.test(f.sharing.client)&&(v=f.sharing.client),h[v]=f.sharing),f.skin&&(c.skin=f.skin.replace(/^(beelden|bekle|five|glow|modieus|roundster|stormtrooper|vapor)$/i,n.repo()+"skins/$1.xml"))}return c.plugins=h,i.config=c,i=new t(i),w&&i.errorScreen(w),i},e.embed)}(jwplayer),function(e){var t=jwplayer.utils;e.sitecatalyst=function(e){function n(e){f.debug&&t.log(e)}function r(e){return e=e.split("/"),e=e[e.length-1],e=e.split("?"),e[0]}function i(){if(!d){d=!0;var e=u.getPosition();n("stop: "+c+" : "+e),s.Media.stop(c,e)}}function o(){v||(i(),v=!0,n("close: "+c),s.Media.close(c),m=!0,p=0)}var u=e,f=t.extend({},u.config.sitecatalyst),l={onPlay:function(){if(!m){var e=u.getPosition();d=!1,n("play: "+c+" : "+e),s.Media.play(c,e)}},onPause:i,onBuffer:i,onIdle:o,onPlaylistItem:function(e){try{m=!0,o(),p=0;var n;if(f.mediaName)n=f.mediaName;else{var i=u.getPlaylistItem(e.index);n=i.title?i.title:i.file?r(i.file):i.sources&&i.sources.length?r(i.sources[0].file):""}c=n,h=f.playerName?f.playerName:u.id}catch(s){t.log(s)}},onTime:function(){if(m){var e=u.getDuration();if(-1==e)return;v=d=m=!1,n("open: "+c+" : "+e+" : "+h),s.Media.open(c,e,h),n("play: "+c+" : 0"),s.Media.play(c,0)}e=u.getPosition();if(3<=Math.abs(e-p)){var t=p;n("seek: "+t+" to "+e),n("stop: "+c+" : "+t),s.Media.stop(c,t),n("play: "+c+" : "+e),s.Media.play(c,e)}p=e},onComplete:o},c,h,p,d=!0,v=!0,m;t.foreach(l,function(e){u[e](l[e])})}}(jwplayer.embed),function(e,t){var n=[],r=e.utils,i=e.events,s=i.state,o=document,u=e.api=function(n){function l(e,t){return function(n){return t(e,n)}}function h(e,t){return E[e]||(E[e]=[],v(i.JWPLAYER_PLAYER_STATE,function(t){var n=t.newstate;t=t.oldstate;if(n==e){var r=E[n];if(r)for(var i=0;i<r.length;i++){var s=r[i];"function"==typeof s&&s.call(this,{oldstate:t,newstate:n})}}})),E[e].push(t),b}function p(e,t){try{e.jwAddEventListener(t,'function(dat) { jwplayer("'+b.id+'").dispatchEvent("'+t+'", dat); }')}catch(n){r.log("Could not add internal listener")}}function v(e,t){return w[e]||(w[e]=[],S&&x&&p(S,e)),w[e].push(t),b}function y(){if(x){if(S){var e=Array.prototype.slice.call(arguments,0),t=e.shift();if("function"==typeof S[t]){switch(e.length){case 6:return S[t](e[0],e[1],e[2],e[3],e[4],e[5]);case 5:return S[t](e[0],e[1],e[2],e[3],e[4]);case 4:return S[t](e[0],e[1],e[2],e[3]);case 3:return S[t](e[0],e[1],e[2]);case 2:return S[t](e[0],e[1]);case 1:return S[t](e[0])}return S[t]()}}return null}T.push(arguments)}var b=this,w={},E={},S,x=!1,T=[],N,C={},k={};b.container=n,b.id=n.id,b.getBuffer=function(){return y("jwGetBuffer")},b.getContainer=function(){return b.container},b.addButton=function(e,t,n,i){try{k[i]=n,y("jwDockAddButton",e,t,"jwplayer('"+b.id+"').callback('"+i+"')",i)}catch(s){r.log("Could not add dock button"+s.message)}},b.removeButton=function(e){y("jwDockRemoveButton",e)},b.callback=function(e){k[e]&&k[e]()},b.forceState=function(e){return y("jwForceState",e),b},b.releaseState=function(){return y("jwReleaseState")},b.getDuration=function(){return y("jwGetDuration")},b.getFullscreen=function(){return y("jwGetFullscreen")},b.getHeight=function(){return y("jwGetHeight")},b.getLockState=function(){return y("jwGetLockState")},b.getMeta=function(){return b.getItemMeta()},b.getMute=function(){return y("jwGetMute")},b.getPlaylist=function(){var e=y("jwGetPlaylist");return"flash"==b.renderingMode&&r.deepReplaceKeyName(e,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"]),e},b.getPlaylistItem=function(e){return r.exists(e)||(e=b.getPlaylistIndex()),b.getPlaylist()[e]},b.getPlaylistIndex=function(){return y("jwGetPlaylistIndex")},b.getPosition=function(){return y("jwGetPosition")},b.getRenderingMode=function(){return b.renderingMode},b.getState=function(){return y("jwGetState")},b.getVolume=function(){return y("jwGetVolume")},b.getWidth=function(){return y("jwGetWidth")},b.setFullscreen=function(e){return r.exists(e)?y("jwSetFullscreen",e):y("jwSetFullscreen",!y("jwGetFullscreen")),b},b.setMute=function(e){return r.exists(e)?y("jwSetMute",e):y("jwSetMute",!y("jwGetMute")),b},b.lock=function(){return b},b.unlock=function(){return b},b.load=function(e){return y("jwLoad",e),b},b.playlistItem=function(e){return y("jwPlaylistItem",parseInt(e,10)),b},b.playlistPrev=function(){return y("jwPlaylistPrev"),b},b.playlistNext=function(){return y("jwPlaylistNext"),b},b.resize=function(e,t){if("flash"!==b.renderingMode)y("jwResize",e,t);else{var n=o.getElementById(b.id+"_wrapper"),i=o.getElementById(b.id+"_aspect");i&&(i.style.display="none"),n&&(n.style.display="block",n.style.width=r.styleDimension(e),n.style.height=r.styleDimension(t))}return b},b.play=function(e){return e===t?(e=b.getState(),e==s.PLAYING||e==s.BUFFERING?y("jwPause"):y("jwPlay")):y("jwPlay",e),b},b.pause=function(e){return e===t?(e=b.getState(),e==s.PLAYING||e==s.BUFFERING?y("jwPause"):y("jwPlay")):y("jwPause",e),b},b.stop=function(){return y("jwStop"),b},b.seek=function(e){return y("jwSeek",e),b},b.setVolume=function(e){return y("jwSetVolume",e),b},b.createInstream=function(){return new u.instream(this,S)},b.setInstream=function(e){return N=e},b.loadInstream=function(e,t){return N=b.setInstream(b.createInstream()).init(t),N.loadItem(e),N},b.getQualityLevels=function(){return y("jwGetQualityLevels")},b.getCurrentQuality=function(){return y("jwGetCurrentQuality")},b.setCurrentQuality=function(e){y("jwSetCurrentQuality",e)},b.getCaptionsList=function(){return y("jwGetCaptionsList")},b.getCurrentCaptions=function(){return y("jwGetCurrentCaptions")},b.setCurrentCaptions=function(e){y("jwSetCurrentCaptions",e)},b.getControls=function(){return y("jwGetControls")},b.getSafeRegion=function(){return y("jwGetSafeRegion")},b.setControls=function(e){y("jwSetControls",e)},b.destroyPlayer=function(){y("jwPlayerDestroy")},b.playAd=function(t){var n=e(b.id).plugins;n.vast&&n.vast.jwPlayAd(t)},b.pauseAd=function(){var t=e(b.id).plugins;t.vast?t.vast.jwPauseAd():y("jwPauseAd")};var L={onBufferChange:i.JWPLAYER_MEDIA_BUFFER,onBufferFull:i.JWPLAYER_MEDIA_BUFFER_FULL,onError:i.JWPLAYER_ERROR,onSetupError:i.JWPLAYER_SETUP_ERROR,onFullscreen:i.JWPLAYER_FULLSCREEN,onMeta:i.JWPLAYER_MEDIA_META,onMute:i.JWPLAYER_MEDIA_MUTE,onPlaylist:i.JWPLAYER_PLAYLIST_LOADED,onPlaylistItem:i.JWPLAYER_PLAYLIST_ITEM,onPlaylistComplete:i.JWPLAYER_PLAYLIST_COMPLETE,onReady:i.API_READY,onResize:i.JWPLAYER_RESIZE,onComplete:i.JWPLAYER_MEDIA_COMPLETE,onSeek:i.JWPLAYER_MEDIA_SEEK,onTime:i.JWPLAYER_MEDIA_TIME,onVolume:i.JWPLAYER_MEDIA_VOLUME,onBeforePlay:i.JWPLAYER_MEDIA_BEFOREPLAY,onBeforeComplete:i.JWPLAYER_MEDIA_BEFORECOMPLETE,onDisplayClick:i.JWPLAYER_DISPLAY_CLICK,onControls:i.JWPLAYER_CONTROLS,onQualityLevels:i.JWPLAYER_MEDIA_LEVELS,onQualityChange:i.JWPLAYER_MEDIA_LEVEL_CHANGED,onCaptionsList:i.JWPLAYER_CAPTIONS_LIST,onCaptionsChange:i.JWPLAYER_CAPTIONS_CHANGED,onAdError:i.JWPLAYER_AD_ERROR,onAdClick:i.JWPLAYER_AD_CLICK,onAdImpression:i.JWPLAYER_AD_IMPRESSION,onAdTime:i.JWPLAYER_AD_TIME,onAdComplete:i.JWPLAYER_AD_COMPLETE,onAdCompanions:i.JWPLAYER_AD_COMPANIONS,onAdSkipped:i.JWPLAYER_AD_SKIPPED};r.foreach(L,function(e){b[e]=l(L[e],v)});var A={onBuffer:s.BUFFERING,onPause:s.PAUSED,onPlay:s.PLAYING,onIdle:s.IDLE};return r.foreach(A,function(e){b[e]=l(A[e],h)}),b.remove=function(){if(!x)throw"Cannot call remove() before player is ready";T=[],u.destroyPlayer(this.id)},b.setup=function(t){if(e.embed){var n=o.getElementById(b.id);return n&&(t.fallbackDiv=n),n=b,T=[],u.destroyPlayer(n.id),n=e(b.id),n.config=t,(new e.embed(n)).embed(),n}return b},b.registerPlugin=function(t,n,r,i){e.plugins.registerPlugin(t,n,r,i)},b.setPlayer=function(e,t){S=e,b.renderingMode=t},b.detachMedia=function(){if("html5"==b.renderingMode)return y("jwDetachMedia")},b.attachMedia=function(e){if("html5"==b.renderingMode)return y("jwAttachMedia",e)},b.removeEventListener=function(e,t){var n=w[e];if(n)for(var r=n.length;r--;)n[r]===t&&n.splice(r,1)},b.dispatchEvent=function(e,t){var n=w[e];if(n)for(var n=n.slice(0),s=r.translateEventResponse(e,t),o=0;o<n.length;o++){var u=n[o];if("function"==typeof u)try{e===i.JWPLAYER_PLAYLIST_LOADED&&r.deepReplaceKeyName(s.playlist,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"]),u.call(this,s)}catch(a){r.log("There was an error calling back an event handler")}}},b.dispatchInstreamEvent=function(e){N&&N.dispatchEvent(e,arguments)},b.callInternal=y,b.playerReady=function(e){x=!0,S||b.setPlayer(o.getElementById(e.id)),b.container=o.getElementById(b.id),r.foreach(w,function(e){p(S,e)}),v(i.JWPLAYER_PLAYLIST_ITEM,function(){C={}}),v(i.JWPLAYER_MEDIA_META,function(e){r.extend(C,e.metadata)});for(b.dispatchEvent(i.API_READY);0<T.length;)y.apply(this,T.shift())},b.getItemMeta=function(){return C},b.isBeforePlay=function(){return y("jwIsBeforePlay")},b.isBeforeComplete=function(){return y("jwIsBeforeComplete")},b};u.selectPlayer=function(e){var t;return r.exists(e)||(e=0),e.nodeType?t=e:"string"==typeof e&&(t=o.getElementById(e)),t?(e=u.playerById(t.id))?e:u.addPlayer(new u(t)):"number"==typeof e?n[e]:null},u.playerById=function(e){for(var t=0;t<n.length;t++)if(n[t].id==e)return n[t];return null},u.addPlayer=function(e){for(var t=0;t<n.length;t++)if(n[t]==e)return e;return n.push(e),e},u.destroyPlayer=function(e){for(var t=-1,i,s=0;s<n.length;s++)n[s].id==e&&(t=s,i=n[s]);return 0<=t&&(e=i.id,s=o.getElementById(e+("flash"==i.renderingMode?"_wrapper":"")),r.clearCss&&r.clearCss("#"+e),s&&("html5"==i.renderingMode&&i.destroyPlayer(),i=o.createElement("div"),i.id=e,s.parentNode.replaceChild(i,s)),n.splice(t,1)),null},e.playerReady=function(t){var n=e.api.playerById(t.id);n?n.playerReady(t):e.api.selectPlayer(t.id).playerReady(t)}}(window.jwplayer),function(e){var t=e.events,n=e.utils,r=t.state;e.api.instream=function(e,i){function s(t,n){return c[t]||(c[t]=[],i.jwInstreamAddEventListener(t,'function(dat) { jwplayer("'+e.id+'").dispatchInstreamEvent("'+t+'", dat); }')),c[t].push(n),this}function o(e,n){return h[e]||(h[e]=[],s(t.JWPLAYER_PLAYER_STATE,function(t){var n=t.newstate,r=t.oldstate;if(n==e){var i=h[n];if(i)for(var s=0;s<i.length;s++){var o=i[s];"function"==typeof o&&o.call(this,{oldstate:r,newstate:n,type:t.type})}}})),h[e].push(n),this}var u,f,c={},h={},p=this;p.type="instream",p.init=function(){return e.callInternal("jwInitInstream"),p},p.loadItem=function(t,r){u=t,f=r||{},"array"==n.typeOf(t)?e.callInternal("jwLoadArrayInstream",u,f):e.callInternal("jwLoadItemInstream",u,f)},p.removeEvents=function(){c=h={}},p.removeEventListener=function(e,t){var n=c[e];if(n)for(var r=n.length;r--;)n[r]===t&&n.splice(r,1)},p.dispatchEvent=function(e,t){var r=c[e];if(r)for(var r=r.slice(0),i=n.translateEventResponse(e,t[1]),s=0;s<r.length;s++){var o=r[s];"function"==typeof o&&o.call(this,i)}},p.onError=function(e){return s(t.JWPLAYER_ERROR,e)},p.onMediaError=function(e){return s(t.JWPLAYER_MEDIA_ERROR,e)},p.onFullscreen=function(e){return s(t.JWPLAYER_FULLSCREEN,e)},p.onMeta=function(e){return s(t.JWPLAYER_MEDIA_META,e)},p.onMute=function(e){return s(t.JWPLAYER_MEDIA_MUTE,e)},p.onComplete=function(e){return s(t.JWPLAYER_MEDIA_COMPLETE,e)},p.onPlaylistComplete=function(e){return s(t.JWPLAYER_PLAYLIST_COMPLETE,e)},p.onPlaylistItem=function(e){return s(t.JWPLAYER_PLAYLIST_ITEM,e)},p.onTime=function(e){return s(t.JWPLAYER_MEDIA_TIME,e)},p.onBuffer=function(e){return o(r.BUFFERING,e)},p.onPause=function(e){return o(r.PAUSED,e)},p.onPlay=function(e){return o(r.PLAYING,e)},p.onIdle=function(e){return o(r.IDLE,e)},p.onClick=function(e){return s(t.JWPLAYER_INSTREAM_CLICK,e)},p.onInstreamDestroyed=function(e){return s(t.JWPLAYER_INSTREAM_DESTROYED,e)},p.onAdSkipped=function(e){return s(t.JWPLAYER_AD_SKIPPED,e)},p.play=function(e){i.jwInstreamPlay(e)},p.pause=function(e){i.jwInstreamPause(e)},p.hide=function(){e.callInternal("jwInstreamHide")},p.destroy=function(){p.removeEvents(),e.callInternal("jwInstreamDestroy")},p.setText=function(e){i.jwInstreamSetText(e?e:"")},p.getState=function(){return i.jwInstreamState()},p.setClick=function(e){i.jwInstreamClick&&i.jwInstreamClick(e)}}}(window.jwplayer),function(e){var t=e.api,n=t.selectPlayer;t.selectPlayer=function(t){return(t=n(t))?t:{registerPlugin:function(t,n,r){e.plugins.registerPlugin(t,n,r)}}}}(jwplayer)),define("jwplayer/jwplayer",function(){}),define("interaction_view/ui/media",["mediaelementjs","jwplayer/jwplayer"],function(){jwplayer.key="pi2CAQ+8YcxsOQV3Qj6nu+xcVJPULv/CrOegByy/3hg=";var e={statusclear:function(e){e.loaded=!1,e.played=!1,e.reseted=!1,e.completed=!1},play:function(t){t.get("iType")=="Video"&&e.video.play(t),t.get("iType")=="Audio"&&e.audio.play(t)},pause:function(e){if(!e.media)return!1;try{e.media.pause(!0)}catch(t){}e.get("iType")=="Audio"&&interaction_view.ismobile&&(e.preloadformobile||(e.preloadformobile=null))},seek:function(t,n,r){r&&(n=e.getTimeByPercent(t,r));if(t.hls){console.log(n);try{t.media.seek(n),t.iview.sliderplay()}catch(i){}}else try{t.media.setCurrentTime(n)}catch(i){}},video:{render:function(t,n,r){if(_g.string.getUrlExt(r)==".m3u8"||_g.string.getUrlExt(r)==".M3U8"){e.video.renderH(t,n,r);return}},init:function(t,n,r){var i=r;if(_g.string.getUrlExt(i)==".m3u8"||_g.string.getUrlExt(i)==".M3U8"){e.video.initH(t,n,r);return}var s=n.iview.getdetail(),o=s.iRepeat||!1,u=s.iControl||!1,a=n.iview.getcommon(),f=n.autoplay=s.iAutoplay||!1,l=_g.device.mobile()?"webkit-playsinline":"",c=['<video style="position:absolute;" src="'+i+'" poster="'+s.iFile[0].picture+'" width="'+a.iWidth+'" height="'+a.iHeight+'" '+l+'">',"</video>"].join("");n.iview.$el.children(".Element").append(c),n.videoloaded=!1;var h=s.iAutohide;h==null&&(h=!0),options={enablePluginDebug:!1,type:"",pluginPath:web_url+"common/js/mediaelementjs/",flashName:"flashmediaelement.swf",silverlightName:"silverlightmediaelement.xap",videoWidth:a.iWidth,videoHeight:a.iHeight,pluginWidth:-1,pluginHeight:-1,timerRate:100,pauseOtherPlayers:!1,features:u?["playpause","progress","current","duration","volume","fullscreen"]:[],loop:o,success:function(e,r){n.media=e,u||n.iview.$el.find(".mejs-controls").addClass("hide");var i=!1;interaction_view.ismobile?(i=!0,f||n.iview.$el.addClass("hide"),n.iview.$el.css("opacity",""),n.videoloaded=!0,console.info("video loaded"),n.iview.$el.children(".iVideo").removeClass("unloaded"),n.loaded=!0,t.set("loaded",!0),t.page.ipreloadlist.preloadcheck(t.toJSON().file,!0,n)):(n.media.play(),n.media.addEventListener("loadedmetadata",function(e){if(!i){i=!0;try{model.media.pause()}catch(r){}try{n.media.setCurrentTime(0)}catch(r){}f||n.iview.$el.addClass("hide"),n.iview.$el.css("opacity",""),n.videoloaded=!0,console.info("video loaded"),n.iview.$el.children(".iVideo").removeClass("unloaded"),n.loaded=!0,t.set("loaded",!0),t.page.ipreloadlist.preloadcheck(t.toJSON().file,!0,n)}},!1)),u||(n.iview.$el.find(".mejs-controls").addClass("hide"),n.iview.$el.find(".mejs-overlay-button").addClass("hide")),e.addEventListener("ended",function(t){if(!o){try{e.setCurrentTime(0)}catch(r){}try{e.pause()}catch(r){}h&&(n.iview.$el.addClass("hide"),n.hided=!0),n.onAnimationStart&&(interaction_view.events.onAnimationEnd(n.onAnimationStart),n.onAnimationStart=null)}},!1),e.addEventListener("timeupdate",function(e){console.log("time update")},!1)},error:function(){n.loaded=!1,t.set("loaded",!0),t.page.ipreloadlist.preloadcheck(t.toJSON().file,!1,n)}},options.plugins=["flash","silverlight"],n.iview.$el.removeClass("hide").css("opacity",0),n.iview.$el.children(".Element").children("Video").mediaelementplayer(options)},preload:function(e,t){var n=!1},play:function(t){if(!t.loaded||!t.media)return!1;t.get("iType")=="Video"&&(t.iview.$el.removeClass("hide"),t.hided=!1),t.hls?e.video.playH(t):(t.get("iType")=="Audio"?(interaction_view.ismobile&&(t.preloadformobile||(t.preloadformobile=!1)),t.media.play()):setTimeout(function(){t.media.play()},100),t.reseted=!1,t.completed=!1),t.iview.slider&&t.iview.sliderplay()},pause:function(e){},stop:function(e){},reset:function(e){if(!e.media)return!1;if(!e.reseted){try{e.media.setCurrentTime(0)}catch(t){}try{e.media.pause()}catch(t){}e.get("iType")=="Audio"&&interaction_view.ismobile&&(e.preloadformobile||(e.preloadformobile=null)),e.reseted=!0}},getDuration:function(e){return e.duration},renderH:function(){},initH:function(e,t,n){iview=t.iview,t.hls=!0;var r=t.get("iDetail"),i=r.iRepeat||!1,s=r.iControl||!1,o=iview.getcommon(),u=t.autoplay=r.iAutoplay||!1,a=n;console.log("videosrc="+a),t.videoloaded=!1;var f=null,l=r.iAutohide;l==null&&(l=!0),iview.$el.css("opacity",0),iview.$el.removeClass("hide"),iview.$el.children(".Element").append('<div class="hls_video"></div>'),iview.$el.children(".Element").children("div").attr("id","Video_"+t.id+e.id),t.iview.$el.parents(".iView[data-type=LayerSlide],.iView[data-type=LayerRef]").length>0&&(f=t.iview.$el.parents(".iView[data-type=LayerSlide],.iView[data-type=LayerRef]").first(),f.css("opacity",0).removeClass("hide")),jwplayer("Video_"+t.id+e.id).setup({playlist:[{image:r.iFile[0].picture,file:n,type:"hls"}],flashplayer:web_url+"common/js/jwplayer/jwplayer.flash.swf",html5player:web_url+"common/js/jwplayer/jwplayer.html5.js",primary:$.browser.safari?"html5":interaction_view.ismobile?"html5":"flash",height:o.iHeight,width:o.iWidth,controls:s,repeat:i,displaytitle:!1,logo:{hide:!0},stretching:"exactfit",startparam:"starttime",stagevideo:!1});var c=!1;jwplayer("Video_"+t.id+e.id).onSetupError(function(){t.loaded=!1,e.set("loaded",!0),e.page.ipreloadlist.preloadcheck(e.toJSON().file,!1,t)}),jwplayer("Video_"+t.id+e.id).onReady(function(){c||(t.media=jwplayer("Video_"+t.id+e.id)),interaction_view.ismobile?(c=!0,t.iview.$el.addClass("hide"),t.iview.$el.css("opacity",0),t.videoloaded=!0,console.info("lhs video loaded"),t.loaded=!0,e.set("loaded",!0),e.page.ipreloadlist.preloadcheck(e.toJSON().file,!0,t)):(jwplayer("Video_"+t.id+e.id).onMeta(function(){t.notallowed&&(t.notallowed=!1,t.media.pause(!0)),c||(c=!0,t.media.pause(!0),t.reseted=!0,t.completed=!0,t.iview.$el.addClass("hide"),t.iview.$el.css("opacity",0),t.videoloaded=!0,console.info("lhs video loaded"),f,t.loaded=!0,e.set("loaded",!0),e.page.ipreloadlist.preloadcheck(e.toJSON().file,!0,t))}),t.media.play(!0))}),jwplayer("Video_"+t.id+e.id).onError(function(){t.loaded=!1,e.get("loaded")||(e.set("loaded",!0),e.page.ipreloadlist.preloadcheck(e.toJSON().file,!1,t))}),jwplayer("Video_"+t.id+e.id).onComplete(function(){i?$.browser.safari&&(t.iview.$el.css("opacity",0),setTimeout(function(){t.iview.$el.css("opacity",1)},800)):(t.completed=!0,l&&(t.iview.$el.addClass("hide"),t.hided=!0),t.onAnimationStart&&(interaction_view.events.onAnimationEnd(t.onAnimationStart),t.onAnimationStart=null))}),jwplayer("Video_"+t.id+e.id).onPlay(function(e){console.log("The Video is start to play from "+e.oldstate)}),jwplayer("Video_"+t.id+e.id).onTime(function(e,n){t.iview.$el.css("opacity")==0&&setTimeout(function(){t.iview.$el.css("opacity",1)},800)})},preloadH:function(e,t){},playH:function(e){e.notallowed=!1,e.completed||e.reseted?e.media&&e.media.seek(0):e.media&&e.media.play(!0),e.completed=!1,e.reseted=!1},pauseH:function(){},stopH:function(){},resetH:function(e,t){if(!e.reseted){try{e.media.pause(!0)}catch(n){}e.media.completed=!0,e.reseted=!0,e.disabled=!0}t&&t.$el.css("opacity",0)},getDurationH:function(e){return e.getDuration()}},audio:{init:function(t,n){var r=t.toJSON().file;if(_g.string.getUrlExt(r)==".m3u8"||_g.string.getUrlExt(r)==".M3U8"){e.audio.initH(t,n);return}var i=n.iview.getdetail(),s=i.iRepeat||!1,o=n.autoplay=i.iAutoplay||!1,u="Audio_"+t.id+n.id;n.loaded=!1,$("div#preloader").append('<audio id="'+u+'" src="'+r+'" controls="controls"></audio>'),options={enablePluginDebug:!1,type:"",pluginPath:web_url+"common/js/mediaelementjs/",flashName:"flashmediaelement.swf",silverlightName:"silverlightmediaelement.xap",timerRate:100,pauseOtherPlayers:!1,loop:s,success:function(e,r){n.media=e;var i=!1;interaction_view.ismobile?(i=!0,n.preloadformobile=null,n.loaded=!0,console.info("audio loaded"),t.set("loaded",!0),t.page.ipreloadlist.preloadcheck(t.toJSON().file,!0,n),e.addEventListener("loadeddata",function(e){n.preloadformobile||(n.preloadformobile==null?n.media.pause():n.preloadformobile==0&&n.media.play(),n.preloadformobile=!0)},!1)):(e.play(),e.addEventListener("loadeddata",function(r){i||(e.pause(),i=!0,n.loaded=!0,console.info("audio loaded"),t.set("loaded",!0),t.page.ipreloadlist.preloadcheck(t.toJSON().file,!0,n))},!1)),e.addEventListener("ended",function(e){if(!s){n.iview.slider&&n.iview.sliderstop();if(interaction_view.ismobile&&n.media.seekable.length==0)return;try{n.media.setCurrentTime(0)}catch(t){}try{n.media.pause()}catch(t){}n.onAnimationStart&&(interaction_view.events.onAnimationEnd(n.onAnimationStart),n.onAnimationStart=null)}},!1),e.addEventListener("timeupdate",function(e){if(n.iview.slider){var t=n.media.currentTime,r=n.media.duration,i=_g.number.decimal(t/r,2)*100;n.iview.onSliderChange(i)}},!1)},error:function(){n.loaded=!1,t.set("loaded",!0),t.page.ipreloadlist.preloadcheck(t.toJSON().file,!1,n)}};if(_g.string.getUrlExt(r)==".m4a"||_g.string.getUrlExt(r)==".M4A")options.pluginVars="isvideo=true";options.plugins=["flash","silverlight"],$("#Audio_"+t.id+n.id).mediaelementplayer(options)},play:function(t){e.video.play(t)},pause:function(){},stop:function(){},getDuration:function(e){return e.duration},reset:function(t){e.video.reset(t)},initH:function(e,t){t.hls=!0;var n=t.iview.getdetail(),r=t.iview.getcommon(),i=n.iRepeat||!1,s=t.autoplay=n.iAutoplay||!1,o="Audio_"+e.id+t.id,u=t.src=e.toJSON().file;t.loaded=!1,$("div#preloader").append('<audio id="'+o+'" controls></audio>'),console.log("audio file added"),jwplayer(o).setup({playlist:[{file:e.toJSON().file,type:"hls"}],flashplayer:web_url+"common/js/jwplayer/jwplayer.flash.swf",html5player:web_url+"common/js/jwplayer/jwplayer.html5.js",primary:$.browser.safari?"html5":"flash",repeat:i,width:r.iWidth,height:30});var a=!1;jwplayer(o).onSetupError(function(){t.loaded=!1,e.set("loaded",!0),e.page.ipreloadlist.preloadcheck(e.toJSON().file,!1,t)}),jwplayer(o).onReady(function(){t.media=jwplayer(o),interaction_view.ismobile?a||(a=!0,t.loaded=!0,t.reseted=!0,t.completed=!0,console.info("audio loaded"),e.set("loaded",!0),e.page.ipreloadlist.preloadcheck(e.toJSON().file,!0,t)):(t.media.play(!0),jwplayer(o).onMeta(function(){a||(t.media.pause(!0),t.reseted=!0,t.completed=!0,a=!0,t.loaded=!0,console.info("audio loaded"),e.set("loaded",!0),e.page.ipreloadlist.preloadcheck(e.toJSON().file,!0,t))}))}),jwplayer(o).onError(function(){t.loaded=!1,e.get("loaded")||(e.set("loaded",!0),e.page.ipreloadlist.preloadcheck(e.toJSON().file,!1,t))}),jwplayer(o).onComplete(function(){i||(t.completed=!0,t.iview.slider&&t.iview.sliderstop(),t.onAnimationStart&&(interaction_view.events.onAnimationEnd(t.onAnimationStart),t.onAnimationStart=null))}),jwplayer(o).onTime(function(e){if(t.iview.slider){var n=_g.number.decimal(e.position/e.duration,2)*100;t.iview.onSliderChange(n)}}),jwplayer(o).onBuffer(function(){interaction_view.ismobile&&(t.preloadformobile||(t.preloadformobile==null?t.media.pause():t.preloadformobile==0&&t.media.play(),t.preloadformobile=!0))})},playH:function(t){e.video.playH(t)},pauseH:function(){},stopH:function(){},resetH:function(t){e.video.resetH(t)},getDurationH:function(e){return e.getDuration()}},canPlayVideo:function(e){var t=document.createElement("video"),n,r,i,s;return t.canPlayType?(n=""!==t.canPlayType('video/mp4; codecs="mp4v.20.8"'),r=""!==(t.canPlayType('video/mp4; codecs="avc1.42E01E"')||t.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')),i=""!==t.canPlayType('video/ogg; codecs="theora"'),s=""!==t.canPlayType('video/webm; codecs="vp8, vorbis"'),n||r?!0:!1):!1},getTimeByPercent:function(e,t){var n=null;if(!e.media)return null;if(e.hls)var r=e.media.getDuration();else var r=e.media.duration;return t/100*r}};return e}),function(e){var t={init:function(n){return this.each(function(){var r=e(this),i=r.data("eraser");if(!i){var s=r.width(),o=r.height(),u=r.offset(),a=e("<canvas/>"),f=a.get(0),l=n.imageWidth,c=n.imageHeight,h=n&&n.size?n.size:40,p=n&&n.completeRatio?n.completeRatio:.7,d=n&&n.completeFunction?n.completeFunction:null,v=n&&n.completeRatioFunction?n.completeRatioFunction:null,m=[],g=Math.floor(s/h),y=g*Math.floor(o/h),b=y,w=f.getContext("2d");r.after(a),f.id=this.id,f.className=this.className,f.width=s,f.height=o;if(!this.src)return;var E=new Image;E.onload=function(){l&&c?w.drawImage(E,0,0,l,c):w.drawImage(E,0,0),r.remove(),w.globalCompositeOperation="destination-out",w.strokeStyle="rgba(255,0,0,255)",w.lineWidth=h,w.lineCap="round",a.bind("mousedown.eraser",t.mouseDown),a.bind("touchstart.eraser",t.touchStart),a.bind("touchmove.eraser",t.touchMove),a.bind("touchend.eraser",t.touchEnd);while(b--)m.push(1);e.zoom||(e.zoom=1),i={posX:u.left,posY:u.top,touchDown:!1,touchID:-999,touchX:0,touchY:0,ptouchX:0,ptouchY:0,canvas:a,ctx:w,w:s,h:o,source:E,size:h,parts:m,colParts:g,numParts:y,ratio:0,complete:!1,completeRatio:p,completeFunction:d,completeRatioFunction:v,imageWidth:l,imageHeight:c},a.data("eraser",i),r.data("eraser",i),e(window).resize(function(){e.zoom||(e.zoom=1);var t=a.offset();i.posX=t.left,i.posY=t.top,a.data("eraser",i)})},E.src=this.src}})},touchStart:function(n){var r=e(this),i=r.data("eraser"),s=r.offset();i.posX=s.left,i.posY=s.top;if(!i.touchDown){var o=n.originalEvent.changedTouches[0],u=o.pageX/e.zoom-i.posX,a=o.pageY/e.zoom-i.posY;t.evaluatePoint(i,u,a),i.touchDown=!0,i.touchID=o.identifier,i.touchX=u,i.touchY=a,n.preventDefault()}},touchMove:function(n){var r=e(this),i=r.data("eraser"),s=r.offset();i.posX=s.left,i.posY=s.top;if(i.touchDown){var o=n.originalEvent.changedTouches,u=o.length;while(u--)if(o[u].identifier==i.touchID){var a=o[u].pageX/e.zoom-i.posX,f=o[u].pageY/e.zoom-i.posY;t.evaluatePoint(i,a,f),i.ctx.beginPath(),i.ctx.moveTo(i.touchX,i.touchY),i.touchX=a,i.touchY=f,i.ctx.lineTo(i.touchX,i.touchY),i.ctx.stroke(),n.preventDefault();break}}},touchEnd:function(t){var n=e(this),r=n.data("eraser"),i=n.offset();r.posX=i.left,r.posY=i.top;if(r.touchDown){var s=t.originalEvent.changedTouches,o=s.length;while(o--)if(s[o].identifier==r.touchID){r.touchDown=!1,t.preventDefault();break}}},evaluatePoint:function(e,t,n){var r=Math.floor(t/e.size)+Math.floor(n/e.size)*e.colParts;r>=0&&r<e.numParts&&(e.ratio+=e.parts[r],e.parts[r]=0,e.complete||e.ratio/e.numParts>=e.completeRatio&&(e.complete=!0,e.completeRatioFunction!=null&&e.completeRatioFunction()))},mouseDown:function(n){var r=e(this),i=r.data("eraser"),s=r.offset();i.posX=s.left,i.posY=s.top;var o=n.pageX/e.zoom-i.posX,u=n.pageY/e.zoom-i.posY;console.log("mouse page "+n.pageX+" "+n.pageY),console.log("offset "+i.posX+" "+i.posY),t.evaluatePoint(i,o,u),i.touchDown=!0,i.touchX=o,i.touchY=u,i.ctx.beginPath(),i.ctx.moveTo(i.touchX-1,i.touchY),i.ctx.lineTo(i.touchX,i.touchY),i.ctx.stroke(),r.bind("mousemove.eraser",t.mouseMove),e(document).bind("mouseup.eraser",i,t.mouseUp),n.preventDefault()},mouseMove:function(n){var r=e(this),i=r.data("eraser"),s=r.offset();i.posX=s.left,i.posY=s.top;var o=n.pageX/e.zoom-i.posX,u=n.pageY/e.zoom-i.posY;t.evaluatePoint(i,o,u),i.ctx.beginPath(),i.ctx.moveTo(i.touchX,i.touchY),i.touchX=o,i.touchY=u,i.ctx.lineTo(i.touchX,i.touchY),i.ctx.stroke(),n.preventDefault()},mouseUp:function(t){var n=t.data,r=n.canvas;n.touchDown=!1,r.unbind("mousemove.eraser"),e(document).unbind("mouseup.eraser"),t.preventDefault()},clear:function(){var t=e(this),n=t.data("eraser");if(n){var r=0;h=0;var i=function(){n.ctx.clearRect(0,0,n.w,n.h);var e=n.numParts;while(e--)n.parts[e]=0;n.ratio=n.numParts,n.complete=!0,n.completeFunction!=null&&n.completeFunction()};i()}},size:function(t){var n=e(this),r=n.data("eraser");r&&t&&(r.size=t,r.ctx.lineWidth=t)},reset:function(){var t=e(this),n=t.data("eraser");if(n){n.ctx.globalCompositeOperation="source-over",n.imageWidth&&n.imageHeight?n.ctx.drawImage(n.source,0,0,n.imageWidth,n.imageHeight):n.ctx.drawImage(n.source,0,0),n.ctx.globalCompositeOperation="destination-out";var r=n.numParts;while(r--)n.parts[r]=1;n.ratio=0,n.complete=!1}}};e.fn.eraser=function(n){if(t[n])return t[n].apply(this,Array.prototype.slice.call(arguments,1));if(typeof n=="object"||!n)return t.init.apply(this,arguments);e.error("Method "+n+" does not yet exist on jQuery.eraser")}}(jQuery),define("jquery.eraser",["jquery"],function(){}),define("interaction_view/ui/eraser",["jquery.eraser"],function(){var e={set:function(e,t,n,r){$(e).eraser({size:40,imageWidth:t,imageHeight:n,completeRatio:.5,completeRatioFunction:function(){$(e).eraser("clear")},completeFunction:function(){r.$el.addClass("invisible noevents")}})},reset:function(e){$(e).eraser("reset")}};return e}),define("interaction_view/ui/adapt",[],function(){var e={elements:[],size:{x:0,y:0},adjustSize:function(){},adjustPosition:function(){},adjustElement:function(e){var t=e.view.getcommon(),n=Reveal._getScreenScale();e.view.x=t.iStartx+t.iWidth/2,e.view.y=t.iStarty+t.iHeight/2,e.view.staticX=t.iStartx,e.view.staticY=t.iStarty;if(!e.adapt||e.adapt==5){var r=t.iStartx+t.iWidth/2,i=t.iStarty+t.iHeight/2;Reveal.slideScreenWidth>Reveal.slideWidth?(e.view.x=r+(Reveal.slideScreenWidth-Reveal.slideWidth)/2,e.view.staticX=e.view.x-t.iWidth/2):e.view.x=r,Reveal.slideScreenHeight>Reveal.slideHeight?(e.view.y=i+(Reveal.slideScreenHeight-Reveal.slideHeight)/2,e.view.staticY=e.view.y-t.iHeight/2):e.view.y=i}else{console.log(e.adapt);switch(e.adapt){case 1:e.view.sizeLeft=!0,e.view.sizeTop=!0;break;case 2:var r=t.iStartx+t.iWidth/2;Reveal.slideScreenWidth>Reveal.slideWidth?(e.view.x=r+(Reveal.slideScreenWidth-Reveal.slideWidth)/2,e.view.staticX=e.view.x-t.iWidth/2):e.view.x=r;break;case 3:e.view.sizeTop=!0,e.view.sizeRight=!0;var r=t.iStartx+t.iWidth/2,s=interaction_view.size.x-r;e.view.x=Reveal.slideScreenWidth-s,e.view.staticX=e.view.x-t.iWidth/2;break;case 4:e.view.sizeLeft=!0;var i=t.iStarty+t.iHeight/2;Reveal.slideScreenHeight>Reveal.slideHeight?e.view.y=i+(Reveal.slideScreenHeight-Reveal.slideHeight)/2:e.view.y=i,e.view.staticY=e.view.y-t.iHeight/2;break;case 5:break;case 6:e.view.sizeRight=!0;var r=t.iStartx+t.iWidth/2,s=interaction_view.size.x-r;e.view.x=Reveal.slideScreenWidth-s;var i=t.iStarty+t.iHeight/2;Reveal.slideScreenHeight>Reveal.slideHeight?e.view.y=i+(Reveal.slideScreenHeight-Reveal.slideHeight)/2:e.view.y=i,e.view.staticX=e.view.x-t.iWidth/2,e.view.staticY=e.view.y-t.iHeight/2;break;case 7:e.view.sizeLeft=!0,e.view.sizeBottom=!0;var i=t.iStarty+t.iHeight/2,o=interaction_view.size.y-i;e.view.y=Reveal.slideScreenHeight-o,e.view.staticY=e.view.y-t.iHeight/2;break;case 8:e.view.sizeBottom=!0;var r=t.iStartx+t.iWidth/2;Reveal.slideScreenWidth>Reveal.slideWidth?(e.view.x=r+(Reveal.slideScreenWidth-Reveal.slideWidth)/2,e.view.x=e.view.x):e.view.x=r;var i=t.iStarty+t.iHeight/2,o=interaction_view.size.y-i;e.view.y=Reveal.slideScreenHeight-o,e.view.staticX=e.view.x-t.iWidth/2,e.view.staticY=e.view.y-t.iHeight/2;break;case 9:e.view.sizeBottom=!0,e.view.sizeRight=!0;var r=t.iStartx+t.iWidth/2,s=interaction_view.size.x-r;e.view.x=Reveal.slideScreenWidth-s;var i=t.iStarty+t.iHeight/2,o=interaction_view.size.y-i;e.view.y=Reveal.slideScreenHeight-o,e.view.staticX=e.view.x-t.iWidth/2,e.view.staticY=e.view.y-t.iHeight/2;break;case 10:e.view.sizeLeft=!0,e.view.sizeRight=!0;var u=interaction_view.currentScreenSize?interaction_view.currentScreenSize.x:Reveal.slideScreenWidth,a=u-t.iStartx-(interaction_view.size.x-t.iStartx-t.iWidth);e.view.width=a;var i=t.iStarty+t.iHeight/2;Reveal.slideScreenHeight>Reveal.slideHeight?e.view.y=i+(Reveal.slideScreenHeight-Reveal.slideHeight)/2:e.view.y=i,e.view.x=e.view.staticX+e.view.width/2,e.view.staticY=e.view.y-e.view.originHeight/2;break;case 11:e.view.sizeTop=!0,e.view.sizeBottom=!0;var r=t.iStartx+t.iWidth/2;Reveal.slideScreenWidth>Reveal.slideWidth?(e.view.x=r+(Reveal.slideScreenWidth-Reveal.slideWidth)/2,e.view.staticX=e.view.x-e.view.originWidth/2):e.view.x=r;var f=interaction_view.currentScreenSize?interaction_view.currentScreenSize.y:Reveal.slideScreenHeight,l=f-t.iStarty-(interaction_view.size.y-t.iStarty-t.iHeight);e.view.height=l,e.view.y=e.view.staticY+e.view.height/2;break;case 12:e.view.sizeLeft=!0,e.view.sizeRight=!0,e.view.sizeTop=!0,e.view.sizeBottom=!0;var u=interaction_view.currentScreenSize?interaction_view.currentScreenSize.x:Reveal.slideScreenWidth,a=u-t.iStartx-(interaction_view.size.x-t.iStartx-t.iWidth);e.view.width=a;var f=interaction_view.currentScreenSize?interaction_view.currentScreenSize.y:Reveal.slideScreenHeight,l=f-t.iStarty-(interaction_view.size.y-t.iStarty-t.iHeight);e.view.height=l,e.view.staticX=t.iStartx,e.view.staticY=t.iStarty,e.view.x=t.iStartx+e.view.width/2,e.view.y=t.iStarty+e.view.height/2;break;case 13:e.view.sizeLeft=!0,e.view.sizeRight=!0,e.view.sizeTop=!0;var u=interaction_view.currentScreenSize?interaction_view.currentScreenSize.x:Reveal.slideScreenWidth,a=u-t.iStartx-(interaction_view.size.x-t.iStartx-t.iWidth);e.view.width=a,e.view.x=e.view.staticX+e.view.width/2;var i=t.iStarty+t.iHeight/2;if(Reveal.slideScreenHeight>Reveal.slideHeight)var c=Reveal.slideScreenHeight-Reveal.slideHeight;else var c=0;e.view.staticY=e.view.y-t.iHeight/2;var f=interaction_view.currentScreenSize?interaction_view.currentScreenSize.y:Reveal.slideScreenHeight,l=f-t.iStarty-(interaction_view.size.y-t.iStarty-t.iHeight)-c;e.view.height=l;break;case 14:e.view.sizeLeft=!0,e.view.sizeRight=!0,e.view.sizeBottom=!0;var u=interaction_view.currentScreenSize?interaction_view.currentScreenSize.x:Reveal.slideScreenWidth,a=u-t.iStartx-(interaction_view.size.x-t.iStartx-t.iWidth);e.view.width=a,e.view.x=e.view.staticX+e.view.width/2;var i=t.iStarty+t.iHeight/2;Reveal.slideScreenHeight>Reveal.slideHeight?e.view.y=i+(Reveal.slideScreenHeight-Reveal.slideHeight)/2:e.view.y=i,e.view.staticY=e.view.y-t.iHeight/2;var f=interaction_view.currentScreenSize?interaction_view.currentScreenSize.y:Reveal.slideScreenHeight,l=f-t.iStarty-(interaction_view.size.y-t.iStarty-t.iHeight);e.view.height=l;break;case 15:e.view.sizeLeft=!0,e.view.sizeTop=!0,e.view.sizeBottom=!0;if(Reveal.slideScreenWidth>Reveal.slideWidth)var c=Reveal.slideScreenWidth-Reveal.slideWidth;else var c=0;var u=interaction_view.currentScreenSize?interaction_view.currentScreenSize.x:Reveal.slideScreenWidth,a=u-t.iStartx-(interaction_view.size.x-t.iStartx-t.iWidth)-c;e.view.width=a;var f=interaction_view.currentScreenSize?interaction_view.currentScreenSize.y:Reveal.slideScreenHeight,l=f-t.iStarty-(interaction_view.size.y-t.iStarty-t.iHeight);e.view.height=l,e.view.x=e.view.staticX+e.view.width/2,e.view.y=e.view.staticY+e.view.height/2;break;case 16:e.view.sizeRight=!0,e.view.sizeTop=!0,e.view.sizeBottom=!0;var r=t.iStartx+t.iWidth/2;Reveal.slideScreenWidth>Reveal.slideWidth?(e.view.x=r+(Reveal.slideScreenWidth-Reveal.slideWidth)/2,e.view.staticX=e.view.x-t.iWidth/2):e.view.x=r;var u=interaction_view.currentScreenSize?interaction_view.currentScreenSize.x:Reveal.slideScreenWidth,a=u-t.iStartx-(interaction_view.size.x-t.iStartx-t.iWidth);e.view.width=a;var f=interaction_view.currentScreenSize?interaction_view.currentScreenSize.y:Reveal.slideScreenHeight,l=f-t.iStarty-(interaction_view.size.y-t.iStarty-t.iHeight);e.view.height=l,e.view.y=e.view.staticY+e.view.height/2;break;case 17:e.view.sizeTop=!0;var r=t.iStartx+t.iWidth/2;Reveal.slideScreenWidth>Reveal.slideWidth?(e.view.x=r+(Reveal.slideScreenWidth-Reveal.slideWidth)/2,e.view.staticX=e.view.x-t.iWidth/2):e.view.x=r;if(Reveal.slideScreenHeight>Reveal.slideHeight)var c=Reveal.slideScreenHeight-Reveal.slideHeight;else var c=0;e.view.staticY=e.view.y-t.iHeight/2;var f=interaction_view.currentScreenSize?interaction_view.currentScreenSize.y:Reveal.slideScreenHeight,l=f-t.iStarty-(interaction_view.size.y-t.iStarty-t.iHeight)-c;e.view.height=l,e.view.width=t.iWdith;break;case 18:e.view.sizeRight=!0;var i=t.iStarty+t.iHeight/2;Reveal.slideScreenHeight>Reveal.slideHeight?e.view.y=i+(Reveal.slideScreenHeight-Reveal.slideHeight)/2:e.view.y=i,e.view.staticY=e.view.y-t.iHeight/2;var r=t.iStartx+t.iWidth/2;Reveal.slideScreenWidth>Reveal.slideWidth?(e.view.x=r+(Reveal.slideScreenWidth-Reveal.slideWidth)/2,e.view.staticX=e.view.x-t.iWidth/2):e.view.x=r;var u=interaction_view.currentScreenSize?interaction_view.currentScreenSize.x:Reveal.slideScreenWidth,a=u-t.iStartx-(interaction_view.size.x-t.iStartx-t.iWidth);e.view.width=a;break;case 19:e.view.sizeBottom=!0;var r=t.iStartx+t.iWidth/2;Reveal.slideScreenWidth>Reveal.slideWidth?(e.view.x=r+(Reveal.slideScreenWidth-Reveal.slideWidth)/2,e.view.staticX=e.view.x-t.iWidth/2):e.view.x=r;var i=t.iStarty+t.iHeight/2;Reveal.slideScreenHeight>Reveal.slideHeight?e.view.y=i+(Reveal.slideScreenHeight-Reveal.slideHeight)/2:e.view.y=i,e.view.staticY=e.view.y-t.iHeight/2;var f=interaction_view.currentScreenSize?interaction_view.currentScreenSize.y:Reveal.slideScreenHeight,l=f-t.iStarty-(interaction_view.size.y-t.iStarty-t.iHeight);e.view.height=l;break;case 20:e.view.sizeLeft=!0;var i=t.iStarty+t.iHeight/2;Reveal.slideScreenHeight>Reveal.slideHeight?e.view.y=i+(Reveal.slideScreenHeight-Reveal.slideHeight)/2:e.view.y=i,e.view.staticY=e.view.y-t.iHeight/2;if(Reveal.slideScreenWidth>Reveal.slideWidth)var c=Reveal.slideScreenWidth-Reveal.slideWidth;else var c=0;var u=interaction_view.currentScreenSize?interaction_view.currentScreenSize.x:Reveal.slideScreenWidth,a=u-t.iStartx-(interaction_view.size.x-t.iStartx-t.iWidth)-c;e.view.width=a}e.view.width&&($.zoom&&$.zoom!=1?e.view.width=e.view.width/$.zoom:e.view.width=e.view.width),e.view.height&&($.zoom&&$.zoom!=1?e.view.height=e.view.height/$.zoom:e.view.height=e.view.height);if(_g.device.ios()){if(e.view.model.isMasterOverlay)var h=$(Reveal.options.containment).offset();else var h=e.view.$el.closest(".interaction-area").offset();h&&(e.view.x=e.view.x-h.left,e.view.y=e.view.y-h.top,e.view.staticX=e.view.staticX-h.left,e.view.staticY=e.view.staticY-h.top,e.view.model.get("iType")=="LayerRef"&&(e.view.width&&(e.view.width=e.view.width+Math.abs(h.left)),e.view.height&&(e.view.height=e.view.height+Math.abs(h.top))))}}},change:function(){_.each(interaction_view.adapt.elements,function(e){interaction_view.adapt.excute(e)})},excute:function(e){interaction_view.adapt.adjustElement(e);var t=!1;e.view.model.get("isStatic")?(e.view.width&&(t=!0,e.view.originWidth=e.view.width,e.view.$el.width(e.view.width),e.view.$el.children(".Element").width(e.view.width)),e.view.height&&(t=!0,e.view.originHeight=e.view.height,e.view.$el.height(e.view.height),e.view.$el.children(".Element").height(e.view.height)),e.view.$el.css({left:e.view.staticX,top:e.view.staticY})):(TweenMax.to(e.view.$el[0],0,{x:e.view.x,y:e.view.y}),e.view.width&&(t=!0,e.view.originWidth=e.view.width,e.view.$el.children(".Element").width(e.view.width)),e.view.height&&(t=!0,e.view.originHeight=e.view.height,e.view.$el.children(".Element").height(e.view.height))),t&&e.view.onSizeAdaptChange&&e.view.onSizeAdaptChange()}};return e}),define("text!interaction_view/template/analytics.js",[],function(){return'<iframe src="<%=data.src%>" style="border:none;width:0;height:0;" class="analytics_frame"></iframe>'}),define("interaction_view/ui/analytics",["text!interaction_view/template/analytics.js"],function(){var e=require("text!interaction_view/template/analytics.js"),t={set:function(t){var n="./analytics/"+t+".html";$("body").find(".analytics_frame").length?$("body").find(".analytics_frame").attr("src",n):$("body").append(_.template(e,{data:{src:n}}))}};return t}),function(){var e={support:function(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}}(),bind:function(){}};typeof require=="undefined"?(window._g||(window._g={}),window._g.touch=e):define("_g/touch",["_g/base","jquery.hammer"],function(){return window._g.touch=e,window._g.touch})}(window),function(){var e={support:function(){},init:function(){$(document).on("keydown",function(e){console.log("keydown"+e)}),$(document).on("keyup",function(e){console.log("keyup"+e)}),$(document).on("keypress",function(e){console.log("keypress"+e)})}};typeof require=="undefined"?(window._g||(window._g={}),window._g.keyboard=e):define("_g/keyboard",["_g/base","_g/event"],function(){return window._g.keyboard=e,window._g.keyboard})}(window),function(){var e={0:{x:{activeItem:{x:function(e,t){return-e*(1-t)*100+"%"}},currentItem:{x:function(e,t){return e*t*100+"%"}}},y:{activeItem:{y:function(e,t){return-e*(1-t)*100+"%"}},currentItem:{y:function(e,t){return e*t*100+"%"}}},perspective:!1,currentEasing:"linear",activeEasing:"linear"},1:{x:{activeItem:{x:function(e,t){return-e*(1-t)*100+"%"}},currentItem:{x:0}},y:{activeItem:{y:function(e,t){return-e*(1-t)*100+"%"}},currentItem:{y:0}},activeTop:!0,perspective:!1,currentEasing:"in",activeEasing:"out"},2:{x:{activeItem:{},currentItem:{opacity:function(e,t){return 1-t}}},y:{activeItem:{},currentItem:{opacity:function(e,t){return 1-t}}},currentTop:!0,perspective:!1,currentEasing:"linear",activeEasing:"linear"},3:{perspective:!0,currentEasing:"out",activeEasing:"in",currentTop:!0,percentcontrol:[.5,1],.5:{x:{activeItem:{rotateY:function(e,t){return-e*90+"deg"},opacity:.2},currentItem:{rotateY:function(e,t){return e*90*t*2+"deg"},opacity:function(e,t){return.2+.8*(1-t*2)}}},y:{activeItem:{rotateX:function(e,t){return e*90+"deg"},opacity:.2},currentItem:{rotateX:function(e,t){return-e*90*t*2+"deg"},opacity:function(e,t){return.2+.8*(1-t*2)}}}},1:{x:{activeItem:{rotateY:function(e,t){return-e*90*(1-(t-.5)*2)+"deg"},opacity:function(e,t){return.2+.8*(t-.5)*2}},currentItem:{rotateY:function(e,t){return e*90+"deg"},opacity:.2}},y:{activeItem:{rotateX:function(e,t){return e*90*(1-(t-.5)*2)+"deg"},opacity:function(e,t){return.2+.8*(t-.5)*2}},currentItem:{rotateX:function(e,t){return-e*90+"deg"},opacity:.2}}}},4:{x:{css:{currentItem:{transformOrigin:function(e,t){return e<0?"100% 50%":"0% 50%"}},activeItem:{transformOrigin:function(e,t){return e>0?"100% 50%":"0% 50%"}}},activeItem:{x:function(e,t){return-e*(1-t)*100+"%"},opacity:function(e,t){return t},rotateY:function(e,t){return-e*(1-t)*90+"deg"}},currentItem:{x:function(e,t){return e*t*100+"%"},rotateY:function(e,t){return e*t*90+"deg"},opacity:function(e,t){return 1-t}}},y:{css:{currentItem:{transformOrigin:function(e,t){return e<0?"50% 100%":"50% 0%"}},activeItem:{transformOrigin:function(e,t){return e>0?"50% 100%":"50% 0%"}}},activeItem:{y:function(e,t){return-e*(1-t)*100+"%"},opacity:function(e,t){return t},rotateX:function(e,t){return e*(1-t)*90+"deg"}},currentItem:{y:function(e,t){return e*t*100+"%"},rotateX:function(e,t){return-e*t*90+"deg"},opacity:function(e,t){return 1-t}}},currentTop:!0,perspective:!0,currentEasing:"linear",activeEasing:"linear"},5:{x:{css:{currentItem:{transformOrigin:function(e,t){return e>0?"100% 50%":"0% 50%"}}},activeItem:{x:function(e,t){return-e*(1-t)*100+"%"}},currentItem:{x:0,scale:function(e,t){return.5+.5*(1-t)}}},y:{css:{currentItem:{transformOrigin:function(e,t){return e>0?"50% 100%":"50% 0%"}}},activeItem:{y:function(e,t){return-e*(1-t)*100+"%"}},currentItem:{y:0,scale:function(e,t){return.5+.5*(1-t)}}},activeTop:!0,perspective:!1,currentEasing:"in",activeEasing:"out"}};typeof require=="undefined"?(window._g||(window._g={}),window._g.transitionargs=e):define("_g/transitionargs",["_g/base"],function(){return window._g.transitionargs=e,window._g.transitionargs})}(window),function(){var e=function(e){this.init(e)};e.prototype={isDraged:!1,init:function(e){var t={containment:null,containmentClass:"c-transition-containment",perspectiveClass:"c-perspective",itemClass:"c-transition-item",currentClass:"c-transition-current",leftClass:"c-transition-left",rightClass:"c-transition-right",upClass:"c-transition-up",downClass:"c-transition-down",activeClass:"c-transition-active",topClass:"c-transition-top",repeat:!1,direction:0,type:1,duration:1e3,onStart:null,onEnd:null,control:!0,autoplay:!1,width:null,height:null,disableControlled:!1,autoplayDirection:-1,autoplayAxis:null},n=this;return this.opts=e?$.extend(!0,{},t,e):t,this.opts.containment?($(this.opts.containment).addClass(this.opts.containmentClass),_.bindAll(this),this.opts.control&&(this.control(),this.opts.disableControlled&&this.disableControl()),this.opts.autostart?(this.timerDisabled=!1,this.timerstart({})):this.timerDisabled=!0,this):!1},disableControlled:!1,disableControl:function(){this.disableControlled=!0},enableControl:function(){this.disableControlled=!1},control:function(){var e=this;_g.dragcontrol.bind({el:this.opts.containment,dragstart:function(t){console.log(t);if(e.disableControlled)return;e.start(t)},dragleft:function(t){if(e.disableControlled)return;e.dragX(t)},dragright:function(t){if(e.disableControlled)return;e.dragX(t)},dragup:function(t){if(e.disableControlled)return;e.dragY(t)},dragdown:function(t){if(e.disableControled)return;e.dragY(t)},dragend:function(t){if(e.disableControlled)return;e.dragEnd(t)},canDragX:function(){return!e.opts.autoplayAxis||e.opts.autoplayAxis=="x"?!0:!1},canDragY:function(){return!e.opts.autoplayAxis||e.opts.autoplayAxis=="y"?!0:!1}})},stashitemClass:function(){$(this.opts.containment).find("."+this.opts.itemClass).css({transform:"","-moz-transform":"","-webkit-transform":"","-o-transform":"","-ms-transform":""}),this.stashClass={current:$(this.opts.containment).find("."+this.opts.currentClass).attr("style"),left:$(this.opts.containment).find("."+this.opts.leftClass).attr("style"),right:$(this.opts.containment).find("."+this.opts.rightClass).attr("style"),up:$(this.opts.containment).find("."+this.opts.upClass).attr("style"),down:$(this.opts.containment).find("."+this.opts.downClass).attr("style")},this.stashed=!0},recoveritemClass:function(){if(this.stashed)try{this.currentItem.attr("style",this.stashClass.current||""),this.activeItem.hasClass(this.opts.leftClass)?this.activeItem.attr("style",this.stashClass.left||""):this.activeItem.hasClass(this.opts.rightClass)?this.activeItem.attr("style",this.stashClass.right||""):this.activeItem.hasClass(this.opts.upClass)?this.activeItem.attr("style",this.stashClass.up||""):this.activeItem.hasClass(this.opts.downClass)&&this.activeItem.attr("style",this.stashClass.down||"")}catch(e){console.log(e)}$(this.opts.containment).find("."+this.opts.itemClass).css({transform:"","-moz-transform":"","-webkit-transform":"","-o-transform":"","-ms-transform":""}),this.stashed=!1},start:function(e,t){if(this.isTransiting)return;t||(t=this.opts.type),this.args=_g.transitionargs[t],this.args.perspective?$(this.opts.containment).addClass(this.opts.perspectiveClass):$(this.opts.containment).removeClass(this.opts.perspectiveClass),this.currentItem=$(this.opts.containment).find("."+this.opts.currentClass),this.currentItem.addClass(this.opts.topClass),this.stashitemClass()},dragX:function(e){if(this.isTransiting)return;e.gesture.deltaX<=0?(this.plus=-1,this.activeItem=$(this.opts.containment).find("."+this.opts.rightClass)):(this.plus=1,this.activeItem=$(this.opts.containment).find("."+this.opts.leftClass));if(!this.activeItem.length)return;var t=e.gesture.deltaX;this.direction="x",this.dragHandle(t)},dragY:function(e){if(this.isTransiting)return;e.gesture.deltaY<=0?(this.plus=-1,this.activeItem=$(this.opts.containment).find("."+this.opts.downClass)):(this.plus=1,this.activeItem=$(this.opts.containment).find("."+this.opts.upClass));if(!this.activeItem.length)return;var t=e.gesture.deltaY;this.direction="y",this.dragHandle(t)},dragHandle:function(e){isDraged=!0,$(this.opts.containment).find("."+this.opts.itemClass).removeClass(this.opts.activeClass),this.activeItem.addClass(this.opts.activeClass),this.currentItem=$(this.opts.containment).find("."+this.opts.currentClass);var t=Math.abs(e)/$(this.opts.containment).width();if(!_g.browserSupport({msie:9}))this.currentItem.css(this.direction=="x"?"margin-left":"margin-top",this.plus*t*100+"%"),this.activeItem.css(this.direction=="x"?"margin-left":"margin-top",-this.plus*(1-t)*100+"%");else if(this.args.percentcontrol){for(i=0;i<this.args.percentcontrol.length;i++)if(t<=this.args.percentcontrol[i]){if(this.args[this.args.percentcontrol[i]][this.direction].css){var n=this.args[this.args.percentcontrol[i]][this.direction].css;n.currentItem&&this.currentItem.css(this.getArgs(n.currentItem,this.plus,t)),n.activeItem&&this.activeItem.css(this.getArgs(n.activeItem,this.plus,t))}this.activeItem.css(this.getArgs(this.args[this.args.percentcontrol[i]][this.direction].activeItem,this.plus,t)),this.currentItem.css(this.getArgs(this.args[this.args.percentcontrol[i]][this.direction].currentItem,this.plus,t));break}}else{if(this.args[this.direction].css){var n=this.args[this.direction].css;n.currentItem&&this.currentItem.css(this.getArgs(n.currentItem,this.plus,t)),n.activeItem&&this.activeItem.css(this.getArgs(n.activeItem,this.plus,t))}this.activeItem.css(this.getArgs(this.args[this.direction].activeItem,this.plus,t)),this.currentItem.css(this.getArgs(this.args[this.direction].currentItem,this.plus,t))}this.args.currentTop?this.currentItem.addClass(this.opts.topClass):this.currentItem.removeClass(this.opts.topClass),this.args.activeTop&&this.activeItem.addClass(this.opts.topClass),this.opts.onTransition&&this.opts.onTransition(event,t)},dragEnd:function(e){if(this.isTransiting)return;if(!this.currentItem.length||!this.activeItem.length)return;var t=this;this.isTransiting=!0;var n=this.direction=="x"?e.gesture.deltaX:e.gesture.deltaY,r=Math.abs(n)/$(this.opts.containment).width();if(!_g.browserSupport({msie:9}))this.activeItem.css(this.direction=="x"?"margin-left":"margin-top","0%"),this.currentItem.css(this.direction=="x"?"margin-left":"margin-top",-this.plus*100+"%");else if(this.args.percentcontrol){this.percent=r;for(i=0;i<this.args.percentcontrol.length;i++)if(r<=this.args.percentcontrol[i]){this.transitPercent(i);break}}else{var s=this.opts.duration*(1-r),o=this.getArgs(this.args[this.direction].currentItem,this.plus,1);o.duration=s,o.easing=this.args.currentEasing;var u=this.getArgs(this.args[this.direction].activeItem,this.plus,1);u.duration=s,u.easing=this.args.activeEasing,u.complete=function(){t.isTransiting=!1,t.onTransitionEnd()},this.currentItem.transit(o),this.activeItem.transit(u)}console.log("dragend")},onTransitionEnd:function(){var e=this;this.recoveritemClass(),this.currentItem.removeClass(this.opts.currentClass),this.activeItem.addClass(this.opts.currentClass).removeClass(this.opts.activeClass).removeClass(this.opts.upClass).removeClass(this.opts.rightClass).removeClass(this.opts.leftClass).removeClass(this.opts.downClass),$(this.opts.containment).find("."+this.opts.itemClass).removeClass(this.opts.topClass);var t=this.currentItem.index(),n=this.activeItem.index();$(this.opts.containment).removeClass(this.opts.perspectiveClass),e.opts.onEnd&&e.opts.onEnd(t,n),this.timerStart()},transitPercent:function(e){var t=this;if(e<this.args.percentcontrol.length){var t=this,n=this.opts.duration*(this.args.percentcontrol[e]-this.percent),r=this.getArgs(this.args[this.args.percentcontrol[e]][this.direction].currentItem,this.plus,this.args.percentcontrol[e]);r.duration=n,r.easing=this.args.currentEasing;var i=this.getArgs(this.args[this.args.percentcontrol[e]][this.direction].activeItem,this.plus,this.args.percentcontrol[e]);i.duration=n,i.easing=this.args.activeEasing,i.complete=function(){t.transitPercent(e+1)},this.percent=this.args.percentcontrol[e],this.currentItem.transit(r),this.activeItem.transit(i)}else t.isTransiting=!1,this.onTransitionEnd()},getArgs:function(e,t,n){var r={};return _.each(e,function(e,i){typeof e=="function"?r[i]=e(t,n):r[i]=e}),r},autostart:function(e,t,n){if(this.isTransiting)return;this.args=_g.transitionargs[e],this.currentItem=$(this.opts.containment).find("."+this.opts.currentClass),this.stashitemClass(),t=="x"&&(n<0?this.activeItem=$(this.opts.containment).find("."+this.opts.rightClass):this.activeItem=$(this.opts.containment).find("."+this.opts.leftClass)),t=="y"&&(n<0?this.activeItem=$(this.opts.containment).find("."+this.opts.downClass):this.activeItem=$(this.opts.containment).find("."+this.opts.upClass));if(!this.activeItem.length)return;this.args.currentTop&&this.currentItem.addClass(this.opts.topClass),this.plus=n,this.direction=t,this.args.perspective?$(this.opts.containment).addClass(this.opts.perspectiveClass):$(this.opts.containment).removeClass(this.opts.perspectiveClass);var r={gesture:{}};t=="x"?r.gesture.deltaX=0:r.gesture.deltaY=0,this.dragHandle(0),this.dragEnd(r)},enableTimer:function(){this.timerDisabled=!1},disableTimer:function(){this.timerDisabled=!0},setCurrent:function(e,t){var n,r=this;$(this.opts.containment).children("."+this.opts.itemClass).removeClass(this.opts.topClass).removeClass(this.opts.activeClass).removeClass(this.opts.upClass).removeClass(this.opts.rightClass).removeClass(this.opts.leftClass).removeClass(this.opts.downClass);var i=$(this.opts.containment).children().length;if(e>=i){if(!this.opts.repeat){this.timerStop();return}this.current=0,e=0}else if(e<0){if(!this.opts.repeat){this.timerStop();return}this.current=i-1,e=i-1}$(this.opts.containment).children().each(function(){$(this).index()==e?(n=$(this),$(this).addClass(r.opts.currentClass)):$(this).removeClass(r.opts.currentClass)});if(t&&n){if(t=="x")var s=this.opts.leftClass,o=this.opts.rightClass;else var s=this.opts.upClass,o=this.opts.downClass;n.prev().length?n.prev().addClass(s):this.opts.repeat&&$(this.opts.containment).children().last().addClass(s),n.next().length?n.next().addClass(o):this.opts.repeat&&$(this.opts.containment).children().first().addClass(o)}},timerStart:function(e){if(this.timerDisabled)return;var t=this;if(e)e.type||(e.type=t.opts.type),e.axis||(e.axis="x"),e.diretion||(e.direction=-1),e.startAt||(e.startAt=0),this.setCurrent(e.startAt,e.axis),this.current=e.startAt,this.TimerArgs=e;else{if(!this.TimerArgs)return;e=this.TimerArgs,this.TimerDirection=this.TimerDirection||t.opts.autoplayDirection,this.current=this.tempCurrent!=null?this.tempCurrent:this.TimerDirection==-1?this.current+1:this.current-1,this.tempCurrent=null,this.TimerDirection=null,this.setCurrent(this.current,e.axis)}this.Timer&&window.clearTimeout(this.Timer),this.Timer=window.setTimeout(function(){t.autostart(e.type,e.axis,e.direction)},this.opts.interval)},timerStop:function(e){this.Timer&&(window.clearTimeout(this.Timer),this.Timer=null),this.TimerArgs=null,this.disableTimer()}},typeof require=="undefined"?(window._g||(window._g={}),window._g.transition=e):define("_g/transition",["_g/base","jquery.transit","_g/transitionargs"],function(){return window._g.transition=e,window._g.transition})}(window),function(){var e=function(e){this.init(e)};e.prototype={init:function(e){var t={body:"window",containment:".touchslide",slidesclass:".slides",groupclass:".group",itemclass:".Presentation",width:1024,height:768,overview:!0,controls:!0,progress:!0,slideNumber:!1,history:!1,disableHistoryStart:!1,keyboard:!0,overview:!0,center:!0,touch:!0,loop:!1,rtl:!1,fragments:!0,embedded:!1,autoSlide:0,autoSlideStoppable:!0,mouseWheel:!1,hideAddressBar:!0,previewLinks:!1,transition:0,transitionSpeed:"default",onReady:null,onSlideChange:null,canDragX:null,canDragY:null,adapt:!1,screen_mode:1,show_excontent:!1};this.options=e?$.extend(!0,{},t,e):t,_g.browserSupport({msie:9})||(this.options.canDragX=this.options.canDragY=function(e){return!1}),_.bindAll(this),this._initVaribles(),this._initControls(),this._initScreenSet(),this._initSlideItems(),this.transition=new _g.transition({type:this.options.transition,containment:this.slideContent,control:!1,onEnd:this._complete,duration:400}),this._initSlideStyle();if(this.options.onReady){var n=this.slideType==3?this.indexes[0][0]:this.indexes[0];this.options.onReady(this,n)}return this.options.controls&&(this._bindControllers(),this.setControllers()),this.options.progress&&this.setProgressBar(),this.options.keyboard&&this._bindKeyboard(),this.options.mouseWheel&&this._bindMouseWheel(),this.options.history&&this._bindRoute(),this},_bindRoute:function(){var e=this,t=Backbone.Router.extend({routes:{"page/:query":"page"}});this.Router=new t,this.Router.on("route:page",function(t,n){console.log(t),console.log(n);var r=e.getSlidePositionById(t);r&&e.slide(r.h,r.v)});var n=!1;e.options.disableHistoryStart&&(n=!0),Backbone.history.start({silent:n}),this.Router.navigate("page/"+this.getCurrentSlideId())},_initVaribles:function(){this.indexv=0,this.indexh=0,this.currentSlideDirection=null,this.dragstart=!1,this.dragging=!1,this.sliding=!1},_initControls:function(){var e=this,t=0,n=0,r=0,i=0;this.hammertime=$(this.options.containment).hammer().on("dragstart",function(t){if(e.sliding)return;if(e.options.canDrag&&!e.options.canDrag(t))return;e.dragstart=!0,e._doStartEvent()}),$(this.options.containment).hammer().on("dragleft",function(t){console.log("dragleft"),e.currentSlideDirection==null&&(e.currentSlideDirection=1);if(e.options.canDragX&&!e.options.canDragX(t))return;if(!e._testSlideDragEventAccess(t))return;return e.dragstart=!0,$.zoom&&$.zoom!=1&&(t.gesture.deltaX=t.gesture.deltaX/$.zoom),r=t.gesture.deltaX,e._doDragingEvent(t),console.log(r),t.gesture.preventDefault(),!1}),$(this.options.containment).hammer().on("dragright",function(t){console.log("dragright"),e.currentSlideDirection==null&&(e.currentSlideDirection=1);if(e.options.canDragX&&!e.options.canDragX(t))return;if(!e._testSlideDragEventAccess(t))return;return e.dragstart=!0,$.zoom&&$.zoom!=1&&(t.gesture.deltaX=t.gesture.deltaX/$.zoom),r=t.gesture.deltaX,e._doDragingEvent(t),t.gesture.preventDefault(),!1}),$(this.options.containment).hammer().on("dragup",function(t){console.log("dragup"),e.currentSlideDirection==null&&(e.currentSlideDirection=2);if(e.options.canDragY&&!e.options.canDragY(t))return;if(!e._testSlideDragEventAccess(t))return;return e.dragstart=!0,$.zoom&&$.zoom!=1&&(t.gesture.deltaY=t.gesture.deltaY/$.zoom),i=t.gesture.deltaY,e._doDragingEvent(t),t.gesture.preventDefault(),!1}),$(this.options.containment).hammer().on("dragdown",function(t){console.log("dragdown"),e.currentSlideDirection==null&&(e.currentSlideDirection=2);if(e.options.canDragY&&!e.options.canDragY(t))return;if(!e._testSlideDragEventAccess(t))return;return e.dragstart=!0,$.zoom&&$.zoom!=1&&(t.gesture.deltaY=t.gesture.deltaY/$.zoom),i=t.gesture.deltaY,e._doDragingEvent(t),t.gesture.preventDefault(),!1}),$(this.options.containment).hammer().on("dragend",function(t){console.log("slide is dragended"),e.dragstart||(e.currentSlideDirection=null);if(e.options.canDrag&&!e.options.canDrag(t))return;if(!e._testSlideDragEventAccess(t))return;if(e.currentSlideDirection==1&&r||e.currentSlideDirection==2&&i)$.zoom&&$.zoom!=1&&(e.currentSlideDirection==2&&i&&(t.gesture.deltaY=t.gesture.deltaY/$.zoom),e.currentSlideDirection==1&&r&&(t.gesture.deltaX=t.gesture.deltaX/$.zoom)),e._doDragEndEvent(t);return e.dragstart=!1,e.currentSlideDirection=null,r=0,i=0,t.gesture.preventDefault(),!1}),$(this.options.containment).on("touchend",function(e){console.log("slide is touchended")})},_initSlideItems:function(){var e=0,t=0,n=this,r=[];this.slideItems=[],this.slideContent.append('<div class="slideTempContainer" style="position:absolute;left:-99999px;top:-99999px;"></div>'),this.slideTempContainer=this.slideContent.children(".slideTempContainer"),this.slideContent.addClass("c-transition-containment");if(this.slideContent.children(this.options.groupclass).length>0){this.slideType=3,this.slideContent.children(this.options.groupclass).each(function(){r[t]=[],n.slideItems[t]=[],$(this).children(n.options.itemclass).each(function(){r[t][e]=$(this).attr("id")||1,n.slideItems[t][e]=this,e+=1}),t+=1,e=0});var i=this.slideContent.children(this.options.groupclass).detach();this.slideTempContainer.append(i)}else{this.slideType=1,this.slideContent.children(this.options.itemclass).each(function(){r[t]=$(this).attr("id")||1,n.slideItems[t]=this,t+=1});var i=this.slideContent.children(this.options.itemclass).detach();this.slideTempContainer.append(i)}this.indexes=r,this.options.show_overview&&this._drawOverview()},_initSlideStyle:function(){var e=this,t=0,n=0;this.slideContent.find(this.options.itemclass).each(function(){$(this).css({width:e.slideScreenWidth,height:e.slideScreenHeight}),$(this).children(".interaction-area").css({width:e.slideWidth,height:e.slideHeight}),$(this).addClass("c-transition-item")}),this.setSlideItems(),e.setAdaptSlideItems()},_initScreenSet:function(){this.slideScreenWidth=this.options.width,this.slideScreenHeight=this.options.height,this.slideWidth=this.options.width,this.slideHeight=this.options.height,this.slideContainment=$(this.options.containment),this.slideContent=$(this.options.containment).children(this.options.slidesclass),this.slideContent.wrap('<div class="slides-wrap" style="position:absolute;width:100%;height:100%;left:0;top:0;"></div>'),this.slideWrap=this.slideContainment.children(".slides-wrap"),this.slideContainment.css({width:this.slideScreenWidth,height:this.slideScreenHeight}),this.slideContent.css({width:this.slideScreenWidth,height:this.slideScreenHeight}),this.slideGroup=this.slideContent.children(),this.options.adapt&&(this.adapt=!0),this.setAdaptScreen()},sendSlide2Content:function(e){var t=$(e).detach();this.slideContent.append(t)},sendSlide2Temp:function(e){var t=$(e).detach();this.slideTempContainer.append(t)},setSingleSlideItem:function(e,t,n){this.slideContent.find(this.options.itemclass).removeClass("c-transition-"+n),this.slideItem=this.getSlideItem(e,t),$(this.slideItem).addClass("c-transition-"+n),$(this.slideItem).parent().is(this.slideContent)||this.sendSlide2Content(this.slideItem)},setSlideItems:function(){var e=this;this.currentItem=this.getCurrentSlide(),this.leftItem=null,this.rightItem=null,this.upItem=null,this.downItem=null;var t=[];t.push(this.getCurrentSlideId()),$(this.currentItem).parent().is(this.slideContent)||this.sendSlide2Content(this.currentItem);var n=this.getSlideDirections();n.left&&(t.push(this.getLeft()),this.leftItem=this.getSlideItemById(this.getLeft()),$(this.leftItem).parent().is(this.slideContent)||this.sendSlide2Content(this.leftItem)),n.right&&(t.push(this.getRight()),this.rightItem=this.getSlideItemById(this.getRight()),$(this.rightItem).parent().is(this.slideContent)||this.sendSlide2Content(this.rightItem)),this.slideType==3&&(n.up&&(t.push(this.getUp()),this.upItem=this.getSlideItemById(this.getUp()),$(this.upItem).parent().is(this.slideContent)||this.sendSlide2Content(this.upItem)),n.down&&(t.push(this.getDown()),this.downItem=this.getSlideItemById(this.getDown()),$(this.downItem).parent().is(this.slideContent)||this.sendSlide2Content(this.downItem))),this.slideContent.children(this.options.itemclass).each(function(){var n=$(this).attr("id");_.include(t,n)||e.sendSlide2Temp(this)}),this.slideContent.find(".c-transition-item").each(function(){this.id!=e.currentItem.id&&$(this).removeClass("c-transition-current"),$(this).removeClass("c-transition-left").removeClass("c-transition-right").removeClass("c-transition-up").removeClass("c-transition-down")}),$(this.currentItem).addClass("c-transition-current"),this.rightItem&&$(this.rightItem).addClass("c-transition-right"),this.leftItem&&$(this.leftItem).addClass("c-transition-left"),this.upItem&&$(this.upItem).addClass("c-transition-up"),this.downItem&&$(this.downItem).addClass("c-transition-down")},setAdaptScreen:function(){if(this.options.adapt){var e=this._getScreenSize(),t=this._getScreenScale();this.options.screen_mode==0?(this.slideScreenWidth=e.x,this.slideScreenHeight=e.y):this.options.screen_mode==1?(t.x&&(e.x=parseInt(e.x/t.x,10)),t.y&&(e.y=parseInt(e.y/t.y,10)),t.x&&(this.slideScreenWidth=e.x>this.options.width?e.x:this.options.width,this.slideScreenHeight=this.options.height),t.y&&(this.slideScreenHeight=e.y>this.options.height?e.y:this.options.height,this.slideScreenWidth=this.options.width)):(t.y&&(e.x=parseInt(e.x/t.y,10)),t.x&&(e.y=parseInt(e.y/t.x,10)),t.y&&(this.slideScreenWidth=e.x<this.options.width?e.x:this.options.width,this.slideScreenHeight=this.options.height),t.x&&(this.slideScreenHeight=e.y<this.options.height?e.y:this.options.height,this.slideScreenWidth=this.options.width)),this.slideContainment.css({width:this.slideScreenWidth,height:this.slideScreenHeight}),this.slideContent.css({width:this.slideScreenWidth,height:this.slideScreenHeight}),this.slideContent.find(".Presentation").css({overflow:"hidden"}),this.options.show_excontent&&this.slideContent.find(".interaction-view").css({overflow:"visible"}),this.slideWrap.css({overflow:"hidden"}),this.slideContainment.css({overflow:"visible"})}else if(this.options.screen_mode==2){var e=this._getScreenSize(),t=this._getScreenScale();t.y&&(e.x=parseInt(e.x/t.y,10)),t.x&&(e.y=parseInt(e.y/t.x,10)),t.y&&(this.slideScreenWidth=e.x<this.options.width?e.x:this.options.width,this.slideScreenHeight=this.options.height),t.x&&(this.slideScreenHeight=e.y<this.options.height?e.y:this.options.height,this.slideScreenWidth=this.options.width),this.slideContainment.css({width:this.slideScreenWidth,height:this.slideScreenHeight}),this.slideContent.css({width:this.slideScreenWidth,height:this.slideScreenHeight}),this.slideContent.find(".Presentation").css({overflow:"hidden"}),this.slideWrap.css({overflow:"hidden"}),this.slideContainment.css({overflow:"visible"})}},setAdaptSlideItems:function(){var e=this._getScreenScale(),t=(this.slideScreenWidth-this.slideWidth)/2,n=(this.slideScreenHeight-this.slideHeight)/2;this.slideContent.find(".interaction-area").css({"margin-left":t}),this.slideContent.find(".interaction-area").css({"margin-top":n})},_getScreenSize:function(){var e,t;if(this.options.body=="window"){var n=window,r=document,i=r.documentElement,s=r.getElementsByTagName("body")[0];e=n.innerWidth||i.clientWidth||s.clientWidth,t=n.innerHeight||i.clientHeight||s.clientHeight}else e=parseInt($(this.options.body).css("width"),10),t=parseInt($(this.options.body).css("height"),10);return{x:e,y:t}},_getScreenScale:function(){var e=this._getScreenSize(),t=e.x,n=e.y,r=this.options.width,i=this.options.height,s=null,o=null;return r>=i?s=t/n>=r/i?n/i:t/r:s=n/t>i/r?t/r:n/i,$.zoom&&(s=$.zoom),t/n>=r/i?{x:s,y:null}:{x:null,y:s}},_bindControllers:function(){var e=this;$(".action-control").children("button").on("click",function(){$(this).hasClass("enabled")&&($(this).hasClass("navigate-right")&&e.next(),$(this).hasClass("navigate-left")&&e.prev(),$(this).hasClass("navigate-up")&&e.up(),$(this).hasClass("navigate-down")&&e.down())})},_bindKeyboard:function(){var e=this;$(document).on("keydown",function(t){var n=!1,r=e.getSlideDirections();t.keyCode==37&&r.left&&(e.options.onKeyboard&&e.options.onKeyboard(),e.prev(),n=!0),t.keyCode==38&&r.up&&(e.options.onKeyboard&&e.options.onKeyboard(),e.up(),n=!0),t.keyCode==39&&r.right&&(e.options.onKeyboard&&e.options.onKeyboard(),e.next(),n=!0),t.keyCode==40&&r.down&&(e.options.onKeyboard&&e.options.onKeyboard(),e.down(),n=!0),t.keyCode==27&&e.options.overview&&e.options.show_controlbar&&(e.show_overview?e.toggleOverview(!1):e.toggleOverview(!0)),n&&t.preventDefault()})},_bindMouseWheel:function(){var e=this,t=0,n=0;e.wheelLock=!1,$(this.options.containment).addClass("iMouseWheel enableMouseWheel"),$(this.options.containment).on("wheelstart",function(t,n){console.log("wstart");if(!$(t.target).is(this))return;if(e.sliding)return;if(e.wheelLock)return;e.wheelstart=!0}),$(this.options.containment).on("wheelleft",function(n,r){if(!$(n.target).is(this))return;var i=_g.mousewheel.getMouseWheel(r),s=i.x,o=Math.max(-1,Math.min(1,s||0));e.currentSlideDirection==null&&(e.currentSlideDirection=1);if(!e._testSlideDragEventAccess(n))return;e.wheelstart=!0,_g.mousewheel.currentTarget=$(e.options.containment);var u=parseInt(e.slideScreenWidth/25,10);t+=o/Math.abs(o)*u,n.gesture={deltaX:-1};if(t<-100&&!e.wheelLock){var a=e.getSlideDirections();if(!a.right)return;e.options.onWheel&&e.options.onWheel(),e.wheelLock=!0,e.originh=e.indexh,e.originv=e.indexv,e.indexh=e.indexh+1,e.indexv=0,e.transition.autostart(e.options.transition,"x",n.gesture.deltaX)}}),$(this.options.containment).on("wheelright",function(n,r){if(!$(n.target).is(this))return;var i=_g.mousewheel.getMouseWheel(r),s=i.x,o=Math.max(-1,Math.min(1,s||0));e.currentSlideDirection==null&&(e.currentSlideDirection=1);if(!e._testSlideDragEventAccess(n))return;e.wheelstart=!0,_g.mousewheel.currentTarget=$(e.options.containment);var u=parseInt(e.slideScreenWidth/25,10);t+=o/Math.abs(o)*u,n.gesture={deltaX:1};if(t>100&&!e.wheelLock){var a=e.getSlideDirections();if(!a.left)return;e.options.onWheel&&e.options.onWheel(),e.wheelLock=!0,e.originh=e.indexh,e.originv=e.indexv,e.indexh=e.indexh-1,e.indexv=0,e.transition.autostart(e.options.transition,"x",n.gesture.deltaX)}}),$(this.options.containment).on("wheelup",function(t,r){console.log(t.currentTarget);if(!$(t.target).is(this))return;var i=_g.mousewheel.getMouseWheel(r),s=i.y,o=Math.max(-1,Math.min(1,s));e.currentSlideDirection==null&&(e.currentSlideDirection=2);if(!e._testSlideDragEventAccess(t))return;e.dragstart=!0,_g.mousewheel.currentTarget=$(e.options.containment);var u=parseInt(e.slideScreenHeight/25,10);n+=o/Math.abs(o)*u,t.gesture={deltaY:-1};if(n<-50&&!e.wheelLock){var a=e.getSlideDirections();if(!a.down)return;e.options.onWheel&&e.options.onWheel(),e.wheelLock=!0,e.originh=e.indexh,e.originv=e.indexv,e.indexv+=1,e.transition.autostart(e.options.transition,"y",t.gesture.deltaY)}}),$(this.options.containment).on("wheeldown",function(t,r){if(!$(t.target).is(this))return;var i=_g.mousewheel.getMouseWheel(r),s=i.y,o=Math.max(-1,Math.min(1,r.wheelDeltaY));e.currentSlideDirection==null&&(e.currentSlideDirection=2);if(!e._testSlideDragEventAccess(t))return;e.wheelstart=!0,_g.mousewheel.currentTarget=$(e.options.containment);var u=parseInt(e.slideScreenHeight/25,10);n+=o/Math.abs(o)*u,t.gesture={deltaY:1};if(n>50&&!e.wheelLock){var a=e.getSlideDirections();if(!a.up)return;e.options.onWheel&&e.options.onWheel(),e.wheelLock=!0,e.originh=e.indexh,e.originv=e.indexv,e.indexv-=1,e.transition.autostart(e.options.transition,"y",t.gesture.deltaY)}}),$(this.options.containment).on("wheelend",function(r,i){console.log("wend");if(!$(r.target).is(this))return;e.wheelstart||(e.currentSlideDirection=null),e.wheelstart=!1,e.wheelLock=!1,e.currentSlideDirection=null,t=0,n=0})},_bindOverviewEvents:function(){var e=this;this.touchoverviewelement.hammer().on("tap",function(t){console.log(t.target);if($(t.target).is(".touchslide_overview_item")){var n=$(t.target).attr("data-indexh"),r=$(t.target).attr("data-indexv");n&&r&&e.slide(Number(n),Number(r))}return e.toggleOverview(!1),!1})},_drawOverview:function(){var e=this,t=this._getScreenSize(),n=this.slideScreenWidth/this.slideScreenHeight,r=parseInt(t.x/4<250?t.x/4:250,10),s=parseInt(r/n,10);this.overview_width=r,this.overview_height=s,$("body").append('<div class="touchslide_overview disableMouseWheel iMouseWheel" style="width:100%;height:100%;position:absolute;left:0;z-index:10000;overflow:auto;top:0;display:none;"></div>'),this.touchoverviewelement=$("body").children(".touchslide_overview"),this.touchoverviewelement.append('<div class="touchslide_overview_container"></div>'),this.touchoverviewcontainerel=this.touchoverviewelement.children(".touchslide_overview_container"),this.touchoverviewcontainerel.append('<div class="touchslide_overview_wrap disableMouseWheel iMouseWheel"></div>'),this.touchoverviewel=this.touchoverviewcontainerel.children(".touchslide_overview_wrap"),this.touchoverviewel.css("top",0),this.touchoverviewcontainerel.css({width:r+"px",height:s+"px","margin-left":"-"+r/2+"px","margin-top":"-"+s/2+"px"});if(this.slideType==3){for(i=0;i<this.indexes.length;i++){var o=i*r+i*10;e.touchoverviewel.append('<div class="touchslide_overview_group" data-index="'+i+'" style="position:absolute;left:'+o+'px;top:0;"></div>');for(j=0;j<this.indexes[i].length;j++){var u=j*s+j*10,a=this.options.getOverview?this.options.getOverview(this.indexes[i][j]):null;$(e.touchoverviewel.children()[i]).append('<div class="touchslide_overview_item" data-indexh="'+i+'" data-indexv="'+j+'" style="position:absolute;top:'+u+"px;left:0;width:"+r+"px;height:"+s+'px;"></div>'),$(e.touchoverviewel.children()[i]).children('[data-indexv="'+j+'"]').css({"background-color":"#FFF",outline:"1px solid #ccc"}),a&&$(e.touchoverviewel.children()[i]).children('[data-indexv="'+j+'"]').css({"background-image":"url("+a+")","background-size":"contain","background-position":"center center","background-repeat":"no-repeat"})}}$($(e.touchoverviewel.children()[0]).children()[0]).css("outline","2px solid red")}else{for(i=0;i<this.indexes.length;i++){var o=i*r+i*10,a=this.options.getOverview?this.options.getOverview(this.indexes[i]):null;e.touchoverviewel.append('<div class="touchslide_overview_item" data-indexh="'+i+'" data-indexv="0" style="position:absolute;left:'+o+"px;bottom:0;width:"+r+"px;height:"+s+'px;top:0;"></div>'),$(e.touchoverviewel.children()[i]).css({"background-color":"#FFF",outline:"1px solid #ccc"}),a&&$(e.touchoverviewel.children()[i]).css({"background-image":"url("+a+")","background-size":"contain","background-position":"center center","background-repeat":"no-repeat"})}$(e.touchoverviewel.children()[0]).css("outline","2px solid red")}this._bindOverviewEvents()},toggleOverview:function(e){if(!this.options.show_overview)return;if(e){$(".reveal").css("opacity",.1);var t=this.indexh*this.overview_width+10*this.indexh;this.touchoverviewelement.show(),this.touchoverviewelement.scrollLeft(t),this.touchoverviewelement.scrollTop(0),this.show_overview=!0}else $(".reveal").css("opacity",""),this.touchoverviewelement.hide(),this.show_overview=!1},getSlideDirections:function(){var e={left:!1,right:!1,up:!1,down:!1};return this.slideType==1?(this.indexh>0&&(e.left=!0),this.indexh<this.indexes.length-1&&(e.right=!0)):(this.indexh>0&&(this.options.checkSlidePermission?this.options.checkSlidePermission(this,this.slideType,"left",this.indexh,this.indexv)&&(e.left=!0):e.left=!0),this.indexh<this.indexes.length-1&&(this.options.checkSlidePermission?this.options.checkSlidePermission(this,this.slideType,"right",this.indexh,this.indexv)&&(e.right=!0):e.right=!0),this.indexv>0&&(e.up=!0),this.indexv<this.indexes[this.indexh].length-1&&(e.down=!0)),e},_testSlideDragEventAccess:function(e){var t=!0;if(this.dragstart||this.wheelstart){this.currentSlideDirection==1&&(e.type=="dragup"||e.type=="dragdown"||e.type=="wheelup"||e.type=="wheeldown")&&(t=!1),this.currentSlideDirection==2&&(e.type=="dragleft"||e.type=="dragright"||e.type=="wheelleft"||e.type=="wheelright")&&(t=!1),this.slideType==1&&(e.type=="dragup"||e.type=="dragdown"||e.type=="wheelup"||e.type=="wheeldown")&&(t=!1),this.slideType==2&&(e.type=="dragleft"||e.type=="dragright"||e.type=="wheelleft"||e.type=="wheelright")&&(t=!1);if(e.type=="dragend"||e.type=="wheelend")this.currentSlideDirection||(t=!1)}else t=!1;return t},_doStartEvent:function(e){this.transition.start()},_doDragingEvent:function(e){var t=this._getDragDistance(e),n=this.getSlideDirections();console.log(t);if(e.type=="dragleft"||e.type=="dragright"||e.type=="wheelleft"||e.type=="wheelright"){var r=e.gesture.deltaX;if(e.type.indexOf("right")!=-1&&!n.left){this.dragstart=!1;return}if(e.type.indexOf("left")!=-1&&!n.right){this.dragstart=!1;return}interaction_view.transitionPagePreLoad=null,r<t.min&&(e.gesture.deltaX=t.min),r>t.max&&(e.gesture.deltaX=t.max),this.transition.dragX(e)}if(e.type=="dragup"||e.type=="dragdown"||e.type=="wheelup"||e.type=="wheeldown"){if(e.type.indexOf("down")!=-1&&!n.up){this.dragstart=!1;return}if(e.type.indexOf("up")!=-1&&!n.down){this.dragstart=!1;return}interaction_view.transitionPagePreLoad=null;var i=e.gesture.deltaY;i<t.min&&(e.gesture.deltaY=t.min),i>t.max&&(e.gesture.deltaY=t.max),this.transition.dragY(e)}},_doDragEndEvent:function(e,t){var n=this,r=this._getDragDistance({type:this.currentSlideDirection==1?"dragleft":"dragup"}),i=[0,0],s=!1,o=this.getSlideDirections();if(this.currentSlideDirection==1){var u=e.gesture.deltaX;u<r.min&&(e.gesture.deltaX=r.min),u>r.max&&(e.gesture.deltaX=r.max),u!=0&&(this.originh=this.indexh,this.originv=this.indexv,u<0&&o.right&&(s=!0,this.indexh+=1),u>0&&o.left&&(s=!0,this.indexh-=1),this.indexv=0);if(s){var a=this.getCurrentSlideId();this.options.onSlideChangeStart&&this.options.onSlideChangeStart(a);if(u>0&&o.left||u<0&&o.right)this.sliding=!0,this.transition.dragEnd(e)}}if(this.currentSlideDirection==2){var f=e.gesture.deltaY;f<r.min&&(e.gesture.deltaY=r.min),f>r.max&&(e.gesture.deltaY=r.max),f!=0&&(this.originh=this.indexh,this.originv=this.indexv,f<0&&o.down&&(s=!0,i=[0,r.min],this.indexv+=1),f>0&&o.up&&(s=!0,i=[0,r.max],this.indexv-=1));if(s){var a=this.getCurrentSlideId();this.options.onSlideChangeStart&&this.options.onSlideChangeStart(a);if(f>0&&o.up||f<0&&o.down)this.sliding=!0,this.transition.dragEnd(e)}}s||this.transition.recoveritemClass()},_complete:function(){var e=this;this.slideContent.find(".c-transition-item").removeClass("c-transition-left").removeClass("c-transition-right").removeClass("c-transition-up").removeClass("c-transition-down");var t=e.slideType==3?e.indexes[e.indexh][e.indexv]:e.indexes[e.indexh],n=e.slideType==3?e.indexes[e.originh][e.originv]:e.indexes[e.originh];e.onSlideChange(t,n),e.sliding=!1},_getDragDistance:function(e){var t={min:0,max:0},n=this.getSlideDirections();if(e.type=="dragleft"||e.type=="dragright"||e.type=="wheelleft"||e.type=="wheelright")n.right&&(t.min=-this.slideScreenWidth),n.left&&(t.max=this.slideScreenWidth);if(e.type=="dragup"||e.type=="dragdown"||e.type=="wheelup"||e.type=="wheeldown")n.down&&(t.min=-this.slideScreenHeight),n.up&&(t.max=this.slideScreenHeight);return t},_getCurrentPosition:function(){var e=-this.indexh*this.slideScreenWidth,t=-this.indexv*this.slideScreenHeight;return{x:e,y:t}},isOverview:function(){return!1},getSlideItem:function(e,t){return this.slideType==3?this.slideItems[e][t]:this.slideItems[e]},getSlideItemById:function(e){var t=this.getSlidePositionById(e);return t?this.slideType==3?this.slideItems[t.h][t.v]:this.slideItems[t.h]:null},getCurrentSlide:function(){return this.slideType==3?this.slideItems[this.indexh][this.indexv]:this.slideItems[this.indexh]},getCurrentSlideId:function(){return this.slideType==3?this.indexes[this.indexh][this.indexv]:this.indexes[this.indexh]},getIndices:function(){return{h:this.indexh,v:this.indexv}},getAllSlideIds:function(){var e=[];if(this.slideType==3){for(i=0;i<this.indexes.length;i++)for(j=0;j<this.indexes[i].length;j++)e.push(this.indexes[i][j]);return e}return this.indexes},getFirst:function(){var e=this.getAllSlideIds();return e?e[0]:null},getLast:function(){var e=this.getAllSlideIds();return e?e[e.length-1]:null},getRight:function(){return this.getSlideDirections().right?this.slideType==3?this.indexes[this.indexh+1][0]:this.indexes[this.indexh+1]:null},getLeft:function(){return this.getSlideDirections().left?this.slideType==3?this.indexes[this.indexh-1][0]:this.indexes[this.indexh-1]:null},getUp:function(){return this.getSlideDirections().up?this.slideType==3?this.indexes[this.indexh][this.indexv-1]:null:null},getDown:function(){return this.getSlideDirections().down?this.slideType==3?this.indexes[this.indexh][this.indexv+1]:null:null},getSlidePositionById:function(e){var t=null;if(this.slideType==3){for(i=0;i<this.indexes.length;i++)for(j=0;j<this.indexes[i].length;j++)if(this.indexes[i][j]==e)return{h:i,v:j};return t}return this.indexes.indexOf(e)!=-1?{h:this.indexes.indexOf(e),v:null}:null},getVerticalLength:function(){return this.slideType==3?this.indexes[this.indexh].length:1},getHorizontalLength:function(){return this.indexes.length},slide:function(e,t){if(e==undefined)return;if(e==this.indexh&&t==this.indexv)return;var n=this.getCurrentSlideId();this.indexh=e,this.indexv=t?t:0;var r=e*this.slideScreenWidth,i=t?t*this.slideScreenHeight:0,s=this.getCurrentSlideId();this.onSlideChange(s,n)},setControllers:function(){var e=this.getSlideDirections();$(".action-control").children("button").removeClass("enabled"),e.right&&$(".action-control").children(".navigate-right").addClass("enabled"),e.left&&$(".action-control").children(".navigate-left").addClass("enabled"),e.up&&$(".action-control").children(".navigate-up").addClass("enabled"),e.down&&$(".action-control").children(".navigate-down").addClass("enabled")},setProgressBar:function(){var e=parseInt((this.indexh+1)/this.indexes.length*100,10);$(".controlbar").children(".progress").children("span").css({width:e+"%"})},onSlideChange:function(e,t){var n=this;this.setSlideItems(),this.previousSlide=t,this.currentSlide=e,this.options.history&&this.Router.navigate("page/"+e),n.options.onSlideChange&&n.options.onSlideChange(n.currentSlide,n.previousSlide),n.options.controls&&n.setControllers(),n.options.progress&&n.setProgressBar(),n.changeOverview(n.indexh,n.indexv)},prev:function(){if(this.indexh==0||this.indexes.length<2)return;this.slide(this.indexh-1)},next:function(){if(this.indexh==this.indexes.length-1||this.indexes.length<2)return;this.slide(this.indexh+1)},up:function(){if(this.slideType!=3)return;this.indexes[this.indexh][this.indexv-1]&&this.slide(this.indexh,this.indexv-1)},down:function(){if(this.slideType!=3)return;this.indexes[this.indexh][this.indexv+1]&&this.slide(this.indexh,this.indexv+1)},changeOverview:function(e,t){if(!this.options.show_overview)return;var n=t?t*this.overview_height+10*t:0;$(this.touchoverviewel).find(".touchslide_overview_item").css("outline","1px solid #ccc"),this.slideType==3?($($(this.touchoverviewel.children()[this.indexh]).children()[this.indexv]).css("outline","2px solid red"),this.touchoverviewel.children().css("top",0),this.touchoverviewel.children().eq(e).css({top:-n})):$(this.touchoverviewel.children()[this.indexh]).css("outline","2px solid red")}},typeof require=="undefined"?(window._g||(window._g={}),window._g.touchslide=e):define("_g/touchslide",["_g/base","_g/touch","jquery.hammer","underscore","jquery.transit","backbone","_g/keyboard","_g/transition"],function(){return window._g.touchslide=e,window._g.touchslide})}(window),function(){var e,t,n,r,i,s,o,u,a,f,l={};n=window.document.documentElement,f=window.navigator.userAgent.toLowerCase(),l.ios=function(){return l.iphone()||l.ipod()||l.ipad()},l.iphone=function(){return r("iphone")},l.ipod=function(){return r("ipod")},l.ipad=function(){return r("ipad")},l.android=function(){return r("android")},l.androidPhone=function(){return l.android()&&r("mobile")},l.androidTablet=function(){return l.android()&&!r("mobile")},l.blackberry=function(){return r("blackberry")||r("bb10")||r("rim")},l.blackberryPhone=function(){return l.blackberry()&&!r("tablet")},l.blackberryTablet=function(){return l.blackberry()&&r("tablet")},l.windows=function(){return r("windows")},l.mac=function(){return r("mac")},l.linux=function(){return r("linux")},l.windowsPhone=function(){return l.windows()&&r("phone")},l.windowsTablet=function(){return l.windows()&&r("touch")},l.fxos=function(){return(r("(mobile;")||r("(tablet;"))&&r("; rv:")},l.fxosPhone=function(){return l.fxos()&&r("mobile")},l.fxosTablet=function(){return l.fxos()&&r("tablet")},l.meego=function(){return r("meego")},l.mobile=function(){return l.androidPhone()||l.iphone()||l.ipod()||l.windowsPhone()||l.blackberryPhone()||l.fxosPhone()||l.meego()},l.tablet=function(){return l.ipad()||l.androidTablet()||l.blackberryTablet()||l.windowsTablet()||l.fxosTablet()},l.msie=function(){return $.browser.msie||!!navigator.userAgent.match(/Trident\/7\./)},l.portrait=function(){return Math.abs(window.orientation)!==90},l.landscape=function(){return Math.abs(window.orientation)===90},l.noConflict=function(){return this},l.svg=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Shape","1.1")},l.online=function(e,t,n){var r=new Image;r.onload=function(){console.log("online"),t&&t.constructor==Function&&t()},r.onerror=function(){console.log("offline"),n&&n.constructor==Function&&n()},r.src=e+"?t="+_g.uuid()},l.screenSize=function(){var e=window,t=document,n=t.documentElement,r=t.getElementsByTagName("body")[0],i=e.innerWidth||n.clientWidth||r.clientWidth,s=e.innerHeight||n.clientHeight||r.clientHeight;return{x:i,y:s}},l.isWeixin=function(){var e=navigator.userAgent.toLowerCase();return/micromessenger/.test(e)?!0:!1},r=function(e){return f.indexOf(e)!==-1},s=function(e){var t;return t=new RegExp(e,"i"),n.className.match(t)},t=function(e){if(!s(e))return n.className+=" "+e},u=function(e){if(s(e))return n.className=n.className.replace(e,"")};var c=function(){l.ios()?l.ipad()?t("ios ipad tablet"):l.iphone()?t("ios iphone mobile"):l.ipod()&&t("ios ipod mobile"):l.android()?l.androidTablet()?t("android tablet"):t("android mobile"):l.blackberry()?l.blackberryTablet()?t("blackberry tablet"):t("blackberry mobile"):l.windows()?l.windowsTablet()?t("windows tablet"):l.windowsPhone()?t("windows mobile"):t("desktop"):l.fxos()?l.fxosTablet()?t("fxos tablet"):t("fxos mobile"):l.meego()?t("meego mobile"):t("desktop")};i=function(){return l.landscape()?(u("portrait"),t("landscape")):(u("landscape"),t("portrait"))},a="onorientationchange"in window,o=a?"orientationchange":"resize",window.addEventListener?window.addEventListener(o,i,!1):window.attachEvent?window.attachEvent(o,i):window[o]=i,i(),l.initDom=c,window._g_device=l,typeof require=="undefined"?(window._g||(window._g={}),window._g.device=_g_device):define("_g/device",["_g/base"],function(){return window._g.device=_g_device,window._g.device})}(window),!function(e){e(function(){e.support.transition=function(){var e=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n;for(n in t)if(e.style[n]!==undefined)return t[n]}();return e&&{end:e}}()})}(window.jQuery),!function(e){var t=function(t,n){this.options=n,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=e.Event("show");this.$element.trigger(n);if(this.isShown||n.isDefaultPrevented())return;e("body").addClass("modal-open"),this.isShown=!0,this.escape(),this.backdrop(function(){var n=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1).focus(),t.enforceFocus(),n?t.$element.one(e.support.transition.end,function(){t.$element.trigger("shown")}):t.$element.trigger("shown")})},hide:function(t){t&&t.preventDefault();var n=this;t=e.Event("hide"),this.$element.trigger(t);if(!this.isShown||t.isDefaultPrevented())return;this.isShown=!1,e("body").removeClass("modal-open"),this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]!==e.target&&!t.$element.has(e.target).length&&t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){t.which==27&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,n=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(n),t.hideModal()})},hideModal:function(e){this.$element.hide().trigger("hidden"),this.backdrop()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&r;this.$backdrop=e('<div class="modal-backdrop '+r+'" />').appendTo(document.body),this.options.backdrop!="static"&&this.$backdrop.click(e.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),i?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,e.proxy(this.removeBackdrop,this)):this.removeBackdrop()):t&&t()}},e.fn.modal=function(n){return this.each(function(){var r=e(this),i=r.data("modal"),s=e.extend({},e.fn.modal.defaults,r.data(),typeof n=="object"&&n);i||r.data("modal",i=new t(this,s)),typeof n=="string"?i[n]():s.show&&i.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e(function(){e("body").on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),r=n.attr("href"),i=e(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},i.data(),n.data());t.preventDefault(),i.modal(s).one("hide",function(){n.focus()})})})}(window.jQuery),!function(e){function t(){n(e(r)).removeClass("open")}function n(t){var n=t.attr("data-target"),r;return n||(n=t.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),r=e(n),r.length||(r=t.parent()),r}var r="[data-toggle=dropdown]",i=function(t){var n=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};i.prototype={constructor:i,toggle:function(r){var i=e(this),s,o;if(i.is(".disabled, :disabled"))return;return s=n(i),o=s.hasClass("open"),t(),o||(s.toggleClass("open"),i.focus()),!1},keydown:function(t){var r,i,s,o,u,f;if(!/(38|40|27)/.test(t.keyCode))return;r=e(this),t.preventDefault(),t.stopPropagation();if(r.is(".disabled, :disabled"))return;o=n(r),u=o.hasClass("open");if(!u||u&&t.keyCode==27)return r.click();i=e("[role=menu] li:not(.divider) a",o);if(!i.length)return;f=i.index(i.filter(":focus")),t.keyCode==38&&f>0&&f--,t.keyCode==40&&f<i.length-1&&f++,~f||(f=0),i.eq(f).focus()}},e.fn.dropdown=function(t){return this.each(function(){var n=e(this),r=n.data("dropdown");r||n.data("dropdown",r=new i(this)),typeof t=="string"&&r[t].call(n)})},e.fn.dropdown.Constructor=i,e(function(){e("html").on("click.dropdown.data-api touchstart.dropdown.data-api",t),e("body").on("click.dropdown touchstart.dropdown.data-api",".dropdown",function(e){e.stopPropagation()}).on("click.dropdown.data-api touchstart.dropdown.data-api",r,i.prototype.toggle).on("keydown.dropdown.data-api touchstart.dropdown.data-api",r+", [role=menu]",i.prototype.keydown)})}(window.jQuery),!function(e){function t(t,n){var r=e.proxy(this.process,this),i=e(t).is("body")?e(window):e(t),s;this.options=e.extend({},e.fn.scrollspy.defaults,n),this.$scrollElement=i.on("scroll.scroll-spy.data-api",r),this.selector=(this.options.target||(s=e(t).attr("href"))&&s.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=e("body"),this.refresh(),this.process()}t.prototype={constructor:t,refresh:function(){var t=this,n;this.offsets=e([]),this.targets=e([]),n=this.$body.find(this.selector).map(function(){var t=e(this),n=t.data("target")||t.attr("href"),r=/^#\w/.test(n)&&e(n);return r&&r.length&&[[r.position().top,n]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},process:function(){var e=this.$scrollElement.scrollTop()+this.options.offset,t=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,n=t-this.$scrollElement.height(),r=this.offsets,i=this.targets,s=this.activeTarget,o;if(e>=n)return s!=(o=i.last()[0])&&this.activate(o);for(o=r.length;o--;)s!=i[o]&&e>=r[o]&&(!r[o+1]||e<=r[o+1])&&this.activate(i[o])},activate:function(t){var n,r;this.activeTarget=t,e(this.selector).parent(".active").removeClass("active"),r=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=e(r).parent("li").addClass("active"),n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate")}},e.fn.scrollspy=function(n){return this.each(function(){var r=e(this),i=r.data("scrollspy"),s=typeof n=="object"&&n;i||r.data("scrollspy",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.defaults={offset:10},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(window.jQuery),!function(e){var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.attr("data-target"),i,s,o;r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));if(t.parent("li").hasClass("active"))return;i=n.find(".active a").last()[0],o=e.Event("show",{relatedTarget:i}),t.trigger(o);if(o.isDefaultPrevented())return;s=e(r),this.activate(t.parent("li"),n),this.activate(s,s.parent(),function(){t.trigger({type:"shown",relatedTarget:i})})},activate:function(t,n,r){function i(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),o?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),r&&r()}var s=n.find("> .active"),o=r&&e.support.transition&&s.hasClass("fade");o?s.one(e.support.transition.end,i):i(),s.removeClass("in")}},e.fn.tab=function(n){return this.each(function(){var r=e(this),i=r.data("tab");i||r.data("tab",i=new t(this)),typeof n=="string"&&i[n]()})},e.fn.tab.Constructor=t,e(function(){e("body").on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})})}(window.jQuery),!function(e){var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,n,r){var i,s;this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.enabled=!0,this.options.trigger=="click"?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):this.options.trigger!="manual"&&(i=this.options.trigger=="hover"?"mouseenter":"focus",s=this.options.trigger=="hover"?"mouseleave":"blur",this.$element.on(i+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.leave,this))),this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,t,this.$element.data()),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);if(!n.options.delay||!n.options.delay.show)return n.show();clearTimeout(this.timeout),n.hoverState="in",this.timeout=setTimeout(function(){n.hoverState=="in"&&n.show()},n.options.delay.show)},leave:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!n.options.delay||!n.options.delay.hide)return n.hide();n.hoverState="out",this.timeout=setTimeout(function(){n.hoverState=="out"&&n.hide()},n.options.delay.hide)},show:function(){var e,t,n,r,i,s,o;if(this.hasContent()&&this.enabled){e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),s=typeof this.options.placement=="function"?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,t=/in/.test(s),e.remove().css({top:0,left:0,display:"block"}).appendTo(t?this.$element:document.body),n=this.getPosition(t),r=e[0].offsetWidth,i=e[0].offsetHeight;switch(t?s.split(" ")[1]:s){case"bottom":o={top:n.top+n.height,left:n.left+n.width/2-r/2};break;case"top":o={top:n.top-i,left:n.left+n.width/2-r/2};break;case"left":o={top:n.top+n.height/2-i/2,left:n.left-r};break;case"right":o={top:n.top+n.height/2-i/2,left:n.left+n.width}}e.css(o).addClass(s).addClass("in")}},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function t(){var t=setTimeout(function(){r.off(e.support.transition.end).remove()},500);r.one(e.support.transition.end,function(){clearTimeout(t),r.remove()})}var n=this,r=this.tip();return r.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?t():r.remove(),this},fixTitle:function(){var e=this.$element;(e.attr("title")||typeof e.attr("data-original-title")!="string")&&e.attr("data-original-title",e.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(t){return e.extend({},t?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title),e},tip:function(){return this.$tip=this.$tip||e(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}},e.fn.tooltip=function(n){return this.each(function(){var r=e(this),i=r.data("tooltip"),s=typeof n=="object"&&n;i||r.data("tooltip",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0,html:!0}}(window.jQuery),!function(e){var t=function(e,t){this.init("popover",e,t)};t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content > *")[this.options.html?"html":"text"](n),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-content")||(typeof n.content=="function"?n.content.call(t[0]):n.content),e},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}}),e.fn.popover=function(n){return this.each(function(){var r=e(this),i=r.data("popover"),s=typeof n=="object"&&n;i||r.data("popover",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.popover.Constructor=t,e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery),!function(e){var t=function(t,n){this.options=e.extend({},e.fn.affix.defaults,n),this.$window=e(window).on("scroll.affix.data-api",e.proxy(this.checkPosition,this)),this.$element=e(t),this.checkPosition()};t.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var t=e(document).height(),n=this.$window.scrollTop(),r=this.$element.offset(),i=this.options.offset,s=i.bottom,o=i.top,u="affix affix-top affix-bottom",f;typeof i!="object"&&(s=o=i),typeof o=="function"&&(o=i.top()),typeof s=="function"&&(s=i.bottom()),f=this.unpin!=null&&n+this.unpin<=r.top?!1:s!=null&&r.top+this.$element.height()>=t-s?"bottom":o!=null&&n<=o?"top":!1;if(this.affixed===f)return;this.affixed=f,this.unpin=f=="bottom"?r.top-n:null,this.$element.removeClass(u).addClass("affix"+(f?"-"+f:""))},e.fn.affix=function(n){return this.each(function(){var r=e(this),i=r.data("affix"),s=typeof n=="object"&&n;i||r.data("affix",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.affix.Constructor=t,e.fn.affix.defaults={offset:0},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(window.jQuery),!function(e){var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.prototype.close=function(t){function n(){s.trigger("closed").remove()}var r=e(this),i=r.attr("data-target"),s;i||(i=r.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),s=e(i),t&&t.preventDefault(),s.length||(s=r.hasClass("alert")?r:r.parent()),s.trigger(t=e.Event("close"));if(t.isDefaultPrevented())return;s.removeClass("in"),e.support.transition&&s.hasClass("fade")?s.on(e.support.transition.end,n):n()},e.fn.alert=function(t){return this.each(function(){var r=e(this),i=r.data("alert");i||r.data("alert",i=new n(this)),typeof t=="string"&&i[t].call(r)})},e.fn.alert.Constructor=n,e(function(){e("body").on("click.alert.data-api",t,n.prototype.close)})}(window.jQuery),!function(e){var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,n)};t.prototype.setState=function(e){var t="disabled",n=this.$element,r=n.data(),i=n.is("input")?"val":"html";e+="Text",r.resetText||n.data("resetText",n[i]()),n[i](r[e]||this.options[e]),setTimeout(function(){e=="loadingText"?n.addClass(t).attr(t,t):n.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.parent('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")},e.fn.button=function(n){return this.each(function(){var r=e(this),i=r.data("button"),s=typeof n=="object"&&n;i||r.data("button",i=new t(this,s)),n=="toggle"?i.toggle():n&&i.setState(n)})},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e(function(){e("body").on("click.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")})})}(window.jQuery),!function(e){var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.collapse.defaults,n),this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){var e=this.$element.hasClass("width");return e?"width":"height"},show:function(){var t,n,r,i;if(this.transitioning)return;t=this.dimension(),n=e.camelCase(["scroll",t].join("-")),r=this.$parent&&this.$parent.find("> .accordion-group > .in");if(r&&r.length){i=r.data("collapse");if(i&&i.transitioning)return;r.collapse("hide"),i||r.data("collapse",null)}this.$element[t](0),this.transition("addClass",e.Event("show"),"shown"),e.support.transition&&this.$element[t](this.$element[0][n])},hide:function(){var t;if(this.transitioning)return;t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",e.Event("hide"),"hidden"),this.$element[t](0)},reset:function(e){var t=this.dimension();return this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element[e!==null?"addClass":"removeClass"]("collapse"),this},transition:function(t,n,r){var i=this,s=function(){n.type=="show"&&i.reset(),i.transitioning=0,i.$element.trigger(r)};this.$element.trigger(n);if(n.isDefaultPrevented())return;this.transitioning=1,this.$element[t]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,s):s()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}},e.fn.collapse=function(n){return this.each(function(){var r=e(this),i=r.data("collapse"),s=typeof n=="object"&&n;i||r.data("collapse",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.collapse.defaults={toggle:!0},e.fn.collapse.Constructor=t,e(function(){e("body").on("click.collapse.data-api","[data-toggle=collapse]",function(t){var n=e(this),r,i=n.attr("data-target")||t.preventDefault()||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""),s=e(i).data("collapse")?"toggle":n.data();n[e(i).hasClass("in")?"addClass":"removeClass"]("collapsed"),e(i).collapse(s)})})}(window.jQuery),!function(e){var t=function(t,n){this.$element=e(t),this.options=n,this.options.slide&&this.slide(this.options.slide),this.options.pause=="hover"&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.prototype={cycle:function(t){return t||(this.paused=!1),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},to:function(t){var n=this.$element.find(".item.active"),r=n.parent().children(),i=r.index(n),s=this;if(t>r.length-1||t<0)return;return this.sliding?this.$element.one("slid",function(){s.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",e(r[t]))},pause:function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(t,n){var r=this.$element.find(".item.active"),i=n||r[t](),s=this.interval,o=t=="next"?"left":"right",u=t=="next"?"first":"last",f=this,l=e.Event("slide",{relatedTarget:i[0]});this.sliding=!0,s&&this.pause(),i=i.length?i:this.$element.find(".item")[u]();if(i.hasClass("active"))return;if(e.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(l);if(l.isDefaultPrevented())return;i.addClass(t),i[0].offsetWidth,r.addClass(o),i.addClass(o),this.$element.one(e.support.transition.end,function(){i.removeClass([t,o].join(" ")).addClass("active"),r.removeClass(["active",o].join(" ")),f.sliding=!1,setTimeout(function(){f.$element.trigger("slid")},0)})}else{this.$element.trigger(l);if(l.isDefaultPrevented())return;r.removeClass("active"),i.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return s&&this.cycle(),this}},e.fn.carousel=function(n){return this.each(function(){var r=e(this),i=r.data("carousel"),s=e.extend({},e.fn.carousel.defaults,typeof n=="object"&&n),o=typeof n=="string"?n:s.slide;i||r.data("carousel",i=new t(this,s)),typeof n=="number"?i.to(n):o?i[o]():s.interval&&i.cycle()})},e.fn.carousel.defaults={interval:5e3,pause:"hover"},e.fn.carousel.Constructor=t,e(function(){e("body").on("click.carousel.data-api","[data-slide]",function(t){var n=e(this),r,i=e(n.attr("data-target")||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"")),s=!i.data("modal")&&e.extend({},i.data(),n.data());i.carousel(s),t.preventDefault()})})}(window.jQuery),!function(e){var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.$menu=e(this.options.menu).appendTo("body"),this.source=this.options.source,this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});return this.$menu.css({top:t.top+t.height,left:t.left}),this.$menu.show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(t){var n;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(n=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source,n?this.process(n):this)},process:function(t){var n=this;return t=e.grep(t,function(e){return n.matcher(e)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){var t=[],n=[],r=[],i;while(i=e.shift())i.toLowerCase().indexOf(this.query.toLowerCase())?~i.indexOf(this.query)?n.push(i):r.push(i):t.push(i);return t.concat(n,r)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var n=this;return t=e(t).map(function(t,r){return t=e(n.options.item).attr("data-value",r),t.find("a").html(n.highlighter(r)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(t){var n=this.$menu.find(".active").removeClass("active"),r=n.next();r.length||(r=e(this.$menu.find("li")[0])),r.addClass("active")},prev:function(e){var t=this.$menu.find(".active").removeClass("active"),n=t.prev();n.length||(n=this.$menu.find("li").last()),n.addClass("active")},listen:function(){this.$element.on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),(e.browser.webkit||e.browser.msie)&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this))},move:function(e){if(!this.shown)return;switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()},keydown:function(t){this.suppressKeyPressRepeat=!~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){if(this.suppressKeyPressRepeat)return;this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},blur:function(e){var t=this;setTimeout(function(){t.hide()},150)},click:function(e){e.stopPropagation(),e.preventDefault(),this.select()},mouseenter:function(t){this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")}},e.fn.typeahead=function(n){return this.each(function(){var r=e(this),i=r.data("typeahead"),s=typeof n=="object"&&n;i||r.data("typeahead",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},e.fn.typeahead.Constructor=t,e(function(){e("body").on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var n=e(this);if(n.data("typeahead"))return;t.preventDefault(),n.typeahead(n.data())})})}(window.jQuery),define("bootstrap",["jquery"],function(){}),window.bootbox=window.bootbox||function a(e,t){function n(e){var t=y[m.locale];return t?t[e]:y.en[e]}function r(t,n,r){t.preventDefault();var i=e.isFunction(r)&&r(t)===!1;i||n.modal("hide")}function i(e){var t,n=0;for(t in e)n++;return n}function s(t,n){var r=0;e.each(t,function(e,t){n(e,t,r++)})}function o(t){var n,r;if("object"!=typeof t)throw new Error("Please supply an object of options");if(!t.message)throw new Error("Please specify a message");return t=e.extend({},m,t),t.buttons||(t.buttons={}),t.backdrop=t.backdrop?"static":!1,n=t.buttons,r=i(n),s(n,function(t,i,s){if(e.isFunction(i)&&(i=n[t]={callback:i}),"object"!==e.type(i))throw new Error("button with key "+t+" must be an object");i.label||(i.label=t),i.className||(i.className=2>=r&&s===r-1?"btn-primary":"btn-default")}),t}function u(e,t){var n=e.length,r={};if(1>n||n>2)throw new Error("Invalid argument length");return 2===n||"string"==typeof e[0]?(r[t[0]]=e[0],r[t[1]]=e[1]):r=e[0],r}function f(t,n,r){return e.extend(!0,{},t,u(n,r))}function l(e,t,n){return p(f(h.apply(null,e),t,n),e)}function c(){for(var e={},t=0,r=arguments.length;r>t;t++){var i=arguments[t],s=i.toLowerCase(),o=i.toUpperCase();e[s]={label:n(o)}}return e}function h(){return{buttons:c.apply(null,arguments)}}function p(e,n){var r={};return s(n,function(e,t){r[t]=!0}),s(e.buttons,function(e){if(r[e]===t)throw new Error("button key "+e+" is not allowed (options are "+n.join("\n")+")")}),e}var d={dialog:"<div class='bootbox modal' tabindex='-1' role='dialog'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'></div></div></div></div></div>",header:"<div class='modal-header'><h4 class='modal-title'></h4></div>",footer:"<div class='modal-footer'></div>",closeButton:"<button type='button' class='bootbox-close-button close'>&times;</button>",form:"<form class='bootbox-form'></form>",inputs:{text:"<input class='bootbox-input form-control' autocomplete=off type=text />"}},v=e("body"),m={locale:"en",backdrop:!0,animate:!0,className:null,closeButton:!0,show:!0},g={};g.alert=function(){var t;if(t=l(["ok"],arguments,["message","callback"]),t.callback&&!e.isFunction(t.callback))throw new Error("alert requires callback property to be a function when provided");return t.buttons.ok.callback=t.onEscape=function(){return e.isFunction(t.callback)?t.callback():!0},g.dialog(t)},g.confirm=function(){var t;if(t=l(["cancel","confirm"],arguments,["message","callback"]),t.buttons.cancel.callback=t.onEscape=function(){return t.callback(!1)},t.buttons.confirm.callback=function(){return t.callback(!0)},!e.isFunction(t.callback))throw new Error("confirm requires a callback");return g.dialog(t)},g.prompt=function(){var n,r,i,s,o,u;if(s=e(d.form),r={buttons:c("cancel","confirm"),value:""},n=p(f(r,arguments,["title","callback"]),["cancel","confirm"]),u=n.show===t?!0:n.show,n.message=s,n.buttons.cancel.callback=n.onEscape=function(){return n.callback(null)},n.buttons.confirm.callback=function(){return n.callback(o.val())},n.show=!1,!n.title)throw new Error("prompt requires a title");if(!e.isFunction(n.callback))throw new Error("prompt requires a callback");return o=e(d.inputs.text),o.val(n.value),s.append(o),s.on("submit",function(e){e.preventDefault(),i.find(".btn-primary").click()}),i=g.dialog(n),i.off("shown.bs.modal"),i.on("shown.bs.modal",function(){o.focus()}),u===!0&&i.modal("show"),i},g.dialog=function(t){t=o(t);var n=e(d.dialog),i=n.find(".modal-body"),u=t.buttons,a="",f={onEscape:t.onEscape};if(s(u,function(e,t){a+="<button data-bb-handler='"+e+"' type='button' class='btn "+t.className+"'>"+t.label+"</button>",f[e]=t.callback}),i.find(".bootbox-body").html(t.message),t.animate===!0&&n.addClass("fade"),t.className&&n.addClass(t.className),t.title&&i.before(d.header),t.closeButton){var l=e(d.closeButton);t.title?n.find(".modal-header").prepend(l):l.css("margin-top","-10px").prependTo(i)}return t.title&&n.find(".modal-title").html(t.title),a.length&&(i.after(d.footer),n.find(".modal-footer").html(a)),n.on("hidden.bs.modal",function(e){e.target===this&&n.remove()}),n.on("shown.bs.modal",function(){n.find(".btn-primary:first").focus()}),n.on("escape.close.bb",function(e){f.onEscape&&r(e,n,f.onEscape)}),n.on("click",".modal-footer button",function(t){var i=e(this).data("bb-handler");r(t,n,f[i])}),n.on("click",".bootbox-close-button",function(e){r(e,n,f.onEscape)}),n.on("keyup",function(e){27===e.which&&n.trigger("escape.close.bb")}),v.append(n),n.modal({backdrop:t.backdrop,keyboard:!1,show:!1}),t.show&&n.modal("show"),n},g.setDefaults=function(t){e.extend(m,t)},g.hideAll=function(){e(".bootbox").modal("hide")};var y={br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierdź"},ru:{OK:"OK",CANCEL:"Отмена",CONFIRM:"Применить"},zh_CN:{OK:"OK",CANCEL:"取消",CONFIRM:"确认"},zh_TW:{OK:"OK",CANCEL:"取消",CONFIRM:"確認"}};return g.init=function(t){window.bootbox=a(t||e)},g}(window.jQuery),define("bootboxjs",["bootstrap"],function(){}),define("text!rightpanel/share.js",[],function(){return'<form class="form-horizontal">\n  <h5 style="color:#f80; margin:0 0 20px;">分享给站外好友：</h5>\n  <div class="control-group">\n    <label for="inc_http" class="control-label">地址：</label>\n    <div class="controls">\n      <input type="text" value="<%-url%>" id="inc_http" style="width:450px; line-height:18px;">\n    </div>\n  </div>\n  <h5 style="color:#f80; margin:0 0 20px;">把内容贴到Blog或BBS：</h5>\n  <div class="control-group">\n    <label class="control-label" for="inputWidth">自定义尺寸：</label>\n    <div class="controls">\n      <div style="width:180px; float:left;">\n        <label class="control-label" for="inputWidth" style="width:60px;">宽度</label>\n        <input type="text" id="inputWidth" class="input-small" placeholder="自定义高度" value="650" style="width:40px; margin:0 10px;">\n        px </div>\n      <div style="width:180px; float:left;">\n        <label class="control-label" for="inputHeight" style="width:60px;">高度</label>\n        <input type="text" id="inputHeight" class="input-small" placeholder="自定义宽度" value="540" style="width:40px; margin:0 10px;">\n        px </div>\n    </div>\n  </div>\n  <div class="control-group">\n    <label class="control-label">是否显示播放条：</label>\n    <div class="controls">\n      <label class="radio inline" style="margin-left:30px;">\n        <input type="radio" name="controlbar" id="controlbar1" value="1" checked="">\n        是 </label>\n      <label class="radio inline" style="margin-left:30px;">\n        <input type="radio" name="controlbar" id="controlbar0" value="0" >\n        否 </label>\n    </div>\n  </div>\n  <div class="control-group">\n    <label for="inc_http" class="control-label">复制iframe代码：</label>\n    <div class="controls">\n      <input type="text" id="embedIframe" value="<%-iframecode%>" id="inc_http" style="width:450px; line-height:18px;">\n    </div>\n  </div>  \n  <div class="control-group">\n    <label class="control-label" for="embedHtml">复制Html代码：</label>\n    <div class="controls">\n      <textarea rows="4" style="width: 450px; margin: 0px; height: 160px; resize: none;" id="embedHtml"><%-code%></textarea>\n    </div>\n  </div>\n</form>'}),require(["bootboxjs","_g/ui","text!rightpanel/share.js"],function(){window.share=function(e,t){function a(e){var n=parseInt(e.find("#inputWidth").val())||650,o=parseInt(e.find("#inputHeight").val())||540,u=parseInt(e.find('input[name="controlbar"]:checked').val());e.find("textarea#embedHtml").val(_.template(i,{origin:r,url:t,w:n,h:o,controlbar:u})),e.find("input#embedIframe").val(_.template(s,{origin:r,url:t,w:n,h:o,controlbar:u}))}var n="epub360player"+_g.uuid(),r="http://"+location.host;t=r+t;var i="<div id="+n+">\n"+'   <script type="text/javascript" src="<%=origin%>/staticfs/common/js/play/player.js?v='+n+'"></script>\n'+"   <script>\n"+'       epub360PlayerInit("'+n+'",<%=w%>,<%=h%>,"<%=url%>?autoplay=false<% if (controlbar==0){ %>&controlbar=false<% } %>","<%=origin%>");\n'+"   </script>"+"</div>",s='<iframe style="width: <%=w%>px; height: <%=h%>px; border: none;" src="<%=url%>?autoplay=false<% if (controlbar==0){ %>&controlbar=false<% } %>"></iframe>',o=require("text!rightpanel/share.js"),u=bootbox.dialog({title:"<h3>分享: "+e+"<h3>",message:_.template(o,{url:t,code:_.template(i,{origin:r,url:t,w:650,h:540,controlbar:1}),iframecode:_.template(s,{origin:r,url:t,w:650,h:540,controlbar:1})})});$(u).css({width:"700px",height:"490px"}).find(".modal-body").css("max-height","600px"),_g.ui.center({Item:u}),setTimeout('$(".bootbox").find(".modal-dialog").css("margin-top", $(".bootbox").offset().top-$(".bootbox").find(".modal-dialog").offset().top+"px");',200),$(u).find("input[type='text'], textarea").mouseenter(function(){$(this).select()}),$(u).find("#inputWidth, #inputHeight").keyup(function(){a($(u))}),$(u).find("input[name='controlbar']").click(function(){a($(u))})}}),define("share/main",function(){}),function(e){e.fn.addBack=e.fn.addBack||e.fn.andSelf,e.fn.extend({actual:function(t,n){if(!this[t])throw'$.actual => The jQuery method "'+t+'" you called does not exist';var r={absolute:!1,clone:!1,includeMargin:!1},i=e.extend(r,n),s=this.eq(0),o,u;if(i.clone===!0)o=function(){var e="position: absolute !important; top: -1000 !important; ";s=s.clone().attr("style",e).appendTo("body")},u=function(){s.remove()};else{var a=[],f="",l;o=function(){l=s.parents().addBack().filter(":hidden"),f+="visibility: hidden !important; display: block !important; ",i.absolute===!0&&(f+="position: absolute !important; "),l.each(function(){var t=e(this),n=t.attr("style");a.push(n),t.attr("style",n?n+";"+f:f)})},u=function(){l.each(function(t){var n=e(this),r=a[t];r===undefined?n.removeAttr("style"):n.attr("style",r)})}}o();var c=/(outer)/.test(t)?s[t](i.includeMargin):s[t]();return u(),c}})}(jQuery),define("jquery.actual",["jquery"],function(){}),define("text!interaction_view/template/controlbar.js",[],function(){return'<div class=\'presentation-area\'>\n    <div class="controlbar">\n            <div class="logo"><% if (typeof cbt_data=="undefined"){ %><% if(typeof has_logo != \'undefined\' &&  has_logo){ %><a href="http://www.epub360.com" target="_blank"><img alt="logo" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFIAAAAaCAYAAAAkJwuaAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABhFJREFUeNrsmVlwlEUQx7+sSTwikSAqiAciJCJQQVFBA4WAZwyXoiioUUAi+CBe4IMFXg8ioIKlgoIHhhKltDzAg0IpopJQbjQYTVKh1NKICUSUwygJC7Gb+k3ZTu2GXcyDD9tV/5qd6S/zfdPT3fPvSUo4HA48WSqYLNggKBasFPwRJCWqDBgw4GAbiqKrFuwUDBW8IKgXPJA0WdsSzZALBFmCHMFCwbGCRwRvJ82VmCHPFpwrqBXMEJwj+FkwWrA8abL4DTlfUC74UjBOUCE4X/Cn4CYMmpQ4DPkEB4164irBLYIGwXj0zyXN1rYhjxF0F6wTXCwoYPwlQaZgtaBG0FWQmzRddEPqYfKT4AfBbsGDgjWCSeifpH2FdnAC79D08Ficz6Ycpu5/YcgboDfHM9ZBMEcwAW90xlD5irZ3Au/QlDBLMK+NZ9T7PxE0CpbwDfbwUz67XfAWB6GTIwT3C+pMTo8lRwumC+YKrouiV6d5XHAz81qZiO5GQSfBCJyjqLy8PPPgLgshV8/LJ3R1wTMFhXhkAWG8X/ANXtFPsAfvjUfWCi5lUyZF0Q8RlHhjYQ64boIfoyysj6DKzG2lMAq70MVvEvQ0Yx8LLuH3OozjROceSCGyzPtu5dgdTf8XQV7IDH7ABB/Rz8djN2NElVbB1wkY0Ybk5hj622kX4W27BOcxNhIjKhUbJHiT8f6CdIzYRE5/CN3MKO+4GyNWkcZ2YLjObNYIouFhwRaioD/rVyO2oCvDXvvplwpOVg8PMahyFO0WysSnbSVEaH4mWCy4wOiW8IG30R+G4T80O+hCNNfzCpXTad8gdTjvzGahKp/jUcX0tVjowe8KWMbr9HVhGd47utLqt88WrKDfzxycK0lp8807XArbgO4++uvpz6I/MBUvU/nNhFXYW6jt52luwEM20fZm4e6j+2C4gN1UmQoCPGuc8fIAZhDAV1WOE+zldyptlnnWD3eX4zPw1iaja/Lmce/qTuoIjEO5CDrRbMhew2zsmly/S6p5WT5/0IG4X8P4nbQN5J5rBGcyrgfSNvS7PENsbYOr6hz3svtFLLzCeK5bUITfEUPFqmAYvb35Q2aRB2KkkTTaF0lR64ggq0unbRbs83Rp3oa4/l92kdcKXhM8j5s7ca6/DFeeY0IoMC87VI5cgHe/S3+GSexDCNsywm07edjl7ysJ3dlEQT0ee7jyKZSuzoT9fxLrkTvwOnXnL6Lsogv9PbS9PA88lDTgSeqFo7w8tsh79juSfycXOoayTGZDtrYTBWxu78pGeVFfwRkez3JhcqR3KEUSJMoZXl45ALdTOQvjTsNAF3Lr1IC+hG/S8D9NMKYdDZne3oZsMZyr0FxO+DvW2k5RECEtaJ69WvA+p2op+h7m3dXU/XPpD4pyMiciY2EbPYmSdgntNG/sCsHLGCwU/HM7HjEpIDCnZqpncP+EjKUPMed0mEA1d54pJqWke1HQbObM8MZazHeFYhwy7tlRXMZs5IrQ6ixTSEnEI5sN3bA0Yov3Ee5Dx3intAt9dzCc6n1YxKMup3jz1XsG7mzmjZiy1dKWfeRQ+3yLSTXNMQ48f0N2Gl2ml4Ja4zhI/+WRpVQG00jiY9GVmhpV5R68J9vkLVd/699MEZxENRJAL5xe6+1b2aQCQ6QDDjbllAvxkKHG81dT446EslyGrtZ4Ul9O/Bz6NRyAWjFdZAh4EUwhm3tVlUpzWE7AqKNNERC3IbXW7saEWWZ8N7VmDTXpcO/vyvDMbRBXrWROMPq9UJow45UY2ebjwRixI/PlGP1TgrtM5TTVoy5XwR50Y58xul/hqCV4up72dwie5VJkmHl2OWdBwEZM9O4HLocSasX1LRs2HmpYDd+9HspYm8rpl0vO6ALNWWoYv3P990CdKf8COF8uNalyy9+5bnOpoRH9ZOpaDadX2SQXXn3x2F6Q5LVm/iKKgzw2ZpXROQMVMs9ik3IexSMr6Q/nHTncJ6w38+itzjvU+Bv5HbDWYv5j4A69FV5f9RUpUf4d64vbySmQ8qTYS4g2/h3rS0dTlyYlDh4ZS74nXBqT5ootfwswAIGagOhx/Kc1AAAAAElFTkSuQmCC"></a><% } %><% } %></div>\n            <div class="progress"><span></span></div>\n            <% if(controlbar_settings.arrow){%>\n              <% if(play_mode==0){ %>\n                <div class="btn-group action-control" style="margin-left: -40px;">\n                   <button class="btn navigate-left" href="#" rel="tooltip" data-original-title="LEFT"><i class="icon-chevron-left icon-2x"></i></button>\n                   <button class="btn navigate-right" href="#" rel="tooltip" data-original-title="RIGHT"><i class="icon-chevron-right icon-2x"></i></button>                  \n              <% } else {%>\n                <div class="btn-group action-control" style="margin-left: -90px;">\n                    <button class="btn navigate-left" href="#" rel="tooltip" data-original-title="LEFT"><i class="icon-chevron-left icon-2x"></i></button>\n                    <button class="btn navigate-right" href="#" rel="tooltip" data-original-title="RIGHT"><i class="icon-chevron-right icon-2x"></i></button>\n                    <button class="btn navigate-up" href="#" rel="tooltip" data-original-title="UP"><i class="icon-chevron-up icon-2x"></i></button>\n                    <button class="btn navigate-down" href="#" rel="tooltip" data-original-title="DOWN"><i class="icon-chevron-down icon-2x"></i></button>\n               <% } %>\n            </div>\n            <% } %>\n\n            <div class="btn-group more-actions">\n              <button class="btn" data-toggle="dropdown"><i class="icon-ellipsis-horizontal icon-2x"></i></button>\n              <div class="btn-group dropdown-menu">\n                <% if(controlbar_settings.screen_mode){%>\n                <button class="btn actualsize" href="#" rel="tooltip" data-original-title="原始尺寸"><i class="im-actualsize im-more"></i></button>\n                <% } %>\n                <button class="btn adaptive active" href="#" rel="tooltip" data-original-title="自适应窗口"><i class="im-adaptive im-more"></i></button>\n                <% if(controlbar_settings.fullscreen){%>\n                 <button class="btn fullscreen" href="#" rel="tooltip" data-original-title="全屏"><i class="im-fullscreen im-more"></i></button>\n                <% } %>\n                <% if(controlbar_settings.overview){ %>\n                <button class="btn overview" href="#" rel="tooltip" data-original-title="全局预览"><i class="im-overview im-more"></i></button>\n                <% } %>\n              </div>\n              <% if(controlbar_settings.share){%>\n              <button class="btn action-share" data-target="#share" rel="tooltip" data-original-title="分享"><i class="icon-share-alt icon-large"></i></button>\n              <% } %>\n            </div>\n    </div>\n</div>'}),define("interaction_view/ui/screenset",["text!interaction_view/template/controlbar.js","_g/device"],function(){var e=require("text!interaction_view/template/controlbar.js"),t={init:function(){window.screenLock=!1,window.screenScale=null,window.bar_height=0,window.useTranform=!1,window.get_window_size=function(){var e,t;if(!interaction_view.forpreview){var n=window,r=document,i=r.documentElement,s=r.getElementsByTagName("body")[0];e=n.innerWidth||i.clientWidth||s.clientWidth,t=n.innerHeight||i.clientHeight||s.clientHeight}else e=parseInt($(".interaction-preview").css("width"),10),t=parseInt($(".interaction-preview").css("height"),10);return{x:e,y:t}},window.recover_screen=function(){window.useTransform?(document.querySelectorAll(".reveal")[0].style.transform="scale(1)",document.querySelectorAll(".reveal")[0].style.WebkitTransform="scale(1)",document.querySelectorAll(".reveal")[0].style.MozTransform="scale(1)",document.querySelectorAll(".reveal")[0].style["-o-transform"]="scale(1)"):(document.querySelectorAll(".reveal")[0].style.zoom=1,document.querySelectorAll(".reveal")[0].style.MozTransform="scale(1)"),$.zoom=1},window.adjust_screen=function(){if(window.screenLock){interaction_view.screenset.patchForFixedSize();return}var e=1,t=get_window_size();if(interaction_view.ismobile&&interaction_view.currentScreenSize&&interaction_view.currentScreenSize.x==t.x){interaction_view.screenset.patchForIframe();return}var n=t.x,r=t.y,i=interaction_view?interaction_view.size.x:parseInt($(".slides")[0].style.width,10),s=interaction_view?interaction_view.size.y:parseInt($(".slides")[0].style.height,10);$("body").height($("html").height()-0),i>=s?interaction_view.screen_mode==2?e=window.screenScale?window.screenScale:n/r>=i/s?n/i:r/s:e=window.screenScale?window.screenScale:n/r>=i/s?r/s:n/i:interaction_view.screen_mode==2?e=window.screenScale?window.screenScale:r/n>=s/i?r/s:n/i:e=window.screenScale?window.screenScale:r/n>=s/i?n/i:r/s,window.useTranform?(document.querySelectorAll(".reveal")[0].style.transform="scale("+e+")",document.querySelectorAll(".reveal")[0].style.WebkitTransform="scale("+e+")",document.querySelectorAll(".reveal")[0].style.MozTransform="scale("+e+")",document.querySelectorAll(".reveal")[0].style["-o-transform"]="scale("+e+")"):(document.querySelectorAll(".reveal")[0].style.zoom=e,document.querySelectorAll(".reveal")[0].style.MozTransform="scale("+e+")"),$.zoom=e,interaction_view.currentScreenSize=t,_g.device.msie()&&interaction_view.screenset.adjustPatchforIE(e),interaction_view.screenset.patchForIframe(),typeof Reveal!="undefined"&&Reveal.adapt?(Reveal.setAdaptScreen(),Reveal._initSlideStyle(),interaction_view.adapt.change()):(Reveal.setAdaptScreen(),Reveal._initSlideStyle()),interaction_view.touchview&&interaction_view.screenset.adjustRevealPosition(e)},interaction_view.forpreview||(window.onresize=function(e){console.log("window resize"),adjust_screen()},window.onload=adjust_screen);if(interaction_view.ismobile){var e="onorientationchange"in window,t=e?"orientationchange":"resize";window.addEventListener?window.addEventListener(t,interaction_view.screenset.patchForMobileOrientation,!1):window.attachEvent?window.attachEvent(t,interaction_view.screenset.patchForMobileOrientation):window[t]=interaction_view.screenset.patchForMobileOrientation,interaction_view.screenset.patchForMobileOrientation()}window.screenSizeLock=function(){recover_screen(),window.screenLock=!0,interaction_view.screenset.patchForFixedSize(),interaction_view.screenset.patchForScreenMode2()},window.screenSizeRelease=function(){window.screenLock=!1,adjust_screen()}},patchForScreenMode2:function(){interaction_view.screen_mode==2&&(Reveal.setAdaptScreen(),Reveal._initSlideStyle())},patchForFixedSize:function(){if(typeof Reveal!="undefined"&&Reveal.adapt)Reveal.setAdaptScreen(),Reveal._initSlideStyle(),interaction_view.adapt.change();else{var e=typeof Reveal!="undefined"?Reveal.slideWidth:interaction_view.size.x,t=typeof Reveal!="undefined"?Reveal.slideHeight:interaction_view.size.y,n=get_window_size();if(window.useTransform){var r=(n.y-t)/2;$(".reveal").css({"margin-top":r});var i=(n.x-e)/2;$(".reveal").css({"margin-left":i})}else{var r=(n.y-t)/2;$(".reveal").css({"margin-top":r});var i=(n.x-e)/2;$(".reveal").css({"margin-left":i})}}},bindControlbarAutoHideEvent:function(){interaction_view.controlbarStatus=1,interaction_view.ismobile||$("body").on("mouseover",function(){$(".loading").length>0&&$(".loading").show(),interaction_view.controlbarStatus==0&&interaction_view.screenset.controlbarel&&interaction_view.screenset.controlbarel.show(500),interaction_view.controlbarStatus=1,t.startControlbarHide()})},changeProgressBar:function(){var e=Reveal.getIndices();interaction_view.screenset.controlbarel&&(interaction_view.screenset.controlbarel.find(".progress").children("span")[0].style.width=(e.h+1)/interaction_view.ipagelist.models.length*100+"%")},startControlbarHide:function(){typeof interaction_view.controlbarTimeOut=="number"&&(window.clearTimeout(interaction_view.controlbarTimeOut),delete interaction_view.controlbarTimeOut),interaction_view.controlbarTimeOut=window.setTimeout(function(){interaction_view.screenset.controlbarel&&interaction_view.screenset.controlbarel.hide(),$(".loading").length>0&&$(".loading").hide(500),interaction_view.controlbarStatus=0},3e3)},render:function(){var e=interaction_view.doc.toJSON();interaction_view.screenset.values=t.values=t.queryparse(e),interaction_view.ismobile||interaction_view.forpreview||t.rendercontrolbar(),t.initScreen(),t.bindControlbarAutoHideEvent(),interaction_view.ismobile&&interaction_view.screenset.startControlbarHide()},initScreen:function(){t.values.bg_opacity?interaction_view.containment.css("background",t.values.bg_color):interaction_view.containment.css("background-color","transparent"),t.values.screen_mode==0&&(window.screenLock=!0,interaction_view.screenset.controlbarel&&(interaction_view.screenset.controlbarel.find("button.actualsize").addClass("active"),interaction_view.screenset.controlbarel.find("button.adaptive").removeClass("active")),recover_screen())},queryparse:function(e){return e.bg_color=_g.getUrlParameterByName("bg_color")?"#"+_g.getUrlParameterByName("bg_color"):e.bg_color,e.bg_opacity=_g.getUrlParameterByName("bg_opacity")?Number(_g.getUrlParameterByName("bg_opacity")):e.bg_opacity,e.screen_mode=_g.getUrlParameterByName("screen_mode")?Number(_g.getUrlParameterByName("screen_mode")):e.screen_mode,e.show_controlbar=_g.getUrlParameterByName("controlbar")?_g.string.string2boolean(_g.getUrlParameterByName("controlbar")):e.show_controlbar,e.controlbar_settings=_g.getUrlParameterByName("controlbar_settings")?JSON.parse(_g.getUrlParameterByName("controlbar_settings")):e.controlbar_settings,e},rendercontrolbar:function(){if(!t.values.show_controlbar)return;interaction_view.containment.append(_.template(e,t.values)),interaction_view.screenset.controlbarel=$("div.presentation-area"),interaction_view.screenset.controlbarel.find("[rel=tooltip]").tooltip()},adjustPatchforIE:function(e){var t=get_window_size();if(t.x/t.y<interaction_view.size.x/interaction_view.size.y){var n=(t.y-interaction_view.size.y*e)/2;$(".reveal").css({"margin-top":n})}else{var r=(t.x-interaction_view.size.x*e)/2;$(".reveal").css({"margin-left":r})}},adjustRevealPosition:function(e){var t=get_window_size(),n=typeof Reveal!="undefined"?Reveal.slideScreenWidth:interaction_view.size.x,r=typeof Reveal!="undefined"?Reveal.slideScreenHeight:interaction_view.size.y;if(t.x/t.y<interaction_view.size.x/interaction_view.size.y){if(window.useTransform)var i=(t.y-r)/2,s=(t.x-n)/2;else var i=(t.y/e-r)/2,s=0;$(".reveal").css({"margin-top":i}),$(".reveal").css({"margin-left":s})}else{if(window.useTransform)var s=(t.x-n)/2,i=(t.y-r)/2;else var s=(t.x/e-n)/2,i=0;$(".reveal").css({"margin-left":s}),$(".reveal").css({"margin-top":i})}},patchForIframe:function(){if(!$.zoom||$.zoom==1)return},patchForWeiXin:function(){navigator.userAgent.toLowerCase().match(/MicroMessenger/i)=="micromessenger"&&$(".reveal").css("transform","scale(1.005,1.005)")},adaptScreen:function(){},patchForMobileOrientation:function(){var e=interaction_view.doc.toJSON().vertical,t=interaction_view.doc.toJSON().horizontal,n=!1;if(!e&&!t)return!1;t?e||_g.device.portrait()&&(n=!0,$("body").children(".book_mask").length||$("body").append('<div class="book_mask"><img src="/staticfs/diazo/img/screendirectionlock.png"><div>请调整到适合屏幕阅读的方向</div></div>')):_g.device.landscape()&&(n=!0,$("body").children(".book_mask").length||$("body").append('<div class="book_mask"><img src="/staticfs/diazo/img/screendirectionlock.png"><div>请调整到适合屏幕阅读的方向</div></div>')),n||$("body").children(".book_mask").remove(),console.log(_g.device.portrait())}};return t}),define("interaction_view/ui/touchinit",[],function(){var e={init:function(){interaction_view.wait=function(){$("#jswait-loading").hide(),$("body").append('<div class="mejs-overlay-button player-control-button" style="cursor:pointer;margin-top: -35px;position: absolute;top: 50%;left: 50%;width: 100px;height: 100px;margin: -50px 0 0 -50px;z-index: 99999;background: url(http://qn.static.epub360.com/common/js/mediaelementjs/bigplay.svg);"></div>'),$(".player-control-button").on("click",function(){interaction_view.start(),$("div#epub360player-cover").remove(),$(".player-control-button").remove()})},interaction_view.start=function(){var e=!1;_g.getUrlParameterByName("disableHistoryStart")&&(e=!0),interaction_view.ismobile&&$("body").addClass("ios"),$(".reveal").addClass("typo");var t=interaction_view.doc.get("play_mode");interaction_view.play_mode=t,interaction_view.screen_mode=interaction_view.doc.get("screen_mode"),interaction_view.events.init(),interaction_view.screenset.init(),interaction_view.screenset.render();var n=interaction_view.doc.toJSON();new _g.touchslide({body:interaction_view.forpreview?".interaction-preview":"window",width:interaction_view.size.x,height:interaction_view.size.y,containment:".reveal",keyboard:!interaction_view.ismobile,controls:!interaction_view.ismobile,mouseWheel:!interaction_view.ismobile&&n.desktop_mousewheel,progress:!interaction_view.ismobile,adapt:n.adapt,history:interaction_view.forpreview?!1:!0,disableHistoryStart:e,show_excontent:n.show_excontent,screen_mode:n.screen_mode,transition:n.switch_mode,overview:interaction_view.forpreview?!1:n.controlbar_settings.overview,show_overview:interaction_view.forpreview?!1:!0,show_controlbar:n.show_controlbar,onReady:function(e,t){interaction_view.screenset.patchForWeiXin(),window.Reveal=e,interaction_view.forpreview||adjust_screen(),interaction_view.playstatus="wait",interaction_view.currentPage=t;var n=require("interaction_view/view/master");interaction_view.imasterlist.length&&interaction_view.imasterlist.at(0).addView("iview",n),presentation.startLoad(),interaction_view.ismobile&&(presentation.isFirstPageLoading=interaction_view.currentPage,presentation.pageLoad(interaction_view.currentPage))},onSlideChangeStart:function(e){presentation.preloadpageAudio(e)},onSlideChange:function(e,t){var n=e;interaction_view.currentPage=e,pre_id=t,interaction_view.ismobile||interaction_view.moveMaster(pre_id,n),interaction_view.stopPlay(pre_id);var r=interaction_view.ipagelist.getPage(interaction_view.currentPage);r.get("loaded")&&interaction_view.imasterlist.at(0).get("loaded")?(interaction_view.playstatus="play",interaction_view.containment.jswait("close"),interaction_view.containment.find("#jswait-loading").remove(),interaction_view.play(n)):(!interaction_view.containment.has("#jswait-loading").length>0&&interaction_view.containment.jswait(),interaction_view.playstatus="wait",r.isStartLoad||(console.log(r.id),interaction_view.ipagelist.getPage(r.id)&&presentation.pageLoad(r.id))),interaction_view.ismobile&&(presentation.preloadFourDirections(),presentation.clearPreloadPages())},onKeyboard:function(){interaction_view.transitionPagePreLoad=null},onWheel:function(){interaction_view.transitionPagePreLoad=null},canDrag:function(e){return $(e.target).closest(".disableDragX").length!=0&&$(e.target).closest(".disableDragY").length!=0?!1:!0},canDragX:function(e){return $(e.target).closest(".disableDragX").length!=0?$(e.target).closest(".disableDragX").hasClass("is_exceededX")?!0:!1:!0},canDragY:function(e){return $(e.target).closest(".disableDragY").length!=0?$(e.target).closest(".disableDragY").hasClass("is_exceededY")?!0:!1:(console.log(e.target),!0)},checkSlidePermission:function(e,t,n,r,i){if(n=="left"){var s=e.getCurrentSlideId();return interaction_view.control.getLeft(s)?!0:!1}if(n=="right"){var s=e.getCurrentSlideId();return interaction_view.control.getRight(s)?!0:!1}return!0},getOverview:function(e){return interaction_view.ipagelist.getPage(e)?interaction_view.ipagelist.getPage(e).toJSON().nav?interaction_view.ipagelist.getPage(e).toJSON().nav.thumbnail:null:null}}),interaction_view.ismobile||(interaction_view.presentate=new $.presentate(!0))},interaction_view.init=function(){interaction_view.forpreview?interaction_view.containment=$(".interaction-preview"):interaction_view.containment=$("body"),presentation.forpreview(),presentation.screencontrol(),window.iPageDirection="landscape",$("div.slides").children("section").remove();var e=require("interaction_view/model/doc");interaction_view.doc=new e({id:"doc"});if(typeof cbt_data!="undefined"){interaction_view.forpreview||(interaction_view.isPack=!0);var t=interaction_view.doc.parse(cbt_data);interaction_view.doc.set(t),_g.getUrlParameterByName("autoplay")=="false"?interaction_view.wait():interaction_view.start()}else interaction_view.doc.fetch({success:function(e,t){_g.getUrlParameterByName("autoplay")=="false"?interaction_view.wait():interaction_view.start()}})}}};return e}),function(e){typeof define=="function"&&define.amd?define("coverFlow",["jquery"],e):e(jQuery)}(function(e){if(!e.ui||!e.Widget){e.ui=e.ui||{};var t=0,n=Array.prototype.slice;e.widget=function(t,n,r){var i,s,o,u,a={},f=t.split(".")[0];return t=t.split(".")[1],i=f+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[f]=e[f]||{},s=e[f][t],o=e[f][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,r){if(!e.isFunction(r)){a[t]=r;return}a[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=i,s=r.apply(this,arguments),this._super=t,this._superApply=n,s}}()}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix||t:t},a,{constructor:o,namespace:f,widgetName:t,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){var r=n.call(arguments,1),i=0,s=r.length,o,u;for(;i<s;i++)for(o in r[i])u=r[i][o],r[i].hasOwnProperty(o)&&u!==undefined&&(e.isPlainObject(u)?t[o]=e.isPlainObject(t[o])?e.widget.extend({},t[o],u):e.widget.extend({},u):t[o]=u);return t},e.widget.bridge=function(t,r){var i=r.prototype.widgetFullName||t;e.fn[t]=function(s){var o=typeof s=="string",u=n.call(arguments,1),a=this;return s=!o&&u.length?e.widget.extend.apply(null,[s].concat(u)):s,o?this.each(function(){var n,r=e.data(this,i);if(s==="instance")return a=r,!1;if(!r)return e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+s+"'");if(!e.isFunction(r[s])||s.charAt(0)==="_")return e.error("no such method '"+s+"' for "+t+" widget instance");n=r[s].apply(r,u);if(n!==r&&n!==undefined)return a=n&&n.jquery?a.pushStack(n.get()):n,!1}):this.each(function(){var t=e.data(this,i);t?(t.option(s||{}),t._init&&t._init()):e.data(this,i,new r(s,this))}),a}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(n,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),n),this.bindings=e(),r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},_on:function(t,n,r){var i,s=this;typeof t!="boolean"&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){if(!t&&(s.options.disabled===!0||e(this).hasClass("ui-state-disabled")))return;return(typeof o=="string"?s[o]:o).apply(s,arguments)}typeof o!="string"&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^([\w:-]*)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?n(e*2)/2:1-n(e*-2+2)/2}})}()}(function(e,t,n,r){function i(e,t,n,r){var i=this;i.widget=e,i.element=t,i.items=n,i.options=r}function s(e){return parseFloat((.017453*e).toFixed(6))}function o(){e.coverflow.renderer.Classic.apply(this,arguments)}function u(e,t){return typeof e===t}function a(e,t){return!!~(""+e).indexOf(t)}function f(e,t){var n,i;for(n in e)if(i=e[n],!a(i,"-")&&C[i]!==r)return"pfx"===t?i:!0;return!1}function l(t,n,i){var s,o;for(s in t)if(o=n[t[s]],o!==r)return i===!1?t[s]:u(o,"function")?e.proxy(o,i||n):o;return!1}function c(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+L.join(r+" ")+r).split(" ");return u(t,"string")||u(t,"undefined")?f(i,t):(i=(e+" "+A.join(r+" ")+r).split(" "),l(i,t,n))}function h(e,t){var n;return function(){var r=this,i=arguments;n&&clearTimeout(n),n=setTimeout(function(){e.apply(r,i),n=null},t)}}e.coverflow={renderer:{},support:{}},i.prototype={cssClass:"classic",itemMargin:0,initialize:function(){var t=this,n=t.options,r={},i=t.items.eq(t.widget.currentIndex);t.itemSize=i.width(),t.outerWidth=t.element.parent().outerWidth(!1),t.itemMargin=-Math.floor(n.overlap/2*i.innerWidth()),t.items.css({marginLeft:t.itemMargin,marginRight:t.itemMargin}),r.width=t.items.width()*t.items.length,e.extend(r,t._getCenterPosition()),t.element.css(r)},_getCenterPosition:function(){var e,t=this,n=t.itemSize,r=t.widget.currentIndex;return e=(t.outerWidth-n)/2,e-=r*t.itemSize/2,e+=parseInt(t.element.css("paddingLeft"),10)||0,e-=r*t.itemMargin*2,e-=t.itemMargin,e=Math.round(e),{left:e}},select:function(){return this._getCenterPosition()},getElementTransitionStyles:function(t){var n=e.coverflow.transition[t.easing]||e.coverflow.transition.easeOutQuint;return e.extend(this._getCenterPosition(),{transition:"left "+t.duration+"ms "+n})},refresh:function(t,n,r){var i=this,s=i.options,o=i.items.length,u=i.itemSize,a=i.itemMargin;this.items.each(function(f){var l=f===r&&0>n-r||f-r>0?"left":"right",c=f===r?1-t:f===n?t:1,h={zIndex:o+("left"===l?r-f:f-r)+10},p=1-c*(1-s.scale),d=[p,c*("right"===l?-0.15:.15),0,p,0,0];h.left=-f*(u/2)+("right"===l?-u/2+u/2*s.overlap:u/2-u/2*s.overlap)*c,e.coverflow.isOldie&&(f===r?(h.left+=a,h.top=0):h.top=Math.ceil(-a/2)),i._transform(this,h,d),e(this).css(h)})},_transform:function(){var t=this;return e.coverflow.support.transform?void t._matrixTransform.apply(t,arguments):void (e.coverflow.isOldie&&t._fallbackTransform.apply(t,arguments))},_matrixTransform:function(e,t,n){t.transform="matrix("+n.join(",")+")"},_fallbackTransform:function(e,t,n){e.filters["DXImageTransform.Microsoft.Matrix"]||(e.style.filter=(e.style.filter?"":" ")+'progid:DXImageTransform.Microsoft.Matrix(sizingMethod="auto expand")');var r=e.filters["DXImageTransform.Microsoft.Matrix"];r.M11=n[0],r.M12=n[2],r.M21=n[1],r.M22=n[3]}},e.extend(e.coverflow.renderer,{Classic:i}),o.prototype={cssClass:"3d",initialize:function(){var t=this,n={};t.itemSize=t.items.eq(t.widget.currentIndex).outerWidth(!0),t.outerWidth=t.element.parent().outerWidth(!1),n.width=t.itemSize*t.items.length,e.extend(n,t._getCenterPosition(),t._getPerspectiveOrigin()),t.element.css(n)},getItemRenderedWidth:function(){var e=this.options;return Math.cos(s(e.angle))*this.itemSize*e.scale},_getPerspectiveOrigin:function(){var e=this,t=e.options;return{perspectiveOrigin:Math.round(e.itemSize/2+e.widget.currentIndex*e.getItemRenderedWidth()*(1-t.overlap))+"px "+t.perspectiveY+"%"}},_getCenterPosition:function(){var e,t=this,n=t.getItemRenderedWidth(),r=t.widget.currentIndex;return e=(t.outerWidth-t.itemSize)/2,e-=r*n,e+=r*n*t.options.overlap,e-=parseInt(t.element.css("paddingLeft"),10)||0,e=Math.round(e),{left:e}},select:function(){return e.extend({},this._getCenterPosition(),this._getPerspectiveOrigin())},getElementTransitionStyles:function(t){var n=this,r=e.coverflow.transition[t.easing]||e.coverflow.transition.easeOutQuint,i={transitionProperty:"left",transitionDuration:t.duration+"ms",transitionTimingFunction:r,transitionDelay:"initial"};return e.extend(i,n._getCenterPosition(),n._getPerspectiveOrigin())},refresh:function(t,n,r){var i=this,o=i.options,u=i.items.length,a=i.itemSize,f=i.getItemRenderedWidth();this.items.each(function(i){var l,c=i===r&&0>n-r||i-r>0?"left":"right",h=i===r?1-t:i===n?t:1,p={zIndex:u+("left"===c?r-i:i-r)+10},d=1-h*(1-o.scale),v="right"===c?o.angle:-o.angle;v=s(h*v),p.left=Math.round(-i*a+h*i*f*(1-o.overlap)+(1-h)*i*f*(1-o.overlap)),l=[(d*Math.cos(v)).toFixed(6),0,Math.sin(-v).toFixed(6),0,0,d,0,0,Math.sin(v).toFixed(6),0,(d*Math.cos(v)).toFixed(6),0,0,0,0,1],p.transform="matrix3d("+l.join(", ")+")",p.transformOrigin="right"===c?"left center":"right center",e(this).css(p)})}},e.extend(e.coverflow.renderer,{ThreeD:o});for(var p=n.createElement("div"),d=p.style,v=0,m=["ms","moz","webkit","o"],g=m.length,y="",b=0,w=e.coverflow.support,E=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};g>b&&!t.requestAnimationFrame;b++)t.requestAnimationFrame=t[m[b]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[m[b]+"CancelAnimationFrame"]||t[m[b]+"CancelRequestAnimationFrame"];if(t.requestAnimationFrame||(t.requestAnimationFrame=function(e){var n=(new Date).getTime(),r=Math.max(0,16-(n-v)),i=t.setTimeout(function(){e(n+r)},r);return v=n+r,i}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(e){clearTimeout(e)}),e.each(m,function(e,t){return"ms"!==t&&(t=E(t)),!w.transform&&t+"Transform"in d&&(w.transform=t+"Transform"),!w.transition&&t+"Transition"in d&&(w.transition=t+"Transition"),w.transform&&w.transition?(y=t,!1):!0}),w.transform&&w.transition||(w.transform="transform"in d?"transform":!1,w.transition="transition"in d?"transition":!1),null==e.support.transform&&(e.support.transform=w.transform),null==e.support.transition&&(e.support.transition=w.transition),null==e.cssProps)throw new Error("Your jQuery version is too old. Please upgrade.");y&&e.each(["transitionProperty","transitionDuration","transitionTimingFunction","transitionDelay","perspectiveOrigin"],function(t,n){null==e.cssProps[n]&&(e.cssProps[n]=y+E(n))}),p=null;var S,x=n.documentElement,T="coverflowjsfeaturedetection",N=n.createElement(T),C=N.style,k="Webkit Moz O ms",L=k.split(" "),A=k.toLowerCase().split(" "),O=function(e,t,r,i){var s,o,u,a,f=n.createElement("div"),l=n.body,c=l||n.createElement("body");if(parseInt(r,10))for(;r--;)u=n.createElement("div"),u.id=i?i[r]:T+(r+1),f.appendChild(u);return s=["&#173;","<style id='s",T,"'>",e,"</style>"].join(""),f.id=T,(l?f:c).innerHTML+=s,c.appendChild(f),l||(c.style.background="",c.style.overflow="hidden",a=x.style.overflow,x.style.overflow="hidden",x.appendChild(c)),o=t(f,e),l?f.parentNode.removeChild(f):(c.parentNode.removeChild(c),x.style.overflow=a),!!o},M={}.hasOwnProperty;S=u(M,"undefined")||u(M.call,"undefined")?function(e,t){return t in e&&u(e.constructor.prototype[t],"undefined")}:function(e,t){return M.call(e,t)},e.coverflow.support.transform3d=function(){var e=!!c("perspective");return e&&"webkitPerspective"in x.style&&O("@media (transform-3d),(-webkit-transform-3d){#coverflowjsfeaturedetection{left:9px;position:absolute;height:3px;}}",function(t){e=9===t.offsetLeft&&3===t.offsetHeight}),e}(),null==e.support.transform3d&&(e.support.transform3d=e.coverflow.support.transform3d);var _={transition:"transitionend",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"transitionend"},D=navigator.userAgent.toLowerCase(),P=function(){var e=/(msie) ([\w.]+)/.exec(D);return null!==e&&e[1]&&~~e[2]<10}();e.coverflow=e.extend(!0,{},e.coverflow,{isAndroid:/android/.test(D),isOldie:P,transition:{easeInQuad:"cubic-bezier( .55,.085,.68,.53 )",easeInCubic:"cubic-bezier( .550, .055, .675, .190 )",easeInQuart:"cubic-bezier( .895, .03, .685, .22 )",easeInQuint:"cubic-bezier( .755, .05, .855, .06 )",easeInSine:"cubic-bezier( .47, 0, .745, .715 )",easeInExpo:"cubic-bezier( .95, .05, .795, .035 )",easeInCirc:"cubic-bezier( .6, .04, .98, .335 )",easeInBack:"cubic-bezier( .6, -.28, .735, .045 )",easeOutQuad:"cubic-bezier( .25,.46,.45,.94 )",easeOutCubic:"cubic-bezier( .215,.61,.355,1 )",easeOutQuart:"cubic-bezier( .165, .84, .44, 1 )",easeOutQuint:"cubic-bezier( .23, 1, .32, 1 )",easeOutSine:"cubic-bezier( .39, .575, .565, 1 )",easeOutExpo:"cubic-bezier( .19,1,.22,1 )",easeOutCirc:"cubic-bezier( .075, .82, .165, 1 )",easeOutBack:"cubic-bezier( .175, .885, .32, 1.275 )",easeInOutQuad:"cubic-bezier( .455, .03, .515, .955 )",easeInOutCubic:"cubic-bezier( .645, .045, .355, 1 )",easeInOutQuart:"cubic-bezier( .77, 0, .175, 1 )",easeInOutQuint:"cubic-bezier( .86, 0, .07, 1 )",easeInOutSine:"cubic-bezier( .445, .05, .55, .95 )",easeInOutExpo:"cubic-bezier( 1, 0, 0, 1 )",easeInOutCirc:"cubic-bezier( .785, .135, .15, .86 )",easeInOutBack:"cubic-bezier( .68, -.55, .265, 1.55 )"},renderer:{}}),e.widget("ui.coverflow",{options:{items:"> *",active:0,duration:400,easing:"easeOutQuint",angle:45,perspectiveY:45,scale:.7,overlap:.3,trigger:{itemfocus:!1,itemclick:!0,mousewheel:!0}},isTicking:!1,_create:function(){var n,r,i=this,s=this.options,o=e.coverflow.support||{};i.elementOrigStyle=i.element.attr("style"),i.items=i.element.find(s.items).each(function(){var t=e(this);t.data({coverflowOrigElemAttr:{style:t.attr("style"),"class":t.attr("class"),tabIndex:t.attr("tabIndex")}})}).addClass("ui-coverflow-item"),i._setDimensions(),i.support=o,n=o.transform&&!P&&null==t.opera&&o.transform3d?e.coverflow.renderer.ThreeD:e.coverflow.renderer.Classic,r={angle:s.angle,perspectiveY:s.perspectiveY,scale:s.scale,overlap:s.overlap,itemSize:i.itemSize,outerWidth:i.outerWidth},i.renderer=new n(i,i.element,i.items,r),i.element.addClass("ui-coverflow ui-coverflow-"+i.renderer.cssClass+"-render").parent().addClass("ui-coverflow-wrapper ui-clearfix"),s.trigger.itemfocus&&this._bindFocus(),s.trigger.itemclick&&i.element.data("CoverFlowDisableClick",!1)&&i._on(i.items,{click:function(e){i.element.data("CoverFlowDisableClick")||i._select(e)}}),s.trigger.mousewheel&&i._on({mousewheel:i._onMouseWheel,DOMMouseScroll:i._onMouseWheel}),i.useJqueryAnimate=!o.transition||!e.isFunction(t.requestAnimationFrame),i.coverflowrafid=0},_bindFocus:function(){var e=this;e.items.prop("tabIndex",0),e._on(e.items,{focus:e._select})},_init:function(){var e=this,t=e.options;t.duration=~~t.duration,t.duration<1&&(t.duration=1),e.currentIndex=e._isValidIndex(t.active,!0)?t.active:0,e.activeItem=e.items.removeClass("ui-state-active").eq(e.currentIndex).addClass("ui-state-active"),e._setDimensions(),e.renderer.initialize(),e._refresh(1,e._getFrom(),e.currentIndex),e._trigger("beforeselect",null,e._ui()),e._trigger("select",null,e._ui())},_setDimensions:function(){var e=this;e.itemWidth=e.items.width(),e.itemHeight=e.items.height(),e.itemSize=e.items.outerWidth(!0),e.outerWidth=e.element.parent().outerWidth(!1)},_isValidIndex:function(e,t){return t=!!t,e=~~e,(this.currentIndex!==e||t)&&e>-1&&!!this.items.get(e)},_select:function(e){this.select(e.currentTarget)},next:function(){return this.select(this.currentIndex+1)},prev:function(){return this.select(this.currentIndex-1)},_getFrom:function(){var e=this;return Math.abs(e.previous-e.currentIndex)<=1?e.previousIndex:e.currentIndex+(e.previousIndex<e.currentIndex?-1:1)},select:function(n){var r,i=this,s=i.options,o=isNaN(parseInt(n,10))?i.items.index(n):parseInt(n,10);return i._isValidIndex(o)?!1===i._trigger("beforeselect",null,this._ui(i.items.eq(o),o))?!1:(i.isTicking&&(i.useJqueryAnimate?i.element.stop(!0,!1):(i.coverflowrafid&&t.cancelAnimationFrame(i.coverflowrafid),i.element.unbind(_[i.support.transition]))),i.isTicking=!0,i.previousIndex=i.currentIndex,s.active=i.currentIndex=o,r=e.extend({},i.renderer.select(),{coverflow:1}),i.useJqueryAnimate?i._animation(s,r):(s=e.extend({duration:s.duration,easing:s.easing},r),i._transition(s)),!0):!1},_animation:function(t,n){var r=this,i=this._getFrom();e.fx.step.coverflow=function(e){r._refresh(e.now,i,r.currentIndex)},r.element.animate(n,{duration:t.duration,easing:t.easing}).promise().done(function(){r._onAnimationEnd()})},_transition:function(n){var r=this,i=new Date,s=r._getFrom(),o=r.currentIndex,u={},a=function(){var e=((new Date).getTime()-i.getTime())/n.duration;e>1?r.isTicking=!1:r._refresh(e,s,o),r.isTicking&&(r.coverflowrafid=t.requestAnimationFrame(a))};e.isFunction(r.renderer.getElementTransitionStyles)&&(u=e.extend(u,r.renderer.getElementTransitionStyles(n))),r.element.one(_[r.support.transition],function(){r._refresh(1,s,o),r._onAnimationEnd()}).css(u),r.coverflowrafid=t.requestAnimationFrame(a)},_onAnimationEnd:function(){var e=this;e.coverflowrafid&&cancelAnimationFrame(e.coverflowrafid),e.isTicking=!1,e.activeItem=e.items.removeClass("ui-state-active").eq(e.currentIndex).addClass("ui-state-active"),e._trigger("select",null,e._ui())},_refresh:function(e,t,n){this.element.parent().scrollTop(0),this.renderer.refresh(e,t,n)},_ui:function(e,t){return{active:e||this.activeItem,index:null!=t?t:this.currentIndex}},_onMouseWheel:function(e){var t=e.originalEvent;return e.preventDefault(),t.wheelDelta>0||t.detail<0?void this.prev():void this.next()},_destroy:function(){var t=this;t.elementOrigStyle!==r?t.element.attr("style",this.elementOrigStyle):t.element.removeAttr("style"),t.element.removeClass("ui-coverflow ui-helper-clearfix ui-coverflow-"+(t.renderer.cssClass||"classic")+"-render").parent().removeClass("ui-coverflow-wrapper ui-clearfix"),t.items.removeClass("ui-coverflow-item ui-state-active").each(function(){var t=e(this),n=t.data("coverflowOrigElemAttr");e.each(n,function(e,n){n!==r?t.attr(e,n):t.removeAttr(e)}),t.data("coverflowOrigElemAttr",null)}),t._super()}})})(e,this,this.document)}),define("interaction_view/touchmain",["interaction_view/model/main","interaction_view/ui/main","interaction_view/ui/presentation","interaction_view/ui/control","interaction_view/ui/event","interaction_view/ui/media","interaction_view/ui/eraser","interaction_view/ui/adapt","interaction_view/ui/analytics","_g/touchslide","_g/device","share/main","jquery.actual","interaction_view/ui/screenset","interaction_view/ui/touchinit","coverFlow"],function(){var e=require("interaction_view/ui/main");interaction_view=$.extend({},interaction_view,e),interaction_view.control=require("interaction_view/ui/control"),interaction_view.events=require("interaction_view/ui/event"),interaction_view.media=require("interaction_view/ui/media"),interaction_view.screenset=require("interaction_view/ui/screenset"),interaction_view.eraser=require("interaction_view/ui/eraser"),interaction_view.adapt=require("interaction_view/ui/adapt"),interaction_view.analytics=require("interaction_view/ui/analytics");if(_g.device.mobile()||_g.device.tablet())interaction_view.ismobile=!0;interaction_view.touchview=!0,interaction_view.touchinit=require("interaction_view/ui/touchinit"),interaction_view.touchinit.init()}),$.presentate=function(e){return this.render(),this},$.presentate.prototype={render:function(){interaction_view.screenset.controlbarel&&(this.share_overlay=interaction_view.screenset.controlbarel.find(".action-share"),this.control=interaction_view.screenset.controlbarel,this.actualsize=this.control.find(".actualsize"),this.adaptive=this.control.find(".adaptive"),this.fullscreen=this.control.find(".fullscreen"),this.over=this.control.find(".overview")),_g.getUrlParameterByName("mode")=="player"&&(this.fullscreen.hide(),parent.postMessage&&parent.postMessage("epub360fullscreen","*"),console.log("not allowed screenfull")),this.click_event_name="click",interaction_view.screenset.controlbarel&&this.delegate_event()},size_share_overlay:function(){var e=this.share_overlay.children();$("html").width()>=600&&$("html").height()>=460?(e.width(560),e.height(220),e.find("#small_share").hide(),e.find("#normal_share").show()):(e.width($("html").width()/2),e.height($("html").height()/2),e.find("#small_share").show(),e.find("#normal_share").hide()),e.css("margin-top",-e.height()/2),e.css("margin-left",-e.width()/2)},delegate_event:function(){var e=this;this.share_overlay&&(this.share_overlay.on(e.click_event_name,function(t){t.target==$(this)[0]&&e.share_overlay.hide()}),this.share_overlay.find(".btn-close").on(e.click_event_name,function(){e.share_overlay.hide()}),this.share_overlay.find("input").mouseenter(function(){$(this).select()})),this.fullscreen.on(e.click_event_name,function(){if(!screenfull.enabled){window.open(window.location.href.replace("autoplay=false",""));return}screenfull.enabled&&!isFullscreen?screenfull.request(document.documentElement):screenfull.exit()}),_g.device.msie()?(window._IE_resize=function(){$(".reveal").css({margin:"0px",top:($("body").height()-$(".reveal").height()*$(".reveal")[0].style.zoom)/2,left:($("body").width()-$(".reveal").width()*$(".reveal")[0].style.zoom)/2})},_IE_resize(),$(window).resize(_IE_resize)):window._IE_resize=function(){},this.actualsize&&this.actualsize.on(e.click_event_name,function(){if($(this).hasClass("active"))return;e.over.hasClass("active")&&Reveal.toggleOverview(!1),e.state="actualsize",$(this).siblings().removeClass("active"),$(this).addClass("active"),screenSizeLock(),interaction_view.touchview||($(window).unbind("resize",_IE_resize),$(".reveal").css({top:0,left:0})),_IE_resize()}),this.adaptive&&this.adaptive.on(e.click_event_name,function(){if($(this).hasClass("active"))return;e.over.hasClass("active")&&Reveal.toggleOverview(!1),e.state="adaptive",$(this).siblings().removeClass("active"),$(this).addClass("active"),screenSizeRelease(),interaction_view.touchview||(_IE_resize(),$(window).resize(_IE_resize)),_IE_resize()}),this.share_overlay&&this.share_overlay.on(e.click_event_name,function(){share(interaction_view.doc.toJSON().title,context_url+"player")}),this.over&&this.over.on(e.click_event_name,function(t){interaction_view.touchview?Reveal.toggleOverview(!0):$(this).hasClass("active")?e.control.find("."+e.state).trigger(e.click_event_name):(e.adaptive.parent().children().removeClass("active"),Reveal.toggleOverview(!0))})}},define("interaction_play/presentate",["bootstrap"],function(){}),require(["interaction_view/touchmain","bootstrap","_g/base","interaction_play/presentate"],function(){_g.browserSupport({msie:8,chrome:1,safari:1,mozilla:1})?(interaction_view.init(),$(".return a").live("click",function(){var e=location.search,t={};if(e.indexOf("?")!=-1){var n=e.substr(1);strs=n.split("&");for(var r=0;r<strs.length;r++)t[strs[r].split("=")[0]]=unescape(strs[r].split("=")[1])}return t["from"]=="page"&&$(window.parent.document.getElementById("PreviewWindow")).remove(),!1})):_g.ajax.get({url:"index.json",callback:function(e){console.log(e);if(e.code==200&&e.data){var t=String(e.data.slave_url);t&&t.length?window.location.href=t:window.location.href="/staticfs/admin-epub360/browser-old.html"}else window.location.href="/staticfs/admin-epub360/browser-old.html"}})}),define("diazo/js/app/main/interaction/touchview0902",function(){});